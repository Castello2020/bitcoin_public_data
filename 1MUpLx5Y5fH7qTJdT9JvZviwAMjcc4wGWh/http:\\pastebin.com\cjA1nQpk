http://pastebin.com/cjA1nQpk
HTTP/1.1 200 OK
Server: cloudflare-nginx
Date: Tue, 22 Jul 2014 11:24:03 GMT
Content-Type: text/html; charset=utf-8
Connection: close
Set-Cookie: __cfduid=d284ce85c1348e01818daae66f45dcece1406028243364; expires=Mon, 23-Dec-2019 23:50:00 GMT; path=/; domain=.pastebin.com; HttpOnly
X-Powered-By: PHP/5.5.5
Set-Cookie: cookie_key=1; expires=Tue, 19-Aug-2014 11:24:03 GMT; Max-Age=2419200; path=/; domain=.pastebin.com
Set-Cookie: realuser=1; expires=Wed, 23-Jul-2014 11:24:03 GMT; Max-Age=86400; path=/
Vary: Accept-Encoding
CF-RAY: 14df4509051a02b6-IAD
Content-Encoding: gzip

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>[Bash] ###########################################################################  # T - Pastebin.com</title>
		<link rel="shortcut icon" href="/favicon.ico" />
<link href="/cache/css/bash.css" rel="stylesheet" type="text/css" />		<link href="/i/main_test.css" rel="stylesheet" type="text/css" />
				
		<script type="text/javascript" src="/js/jquery.js"></script>
		<script type="text/javascript" src="/js/main_v1.js"></script>
		<meta property="fb:app_id" content="231493360234820" />
		<meta property="og:title" content="[Bash] ###########################################################################  # T - Pastebin.com" />
		<meta property="og:type" content="article" />
	    <meta property="og:url" content="http://pastebin.com/cjA1nQpk" />
	    <meta property="og:image" content="http://pastebin.com/i/fb2.jpg" />
	    <meta property="og:site_name" content="Pastebin" />
		<meta name="google-site-verification" content="jkUAIOE8owUXu8UXIhRLB9oHJsWBfOgJbZzncqHoF4A" />
		<link rel="canonical" href="http://pastebin.com/cjA1nQpk" />
				<!--[if SafMob]>
			<style>body{-webkit-text-size-adjust:none;}</style>
		<![endif]-->
		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-58643-34']);
		  _gaq.push(['_trackPageview']);
			setTimeout("_gaq.push(['_trackEvent', '15_seconds', 'read'])", 15000);
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
	</head>
	<body>
	<div id="super_frame">
		<div id="logo" onclick="location.href='/'" title="Create New Paste"></div>
		<div id="header">
			<div id="header_top">
				<span class="span_left more">PASTEBIN</span><span class="span_left less"> &nbsp;|&nbsp; #1 paste tool since 2002</span><span class="min_max_span narrow_it" title="Change layout width"></span><span class="min_max_span wide_it" style="display:none" title="Change layout width"></span>				<ul class="top_menu">
					<li class="no_border_li"><a href="/" accesskey="n">create new paste</a></li><li><a href="/tools">tools</a></li><li><a href="/api">api</a></li><li><a href="/archive">archive</a></li><li><a href="/faq">faq</a></li>
				</ul>
			</div>
			<div id="header_middle">
				<span class="span_left big"><a href="/">PASTEBIN</a></span> 
				<a href="http://twitter.com/pastebin" target="_blank"><img src="/i/t.gif" alt="" class="i_tf" width="122" height="20" border="0" /></a>	<iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2Fpastebin&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=segoe+ui&amp;height=21&amp;appId=231493360234820" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;margin:13px 0 0 10px;vertical-align:top" allowTransparency="true"></iframe>
				<div id="header_middle_search">
					<form class="search_form" name="search_form" method="get" action="/search" id="cse-search-box">
					    <input type="hidden" name="cx" value="013305635491195529773:0ufpuq-fpt0" />
					    <input type="hidden" name="cof" value="FORID:10" />
					    <input type="hidden" name="ie" value="UTF-8" />
						<input class="search_input" type="text" name="q" size="5" value="" placeholder="search..." x-webkit-speech/><input name="sa" class="search_button" src="/i/t.gif" alt="Search..." type="image" value="Search" />
					</form>
				</div>					
			</div>
			<div id="header_bottom">
				<div class="div_top_menu">
					<img src="/i/t.gif" class="i_n" width="16" height="16" alt="" border="0" /> <a href="/">create new paste</a> 
					&nbsp;&nbsp;&nbsp; <img src="/i/t.gif" class="i_t" width="16" height="16" alt="" border="0" /> <a href="/trends">trending pastes</a>
				</div>
				<ul class="top_menu">
					<li class="no_border_li"><a href="/signup">sign up</a></li><li><a href="/login">login</a></li><li><a href="/alerts">my alerts</a></li><li><a href="/settings">my settings</a></li><li><a href="/profile">my profile</a></li>				</ul>		
			</div>			
		</div>

			<div class="frame_spacer"><!-- --></div>
			<div style="height:35px;line-height:35px;font-size:0.85em;"><img src="/i/tip.png" width="16" height="16" style="vertical-align:middle;margin:-6px 0 0 2px" alt="" /> Pastebin launched a little side project called <a href="http://veryviral.com/" target="_blank">VERYVIRAL.com</a>, check it out ;-) <span style="float:right;text-align:right;">Want more features on Pastebin? <a href="/signup"><b>Sign Up</b></a>, it's FREE!</span></div>
		<div class="frame_spacer"><!-- --></div>
		<div id="monster_frame">
			<div id="content_frame">
				<div id="content_right">
															<div class="content_right_menu">
									<div class="content_right_title"><a href="/archive">Public Pastes</a></div>	
									<div id="menu_2">
										<ul class="right_menu"><li><a href="/Tk5jU9W6">Untitled</a><span>1 sec ago</span></li><li><a href="/jJunHwrJ">Untitled</a><span>1 sec ago</span></li><li><a href="/1BmW9CaT">Untitled</a><span>2 sec ago</span></li><li><a href="/6b79KaDW">Centralne kuce SF</a><span>17 sec ago</span></li><li><a href="/NRBE28fw">Untitled</a><span>26 sec ago</span></li><li><a href="/GDiQawbv">Untitled</a><span>C++ | 27 sec ago</span></li><li><a href="/kPdp49bL">Untitled</a><span>29 sec ago</span></li><li><a href="/9P46V2Mg">Untitled</a><span>45 sec ago</span></li></ul></div></div>					
				<div style="padding: 0; width:160px;margin: 10px 0;clear:left;">
					<script type="text/javascript"><!--
						e9 = new Object();
					    e9.size = "160x600,120x600";
					//--></script>
					<script type="text/javascript" src="http://tags.expo9.exponential.com/tags/Pastebincom/Unsure/tags.js"></script>
				</div>					<div id="steadfast" title="Pastebin is proudly hosted by Steadfast.net" onclick="location.href='http://steadfast.net/?utm_source=pastebin.com&utm_medium=referral&utm_content=hosting_by_banner&utm_campaign=referral_20140118_x_x_pastebin_partner&source=referral_20140118_x_x_pastebin_partner'"></div>
				</div>
				<div id="content_left">

	<div class="paste_box_frame">
		<div class="tweet">


			<div onclick="facebookpopup('/cjA1nQpk'); return false;" id="b_facebook2"><span id="b_facebook"></span></div>
			<div onclick="twitpopup('/cjA1nQpk'); return false;" id="b_twitter2"><span id="b_twitter"></span></div>

		</div>
		<div class="paste_box_icon">
			<img src="/i/t.gif" class="i_gb" alt="Guest" border="0" />	
		</div>
		<div class="paste_box_info">
			<div class="paste_box_line1" title="Untitled"><img src="/i/t.gif"  class="i_p0" width="16" height="16" title="Public paste, everybody can see this paste." alt=""  border="0" /><h1>Untitled</h1> </div>
			<div class="paste_box_line2">By: a guest  on <span title="Friday 7th of December 2012 11:45:39 AM CDT" style="cursor:help;border-bottom: 1px dotted;">Dec 7th, 2012</span> &nbsp;|&nbsp; syntax: <a href="/archive/bash">Bash</a> &nbsp;|&nbsp; size: 6.06 KB &nbsp;|&nbsp; views: <span title="Number of unique visitors to this paste" style="cursor:help;border-bottom: 1px dotted;">1,443</span> &nbsp;|&nbsp; expires: Never</div>
			<div class="paste_box_line3"><a href="/download.php?i=cjA1nQpk" rel="nofollow">download</a> &nbsp;|&nbsp; <a href="/raw.php?i=cjA1nQpk" target="_blank" rel="nofollow">raw</a> &nbsp;|&nbsp; <a href="/embed.php?i=cjA1nQpk" rel="nofollow">embed</a> &nbsp;|&nbsp; <a href="/report.php?i=cjA1nQpk" rel="nofollow">report abuse</a> &nbsp;|&nbsp; <a href="/print.php?i=cjA1nQpk" rel="nofollow">print</a></div>
		</div>
	</div>
	
				<div class="banner_728">
					<script type="text/javascript"><!--
						e9 = new Object();
					    e9.size = "728x90";
					//--></script>
					<script type="text/javascript" src="http://tags.expo9.exponential.com/tags/Pastebincom/Unsure/tags.js"></script>
					<div id="5e2e4b27a0" class="pagefair-acceptable"></div>
				</div>
				<div class="layout_clear"></div><div id="code_frame2">
	<div id="code_frame">
		<div id="code_buttons">
		
		<a href="javascript:togglev();" title="Show/Hide line numbers"><img src="/i/t.gif" border="0" alt="" class="i16 line" /></a> 
		<a href="javascript:togglew('bash');" title="Toggle text wrapping"><img src="/i/t.gif" border="0" alt="" class="i16 wrap" /></a> 
		<a href="#" class="copyme" onclick="selectText('selectable');showdiv('copied');" title="Copy text to clipboard"><img src="/i/t.gif" border="0" alt="" class="i16 clipboard" /></a> <span id="copied">Text below is selected. Please press Ctrl+C to copy to your clipboard. (&#8984;+C on Mac)</span>

		</div>
		<div id="selectable">		
		<div class="bash"><ol><li class="li1"><div class="de1"><span class="co0">###########################################################################</span></div></li>
<li class="li2"><div class="de2"><span class="co0"># This HOWTO tells you how to install the Steam for Linux Limited Beta in a separate user account without giving any root privileges to Steam.</span></div></li>
<li class="li1"><div class="de1"><span class="co0"># This gives you double security:</span></div></li>
<li class="li2"><div class="de2"><span class="co0"># 1. None of the Steam programs is ever executed as root, not even the install script</span></div></li>
<li class="li1"><div class="de1"><span class="co0"># 2. Steam is not even run with privileges of your primary user account. You are told how to generate a second user account which is a sandbox for Steam.</span></div></li>
<li class="li2"><div class="de2"><span class="co0">#</span></div></li>
<li class="li1"><div class="de1"><span class="co0"># The HOWTO was written and tested on Kubuntu 12.10 amd64 on 2012-12-07.</span></div></li>
<li class="li2"><div class="de2"><span class="co0">###########################################################################</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="co0"># do the following as root (execute &quot;sudo -i&quot; in a terminal to get a root shell):</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># add steam user account</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; useradd <span class="re5">--create-home</span> <span class="re5">--shell</span> <span class="sy0">/</span>bin<span class="sy0">/</span><span class="kw2">bash</span> <span class="re5">--user-group</span> steam</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># deny terminal login for steam</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">passwd</span> <span class="re5">-l</span> steam</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># allow access to soundcard for steam</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; usermod <span class="re5">-a</span> <span class="re5">-G</span> audio steam</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># now we allow access to the files of the steam user for our primary user account by adding it to the steam group</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># notice that this is not needed for steam to work but it is nice to have</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; usermod <span class="re5">-a</span> <span class="re5">-G</span> steam <span class="sy0">&lt;</span>USERNAME OF YOUR PRIMARY USER ACCOUNT<span class="sy0">&gt;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># give write access to steam group on steam homedir</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">chmod</span> g+<span class="kw2">w</span> <span class="sy0">/</span>home<span class="sy0">/</span>steam</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># inherit steam group to files which are created in the homedir of steam by your primary user</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">chmod</span> g+s <span class="sy0">/</span>home<span class="sy0">/</span>steam</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># prevent steam user from modifying bash configuration so it cannot fake a &quot;logout&quot;. ideally, never use &quot;logout&quot;, it is insecure. instead, close the X terminal window.</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">chattr</span> +i <span class="sy0">/</span>home<span class="sy0">/</span>steam<span class="sy0">/</span>.bash_logout <span class="sy0">/</span>home<span class="sy0">/</span>steam<span class="sy0">/</span>.bashrc <span class="sy0">/</span>home<span class="sy0">/</span>steam<span class="sy0">/</span>.profile</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># now we allow our primary user account to sudo commands as the steam user</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># open the file with nano editor:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">nano</span> <span class="sy0">/</span>etc<span class="sy0">/</span>sudoers.d<span class="sy0">/</span>steam</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># paste the following and press CTRL+X to exit, Y to save, ENTER to confirm the filename:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">&lt;</span>USERNAME OF YOUR PRIMARY USER ACCOUNT<span class="sy0">&gt;</span> &nbsp; &nbsp; <span class="re2">ALL</span>=<span class="br0">&#40;</span>steam<span class="br0">&#41;</span> &nbsp; &nbsp; &nbsp; NOPASSWD: ALL</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># set correct permissions:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">chmod</span> <span class="nu0">440</span> <span class="sy0">/</span>etc<span class="sy0">/</span>sudoers.d<span class="sy0">/</span>steam</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co0"># now the steam user account is set up and we install steam</span></div></li>
<li class="li2"><div class="de2"><span class="co0"># we must open a terminal which runs as the steam user and preserves the connection to the X-server.</span></div></li>
<li class="li1"><div class="de1"><span class="co0"># for kde-distrubtions such as kubuntu, use kdesudo:</span></div></li>
<li class="li2"><div class="de2">kdesudo <span class="re5">-u</span> steam konsole</div></li>
<li class="li1"><div class="de1"><span class="co0"># for gnome-distributions such as ubuntu, use gksudo / gnome terminal (not tested, i use KDE):</span></div></li>
<li class="li2"><div class="de2">gksudo <span class="re5">-u</span> steam gnome-terminal</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="co0"># now enter the following in the terminal of the steam user:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># download the steam package:</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">wget</span> http:<span class="sy0">//</span>media.steampowered.com<span class="sy0">/</span>client<span class="sy0">/</span>installer<span class="sy0">/</span>steam.deb</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># extract package control information so we can look at the install scripts</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">dpkg</span> <span class="re5">-e</span> steam.deb ~<span class="sy0">/</span>steam-package-control-information</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># extract the actual package contents:</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">dpkg</span> <span class="re5">-x</span> steam.deb ~<span class="sy0">/</span>steam-package</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># now we obtain the list of packages which we need to install for steam to work:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">grep</span> Depends ~<span class="sy0">/</span>steam-package-control-information<span class="sy0">/</span>control</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># =&gt; use your favorite package manager to install those packages.</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># after the packages are installed, continue in the steam user's terminal:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># reading the script /home/steam/steam-package-control-information/postinst shows that the primary action of the install script is to make the update notifier execute the script &quot;/usr/lib/steam/steam-install-notify&quot; per user</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># so i looked what that script does and it tells the user to run &quot;/usr/bin/steam&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># we had extracted this script to &quot;/home/steam/steam-package/usr/bin/steam&quot; </span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># so your job now is to edit this script and replace all absolute paths (= paths starting with &quot;/&quot;) which reference steam stuff to be prefixed with $HOME/steam-package</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># this can be done by: </span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># 1) listing all top level files/directories in the steam package with &quot;ls steam-package&quot;.</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># 2) searching the script for the names of those files/directories</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># 3) looking carefully at each occurence and deciding whether it is steam stuff and needs to be changed or a system directory which does not need to be changed</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># here is a diff of the modifications which i have done to the 2012-12-07 version of the file:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">## $ diff steam.default ~/steam-package/usr/bin/steam</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">## 86c86</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">## &lt; &nbsp; &nbsp; &nbsp; LAUNCHSTEAMBOOTSTRAPFILE=&quot;/usr/lib/$STEAMPACKAGE/bootstraplinux_$LAUNCHSTEAMPLATFORM.tar.xz&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">## ---</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">## &gt; &nbsp; &nbsp; &nbsp; LAUNCHSTEAMBOOTSTRAPFILE=&quot;/home/steam/steam-package/usr/lib/$STEAMPACKAGE/bootstraplinux_$LAUNCHSTEAMPLATFORM.tar.xz&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">## 156c156</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">## &lt; &nbsp; &nbsp; &nbsp; cp /usr/share/applications/$STEAMPACKAGE.desktop &quot;$DESKTOP_DIR&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">## ---</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0">## &gt; &nbsp; &nbsp; &nbsp; cp /home/steam/steam-package/usr/share/applications/$STEAMPACKAGE.desktop &quot;$DESKTOP_DIR&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># so now we have a modified steam install script.</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># it will try to generate files in the Desktop of the user account, and the directory does not exist yet, so we create it.</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw2">mkdir</span> Desktop</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># now execute the install script finally:</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; steam-package<span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span>steam</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># steam is installed now :)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; </div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># now i've looked at Desktop/steam.desktop and checked for the syntax of steam. it was: &quot;/usr/bin/steam %U&quot;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># according to &quot;http://standards.freedesktop.org/desktop-entry-spec/latest/ar01s06.html&quot; the %U is an URL, so we don't need that</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># as a conclusion, the syntax to run steam from the terminal of the steam user is:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co0"># /home/steam/steam-package/usr/bin/steam</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co0"># for being able to run steam directly from your primary user account, we can use gksudo/kdesudo:</span></div></li>
<li class="li2"><div class="de2"><span class="co0"># for kde-distrubtions such as kubuntu, use kdesudo:</span></div></li>
<li class="li1"><div class="de1">kdesudo <span class="re5">-u</span> steam <span class="sy0">/</span>home<span class="sy0">/</span>steam<span class="sy0">/</span>steam-package<span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span>steam</div></li>
<li class="li2"><div class="de2"><span class="co0"># for gnome-distributions such as ubuntu, use gksudo (not tested, i use KDE):</span></div></li>
<li class="li1"><div class="de1">gksudo <span class="re5">-u</span> steam <span class="sy0">/</span>home<span class="sy0">/</span>steam<span class="sy0">/</span>steam-package<span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span>steam</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co0"># of course you can create a desktop shortcut which executes this command. for kde, the following works:</span></div></li>
<li class="li2"><div class="de2"><span class="co0"># 1) browse to /usr/bin with the file manager</span></div></li>
<li class="li1"><div class="de1"><span class="co0"># 2) drag&amp;drop the kdesudo binary to your desktop to generate a shortcut</span></div></li>
<li class="li2"><div class="de2"><span class="co0"># 3) rightclick the shortcut and select &quot;icon settings&quot;</span></div></li>
<li class="li1"><div class="de1"><span class="co0"># 4) in the application tab, set name to &quot;Steam&quot;, the command to &quot;/usr/bin/kdesudo -u steam /home/steam/steam-package/usr/bin/steam&quot;, and the work path to &quot;/home/steam&quot;</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co0"># if you liked this HOWTO, please consider donating some bitcoins to me. my address is: 1MUpLx5Y5fH7qTJdT9JvZviwAMjcc4wGWh</span></div></li>
</ol></div>
		</div>
	</div></div>
	<div class="content_title">
		<span class="span_right raw_links"><a href="/index/cjA1nQpk" rel="nofollow">create a <u>new version</u> of this paste</a></span>
		RAW Paste Data
	</div>
	<form class="paste_form" id="myform" method="post" action="/post.php">
		<div class="textarea_border">
			<textarea id="paste_code" class="paste_code" name="paste_code" onkeydown="return catchTab(this,event)">###########################################################################
# This HOWTO tells you how to install the Steam for Linux Limited Beta in a separate user account without giving any root privileges to Steam.
# This gives you double security:
# 1. None of the Steam programs is ever executed as root, not even the install script
# 2. Steam is not even run with privileges of your primary user account. You are told how to generate a second user account which is a sandbox for Steam.
#
# The HOWTO was written and tested on Kubuntu 12.10 amd64 on 2012-12-07.
###########################################################################

# do the following as root (execute &quot;sudo -i&quot; in a terminal to get a root shell):
	# add steam user account
	useradd --create-home --shell /bin/bash --user-group steam
	# deny terminal login for steam
	passwd -l steam
	# allow access to soundcard for steam
	usermod -a -G audio steam
	
	# now we allow access to the files of the steam user for our primary user account by adding it to the steam group
	# notice that this is not needed for steam to work but it is nice to have
	usermod -a -G steam &lt;USERNAME OF YOUR PRIMARY USER ACCOUNT&gt;
	# give write access to steam group on steam homedir
	chmod g+w /home/steam
	# inherit steam group to files which are created in the homedir of steam by your primary user
	chmod g+s /home/steam
	
	# prevent steam user from modifying bash configuration so it cannot fake a &quot;logout&quot;. ideally, never use &quot;logout&quot;, it is insecure. instead, close the X terminal window.
	chattr +i /home/steam/.bash_logout /home/steam/.bashrc /home/steam/.profile
	
	# now we allow our primary user account to sudo commands as the steam user
	# open the file with nano editor:
	nano /etc/sudoers.d/steam
	# paste the following and press CTRL+X to exit, Y to save, ENTER to confirm the filename:
		&lt;USERNAME OF YOUR PRIMARY USER ACCOUNT&gt;     ALL=(steam)       NOPASSWD: ALL
	# set correct permissions:
	chmod 440 /etc/sudoers.d/steam

# now the steam user account is set up and we install steam
# we must open a terminal which runs as the steam user and preserves the connection to the X-server.
# for kde-distrubtions such as kubuntu, use kdesudo:
kdesudo -u steam konsole
# for gnome-distributions such as ubuntu, use gksudo / gnome terminal (not tested, i use KDE):
gksudo -u steam gnome-terminal

# now enter the following in the terminal of the steam user:
	# download the steam package:
	wget http://media.steampowered.com/client/installer/steam.deb
	
	# extract package control information so we can look at the install scripts
	dpkg -e steam.deb ~/steam-package-control-information
		
	# extract the actual package contents:
	dpkg -x steam.deb ~/steam-package
	
	# now we obtain the list of packages which we need to install for steam to work:
	grep Depends ~/steam-package-control-information/control
	# =&gt; use your favorite package manager to install those packages.

	# after the packages are installed, continue in the steam user's terminal:
			
	# reading the script /home/steam/steam-package-control-information/postinst shows that the primary action of the install script is to make the update notifier execute the script &quot;/usr/lib/steam/steam-install-notify&quot; per user
	# so i looked what that script does and it tells the user to run &quot;/usr/bin/steam&quot;
	# we had extracted this script to &quot;/home/steam/steam-package/usr/bin/steam&quot; 
	# so your job now is to edit this script and replace all absolute paths (= paths starting with &quot;/&quot;) which reference steam stuff to be prefixed with $HOME/steam-package
	# this can be done by: 
	# 1) listing all top level files/directories in the steam package with &quot;ls steam-package&quot;.
	# 2) searching the script for the names of those files/directories
	# 3) looking carefully at each occurence and deciding whether it is steam stuff and needs to be changed or a system directory which does not need to be changed
	# here is a diff of the modifications which i have done to the 2012-12-07 version of the file:
	## $ diff steam.default ~/steam-package/usr/bin/steam
	## 86c86
	## &lt;       LAUNCHSTEAMBOOTSTRAPFILE=&quot;/usr/lib/$STEAMPACKAGE/bootstraplinux_$LAUNCHSTEAMPLATFORM.tar.xz&quot;
	## ---
	## &gt;       LAUNCHSTEAMBOOTSTRAPFILE=&quot;/home/steam/steam-package/usr/lib/$STEAMPACKAGE/bootstraplinux_$LAUNCHSTEAMPLATFORM.tar.xz&quot;
	## 156c156
	## &lt;       cp /usr/share/applications/$STEAMPACKAGE.desktop &quot;$DESKTOP_DIR&quot;
	## ---
	## &gt;       cp /home/steam/steam-package/usr/share/applications/$STEAMPACKAGE.desktop &quot;$DESKTOP_DIR&quot;

	# so now we have a modified steam install script.
	# it will try to generate files in the Desktop of the user account, and the directory does not exist yet, so we create it.
	mkdir Desktop
	
	# now execute the install script finally:
	steam-package/usr/bin/steam
	
	# steam is installed now :)
	
	# now i've looked at Desktop/steam.desktop and checked for the syntax of steam. it was: &quot;/usr/bin/steam %U&quot;
	# according to &quot;http://standards.freedesktop.org/desktop-entry-spec/latest/ar01s06.html&quot; the %U is an URL, so we don't need that
	# as a conclusion, the syntax to run steam from the terminal of the steam user is:
	# /home/steam/steam-package/usr/bin/steam

# for being able to run steam directly from your primary user account, we can use gksudo/kdesudo:
# for kde-distrubtions such as kubuntu, use kdesudo:
kdesudo -u steam /home/steam/steam-package/usr/bin/steam
# for gnome-distributions such as ubuntu, use gksudo (not tested, i use KDE):
gksudo -u steam /home/steam/steam-package/usr/bin/steam

# of course you can create a desktop shortcut which executes this command. for kde, the following works:
# 1) browse to /usr/bin with the file manager
# 2) drag&amp;drop the kdesudo binary to your desktop to generate a shortcut
# 3) rightclick the shortcut and select &quot;icon settings&quot;
# 4) in the application tab, set name to &quot;Steam&quot;, the command to &quot;/usr/bin/kdesudo -u steam /home/steam/steam-package/usr/bin/steam&quot;, and the work path to &quot;/home/steam&quot;

# if you liked this HOWTO, please consider donating some bitcoins to me. my address is: 1MUpLx5Y5fH7qTJdT9JvZviwAMjcc4wGWh</textarea>
		</div>			
	</form>


	<script type="text/javascript" language="javascript">
	$(document).ready(function(){
	$('textarea').autoResize({minHeight: 80,maxHeight: 250});
	geturl = "http://pastebin.com/cjA1nQpk";
		$.getJSON("http://graph.facebook.com/fql?q=SELECT total_count FROM link_stat WHERE url='http://pastebin.com/cjA1nQpk'",
	function(data) {
	$('#b_facebook').append(data.data[0].total_count);
	}); 
	$.getJSON('http://urls.api.twitter.com/1/urls/count.json?url='+geturl+'&callback=?',
	function(data) {
	$('#b_twitter').append(data.count);
	});
	})
    </script>
				<div style="padding: 0;">
					<script type="text/javascript"><!--
						e9 = new Object();
					    e9.size = "300x250,300x600";
					//--></script>
					<script type="text/javascript" src="http://tags.expo9.exponential.com/tags/Pastebincom/Unsure/tags.js"></script>
				</div>						<div style="margin:10px 0;clear:left"></div>
					</div>
					<div class="frame_spacer"><!-- --></div>
					<div id="footer_top" style="clear:both">	
						<div class="footer_top_title">Pastebin.com Tools &amp; Applications</div>
						<div class="footer_top_text">
							<img src="/i/t.gif" alt="" class="icon24 iphone" /><a href="/tools#iphone">iPhone/iPad</a>
							<img src="/i/t.gif" alt="" class="icon24 windows" /><a href="/tools#windows">Windows</a>
							<img src="/i/t.gif" alt="" class="icon24 firefox" /><a href="/tools#firefox">Firefox</a>
							<img src="/i/t.gif" alt="" class="icon24 chrome" /><a href="/tools#chrome">Chrome</a>
							<img src="/i/t.gif" alt="" class="icon24 webos" /><a href="/tools#webos">WebOS</a>
							<img src="/i/t.gif" alt="" class="icon24 android" /><a href="/tools#android">Android</a>
							<img src="/i/t.gif" alt="" class="icon24 macos" /><a href="/tools#macos">Mac</a>
							<img src="/i/t.gif" alt="" class="icon24 opera" /><a href="/tools#opera">Opera</a>
							<img src="/i/t.gif" alt="" class="icon24 clickto" /><a href="/tools#clickto">Click.to</a>
							<img src="/i/t.gif" alt="" class="icon24 unix" /><a href="/tools#pastebincl">UNIX</a>
							<img src="/i/t.gif" alt="" class="icon24 windowsphone" /><a href="/tools#windowsphone">WinPhone</a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="footer">
			<div id="logo_small"></div>
			<div id="footer_links">
				<a href="/">create new paste</a> &nbsp;|&nbsp; <a href="/api">api</a> &nbsp;|&nbsp; <a href="/trends">trends</a> &nbsp;|&nbsp; <a href="/users">users</a> &nbsp;|&nbsp; <a href="/faq">faq</a> &nbsp;|&nbsp; <a href="/tools">tools</a> &nbsp;|&nbsp; <a href="/privacy">privacy</a> &nbsp;|&nbsp; <a href="/cookies_policy">cookies policy</a> &nbsp;|&nbsp; <a href="/contact">contact</a> &nbsp;|&nbsp; <a href="/dmca">dmca</a> &nbsp;|&nbsp; <a href="/stats">stats</a> &nbsp;|&nbsp; <a href="/advertising.php" target="_blank" rel="nofollow">advertise on pastebin</a> &nbsp;|&nbsp; <a href="/pro">go pro</a> 
				<br />Follow us: <a href="http://www.facebook.com/pages/Pastebincom/150549571626327" target="_blank">pastebin on facebook</a> &nbsp;|&nbsp; <a href="http://twitter.com/#!/pastebin" target="blank">pastebin on twitter</a> &nbsp;|&nbsp; <a href="https://www.google.com/search?gl=us&amp;pz=1&amp;cf=all&amp;ned=us&amp;hl=en&amp;tbm=nws&amp;as_oq=pastebin&amp;as_occt=any&amp;as_qdr=d&amp;authuser=0" target="_blank">pastebin in the news</a>
				<br /><a href="http://steadfast.net/services/dedicated-servers.php?utm_source=pastebin.com&utm_medium=referral&utm_content=footer_link_dedicated_server_hosting_by&utm_campaign=referral_20140118_x_x_pastebin_partner&source=referral_20140118_x_x_pastebin_partner" rel="nofollow" target="_blank">Dedicated Server Hosting</a> by <a href="http://steadfast.net/?utm_source=pastebin.com&utm_medium=referral&utm_content=footer_link_steadfast&utm_campaign=referral_20140118_x_x_pastebin_partner&source=referral_20140118_x_x_pastebin_partner" rel="nofollow" target="_blank">Steadfast</a><br />Pastebin v3.11 rendered in: 0.013 seconds				
			</div>
			<div id="footer_right">&nbsp;</div>
		</div>
		<script type="text/javascript">
		$('.narrow_it').click(function(){
		    $('#super_frame').animate({width:'100%'}, 500);
		    $('#footer').animate({width:'100%'}, 500);
			$(".narrow_it").hide();
			$(".wide_it").show();
			$.get('/layout.php', function(data) {
			});
		});
		$('.wide_it').click(function(){
		    $('#super_frame').animate({width:'1200px'}, 500);
		    $('#footer').animate({width:'1200px'}, 500);
			$(".wide_it").hide();
			$(".narrow_it").show();
			$.get('/layout.php', function(data) {
			});
		});
		</script>


					<script type="text/javascript"><!--
					  e9 = new Object();
					  e9.snackbar = true;
					//--></script>
					<script type="text/javascript" src="http://tags.expo9.exponential.com/tags/Pastebincom/Unsure/tags.js"></script>


<script type="text/javascript">
    (function() {
        function async_load(script_url){
            var protocol = ('https:' == document.location.protocol ? 'https://' : 'http://');
            var s = document.createElement('script'); s.src = protocol + script_url;
            var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x);
        }
        bm_website_code = '2D20BDFEA765412B';
        jQuery(document).ready(function(){async_load('asset.pagefair.com/measure.min.js')});
        jQuery(document).ready(function(){async_load('asset.pagefair.net/ads.min.js')});
    })();
</script>
                        
                        
	</body>
</html>
