http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/
HTTP/1.1 200 OK
Server: nginx/1.4.4
Date: Thu, 24 Jul 2014 10:46:36 GMT
Content-Type: text/html; charset=UTF-8
Connection: close
X-Pingback: http://ottopress.com/xmlrpc.php
Link: <http://otto42.com/ag>; rel=shortlink

<!DOCTYPE html>
<html lang="en-US">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Customizing WordPress images &raquo; Otto on WordPress</title>

<link rel="profile" href="http://www.w3.org/1999/xhtml/vocab" />
<link rel="me" type="text/html" href="https://plus.google.com/100201852715113506716" />

<link rel="stylesheet" href="http://ottopress.com/wp-content/themes/fluid-blue/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="http://ottopress.com/wp-content/themes/fluid-blue/print.css" type="text/css" media="print" />

<link rel="pingback" href="http://ottopress.com/xmlrpc.php" />

<meta property="og:email" content="otto@ottodestruct.com" />
<meta http-equiv="X-UA-Compatible" content="chrome=1">

<script type="text/javascript">var description = '';</script>
<!-- Jetpack Site Verification Tags -->
<meta name="google-site-verification" content="IvlRFnRHu9RIiAiOS-bo-8vU4ju4V6_b4U3M_-1jlXQ" />
<link rel="alternate" type="application/rss+xml" title="Otto on WordPress &raquo; Feed" href="http://ottopress.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Otto on WordPress &raquo; Comments Feed" href="http://ottopress.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Otto on WordPress &raquo; Customizing WordPress images Comments Feed" href="http://ottopress.com/2011/customizing-wordpress-images/feed/" />
<link rel='stylesheet' id='yarppWidgetCss-css'  href='http://ottopress.com/wp-content/plugins/yet-another-related-posts-plugin/style/widget.css?ver=3.9.1' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-subscriptions-css'  href='http://ottopress.com/wp-content/plugins/jetpack/modules/subscriptions/subscriptions.css?ver=3.9.1' type='text/css' media='all' />
<link rel='stylesheet' id='tiled-gallery-css'  href='http://ottopress.com/wp-content/plugins/jetpack/modules/tiled-gallery/tiled-gallery/tiled-gallery.css?ver=2012-09-21' type='text/css' media='all' />
<link rel='stylesheet' id='mediaelement-css'  href='http://ottopress.com/wp-includes/js/mediaelement/mediaelementplayer.min.css?ver=2.13.0' type='text/css' media='all' />
<link rel='stylesheet' id='wp-mediaelement-css'  href='http://ottopress.com/wp-includes/js/mediaelement/wp-mediaelement.css?ver=3.9.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ottopress.com/wp-includes/js/jquery/jquery.js?ver=1.11.0'></script>
<script type='text/javascript' src='http://ottopress.com/wp-includes/js/jquery/jquery-migrate.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://ottopress.com/wp-content/plugins/jetpack/modules/tiled-gallery/tiled-gallery/tiled-gallery.js?ver=3.9.1'></script>
<script type='text/javascript' src='http://ottodestruct.com/op/wp-content/plugins/gravatar-box/jquery.md5.js?ver=1.0'></script>
<script type='text/javascript' src='http://ottodestruct.com/op/wp-content/plugins/gravatar-box/gravbox.js?ver=1.0'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://ottopress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://ottopress.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='SFC 1.0 &#8211; FB Comments Integration' href='http://ottopress.com/2011/sfc-1-0-fb-comments-integration/' />
<link rel='next' title='SFC 1.0 &#8211; Login and Registration' href='http://ottopress.com/2011/sfc-1-0-login-and-registration/' />
<meta name="generator" content="WordPress 3.9.1" />
<link rel='canonical' href='http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comments' />
<link rel='shortlink' href='http://otto42.com/ag' />
<meta name="pinterest" content="nopin" /><link rel="microsummary" type="text/plain" href="/2011/customizing-wordpress-images/comment-page-1/?microsummary=1" /><link rel="shortcut icon" href="http://ottopress.com/wp-content/wp-logo-vs.png" /><link rel="author" href="https://plus.google.com/+SamuelOttoWood" title="Samuel “Otto” Wood on Google+" /> 

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Customizing WordPress images" />
<meta property="og:url" content="http://ottopress.com/2011/customizing-wordpress-images/" />
<meta property="og:description" content="Manipulating images in PHP isn&#039;t all that difficult. WordPress offers some functions to make it easier, and integrating with the WordPress uploader isn&#039;t at all difficult, really. For example, let&#039;..." />
<meta property="article:published_time" content="2011-08-19T17:04:08+00:00" />
<meta property="article:modified_time" content="2011-12-21T02:35:06+00:00" />
<meta property="article:author" content="http://ottopress.com/author/otto/" />
<meta property="og:site_name" content="Otto on WordPress" />
<meta property="og:image" content="http://i1.wp.com/ottopress.com/files/2011/08/bears.jpg?resize=200%2C200" />
<meta name="twitter:site" content="@ottodestruct" />
<meta name="twitter:image" content="http://ottopress.com/files/2011/08/bears.jpg?w=240" />
<meta name="twitter:card" content="summary" />
<style type="text/css" id="syntaxhighlighteranchor"></style>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27538437-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body class="single single-post postid-621 single-format-standard">
<script type="text/javascript">
if (top.location != self.location) top.location.replace(self.location);
</script>
<div id="page">
<div id="header">
	<div id="headertitle">
		<h1><a href="http://ottopress.com" title="Otto on WordPress: You have to use an Ottopress to get fresh squeezed Otto.">Otto on WordPress</a></h1>
		<p>You have to use an Ottopress to get fresh squeezed Otto.</p>
	</div> 
	<!-- Search box (If you prefer having search form as a sidebar widget, remove this block) -->
	<div class="search">
		<form method="get" id="searchform" action="http://ottopress.com/">
<input type="search" size="20" results="5" name="s" id="s" placeholder="Search..." speech="speech" x-webkit-speech="x-webkit-speech" onwebkitspeechchange="this.form.submit();" />
</form>
	</div> 
	<!-- Search ends here-->
		
</div>
<div id="navbar">
<div id="nav">
<div class="menu"><ul><li ><a href="http://ottopress.com/">Home</a></li><li class="page_item page-item-5 page_item_has_children"><a href="http://ottopress.com/wordpress-plugins/">WordPress Plugins</a><ul class='children'><li class="page_item page-item-205"><a href="http://ottopress.com/wordpress-plugins/atd-for-comments/">After The Deadline For Comments</a></li><li class="page_item page-item-21"><a href="http://ottopress.com/wordpress-plugins/atom-default-feed/">Atom Default Feed</a></li><li class="page_item page-item-965"><a href="http://ottopress.com/wordpress-plugins/dropbox-photo-sideloader/">Dropbox Photo Sideloader</a></li><li class="page_item page-item-15"><a href="http://ottopress.com/wordpress-plugins/gravatar-box/">Gravatar Box</a></li><li class="page_item page-item-32"><a href="http://ottopress.com/wordpress-plugins/php-code-widget/">PHP Code Widget</a></li><li class="page_item page-item-7"><a href="http://ottopress.com/wordpress-plugins/simple-facebook-connect/">Simple Facebook Connect</a></li><li class="page_item page-item-10"><a href="http://ottopress.com/wordpress-plugins/simple-twitter-connect/">Simple Twitter Connect</a></li><li class="page_item page-item-81"><a href="http://ottopress.com/wordpress-plugins/unicornify/">Unicornify</a></li></ul></li><li class="page_item page-item-374"><a href="http://ottopress.com/contact/">Contact Otto</a></li><li><a href="http://ottodestruct.com" title="Nothing to See Here">Nothing to See Here</a></li><li><a href="http://buyottoabeer.com" title="Otto on Beer">Otto on Beer</a></li></ul></div>
	</div>
</div>
<div id="wrapper">
	<div id="content">

			
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="http://ottopress.com/2011/sfc-1-0-fb-comments-integration/" rel="prev">SFC 1.0 &#8211; FB Comments Integration</a></div>
			<div class="alignright"><a href="http://ottopress.com/2011/sfc-1-0-login-and-registration/" rel="next">SFC 1.0 &#8211; Login and Registration</a> &raquo;</div>
		</div>

		<div class="post" id="post-621">
			<h2 class="posttitle"><a href="http://ottopress.com/2011/customizing-wordpress-images/" rel="bookmark" title="Permanent Link to Customizing WordPress images" itemprop="url"><span itemprop="name">Customizing WordPress images</span></a></h2>
			<div style="clear:none" class="postmetadata">August 19, 2011, 12:04 pm <!-- by <span rel="author">Samuel “Otto” Wood</span> --></div>
			<div class="postentry">
				<div itemprop="articleBody"><blockquote class="twitter-tweet" width="550"><p>@<a href="https://twitter.com/otto42">otto42</a> Did I hear you right that there&#8217;s greyscale filtering in WordPress somewhere? Could you point me in the right direction?</p>
<p>&mdash; Tammy Hart (@tammyhart) <a href="https://twitter.com/tammyhart/status/104276342450831360" data-datetime="2011-08-18T19:39:52+00:00">August 18, 2011</a></p></blockquote>
<p><script src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>Manipulating images in PHP isn&#8217;t all that difficult. WordPress offers some functions to make it easier, and integrating with the WordPress uploader isn&#8217;t at all difficult, really.</p>
<p>For example, let&#8217;s say your theme needed a black and white version of the images, sized at 100&#215;100, and cropped to that size. This might be suitable for Next/Previous images to use for a gallery, perhaps&#8230;</p>
<div id="attachment_624" style="width: 210px" class="wp-caption alignnone"><a href="http://placebear.com"><img class="size-full wp-image-624 " title="bears" src="http://i2.wp.com/ottopress.com/files/2011/08/bears.jpg?resize=200%2C200" alt="" data-recalc-dims="1" /></a><p class="wp-caption-text">When black and white bears attack...</p></div>
<p>First, we need to create the image size itself:</p>
<pre class="brush: php; title: ; notranslate" title="">
add_action('after_setup_theme','themename_bw_size');
function themename_bw_size() {
	add_image_size('themename-bw-image', 100, 100, true);
}
</pre>
<p>This simple function hooks into the after_setup_theme hook, which is loaded after the theme&#8217;s functions.php file is loaded. The function calls add_image_size to add a new image size for the uploader to create for each image that is uploaded into the WordPress media library. The size is specified as 100&#215;100 with hard cropping.</p>
<p>Now that is easy enough, but we need to make the image black and white. To do this, we&#8217;ll hook into the wp_generate_attachment_metadata filter. This filter is called after the images have been resized and saved, but before the metadata about those resized images has been added to the attachment post. We&#8217;re not actually using this filter as a &#8220;filter&#8221;, but we need some of the meta data so this is as good a place to hook as any, as long as we remember to return the metadata again.</p>
<pre class="brush: php; title: ; notranslate" title="">
add_filter('wp_generate_attachment_metadata','themename_bw_filter');
function themename_bw_filter($meta) {
	$file = wp_upload_dir();
	$file = trailingslashit($file['path']).$meta['sizes']['themename-bw-image']['file'];
	list($orig_w, $orig_h, $orig_type) = @getimagesize($file);
	$image = wp_load_image($file);
	imagefilter($image, IMG_FILTER_GRAYSCALE);
	switch ($orig_type) {
		case IMAGETYPE_GIF:
			imagegif( $image, $file );
			break;
		case IMAGETYPE_PNG:
			imagepng( $image, $file );
			break;
		case IMAGETYPE_JPEG:
			imagejpeg( $image, $file );
			break;
	}
	return $meta;
}
</pre>
<p>Let&#8217;s break this down piece by piece:</p>
<pre class="brush: php; title: ; notranslate" title="">
$file = wp_upload_dir();
$file = trailingslashit($file['path']).$meta['sizes']['themename-bw-image']['file'];
</pre>
<p>This bit of code gets our upload directory path, makes sure it&#8217;s trailing slashed, then appends the filename of our themename-bw-image file to it. Thus, after this is run, $file contains the full local path to the image we want to make black and white.</p>
<pre class="brush: php; title: ; notranslate" title="">
list($orig_w, $orig_h, $orig_type) = @getimagesize($file);
</pre>
<p>This line of code simply gets the image size and type into some variables. We really only need the type for later, but this is an easy way to do it.</p>
<pre class="brush: php; title: ; notranslate" title="">
$image = wp_load_image($file);
</pre>
<p>The wp_load_image function is a handy one. It reads in the image and returns a PHP image resource for us to work with.</p>
<pre class="brush: php; title: ; notranslate" title="">
imagefilter($image, IMG_FILTER_GRAYSCALE);
</pre>
<p>This simply applies the grayscale filter to the image resource, making it black and white.</p>
<pre class="brush: php; title: ; notranslate" title="">
switch ($orig_type) {
	case IMAGETYPE_GIF:
		imagegif( $image, $file );
		break;
	case IMAGETYPE_PNG:
		imagepng( $image, $file );
		break;
	case IMAGETYPE_JPEG:
		imagejpeg( $image, $file );
		break;
}
</pre>
<p>Finally, we save the image back to the same file, overwriting the color one with the black and white one.</p>
<pre class="brush: php; title: ; notranslate" title="">
return $meta;
</pre>
<p>Since we used a filter, it&#8217;s important that we don&#8217;t leave out the final return to return the original information we were passed in, so that the metadata gets properly stored in the attachment post. We didn&#8217;t actually modify the metadata here, though we could.</p>
<p>Pretty simple to manipulate images in this way. You could apply one of the <a href="http://php.net/manual/en/function.imagefilter.php">many other types of filters available</a>, or change all the images into <a href="http://placebear.com">pictures of bears</a>, or whatever you like, really.</p>
<div class="sharedaddy sd-block sd-social sd-gplus"><h3 class="sd-title">Google+</h3><div class="sd-content"><a href="https://plus.google.com/+SamuelOttoWood"><img src="https://lh5.googleusercontent.com/-sTIAD3oDYbs/AAAAAAAAAAI/AAAAAAAAGkQ/ZwW3H57HC8I/photo.jpg?sz=40" alt="Samuel “Otto” Wood" width="20" height="20" align="absmiddle" /> </a><a rel="author" href="https://plus.google.com/+SamuelOttoWood" class="gplus-profile">Samuel “Otto” Wood</a><span class="g-follow-wrapper"><span class="g-follow" data-href="https://plus.google.com/+SamuelOttoWood" data-rel="author" data-height="15"></span></span></div></div><div class='yarpp-related'>
<p class="yarpp">Related posts:</p><ol class="yarpp">
<li><a href="http://ottopress.com/2011/customizing-wordpress-images-with-a-plugin-imagefx/" rel="bookmark" title="Customizing WordPress Images with a Plugin: ImageFX">Customizing WordPress Images with a Plugin: ImageFX </a></li>
<li><a href="http://ottopress.com/2011/picasa-and-wordpress-and-captions/" rel="bookmark" title="Picasa and WordPress and Captions">Picasa and WordPress and Captions </a></li>
<li><a href="http://ottopress.com/2010/wordpress-protip-child-themes/" rel="bookmark" title="WordPress PROTIP: Child Themes">WordPress PROTIP: Child Themes </a></li>
<li><a href="http://ottopress.com/2010/wordpress-theme-tip-force-an-image-size/" rel="bookmark" title="WordPress Theme Tip: Force an Image Size">WordPress Theme Tip: Force an Image Size </a></li>
<li><a href="http://ottopress.com/2010/wordpress-3-0-multisite-domain-mapping-tutorial/" rel="bookmark" title="WordPress 3.0: Multisite Domain Mapping Tutorial">WordPress 3.0: Multisite Domain Mapping Tutorial </a></li>
</ol>
</div>
</div>
							</div>
<div><span class="post-shortlink">Shortlink: 
<input type='text' value='http://otto42.com/ag' onclick='this.focus(); this.select();' />
</span></div>

			<div class="postmetadata">
				<div class="postmetadata">
					Tags: <a href="http://ottopress.com/tag/bears/" rel="tag">bears</a>, <a href="http://ottopress.com/tag/imagefilter/" rel="tag">imagefilter</a>, <a href="http://ottopress.com/tag/images/" rel="tag">images</a>, <a href="http://ottopress.com/tag/metadata/" rel="tag">metadata</a>, <a href="http://ottopress.com/tag/php/" rel="tag">PHP</a>, <a href="http://ottopress.com/tag/upload/" rel="tag">upload</a>, <a href="http://ottopress.com/tag/wordpress-2/" rel="tag">WordPress</a><br />					Category: <a href="http://ottopress.com/category/code/" title="View all posts in Code" rel="category tag">Code</a>, <a href="http://ottopress.com/category/wordpress/" title="View all posts in WordPress" rel="category tag">WordPress</a>					&nbsp;|&nbsp;&nbsp;<a href="#respond">Comment</a> (<a href='http://ottopress.com/2011/customizing-wordpress-images/feed/'>RSS</a>)					&nbsp;|&nbsp;&nbsp;<a href="http://ottopress.com/2011/customizing-wordpress-images/trackback/ " rel="trackback">Trackback</a>									 </div>
			</div>
    
		</div>
	<div id="comments">
	<h3>39 Comments </h3>
	<div class="navigation" style="clear:both">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
	<div style="clear:both"></div>
	<ol class="commentlist">
		<li class="comment even thread-even depth-1" id="comment-9465" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9465" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/f961a63e9fd061b0da0a4041fb4af3fc?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://twitter.com/dcfemella' rel='external nofollow' class='url'>Shevonne Polastre</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9465">
		<time itemprop="dateCreated" datetime="2011-08-20T09:19:51+00:00">August 20, 2011 at 9:19 am</time></a>	</div>

	<div itemprop="text"><p>I didn&#8217;t know you could do this! You are awesome! Now I&#8217;m going to pretend I&#8217;m a photographer and start applying filters right on WordPress.  Thanks!</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9465#respond' onclick='return addComment.moveForm("div-comment-9465", "9465", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-9483" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9483" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/7799c981ba76027b799cb5d10884648f?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://twitter.com/WKD5' rel='external nofollow' class='url'>Josh</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9483">
		<time itemprop="dateCreated" datetime="2011-08-22T11:59:41+00:00">August 22, 2011 at 11:59 am</time></a>	</div>

	<div itemprop="text"><p>Nice, saved to snippetsapp for future use. Thanks for sharing Otto <img src="http://ottopress.com/wp-content/plugins/classic-smilies/img/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9483#respond' onclick='return addComment.moveForm("div-comment-9483", "9483", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-otto bypostauthor even thread-even depth-1" id="comment-9495" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9495" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://0.gravatar.com/avatar/0994d5e2e158a24ba8017c2525d78263?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://ottodestruct.com' rel='external nofollow' class='url'>Otto</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9495">
		<time itemprop="dateCreated" datetime="2011-08-23T09:35:01+00:00">August 23, 2011 at 9:35 am</time></a>	</div>

	<div itemprop="text"><p>I&#8217;ve gotten a few responses back that didn&#8217;t seem to get the gist of how to do this sort of thing for something other than making images black and white. The above code only has *one* line that pertains to black and white. You can actually do anything there.</p>
<p>This code, for example, will do the same basic thing and make sepia-toned images. Credit for the sepia filter code goes to <a href="http://hanswestman.se/2011/07/some-image-filters-for-php-gd/" rel="nofollow">http://hanswestman.se/2011/07/some-image-filters-for-php-gd/</a>.</p>
<pre class="brush: php; title: ; notranslate" title="">
function image_filter_sepia(&amp;$image){
	$width = imagesx($image);
	$height = imagesy($image);
	for($_x = 0; $_x &lt; $width; $_x++){
		for($_y = 0; $_y &lt; $height; $_y++){
			$rgb = imagecolorat($image, $_x, $_y);
			$r = ($rgb&gt;&gt;16)&amp;0xFF;
			$g = ($rgb&gt;&gt;8)&amp;0xFF;
			$b = $rgb&amp;0xFF;

			$y = $r*0.299 + $g*0.587 + $b*0.114;
			$i = 0.15*0xFF;
			$q = -0.001*0xFF;

			$r = $y + 0.956*$i + 0.621*$q;
			$g = $y - 0.272*$i - 0.647*$q;
			$b = $y - 1.105*$i + 1.702*$q;

			if($r&lt;0||$r&gt;0xFF){$r=($r&lt;0)?0:0xFF;}
			if($g&lt;0||$g&gt;0xFF){$g=($g&lt;0)?0:0xFF;}
			if($b&lt;0||$b&gt;0xFF){$b=($b&lt;0)?0:0xFF;}

			$color = imagecolorallocate($image, $r, $g, $b);
			imagesetpixel($image, $_x, $_y, $color);
		}
	}
}

add_filter('wp_generate_attachment_metadata','themename_sepia_filter');
function themename_sepia_filter($meta) {
	$file = wp_upload_dir();
	$file = trailingslashit($file['path']).$meta['sizes']['themename-sepia-image']['file'];
	list($orig_w, $orig_h, $orig_type) = @getimagesize($file);
	$image = wp_load_image($file);
	image_filter_sepia($image);
	switch ($orig_type) {
		case IMAGETYPE_GIF:
			imagegif( $image, $file );
			break;
		case IMAGETYPE_PNG:
			imagepng( $image, $file );
			break;
		case IMAGETYPE_JPEG:
			imagejpeg( $image, $file );
			break;
	}
	return $meta;
}
</pre>
<p>So feel free to play with the code and try new filters and things. It&#8217;s a example, not a final version.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9495#respond' onclick='return addComment.moveForm("div-comment-9495", "9495", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-9500" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9500" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://0.gravatar.com/avatar/8048de8f62d655a3dba139ea9fdb79d9?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://www.beatheads.net' rel='external nofollow' class='url'>Wouter Den Boer</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9500">
		<time itemprop="dateCreated" datetime="2011-08-24T07:23:09+00:00">August 24, 2011 at 7:23 am</time></a>	</div>

	<div itemprop="text"><p>Thank you very much, exactly what I was looking for. It works great on the media page, but when I try to upload a featured image I get the following error: &#8220;imagefilter() expects parameter 1 to be resource, string given&#8230;&#8221; Apparently there is a difference in uploading through the media page and uploading a featured image of a post. Any idea how to fix this?</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9500#respond' onclick='return addComment.moveForm("div-comment-9500", "9500", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	<ul class="children">
	<li class="comment byuser comment-author-otto bypostauthor even depth-2" id="comment-9502" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9502" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://0.gravatar.com/avatar/0994d5e2e158a24ba8017c2525d78263?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://ottodestruct.com' rel='external nofollow' class='url'>Otto</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9502">
		<time itemprop="dateCreated" datetime="2011-08-24T08:10:05+00:00">August 24, 2011 at 8:10 am</time></a>	</div>

	<div itemprop="text"><p>I didn&#8217;t put any error handling in, since it was just an example. You&#8217;d probably want to make sure that the resulting file exists, since it won&#8217;t get created if the uploaded image is smaller than the size you&#8217;re wanting.</p>
<p>So something like:</p>
<pre class="brush: php; title: ; notranslate" title="">
if (!file_exists($file)) return;
</pre>
<p>Would work after the $file is defined. This makes it fail when the file isn&#8217;t there and can&#8217;t be loaded.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9502#respond' onclick='return addComment.moveForm("div-comment-9502", "9502", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="comment-9517" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9517" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/b6a817504fa68c23de2b15e540d5cca2?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://armeda.comhttp://cubictwo.comhttp://sucuri.net' rel='external nofollow' class='url'>Dre Armeda</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9517">
		<time itemprop="dateCreated" datetime="2011-08-25T00:44:59+00:00">August 25, 2011 at 12:44 am</time></a>	</div>

	<div itemprop="text"><p>Very slick Otto! I got the next beverage <img src="http://ottopress.com/wp-content/plugins/classic-smilies/img/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>It would be interesting to see what this looked like as an option in the image upload process.</p>
<p>Cheers!</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9517#respond' onclick='return addComment.moveForm("div-comment-9517", "9517", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="comment-9545" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9545" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://0.gravatar.com/avatar/403d47c8b227172b283afd4e3ef7d969?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://www.psdexplorer.com' rel='external nofollow' class='url'>WPExplorer</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9545">
		<time itemprop="dateCreated" datetime="2011-08-25T12:38:14+00:00">August 25, 2011 at 12:38 pm</time></a>	</div>

	<div itemprop="text"><p>Oh ya this is cool!</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9545#respond' onclick='return addComment.moveForm("div-comment-9545", "9545", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="pingback odd alt thread-even depth-1" id="comment-9661" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9661" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
		<cite itemprop="name"><a itemprop='url' href='http://www.wordpresstuts.org/2011/09/08/how-to-grayscale-images-in-wordpress/' rel='external nofollow' class='url'>How to Grayscale Images in WordPress - Wordpress Tutorials</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9661">
		<time itemprop="dateCreated" datetime="2011-09-08T15:05:38+00:00">September 8, 2011 at 3:05 pm</time></a>	</div>

	<div itemprop="text"><p>[...] credits f&amp;#959r th&amp;#1110&amp;#1109 awesome trick goes t&amp;#959 Otto. Th&amp;#1110&amp;#1109 post &amp;#1110&amp;#1109 presented b&amp;#1091 th&amp;#1077 leader &amp;#1110n printing services, Next [...]</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9661#respond' onclick='return addComment.moveForm("div-comment-9661", "9661", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="comment-9669" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9669" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/797ded6ed3a362fee5445c1f72e8aa60?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">yoda</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9669">
		<time itemprop="dateCreated" datetime="2011-09-09T11:46:26+00:00">September 9, 2011 at 11:46 am</time></a>	</div>

	<div itemprop="text"><p>Great article and I made this worked in my theme with no problem, thanks Otto.<br />
But what I really want to do is making a grayscale of the fullsize.<br />
When I set the same size as the original image in &#8220;add_image_size&#8221;,<br />
it returns function error, which is probably the same as Wouter Den Boer mentioned above.<br />
Should I add &#8220;if (!file_exists($file)) return;&#8221; to somewhere?<br />
I wonder if you could give me any advice..<br />
Thanks!</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9669#respond' onclick='return addComment.moveForm("div-comment-9669", "9669", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1 parent" id="comment-9685" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9685" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/75532e3f27ac22c1ebe1697f35597977?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">Matthew Burrows</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9685">
		<time itemprop="dateCreated" datetime="2011-09-12T05:43:07+00:00">September 12, 2011 at 5:43 am</time></a>	</div>

	<div itemprop="text"><p>Hello there,</p>
<p>I am using this solution but I am encountering an error.</p>
<p>I have created two different image sizes one called &#8220;navigation-thumbnail&#8221; and one called &#8220;bw-navigation-thumbnail&#8221;.</p>
<p>Both image sizes are exactly the same size (219 * 144).</p>
<p>When I call both through (for a rollover effect) both images are black and white.</p>
<p>When inspecting the images that are been pulled through both images have &#8220;-219&#215;144&#8243; at the end of the file name.</p>
<p>One way of fixing it is to change the file size when creating the add image. So if I change one to &#8220;220, 145&#8243; it works, but this isn&#8217;t the ideal solution as I want the hover to be the same size as the colour image.</p>
<p>Do you have any explanation of why this happening and a solution of how to stop it?</p>
<p>Thanks in advance.</p>
<p>Matthew Burrows.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9685#respond' onclick='return addComment.moveForm("div-comment-9685", "9685", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	<ul class="children">
	<li class="comment byuser comment-author-otto bypostauthor even depth-2 parent" id="comment-9688" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9688" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://0.gravatar.com/avatar/0994d5e2e158a24ba8017c2525d78263?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://ottodestruct.com' rel='external nofollow' class='url'>Otto</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9688">
		<time itemprop="dateCreated" datetime="2011-09-12T11:01:19+00:00">September 12, 2011 at 11:01 am</time></a>	</div>

	<div itemprop="text"><p>Image sizes have to be unique. You can&#8217;t have two of the same size.</p>
<p>You could use a slightly different method, and create a different file with like -bw added to the filename or something, thus making a separate file, then use that in your hover code.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9688#respond' onclick='return addComment.moveForm("div-comment-9688", "9688", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	<ul class="children">
	<li class="comment odd alt depth-3" id="comment-9766" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9766" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/dbafd3890a419e7ce6a61cd02d30d74c?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">Observer</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9766">
		<time itemprop="dateCreated" datetime="2011-09-23T00:24:07+00:00">September 23, 2011 at 12:24 am</time></a>	</div>

	<div itemprop="text"><p>Otto,<br />
Please, can you provide tutorial, or explain &#8221; slightly different method&#8221; to create B&amp;W images than rollover the original color? This is my ? for long time in WP. It is just what Matthew Burrows ask for, so 2 of us now:)</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9766#respond' onclick='return addComment.moveForm("div-comment-9766", "9766", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even depth-2" id="comment-9865" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9865" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/bc7cc3fdb4af85e7923367e5f234f77b?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://www.yukei.net' rel='external nofollow' class='url'>Felipe Lavín</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9865">
		<time itemprop="dateCreated" datetime="2011-10-06T17:30:48+00:00">October 6, 2011 at 5:30 pm</time></a>	</div>

	<div itemprop="text"><p>If you want to use the images for a rollover effect, I think the best option it&#8217;s to create an sprite with the coloured and the b&amp;w version on the same image. You can apply the rollover with CSS position. The images will weight more, but there won&#8217;t be a delay when the user hovers the image&#8230; if you decide to go this way, it&#8217;s best if the unactive image it&#8217;s above the hovered version.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9865#respond' onclick='return addComment.moveForm("div-comment-9865", "9865", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-9689" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9689" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/75532e3f27ac22c1ebe1697f35597977?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">Matthew Burrows</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9689">
		<time itemprop="dateCreated" datetime="2011-09-12T11:08:12+00:00">September 12, 2011 at 11:08 am</time></a>	</div>

	<div itemprop="text"><p>Hi Otto,</p>
<p>Thanks for your swift reply, I never knew you couldn&#8217;t have two images the same size (never tried it before now), so thanks for pointing that out.</p>
<p>I will take a look at implementing your method and post the code if its successful so others can use it as well if they are having the same problems.</p>
<p>Thanks once again.</p>
<p>Kind regards,</p>
<p>Matt.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9689#respond' onclick='return addComment.moveForm("div-comment-9689", "9689", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-9694" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9694" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/dbafd3890a419e7ce6a61cd02d30d74c?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">ABS</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9694">
		<time itemprop="dateCreated" datetime="2011-09-12T20:23:46+00:00">September 12, 2011 at 8:23 pm</time></a>	</div>

	<div itemprop="text"><p>OTTO,<br />
Thanks, great subject.<br />
Now, i would like to ask you for solution to this:<br />
CSS B&amp;W featured image , than on mouse over : original in color.<br />
Can you help on this?<br />
THX</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9694#respond' onclick='return addComment.moveForm("div-comment-9694", "9694", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="pingback odd alt thread-odd thread-alt depth-1" id="comment-9703" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9703" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
		<cite itemprop="name"><a itemprop='url' href='http://bavotasan.com/2011/create-black-white-thumbnail-wordpress/' rel='external nofollow' class='url'>Create a Black &amp; White Thumbnail in WordPress | bavotasan.com</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9703">
		<time itemprop="dateCreated" datetime="2011-09-13T13:38:04+00:00">September 13, 2011 at 1:38 pm</time></a>	</div>

	<div itemprop="text"><p>[...] to get the effect to work, which required an image editing software like Photoshop. Thankfully, Otto just wrote a great article on a way that you can use some built in WordPress functions and a little [...]</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9703#respond' onclick='return addComment.moveForm("div-comment-9703", "9703", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-9800" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9800" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/b98cf45d4aa96b4e377b02504a551732?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">jason</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9800">
		<time itemprop="dateCreated" datetime="2011-09-29T12:50:34+00:00">September 29, 2011 at 12:50 pm</time></a>	</div>

	<div itemprop="text"><p>I&#8217;ve copied your code exactly but cannot get a black and white version to appear for the life of me! Both images display in color&#8230;is there a certain PHP library that needs to be installed that I can check for? I&#8217;m using MAMP Version 2.0.1.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9800#respond' onclick='return addComment.moveForm("div-comment-9800", "9800", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-9801" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9801" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/b98cf45d4aa96b4e377b02504a551732?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">jason</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9801">
		<time itemprop="dateCreated" datetime="2011-09-29T15:21:51+00:00">September 29, 2011 at 3:21 pm</time></a>	</div>

	<div itemprop="text"><p>Nevermind&#8230;.turns out that there needs to be some sort of check to make sure that the generated thumbnail exists (in case it&#8217;s uploaded at the correct size and therefore WordPress uses the standard size, not referencing it through the sizes array).</p>
<p>Thanks anyway!</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9801#respond' onclick='return addComment.moveForm("div-comment-9801", "9801", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="pingback even thread-even depth-1" id="comment-9840" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-9840" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
		<cite itemprop="name"><a itemprop='url' href='http://ottopress.com/2011/customizing-wordpress-images-with-a-plugin-imagefx/' rel='external nofollow' class='url'>Customizing WordPress Images with a Plugin: ImageFX &raquo; Otto on WordPress</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-9840">
		<time itemprop="dateCreated" datetime="2011-10-04T20:13:24+00:00">October 4, 2011 at 8:13 pm</time></a>	</div>

	<div itemprop="text"><p>[...] WordPress Images with a Plugin: ImageFX October 4, 2011, 8:12 pm   My post about how to customize WordPress images with tricks like greyscale and such got me lots of feedback and such, so I figured I might as well [...]</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=9840#respond' onclick='return addComment.moveForm("div-comment-9840", "9840", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="pingback odd alt thread-odd thread-alt depth-1" id="comment-10184" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-10184" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
		<cite itemprop="name"><a itemprop='url' href='http://doyouknow-wp.com/2011/there-is-a-way-to-automatically-grayscale-images-in-wordpress-when-you-upload-them/' rel='external nofollow' class='url'>wordpress automatically &#039;grayscales&#039; images when you upload them</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-10184">
		<time itemprop="dateCreated" datetime="2011-11-24T10:18:55+00:00">November 24, 2011 at 10:18 am</time></a>	</div>

	<div itemprop="text"><p>[...] WordPress performs &#8216;grayscale filtering&#8217; automagically and uses some very simple and easy PHP image manipulation tools to create grayscale images during upload. You have various options to use these grayscale images. For example, your theme needs a black and white version of the images, probably sized at 100×100, or maybe you want for use in gallery, or just only for &#8216;hover effect&#8217;, sliders, etc. There is a short and easy way explained by WPBeginner on How to Grayscale Images in WordPress. But wait, there&#8217;s more when the great &#8216;tech ninja&#8217; Otto says he has added a way to do sepia tones also! [...]</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=10184#respond' onclick='return addComment.moveForm("div-comment-10184", "10184", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-10236" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-10236" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/124c32a336be8e3d6bcd451dc19fedb7?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://noponies.com' rel='external nofollow' class='url'>noponies</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-10236">
		<time itemprop="dateCreated" datetime="2011-12-06T12:57:22+00:00">December 6, 2011 at 12:57 pm</time></a>	</div>

	<div itemprop="text"><p>Thanks for this code.</p>
<p>There is a small bug when using it with older posts combined with setting images to be organised by year/month. To get around it I&#8217;ve been checking to see if the &#8216;basdir&#8217; key is set in the array returned by  wp_upload_dir(). If it is, that means year/months folders are on and from there grabbing the path info dir name from the file key from the passed in file metadata and building up the correct file path. Seems to work fine. I&#8217;ve used your script as a basis for making CSS sprites. Cheers.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=10236#respond' onclick='return addComment.moveForm("div-comment-10236", "10236", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="pingback odd alt thread-odd thread-alt depth-1" id="comment-10359" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-10359" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
		<cite itemprop="name"><a itemprop='url' href='http://wordpressradar.com/2012/01/25-wordpress-custom-fields-tutorial/' rel='external nofollow' class='url'>25 WordPress Custom Fields Tutorial | WordpressRadar.com - The Best Collection of Wordpress Tutorials on the Web</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-10359">
		<time itemprop="dateCreated" datetime="2012-01-01T16:11:06+00:00">January 1, 2012 at 4:11 pm</time></a>	</div>

	<div itemprop="text"><p>[...] Customizing WordPress Images [...]</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=10359#respond' onclick='return addComment.moveForm("div-comment-10359", "10359", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="pingback even thread-even depth-1" id="comment-10388" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-10388" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
		<cite itemprop="name"><a itemprop='url' href='http://nickhamze.wordpress.com/2011/08/26/customizing-wordpress-images/' rel='external nofollow' class='url'>Customizing WordPress Images | Nick Hamze</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-10388">
		<time itemprop="dateCreated" datetime="2012-01-04T09:17:17+00:00">January 4, 2012 at 9:17 am</time></a>	</div>

	<div itemprop="text"><p>[...] Customizing WordPress Images [...]</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=10388#respond' onclick='return addComment.moveForm("div-comment-10388", "10388", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-10868" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-10868" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://0.gravatar.com/avatar/e784025ce59255572db60d3d72d75012?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://colinfmurphy.com' rel='external nofollow' class='url'>Colin</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-10868">
		<time itemprop="dateCreated" datetime="2012-05-26T07:21:23+00:00">May 26, 2012 at 7:21 am</time></a>	</div>

	<div itemprop="text"><p>Hi Otto,</p>
<p>This code is awesome. I was using it recently for a project but I noticed when resizing images with the Regenerate plugin I was getting an error message because some images were smaller then image size(my size was bigger then 100 by 100). Here was just some code that fixed this issue.<br />
<code><br />
if($orig_w &gt;= 100 &amp;&amp; $orig_h &gt;= 100) {<br />
	 $image = wp_load_image($file);<br />
	image_filter_sepia($image);<br />
	switch ($orig_type) {<br />
	case IMAGETYPE_GIF:<br />
		imagegif( $image, $file );<br />
		break;<br />
	case IMAGETYPE_PNG:<br />
		imagepng( $image, $file );<br />
		break;<br />
	case IMAGETYPE_JPEG:<br />
		imagejpeg( $image, $file );<br />
	break;<br />
}<br />
</code></p>
<p>Thanks again for the Awesome code.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=10868#respond' onclick='return addComment.moveForm("div-comment-10868", "10868", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 parent" id="comment-10892" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-10892" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/9858c483780f0e6bea8a19f30f8c4ea2?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://www.hipwebdesign.com' rel='external nofollow' class='url'>hwdesign</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-10892">
		<time itemprop="dateCreated" datetime="2012-06-01T15:16:15+00:00">June 1, 2012 at 3:16 pm</time></a>	</div>

	<div itemprop="text"><p>I&#8217;m getting the same error:</p>
<p><code>Warning: imagefilter() expects parameter 1 to be resource, string given</code></p>
<p>But I&#8217;m getting it because the Page that I&#8217;m uploading the image to was published last month, and wp_upload_dir() returns the current month&#8217;s upload path, so it looks like the image doesn&#8217;t exist.</p>
<p>Any suggestions on how I might go about fixing this? I&#8217;d love to be able to generate b/w thumbs for both posts and pages, regardless of when they were published.</p>
<p>Thanks!</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=10892#respond' onclick='return addComment.moveForm("div-comment-10892", "10892", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	<ul class="children">
	<li class="comment odd alt depth-2 parent" id="comment-10893" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-10893" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/9858c483780f0e6bea8a19f30f8c4ea2?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://www.hipwebdesign.com' rel='external nofollow' class='url'>hwdesign</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-10893">
		<time itemprop="dateCreated" datetime="2012-06-01T17:34:38+00:00">June 1, 2012 at 5:34 pm</time></a>	</div>

	<div itemprop="text"><p>I fixed it by doing this:</p>
<p><code><br />
function bw_filter($meta) {<br />
    $path = wp_upload_dir();<br />
    /* get dirname of file to get correct date folder */<br />
    $subdir = trailingslashit(dirname($meta['file']));<br />
    /* get basedir on path to get uploads folder */<br />
    $file = trailingslashit($path['basedir']).$subdir.$meta['sizes']['bw-image']['file'];<br />
    list($orig_w, $orig_h, $orig_type) = @getimagesize($file);<br />
    $image = wp_load_image($file);<br />
    imagefilter($image, IMG_FILTER_GRAYSCALE);<br />
	switch ($orig_type) {<br />
		case IMAGETYPE_GIF:<br />
			imagegif( $image, $file );<br />
			break;<br />
		case IMAGETYPE_PNG:<br />
			imagepng( $image, $file );<br />
			break;<br />
		case IMAGETYPE_JPEG:<br />
			imagejpeg( $image, $file );<br />
			break;<br />
	}<br />
	return $meta;<br />
}</p>
<p>add_filter('wp_generate_attachment_metadata','bw_filter');<br />
</code></p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=10893#respond' onclick='return addComment.moveForm("div-comment-10893", "10893", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	<ul class="children">
	<li class="comment even depth-3" id="comment-11430" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-11430" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://0.gravatar.com/avatar/a18620e47fda966d7a876191fdd67c04?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://www.lizandrob.co.nz' rel='external nofollow' class='url'>lellobot</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-11430">
		<time itemprop="dateCreated" datetime="2012-11-22T15:37:59+00:00">November 22, 2012 at 3:37 pm</time></a>	</div>

	<div itemprop="text"><p>This did the trick for me. Thanks for posting!</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=11430#respond' onclick='return addComment.moveForm("div-comment-11430", "11430", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-10976" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-10976" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://0.gravatar.com/avatar/ae510affa31e5b946623bda4ff969b67?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://www.billerickson.net' rel='external nofollow' class='url'>Bill Erickson</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-10976">
		<time itemprop="dateCreated" datetime="2012-06-18T21:56:51+00:00">June 18, 2012 at 9:56 pm</time></a>	</div>

	<div itemprop="text"><p>Thanks for this. It came in handy on a recent project.</p>
<p>I was having issues with it at first. The issue I had was if you uploaded an image smaller than the image size, you would get an error (undefined index). So I added a conditional to check if that image size was available, and if it wasn&#8217;t it used the original image: <a href="https://gist.github.com/2952049" rel="nofollow">https://gist.github.com/2952049</a></p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=10976#respond' onclick='return addComment.moveForm("div-comment-10976", "10976", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="pingback even thread-even depth-1" id="comment-10991" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-10991" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
		<cite itemprop="name"><a itemprop='url' href='http://www.wpbeginner.com/wp-tutorials/how-to-grayscale-images-in-wordpress/' rel='external nofollow' class='url'>How to Grayscale Images in WordPress</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-10991">
		<time itemprop="dateCreated" datetime="2012-06-22T09:18:07+00:00">June 22, 2012 at 9:18 am</time></a>	</div>

	<div itemprop="text"><p>[...] credits for this awesome trick goes to Otto. This post is presented by the leader in printing services, Next Day Flyers. As the name indicates [...]</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=10991#respond' onclick='return addComment.moveForm("div-comment-10991", "10991", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="pingback odd alt thread-odd thread-alt depth-1" id="comment-11020" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-11020" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
		<cite itemprop="name"><a itemprop='url' href='http://rizlabs.com/notes/general/wp-featured-image-http-ottopress-com-2011-customizing/78/' rel='external nofollow' class='url'>WP Featured Image http ottopress com 2011 customizing&#8230; &laquo; Riz Notes</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-11020">
		<time itemprop="dateCreated" datetime="2012-07-02T05:56:57+00:00">July 2, 2012 at 5:56 am</time></a>	</div>

	<div itemprop="text"><p>[...] <a href="http://ottopress.com/2011/customizing-wordpress-images/" rel="nofollow">http://ottopress.com/2011/customizing-wordpress-images/</a> [...]</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=11020#respond' onclick='return addComment.moveForm("div-comment-11020", "11020", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-11229" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-11229" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/1aa4c869d4aa3f71c65411c31df0323a?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">Spike</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-11229">
		<time itemprop="dateCreated" datetime="2012-09-12T05:51:44+00:00">September 12, 2012 at 5:51 am</time></a>	</div>

	<div itemprop="text"><p>Hi Otto</p>
<p>Thank you for this, it&#8217;s fantastic creating a b/w thumbnail for me.  However I&#8217;m having trouble with watermarking the full colour images.  All plugins I have tried removed the b/w filter when you run the plugin.  I cannot stop this from happening and I cannot figure out a way to automate adding a watermark using the function.php and there is no documentation online on how to do this with WordPress&#8230;</p>
<p>Do you have any ideas how to do this?  </p>
<p>Thanks!</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=11229#respond' onclick='return addComment.moveForm("div-comment-11229", "11229", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1 parent" id="comment-11248" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-11248" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/9dd6182cceb6f16606805964967884b4?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">Pedro</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-11248">
		<time itemprop="dateCreated" datetime="2012-09-21T10:45:24+00:00">September 21, 2012 at 10:45 am</time></a>	</div>

	<div itemprop="text"><p>Hi Otto,<br />
Great stuff! but is it possible to apply a filter to an image url directly instead of applying it to an image when your uploading it.<br />
I have a file upload field and a select list and would like to give the user the option of what filter to use.</p>
<p>something like <strong></strong> which would output a new url for the new manipulated image file.</p>
<p>Thanks!</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=11248#respond' onclick='return addComment.moveForm("div-comment-11248", "11248", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	<ul class="children">
	<li class="comment byuser comment-author-otto bypostauthor even depth-2" id="comment-11249" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-11249" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://0.gravatar.com/avatar/0994d5e2e158a24ba8017c2525d78263?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://ottodestruct.com' rel='external nofollow' class='url'>Otto</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-11249">
		<time itemprop="dateCreated" datetime="2012-09-21T11:06:56+00:00">September 21, 2012 at 11:06 am</time></a>	</div>

	<div itemprop="text"><p>Sure, but you would have to write your own code for that.</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=11249#respond' onclick='return addComment.moveForm("div-comment-11249", "11249", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="comment-11374" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-11374" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/31b984b4d46cf45b86c60920c5d6af17?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">arash</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-11374">
		<time itemprop="dateCreated" datetime="2012-11-11T23:50:28+00:00">November 11, 2012 at 11:50 pm</time></a>	</div>

	<div itemprop="text"><p>thanks a lot for the code<br />
i have a question. is it possible to apply b&amp;w only for post thumbs and not the original image?<br />
thank you again</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=11374#respond' onclick='return addComment.moveForm("div-comment-11374", "11374", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="comment-11858" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-11858" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/d457db5532597f77b270e37276d6e965?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">Monty</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-11858">
		<time itemprop="dateCreated" datetime="2013-06-10T09:56:09+00:00">June 10, 2013 at 9:56 am</time></a>	</div>

	<div itemprop="text"><p>Hi Otto, can you give an example of how to modify the metadata before returning it? Like for example let&#8217;s say we changed the format of the file from jpg to gif to make a smaller thumbnail file. Would it be possible to write the new file path into the meta?   </p>
<p>Monty</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=11858#respond' onclick='return addComment.moveForm("div-comment-11858", "11858", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="comment-11859" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-11859" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/d457db5532597f77b270e37276d6e965?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">Monty</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-11859">
		<time itemprop="dateCreated" datetime="2013-06-10T10:57:43+00:00">June 10, 2013 at 10:57 am</time></a>	</div>

	<div itemprop="text"><p>Figured it out . . . to modify the meta, add a line like <code>$meta['sizes']['custom-size-name']['url'] = $newurl';</code> before <code> return $meta</code></p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=11859#respond' onclick='return addComment.moveForm("div-comment-11859", "11859", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="comment-11995" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-11995" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/39eb446e8cc66ebc77eff8791b013077?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name"><a itemprop='url' href='http://oxfordsourceltd.com' rel='external nofollow' class='url'>marksyzm</a></cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-11995">
		<time itemprop="dateCreated" datetime="2013-09-11T05:43:03+00:00">September 11, 2013 at 5:43 am</time></a>	</div>

	<div itemprop="text"><p>For those who get more string errors when there are images that aren&#8217;t as big as the size defined and throw an error&#8230; I  simply threw in a check for if the image exists a couple of times to make sure that all data passed to each function&#8217;s arguments are valid.</p>
<pre class="brush: php; title: ; notranslate" title="">
add_filter('wp_generate_attachment_metadata','twentytwelve_blur_filter');
function twentytwelve_blur_filter($meta) {
    $path = wp_upload_dir();
    $subdir = trailingslashit(dirname($meta['file']));
    /* get basedir on path to get uploads folder */
    $file = trailingslashit($path['basedir']).$subdir.$meta['sizes']['banner-image-high-blur']['file'];
    if ($meta['sizes']['banner-image-high-blur']) {
        list($orig_w, $orig_h, $orig_type) = @getimagesize($file);
        $image = wp_load_image($file);

        if ($image) {
            for ($i = 0; $i &lt; 10; $i++) {
                imagefilter($image, IMG_FILTER_GAUSSIAN_BLUR);
            }

            switch ($orig_type) {
                case IMAGETYPE_GIF:
                    imagegif( $image, $file );
                    break;
                case IMAGETYPE_PNG:
                    imagepng( $image, $file );
                    break;
                case IMAGETYPE_JPEG:
                    imagejpeg( $image, $file, 95 );
                    break;
            }
        }
    }

    return $meta;
}
</pre>
<p>This also includes the fix for the subdirectory issue</p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=11995#respond' onclick='return addComment.moveForm("div-comment-11995", "11995", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1 parent" id="comment-12287" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-12287" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/fecdaba76c2c012be7f8955f3bf1dc22?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">Henni</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-12287">
		<time itemprop="dateCreated" datetime="2014-02-23T17:02:58+00:00">February 23, 2014 at 5:02 pm</time></a>	</div>

	<div itemprop="text"><p>I tried to use IMG_FILTER_GAUSSIAN_BLUR filter, but I&#8217;d like to have a stronger effect. Apparently ImageMagick has a customisable nice gaussian blur, but I cant get it to work.</p>
<p>Did I do any stupid mistake? I&#8217;m really lost here..<br />
This is what I changed:</p>
<p><code></p>
<p>add_action('after_setup_theme','blur_images_size');<br />
function blur_images_size() {<br />
	add_image_size('background-blur', 404, 404, false);<br />
}</p>
<p>add_filter('wp_generate_attachment_metadata','blur_images_filter');<br />
function blur_images_filter($meta) {<br />
    $file = wp_upload_dir();<br />
    $file = trailingslashit($file['path']).$meta['sizes']['background-blur']['file'];<br />
    if( $file ) {<br />
        list($orig_w, $orig_h, $orig_type) = @getimagesize($file);<br />
        $wpimage = wp_load_image($file);<br />
        $image = new Imagick();<br />
        $image-&gt;readImagefile($file);<br />
        $image-&gt;gaussianBlurImage(5,3);<br />
        $image-&gt;writeImage($file);</p>
<p>        return $meta;<br />
	}<br />
}<br />
</code></p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=12287#respond' onclick='return addComment.moveForm("div-comment-12287", "12287", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	<ul class="children">
	<li class="comment even depth-2" id="comment-12288" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
		<div id="div-comment-12288" class="comment-body">
		<div class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
	<img alt='' src='http://1.gravatar.com/avatar/fecdaba76c2c012be7f8955f3bf1dc22?s=48&amp;d=retro&amp;r=X' class='avatar avatar-48 photo' height='48' width='48' />	<cite itemprop="name">Henni</cite> <span class="says">says:</span>	</div>

	<div class="comment-meta commentmetadata"><a itemprop="url" href="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/#comment-12288">
		<time itemprop="dateCreated" datetime="2014-02-23T17:57:04+00:00">February 23, 2014 at 5:57 pm</time></a>	</div>

	<div itemprop="text"><p> <img src="http://ottopress.com/wp-content/plugins/classic-smilies/img/icon_smile.gif" alt=":)" class="wp-smiley" />  I worked it out myself.<br />
As it turns out, you don&#8217;t need wp_load_image() for image magick. Instead you can work with $file directly. Here&#8217;s my working code:<br />
(note that I also updated the function after Marksyzm&#8217;s suggested improvement (the comment above))</p>
<p><code><br />
add_action('after_setup_theme','blur_images_size');<br />
function blur_images_size() {<br />
	add_image_size('background-blur', 1600, 1600, false);<br />
}</p>
<p>add_filter('wp_generate_attachment_metadata','blur_images_filter');<br />
function blur_images_filter($meta) {<br />
    $path = wp_upload_dir();<br />
    $subdir = trailingslashit(dirname($meta['file']));<br />
    /* get basedir on path to get uploads folder */<br />
    $file = trailingslashit($path['basedir']).$subdir.$meta['sizes']['background-blur']['file'];<br />
    if ($meta['sizes']['background-blur']) {<br />
        list($orig_w, $orig_h, $orig_type) = @getimagesize($file);<br />
        $image = wp_load_image($file);</p>
<p>        if ($image) {<br />
            $image = new Imagick($file);<br />
            $image-&gt;gaussianBlurImage(20,10);<br />
            $image-&gt;writeImage($file);<br />
        }<br />
    }</p>
<p>    return $meta;<br />
}<br />
</code></p>
</div>

	<div class="reply">
	<a class='comment-reply-link' href='/2011/customizing-wordpress-images/comment-page-1/?replytocom=12288#respond' onclick='return addComment.moveForm("div-comment-12288", "12288", "respond", "621")'>Reply to this comment</a>	</div>
		</div>
	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	</ol>
	<div class="navigation" style="clear:both">
		<div class="alignleft"></div>
		<div class="alignright"></div>
	</div>
	<div style="clear:both"></div> 								<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2011/customizing-wordpress-images/comment-page-1/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://ottopress.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																										<div id="gravbox"></div><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input x-autocompletetype="name-full" id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input x-autocompletetype="email" id="email" name="email" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></p><p class="form-allowed-tags">Need to post PHP code? Wrap it in <code>[php]</code> and <code>[/php]</code> tags.						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='621' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="c21353c9a2" /></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">Notify me of new posts by email.</label></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="229"/></p>					</form>
							</div><!-- #respond -->
			</div>

	
	</div>

	<div id="sidebar">
		<ul>
			
			<li id="paypal-donate" class="widget widget_wpaypal"><h2 class="widgettitle">Buy Otto a Beer</h2>
<div style="margin-top:5px;margin-bottom:5px;text-align:left;">
		<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
		<p><input type="hidden" name="cmd" value="_xclick" />
		<input type="hidden" name="business" value="otto@ottodestruct.com" />
		<input type="hidden" name="item_name" value="Donation to Otto on WordPress" />
		<input type="hidden" name="item_number" value="0" />
		<input type="hidden" name="notify_url" value="" />
		<input type="hidden" name="no_shipping" value="1" /><input type="hidden" name="return" value="http://ottopress.com" />
		<input type="hidden" name="no_note" value="1" />
		<input type="hidden" name="tax" value="0" />
		<input type="hidden" name="bn" value="PP-DonationsBF" />
		<input type="hidden" name="on0" value="Website" />
		Currency: <br />
		<select id="currency_code" name="currency_code">
		<option value="USD">U.S. Dollars</option>
		<option value="AUD">Australian Dollars</option>
		<option value="CAD">Canadian Dollars</option>
		<option value="EUR">Euros</option>
		<option value="GBP">Pounds Sterling</option>
		<option value="JPY">Yen</option></select></p>
		<p>Amount: <br /><input type="text" name="amount" size="16" title="The amount you wish to donate" value="5.00" /></p>
		<p>Website(Optional): <br /><input type="text" size="16" title="Your website (will be displayed)" name="os0" value="" /></p><p><input class="ppimg" type="image" src="https://www.paypal.com/en_US/i/btn/x-click-but21.gif" name="submit" style="border:0;" alt="Make payments with PayPal - fast, free and secure" /></p></form></div></li>
<li id="text-7" class="widget widget_text">			<div class="textwidget">Hey, I also take Bitcoins! Send them to: </br>
<a href="bitcoin:1ottoqnFyTtaB6GiJZxMQ79rsSqBL2ZBg">
<img src="https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=bitcoin:1ottoqnFyTtaB6GiJZxMQ79rsSqBL2ZBg" /><br />
1ottoqnFyTtaB6GiJZxMQ79rsSqBL2ZBg</a></div>
		</li>
<li id="text-5" class="widget widget_text"><h2 class="widgettitle">Subscribe!</h2>
			<div class="textwidget"><!-- <a href="https://plus.google.com/111166992820603637934?prsrc=3" style="cursor:pointer;display:inline-block;text-decoration:none;color:#333;font:13px/16px arial,sans-serif;"><span style="display:inline-block;font-weight:bold;vertical-align:top;margin-right:5px;margin-top:8px;">Otto on WordPress</span><span style="display:inline-block;vertical-align:top;margin-right:15px;margin-top:8px;">on</span><img src="https://ssl.gstatic.com/images/icons/gplus-32.png" alt="" style="border:0;width:32px;height:32px;"/></a>
-->
<div class="g-plus" data-href="https://plus.google.com/111166992820603637934?rel=publisher" data-width="250" data-height="131" data-theme="light"></div>
</div>
		</li>
<li id="blog_subscription-3" class="widget jetpack_subscription_widget"><h2 class="widgettitle"><label for="subscribe-field"></label></h2>

		<form action="#" method="post" accept-charset="utf-8" id="subscribe-blog-blog_subscription-3">
			<p id="subscribe-text">Enter your email address to subscribe to this blog and receive notifications of new posts by email.</p><p>Join 331 other subscribers</p>

			<p id="subscribe-email"><input type="text" name="email" value="Email Address" id="subscribe-field" onclick="if ( this.value == 'Email Address' ) { this.value = ''; }" onblur="if ( this.value == '' ) { this.value = 'Email Address'; }" /></p>

			<p id="subscribe-submit">
				<input type="hidden" name="action" value="subscribe" />
				<input type="hidden" name="source" value="http://ottopress.com/2011/customizing-wordpress-images/comment-page-1/" />
				<input type="hidden" name="sub-type" value="widget" />
				<input type="hidden" name="redirect_fragment" value="blog_subscription-3" />
								<input type="submit" value="Subscribe" name="jetpack_subscriptions_widget" />
			</p>
		</form>

		
</li>
<li id="text-3" class="widget widget_text"><h2 class="widgettitle">Email Me</h2>
			<div class="textwidget"><ul><li><span class="vcard microid-mailto+http:sha1:23e9670868f6d2b16fe1f6b3db80c8f0423a082a">
<span style="display:none;">
<span class="adr">
 <span class="locality">Memphis</span>,
 <span class="region">TN</span>
 <span class="postal-code">38103</span>
 <span class="country-name">U.S.A.</span>
</span>
<a class="url fn" href="http://ottodestruct.com">Otto</a>
<span class="uid">240cf86e-5cad-11dc-8314-0800200c9a66</span>
</span>
<a class="email" href="mailto:otto@ottodestruct.com">otto@ottodestruct.com</a></span></li></ul>
<a rel="author" href="https://plus.google.com/100201852715113506716?rel=author">
  <img src="https://ssl.gstatic.com/images/icons/gplus-16.png" width="16" height="16">
</a>
</a>
<!-- 

This rant is hidden in HTML comments. If I pointed you to it, then you probably emailed me about the fact that my email address is in plaintext directly above this comment. If you happened to run across it because you just like looking at HTML comments, well, easter egg! :)

YES, that is a bare mailto: href above. 
YES, that is my real email address. 
And YES, it's intentional.

Obfuscating your email address on the web is stupid. 

Firstly, hiding your email address doesn't prevent spam. Spammers get addresses in bulk from mailing lists and websites and other sources. Sure, some scrapers exist, but they are by far the minority of the sources for email lists.

Secondly, hiding your email address ruins the whole point of email. The purpose of publishing my email address is so that anybody, and I do mean *anybody*, can email me. Before the days of cell phones, your phone number and physical address used to be published in a big book that everybody received, for free, on a semi-annual basis. It had distinctive yellow pages in it. Your contact information is not, and never was supposed to be, private information. Treating it as such is stupid.

Thirdly, I have great spam protection. For one, I use GMail, which has frankly incredible filtering because of the volume of mail they deal with. For another, I use various sets of filters to categorize incoming mail into various categories of things. Hell, I can even run statistics on it, if I want. This is a much better solution than continually giving out fake email addresses, or using +stuff to figure out who sent what where... I'd prefer to simply let my filters deal with it instead. 

Finally, if you're one of those systems that scours the web and/or social networks for visible email addresses and then automatically emails that person to let them know that their address is visible, then by all means please just fuck off and die. You're part of the problem. On the other hand, if you're just a regular guy with good intentions, then this doesn't apply to you. :)

Just my 2 cents.

--></div>
		</li>
<li id="categories-2" class="widget widget_categories"><h2 class="widgettitle">Categories</h2>
		<ul>
	<li class="cat-item cat-item-573"><a href="http://ottopress.com/category/code/" title="View all posts filed under Code">Code</a>
</li>
	<li class="cat-item cat-item-574"><a href="http://ottopress.com/category/other/" title="View all posts filed under Other">Other</a>
</li>
	<li class="cat-item cat-item-575"><a href="http://ottopress.com/category/rants/" title="View all posts filed under Rants">Rants</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://ottopress.com/category/uncategorized/" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
	<li class="cat-item cat-item-576"><a href="http://ottopress.com/category/wordpress/" title="View all posts filed under WordPress">WordPress</a>
</li>
		</ul>
</li>
<li id="archives-2" class="widget widget_archive"><h2 class="widgettitle">Archives</h2>
		<ul>
	<li><a href='http://ottopress.com/2014/02/'>February 2014</a></li>
	<li><a href='http://ottopress.com/2013/11/'>November 2013</a></li>
	<li><a href='http://ottopress.com/2013/10/'>October 2013</a></li>
	<li><a href='http://ottopress.com/2013/06/'>June 2013</a></li>
	<li><a href='http://ottopress.com/2013/03/'>March 2013</a></li>
	<li><a href='http://ottopress.com/2012/11/'>November 2012</a></li>
	<li><a href='http://ottopress.com/2012/09/'>September 2012</a></li>
	<li><a href='http://ottopress.com/2012/08/'>August 2012</a></li>
	<li><a href='http://ottopress.com/2012/07/'>July 2012</a></li>
	<li><a href='http://ottopress.com/2012/05/'>May 2012</a></li>
	<li><a href='http://ottopress.com/2012/02/'>February 2012</a></li>
	<li><a href='http://ottopress.com/2012/01/'>January 2012</a></li>
	<li><a href='http://ottopress.com/2011/12/'>December 2011</a></li>
	<li><a href='http://ottopress.com/2011/11/'>November 2011</a></li>
	<li><a href='http://ottopress.com/2011/10/'>October 2011</a></li>
	<li><a href='http://ottopress.com/2011/09/'>September 2011</a></li>
	<li><a href='http://ottopress.com/2011/08/'>August 2011</a></li>
	<li><a href='http://ottopress.com/2011/07/'>July 2011</a></li>
	<li><a href='http://ottopress.com/2011/06/'>June 2011</a></li>
	<li><a href='http://ottopress.com/2011/05/'>May 2011</a></li>
	<li><a href='http://ottopress.com/2011/04/'>April 2011</a></li>
	<li><a href='http://ottopress.com/2011/03/'>March 2011</a></li>
	<li><a href='http://ottopress.com/2011/02/'>February 2011</a></li>
	<li><a href='http://ottopress.com/2011/01/'>January 2011</a></li>
	<li><a href='http://ottopress.com/2010/12/'>December 2010</a></li>
	<li><a href='http://ottopress.com/2010/11/'>November 2010</a></li>
	<li><a href='http://ottopress.com/2010/10/'>October 2010</a></li>
	<li><a href='http://ottopress.com/2010/09/'>September 2010</a></li>
	<li><a href='http://ottopress.com/2010/08/'>August 2010</a></li>
	<li><a href='http://ottopress.com/2010/06/'>June 2010</a></li>
	<li><a href='http://ottopress.com/2010/05/'>May 2010</a></li>
	<li><a href='http://ottopress.com/2010/04/'>April 2010</a></li>
	<li><a href='http://ottopress.com/2010/03/'>March 2010</a></li>
	<li><a href='http://ottopress.com/2010/02/'>February 2010</a></li>
	<li><a href='http://ottopress.com/2009/11/'>November 2009</a></li>
	<li><a href='http://ottopress.com/2009/09/'>September 2009</a></li>
	<li><a href='http://ottopress.com/2008/09/'>September 2008</a></li>
		</ul>
</li>
		<li id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widgettitle">Recent Posts</h2>
		<ul>
					<li>
				<a href="http://ottopress.com/2014/better-know-a-vulnerability-cross-site-request-forgery-csrf/">Better Know a Vulnerability: Cross Site Request Forgery (CSRF)</a>
						</li>
					<li>
				<a href="http://ottopress.com/2013/better-know-a-vulnerability-sql-injection/">Better Know a Vulnerability: SQL Injection</a>
						</li>
					<li>
				<a href="http://ottopress.com/2013/language-packs-101-prepwork/">Language Packs 101 &#8211; Prepwork</a>
						</li>
					<li>
				<a href="http://ottopress.com/2013/slides-a-presentation-theme/">Slides: A Presentation Theme</a>
						</li>
					<li>
				<a href="http://ottopress.com/2013/im-not-a-fan-of-orange/">I&#8217;m not a fan of orange&#8230;</a>
						</li>
				</ul>
		</li>
<li id="text-6" class="widget widget_text"><h2 class="widgettitle">WP Core Contributions</h2>
			<div class="textwidget"><p>
<a href='http://core.trac.wordpress.org/changeset/28072'>[28072]</a> - <a href='http://core.trac.wordpress.org/ticket/19393'>#19393</a><br />
<a href='http://core.trac.wordpress.org/changeset/27522'>[27522]</a> - <a href='http://core.trac.wordpress.org/ticket/19889'>#19889</a><br />
<a href='http://core.trac.wordpress.org/changeset/27399'>[27399]</a> - <a href='http://core.trac.wordpress.org/ticket/25665'>#25665</a><br />
<a href='http://core.trac.wordpress.org/changeset/26978'>[26978]</a> - <a href='http://core.trac.wordpress.org/ticket/23149'>#23149</a><br />
<a href='http://core.trac.wordpress.org/changeset/26711'>[26711]</a> - <a href='http://core.trac.wordpress.org/ticket/21442'>#21442</a><br />
<a href='http://core.trac.wordpress.org/changeset/26072'>[26072]</a> - <a href='http://core.trac.wordpress.org/ticket/25858'>#25858</a><br />
<a href='http://core.trac.wordpress.org/changeset/22152'>[22152]</a> - <a href='http://core.trac.wordpress.org/ticket/21914'>#21914</a><br />
<a href='http://core.trac.wordpress.org/changeset/22026'>[22026]</a> - <a href='http://core.trac.wordpress.org/ticket/22002'>#22002</a><br />
<a href='http://core.trac.wordpress.org/changeset/21839'>[21839]</a> - <a href='http://core.trac.wordpress.org/ticket/16996'>#16996</a><br />
<a href='http://core.trac.wordpress.org/changeset/21802'>[21802]</a> - <a href='http://core.trac.wordpress.org/ticket/18674'>#18674</a><br />
<a href='http://core.trac.wordpress.org/changeset/21776'>[21776]</a> - <a href='http://core.trac.wordpress.org/ticket/13729'>#13729</a><br />
<a href='http://core.trac.wordpress.org/changeset/21609'>[21609]</a> - <a href='http://core.trac.wordpress.org/ticket/19324'>#19324</a><br />
<a href='http://core.trac.wordpress.org/changeset/20916'>[20916]</a> - <a href='http://core.trac.wordpress.org/ticket/20448'>#20448</a><br />
<a href='http://core.trac.wordpress.org/changeset/20784'>[20784]</a> - <a href='http://core.trac.wordpress.org/ticket/20448'>#20448</a><br />
<a href='http://core.trac.wordpress.org/changeset/20783'>[20783]</a> - <a href='http://core.trac.wordpress.org/ticket/20448'>#20448</a><br />
<a href='http://core.trac.wordpress.org/changeset/20267'>[20267]</a> - <a href='http://core.trac.wordpress.org/ticket/13774'>#13774</a><br />
<a href='http://core.trac.wordpress.org/changeset/19721'>[19721]</a> - <a href='http://core.trac.wordpress.org/ticket/19626'>#19626</a><br />
<a href='http://core.trac.wordpress.org/changeset/19003'>[19003]</a> - <a href="http://core.trac.wordpress.org/ticket/17406">#17406</a><br />
<a href='http://core.trac.wordpress.org/changeset/18741'>[18741]</a> - <a href="http://core.trac.wordpress.org/ticket/15473">#15473</a><br />
<a href='http://core.trac.wordpress.org/changeset/18602'>[18602]</a> - <a href="http://core.trac.wordpress.org/ticket/18230">#18230</a><br />
<a href='http://core.trac.wordpress.org/changeset/18541'>[18541]</a> - <a href="http://core.trac.wordpress.org/ticket/16687">#16687</a><br />
<a href='http://core.trac.wordpress.org/changeset/18205'>[18205]</a> - <a href="http://core.trac.wordpress.org/ticket/17148">#17148</a><br />
<a href='http://core.trac.wordpress.org/changeset/17254'>[17254]</a> - <a href="http://core.trac.wordpress.org/ticket/16192">#16192</a><br />
<a href='http://core.trac.wordpress.org/changeset/16555'>[16555]</a> - <a href="http://core.trac.wordpress.org/ticket/12891">#12891</a><br />
<a href='http://core.trac.wordpress.org/changeset/16284'>[16284]</a> - <a href="http://core.trac.wordpress.org/ticket/13324">#13324</a><br />
<a href='http://core.trac.wordpress.org/changeset/13420'>[13420]</a> - <a href="http://core.trac.wordpress.org/ticket/12291">#12291</a><br />
<a href='http://core.trac.wordpress.org/changeset/12581'>[12581]</a> - <a href="http://core.trac.wordpress.org/ticket/7225">#7225</a><br />
<a href='http://core.trac.wordpress.org/changeset/11738'>[11738]</a> - <a href="http://core.trac.wordpress.org/ticket/10145">#10145</a><br />
<a href='http://core.trac.wordpress.org/changeset/11329'>[11329]</a> - <a href="http://core.trac.wordpress.org/ticket/3962">#3962</a><br />
<a href='http://core.trac.wordpress.org/changeset/10962'>[10962]</a> - <a href="http://core.trac.wordpress.org/ticket/3962">#3962</a><br />
<a href='http://core.trac.wordpress.org/changeset/10757'>[10757]</a> - <a href="http://core.trac.wordpress.org/ticket/3962">#3962</a><br />
<a href='http://core.trac.wordpress.org/changeset/10753'>[10753]</a> - <a href="http://core.trac.wordpress.org/ticket/3962">#3962</a><br />
<a href='http://core.trac.wordpress.org/changeset/10252'>[10252]</a> - <a href="http://core.trac.wordpress.org/ticket/6791">#6791</a><br />
<a href='http://core.trac.wordpress.org/changeset/9276'>[9276]</a> - <a href="http://core.trac.wordpress.org/ticket/7124">#7124</a><br />
<a href='http://core.trac.wordpress.org/changeset/9209'>[9209]</a> - <a href="http://core.trac.wordpress.org/ticket/7901">#7901</a><br />
<a href='http://core.trac.wordpress.org/changeset/9207'>[9207]</a> - <a href="http://core.trac.wordpress.org/ticket/7635">#7635</a><br />
<a href='http://core.trac.wordpress.org/changeset/9139'>[9139]</a> - <a href="http://core.trac.wordpress.org/ticket/7847">#7847</a><br />
<a href='http://core.trac.wordpress.org/changeset/9089'>[9089]</a> - <a href="http://core.trac.wordpress.org/ticket/7772">#7772</a><br />
<a href='http://core.trac.wordpress.org/changeset/8968'>[8968]</a> - <a href="http://core.trac.wordpress.org/ticket/7761">#7761</a><br />
<a href='http://core.trac.wordpress.org/changeset/8285'>[8285]</a> - <a href="http://core.trac.wordpress.org/ticket/6879">#6879</a><br />
<a href='http://core.trac.wordpress.org/changeset/8208'>[8208]</a> - <a href="http://core.trac.wordpress.org/ticket/4448">#4448</a><br />
<a href='http://core.trac.wordpress.org/changeset/8132'>[8132]</a> - <a href="http://core.trac.wordpress.org/ticket/4954">#4954</a><br />
<a href='http://core.trac.wordpress.org/changeset/8131'>[8131]</a> - <a href="http://core.trac.wordpress.org/ticket/6590">#6590</a><br />
<a href='http://core.trac.wordpress.org/changeset/7869'>[7869]</a> - <a href="http://core.trac.wordpress.org/ticket/6513">#6513</a><br />
<a href='http://core.trac.wordpress.org/changeset/7647'>[7647]</a> - <a href="http://core.trac.wordpress.org/ticket/6608">#6608</a><br />
<a href='http://core.trac.wordpress.org/changeset/7461'>[7461]</a> - <a href="http://core.trac.wordpress.org/ticket/6339">#6339</a><br />
<a href='http://core.trac.wordpress.org/changeset/6873'>[6873]</a> - <a href="http://core.trac.wordpress.org/ticket/4986">#4986</a><br />
<a href='http://core.trac.wordpress.org/changeset/6760'>[6760]</a> - <a href="http://core.trac.wordpress.org/ticket/4617">#4617</a><br />
<a href='http://core.trac.wordpress.org/changeset/6616'>[6616]</a> - <a href="http://core.trac.wordpress.org/ticket/5155">#5155</a><br />
<a href='http://core.trac.wordpress.org/changeset/6439'>[6439]</a> - <a href="http://core.trac.wordpress.org/ticket/2805">#2805</a><br />
<a href='http://core.trac.wordpress.org/changeset/6091'>[6091]</a> - <a href="http://core.trac.wordpress.org/ticket/4182">#4182</a><br />
<a href='http://core.trac.wordpress.org/changeset/6086'>[6086]</a> - <a href="http://core.trac.wordpress.org/ticket/4946">#4946</a><br />
<a href='http://core.trac.wordpress.org/changeset/5986'>[5986]</a> - <a href="http://core.trac.wordpress.org/ticket/4873">#4873</a><br />
<a href='http://core.trac.wordpress.org/changeset/5982'>[5982]</a> - <a href="http://core.trac.wordpress.org/ticket/4800">#4800</a><br />
<a href='http://core.trac.wordpress.org/changeset/5958'>[5958]</a> - <a href="http://core.trac.wordpress.org/ticket/4625">#4625</a><br />
<a href='http://core.trac.wordpress.org/changeset/5920'>[5920]</a> - <a href="http://core.trac.wordpress.org/ticket/4703">#4703</a><br />
<a href='http://core.trac.wordpress.org/changeset/5910'>[5910]</a> - <a href="http://core.trac.wordpress.org/ticket/4654">#4654</a><br />
<a href='http://core.trac.wordpress.org/changeset/5881'>[5881]</a> - <a href="http://core.trac.wordpress.org/ticket/4704">#4704</a><br />
<a href='http://core.trac.wordpress.org/changeset/5857'>[5857]</a> - <a href="http://core.trac.wordpress.org/ticket/4625">#4625</a><br />
<a href='http://core.trac.wordpress.org/changeset/5848'>[5848]</a> - <a href="http://core.trac.wordpress.org/ticket/4499">#4499</a><br />
<a href='http://core.trac.wordpress.org/changeset/5845'>[5845]</a> - <a href="http://core.trac.wordpress.org/ticket/4547">#4547</a><br />
<a href='http://core.trac.wordpress.org/changeset/5317'>[5317]</a> - <a href="http://core.trac.wordpress.org/ticket/4169">#4169</a><br />
<a href='http://core.trac.wordpress.org/changeset/5154'>[5154]</a> - <a href="http://core.trac.wordpress.org/ticket/4057">#4057</a><br />
<a href='http://core.trac.wordpress.org/changeset/5151'>[5151]</a> - <a href="http://core.trac.wordpress.org/ticket/4057">#4057</a><br />
<a href='http://core.trac.wordpress.org/changeset/5104'>[5104]</a> - <a href="http://core.trac.wordpress.org/ticket/3790">#3790</a><br />
<a href='http://core.trac.wordpress.org/changeset/4964'>[4964]</a> - <a href="http://core.trac.wordpress.org/ticket/3898">#3898</a><br />
</p></div>
		</li>
		</ul>
	</div>

</div>
<div id="footer">
<div style="float:left;"><a href="http://internetdefenseleague.org"><img src="http://internetdefenseleague.org/images/badges/final/footer_badge.png" alt="Member of The Internet Defense League" /></a></div>
<a href="http://ottopress.com/feed/">Entries (RSS)</a> and <a href="http://ottopress.com/comments/feed/">Comments (RSS)</a>.<br />
<span about="http://ottodestruct.com/" xmlns:cc="http://creativecommons.org/ns#">
This page, by <a property="cc:attributionName" rel="cc:attributionURL" href="http://ottodestruct.com/">Otto</a>, is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike License</a>.</span><br />
Powered by <a href="http://wordpress.org/" title="Powered by WordPress.">WordPress</a>.<br />
<img alt='css.php' src="http://ottopress.com/wp-content/plugins/cookies-for-comments/css.php?k=c6a73cb029f035cdaa9e9e8336d25169&amp;o=i&amp;t=912279739" width='1' height='1' />	<div style="display:none">
	<div class="grofile-hash-map-f961a63e9fd061b0da0a4041fb4af3fc">
	</div>
	<div class="grofile-hash-map-ae077e5bdfdbb4c7508b193280abe755">
	</div>
	<div class="grofile-hash-map-0994d5e2e158a24ba8017c2525d78263">
	</div>
	<div class="grofile-hash-map-8048de8f62d655a3dba139ea9fdb79d9">
	</div>
	<div class="grofile-hash-map-b6a817504fa68c23de2b15e540d5cca2">
	</div>
	<div class="grofile-hash-map-403d47c8b227172b283afd4e3ef7d969">
	</div>
	<div class="grofile-hash-map-797ded6ed3a362fee5445c1f72e8aa60">
	</div>
	<div class="grofile-hash-map-75532e3f27ac22c1ebe1697f35597977">
	</div>
	<div class="grofile-hash-map-dbafd3890a419e7ce6a61cd02d30d74c">
	</div>
	<div class="grofile-hash-map-bc7cc3fdb4af85e7923367e5f234f77b">
	</div>
	<div class="grofile-hash-map-b98cf45d4aa96b4e377b02504a551732">
	</div>
	<div class="grofile-hash-map-124c32a336be8e3d6bcd451dc19fedb7">
	</div>
	<div class="grofile-hash-map-e784025ce59255572db60d3d72d75012">
	</div>
	<div class="grofile-hash-map-9858c483780f0e6bea8a19f30f8c4ea2">
	</div>
	<div class="grofile-hash-map-a18620e47fda966d7a876191fdd67c04">
	</div>
	<div class="grofile-hash-map-ae510affa31e5b946623bda4ff969b67">
	</div>
	<div class="grofile-hash-map-1aa4c869d4aa3f71c65411c31df0323a">
	</div>
	<div class="grofile-hash-map-9dd6182cceb6f16606805964967884b4">
	</div>
	<div class="grofile-hash-map-31b984b4d46cf45b86c60920c5d6af17">
	</div>
	<div class="grofile-hash-map-d457db5532597f77b270e37276d6e965">
	</div>
	<div class="grofile-hash-map-39eb446e8cc66ebc77eff8791b013077">
	</div>
	<div class="grofile-hash-map-fecdaba76c2c012be7f8955f3bf1dc22">
	</div>
	</div>
<script type='text/javascript' src='http://ottopress.com/wp-content/plugins/akismet/_inc/form.js?ver=3.0.1'></script>
<script type='text/javascript' src='http://ottopress.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9'></script>
<script type='text/javascript' src='http://ottopress.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPhp.js?ver=3.0.9'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://ottopress.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://ottopress.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<link rel='stylesheet' id='gplus-css'  href='http://ottopress.com/wp-content/plugins/jetpack/modules/gplus-authorship/style.css?ver=3.9.1' type='text/css' media='all' />
<link rel='stylesheet' id='yarppRelatedCss-css'  href='http://ottopress.com/wp-content/plugins/yet-another-related-posts-plugin/style/related.css?ver=3.9.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ottopress.com/wp-includes/js/comment-reply.js?ver=3.9.1'></script>
<script type='text/javascript' src='http://ottopress.com/wp-content/plugins/jetpack/modules/photon/photon.js?ver=20130122'></script>
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201430'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var mejsL10n = {"language":"en-US","strings":{"Close":"Close","Fullscreen":"Fullscreen","Download File":"Download File","Download Video":"Download Video","Play\/Pause":"Play\/Pause","Mute Toggle":"Mute Toggle","None":"None","Turn off Fullscreen":"Turn off Fullscreen","Go Fullscreen":"Go Fullscreen","Unmute":"Unmute","Mute":"Mute","Captions\/Subtitles":"Captions\/Subtitles"}};
var _wpmejsSettings = {"pluginPath":"\/wp-includes\/js\/mediaelement\/"};
/* ]]> */
</script>
<script type='text/javascript' src='http://ottopress.com/wp-includes/js/mediaelement/mediaelement-and-player.min.js?ver=2.14.2'></script>
<script type='text/javascript' src='http://ottopress.com/wp-includes/js/mediaelement/wp-mediaelement.js?ver=3.9.1'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2014Julaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://ottopress.com/wp-content/plugins/jetpack/modules/wpgroho.js?ver=3.9.1'></script>
<script type='text/javascript' src='//apis.google.com/js/plusone.js?ver=3.9.1'></script>

	<script src="http://stats.wordpress.com/e-201430.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:3.0.2',blog:'12342457',post:'621',tz:'-5'});
	var load_cmc = function(){linktracker_init(12342457,621,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script></div></div>

<script type="text/javascript">
    window._idl = {};
    _idl.variant = "modal";
    (function() {
        var idl = document.createElement('script');
        idl.type = 'text/javascript';
        idl.async = true;
        idl.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'members.internetdefenseleague.org/include/?url=' + (_idl.url || '') + '&campaign=' + (_idl.campaign || '') + '&variant=' + (_idl.variant || 'banner');
        document.getElementsByTagName('body')[0].appendChild(idl);
    })();
</script>

</body>
</html>
	
