http://spritesmods.com/?art=avrfmtx
HTTP/1.1 200 OK
Date: Thu, 24 Jul 2014 02:08:16 GMT
Server: Apache/2.2.22 (Debian)
X-Powered-By: PHP/5.4.4-14+deb7u12
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 3906
Connection: close
Content-Type: text/html

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" 
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Sprites mods - AVR-based FM-transmitter - Intro, theory</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="style/style-new.css" />
<link rel="stylesheet" type="text/css" href="style/print.css" media="print" />
<link type="application/rss+xml" rel="alternate" title="Sprites Mods" href="http://spritesmods.com/rss.php" />
</head>
<body>

<div id="header"><span id="sitename"><span id="sitenamebig">SpritesMods</span>.com</span><h1>AVR-based FM-transmitter - Intro, theory</h1></div>


<div id="left">
<p />
<a href="?art=main">Welcome</a><br /><ul id="mainmenu"><li><a href="?art=hardware">Hardware stuff</a><ul id="submenu"><li><a href="?art=rpi_arcade">Raspberry Pi micro arcade machine</a></li><li><a href="?art=mcportal">USB Minecraft portal</a></li><li><a href="?art=gbamidi">GameBoy Advance as a MIDI synthesizer</a></li><li><a href="?art=spitft">Connecting an LCD to a non-video-capable Linux device</a></li><li><a href="?art=lineccdts">Scanner CCD touchscreen conversion</a></li><li><a href="?art=bwidow_fpga">Black Widow in an FPGA</a></li><li><a href="?art=imx233-ws2811">WS2812 LEDs controlled by an iMX233</a></li><li><a href="?art=magnmicrobots">Duplicating the SRI magnet micro-robots</a></li><li><a href="?art=thermchromclk">Thermochromic paint clock</a></li><li><a href="?art=engarde">En Garde, a classifying capacitive touch sensor</a></li><li><a href="?art=avrfmtx">AVR-based FM-transmitter</a></li><li><a href="?art=stdalonejtag">Standalone JTAG programmer</a></li><li><a href="?art=avrcpm">CP/M on an AVR</a></li><li><a href="?art=doorbell">Wav-playing doorbell</a></li><li><a href="?art=rgbwall">Wall-lighting with RGB-leds</a></li><li><a href="?art=t5325_satapex">Adding SATA and PCIE to a HP T5325 thin client</a></li><li><a href="?art=ftdinand">FT2232H NAND flash reader</a></li><li><a href="?art=virtwiibar">Virtual Wii Sensor-bar</a></li><li><a href="?art=quizbtn">Quizshow buttons on the cheap</a></li><li><a href="?art=macsearm">Macintosh SE/arm</a></li><li><a href="?art=ledboardsolari">Solari ledboard controller</a></li><li><a href="?art=jello3dprinter">3d Jello printer</a></li><li><a href="?art=inker">Electronic Stamp</a></li><li><a href="?art=wcterror">Toilet terror alert</a></li><li><a href="?art=ledfanclock">Clock using a fan and a LED</a></li><li><a href="?art=streeplijst">Electronic beer tallier</a></li><li><a href="?art=knock2open">Knock to open</a></li><li><a href="?art=mechctr">Mechanical webpage hitcounter</a></li><li><a href="?art=ddrmat">Stealth DDR-mat</a></li><li><a href="?art=yamaharenewed">CM: Yamaha Renewed</a></li><li><a href="?art=bristlebot">Controllable bristlebot</a></li><li><a href="?art=novemini">NoveMini</a></li><li><a href="?art=xpad">Real HID for Xbox-controller</a></li><li><a href="?art=ledmatrix">96x48 LED-board</a></li><li><a href="?art=ucboost">Run an uC from an AA-battery</a></li><li><a href="?art=rocketlogger">Rocket acceleration logger</a></li><li><a href="?art=autobaud">Automatic baudrate converter</a></li><li><a href="?art=wtcpled">Temperature led for Weller WTCPs</a></li><li><a href="?art=minimalism">Electronic minimalism</a></li><li><a href="?art=rgbledlamp">RGB ledlamp</a></li><li><a href="?art=vfdcontroller">Simple VFD-controller</a></li><li><a href="?art=whiteboard">Online whiteboard</a></li></ul></li><li><a href="?art=hacks">Hacks</a></li><li><a href="?art=software">Software</a></li><li><a href="?art=consoles">Console hacking</a></li><li><a href="?art=security">Security</a></li><li><a href="?art=nabaztag">Nabaztag</a></li><li><a href="?art=about">About Spritesmods</a></li></ul></div>

<div id="right">
<div id="righttop">
<p /><strong>Page 1</strong><br />Intro, theory<p /><a href="?art=avrfmtx&amp;page=2"><strong>Page 2</strong><br /></a>The transmitter<p /><a href="?art=avrfmtx&amp;page=3"><strong>Page 3</strong><br /></a>Conclusion (+ discussion / remarks)<p>
</p>
</div>
<div id="rightbottom">
<p>
Do you like my hacking? If so, please consider leaving something in the<br />
</p>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_donations">
<input type="hidden" name="business" value="AWHK8LYRDDS3C">
<input type="hidden" name="lc" value="GB">
<input type="hidden" name="item_name" value="Spritesmods.com">
<input type="hidden" name="no_note" value="0">
<input type="hidden" name="cn" value="Remarks">
<input type="hidden" name="no_shipping" value="1">
<input type="hidden" name="rm" value="1">
<input type="hidden" name="return" value="http://spritesmods.com/?art=main&amp;thanks=1">
<input type="hidden" name="currency_code" value="EUR">
<input type="hidden" name="bn" value="PP-DonationsBF:donate.png:NonHosted">
<input type="image" src="http://spritesmods.com/donate.png" border="0" name="submit" alt="PayPal, de veilige en complete manier van online betalen.">
<!--
<img alt="" border="0" src="https://www.paypalobjects.com/nl_NL/i/scr/pixel.gif" width="1" height="1">
-->
</form>

<p>
Or use Bitcoins:<br />
<script src="btc/coin.js"></script>
<script>
CoinWidgetCom.go({
	wallet_address: "16wKm29FmTLmYSrDtBXB4zLYGsqfrTwcEC"
	, currency: "bitcoin"
	, counter: "count"
	, alignment: "bl"
	, qrcode: true
	, auto_show: false
	, lbl_button: "Donate"
	, lbl_address: "My Bitcoin Address:"
	, lbl_count: "donations"
	, lbl_amount: "BTC"
});
</script>
</p>


<p>
<br />Current contents:
<br />EUR181 (about $240.73) and a bunch of cool hardware.
</p>


<p>
Follow Spritesmods on <a href="http://twitter.com/SpritesMods">Twitter</a>!
</p>
</div>
</div>
<div id="center">
<p><h1>Intro, theory
</h1>
</p>
<!-- google_ad_section_start -->
<p style="float:right;margin: 10px 10px 0px 10px">
<img src="avrfmtx/ucplusradio.jpg" />
</p>
<p>
I think I may have built an FM-transmitter with the least amount of general-purpose 
parts ever.
</p>
<p>
To see how I arrived at that conclusion, you'll have to know how the clock system of
an ATTiny45 works. Just like almost every other AVR, this little 8-pin microcontroller
has the possibility of generating an 8MHz clock signal using an built-in oscillator.
This is quite handy when the AVR you're using has only a few pins; using the internal
oscillator, you free the two pins you normally connect a crystal to.</p>
<p>The internal RC oscillator, however, has two major disadvantages. When used directly,
the maximum clock limits the speed of the AVR: while most parts can run at 16 or 20 MHz,
the fixed 8MHz clock means an AVR is only half as quick as its maximum speed, at most.
The second problem is that the clock oscillator isn't precise: its speed can vary
tens of percents between parts. Atmel solved these problems in the later parts, like
the ATTiny45: First, they added a calibration register to tune the frequency of the 
RC-oscillator. They also pre-calibrated the RC-clock to 8MHz and stored the calibration
value to reach that inside the AVR. The performance problem (and other problems, like
slow PWM-speeds) they solved by adding a PLL to the AVR: this device takes the 8MHz
from the RC-oscillator and multiplies it by eight, spitting out a 64MHz signal. This is
then divided by 4, giving a nice 16MHz signal to run your AVR on.</p>
<p>With all that, the AVR (which has a maximum clock speed of 24MHz) can run on 16MHz
from its internal clock. Sometimes, even the 16MHz is not enough, and some time ago, I
found myself in a position where I could use that extra 4MHz. While browsing the datasheet,
I found a way to do that: by writing the right value in the RC oscillator calibration
register, you could make it run up to 50-100% quicker! So, I decided to take whatever
was in the register, add 50% and use that as the new calibration value. All of a
sudden, my AVR was running on a nice 24MHz.</p>
<p>Then I started thinking... if I overclock the AVR to 24MHz, the PLL runs at 4 times that 
frequency: 96MHz. Hmmm, that's smack dab in the middle of the FM radio band. FM means
Frequency Modulation, which basically means the signal an FM-transmitter spits out is
a carrier frequency, say 96MHz. That frequency is basically lowered and 
heightened a bit when the modulated audio signal is lower or higher. Hmm, using the
calibration register, I should be able to do that...
</p><!-- google_ad_section_end -->
<p>	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- singlebigad -->
	<ins class="adsbygoogle"
	     style="display:inline-block;width:728px;height:90px"
	     data-ad-client="ca-pub-6055011648930388"
	     data-ad-slot="3668631373"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
	</p><p id="prevnext">&nbsp;1&nbsp;<a href="?art=avrfmtx&amp;page=2">Next &raquo;</a></p><br /><div class="copy">&copy; 2006-2013 Sprite_tm - <a href="?art=contact&amp;af=AVR-based FM-transmitter">Contact</a></div></div>
</body>
</html>

