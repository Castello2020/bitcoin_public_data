http://www.gubatron.com/blog/2013/03/19/java-how-to-get-all-the-files-inside-a-folder-and-its-subfolders-without-recursion/
HTTP/1.0 200 OK
Access-Control-Allow-Origin: *
X-Powered-By: PHP/5.5.3-1ubuntu2.3
X-Pingback: http://www.gubatron.com/blog/xmlrpc.php
Content-Type: text/html; charset=UTF-8
Link: <http://www.gubatron.com/blog/?p=2941>; rel=shortlink
Connection: close
Date: Tue, 22 Jul 2014 23:25:14 GMT
Server: lighttpd/1.4.31

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta property="twitter:account_id" content="802225" />
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>  java: How to get all the files inside a folder and its subfolders without recursion - Gubatron.com</title>

<meta name="generator" content="WordPress 3.9.1" /> <!-- leave this for stats -->
<meta name="verify-v1" content="EpgZECmpkjevUtQqa3GsUiEbikJ+BDO6A84HBt4w8QI=" />
<link rel="stylesheet" href="http://www.gubatron.com/blog/wp-content/themes/gubatron_wp_theme/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Gubatron.com RSS Feed" href="http://www.gubatron.com/blog/feed/" />
<link rel="pingback" href="http://www.gubatron.com/blog/xmlrpc.php" />
<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="https://blockchain.info//Resources/wallet/pay-now-button.js"></script>
<style type="text/css" media="screen">

	#page { background: url("http://www.gubatron.com/blog/wp-content/themes/gubatron_wp_theme/images/kubrickbgwide.jpg") repeat-y top; border: none; } 
        #headerimg { background:url("http://www.gubatron.com/blog/wp-content/themes/gubatron_wp_theme/images/personalheader.jpg")}
</style>
</head>

<link rel="alternate" type="application/rss+xml" title="Gubatron.com &raquo; java: How to get all the files inside a folder and its subfolders without recursion Comments Feed" href="http://www.gubatron.com/blog/2013/03/19/java-how-to-get-all-the-files-inside-a-folder-and-its-subfolders-without-recursion/feed/" />
<link rel='stylesheet' id='shCore-css'  href='http://www.gubatron.com/blog/wp-content/plugins/syntax-highlighter/3.0.83/css/shCore.css?ver=3.0.83' type='text/css' media='all' />
<link rel='stylesheet' id='shCoreDefault-css'  href='http://www.gubatron.com/blog/wp-content/plugins/syntax-highlighter/3.0.83/css/shCoreDefault.css?ver=3.0.83' type='text/css' media='all' />
<link rel='stylesheet' id='shThemeDefault-css'  href='http://www.gubatron.com/blog/wp-content/plugins/syntax-highlighter/3.0.83/css/shThemeDefault.css?ver=3.0.83' type='text/css' media='all' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.gubatron.com/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.gubatron.com/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='jar dependencies if you plan to use the cling UPnP library in your android project' href='http://www.gubatron.com/blog/2013/03/12/jar-dependencies-if-you-plan-to-use-the-cling-upnp-library-in-your-android-project/' />
<link rel='next' title='Archive.org as a new search engine in FrostWire puts millions of free legal files in your hands.' href='http://www.gubatron.com/blog/2013/03/28/archive-org-as-a-new-search-engine-in-frostwire/' />
<meta name="generator" content="WordPress 3.9.1" />
<link rel='canonical' href='http://www.gubatron.com/blog/2013/03/19/java-how-to-get-all-the-files-inside-a-folder-and-its-subfolders-without-recursion/' />
<link rel='shortlink' href='http://www.gubatron.com/blog/?p=2941' />

<body>

<center>
<script type="text/javascript"><!--
google_ad_client = "pub-4974286288685153";
/* 728x90, created 1/27/10 */
google_ad_slot = "6932531894";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<div id="page">

<div id="header">
        <a href="http://www.gubatron.com">
	<div id="headerimg"></div>
        <div style="position:relative; top:-136px; left:300px; color:white; font-color:bold; width:420px"><a style="color:#fa0" href="http://twitter.com/gubatron" target="_blank">I bet you can't beat me in Guitar Hero. (Xbox Handle: GUBATRON)</a></div>
	</a>
</div>

<!-- Begin TranslateThis Button -->

<div style=""><form method="get" id="searchform" action="http://www.gubatron.com/blog/">
<input type="text" value2="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</form>
</div>

<!--<div id="translate-this" style="float:right; margin-top:10px; margin-right:40px; margin-bottom:10px;"><a href="http://translateth.is/" class="translate-this-button">Translate</a></div>-->

<!--
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://x.translateth.is/translate-this.js"></script>
<script type="text/javascript">
TranslateThis();
</script>
-->

<!-- End TranslateThis Button -->

<div id="content" class="widecolumn">

  
		<div class="navigation">
			<div class="alignleft">&laquo; <a href="http://www.gubatron.com/blog/2013/03/12/jar-dependencies-if-you-plan-to-use-the-cling-upnp-library-in-your-android-project/" rel="prev">jar dependencies if you plan to use the cling UPnP library in your android project</a></div>
			<div class="alignright"><a href="http://www.gubatron.com/blog/2013/03/28/archive-org-as-a-new-search-engine-in-frostwire/" rel="next">Archive.org as a new search engine in FrostWire puts millions of free legal files in your hands.</a> &raquo;</div>
		</div>
<br clear="all"/>

		<div class="post" id="post-2941">
			<h2><a href="http://www.gubatron.com/blog/2013/03/19/java-how-to-get-all-the-files-inside-a-folder-and-its-subfolders-without-recursion/" rel="bookmark" title="Permanent Link: java: How to get all the files inside a folder and its subfolders without recursion">java: How to get all the files inside a folder and its subfolders without recursion</a></h2>
			<small>March 19th, 2013 <span style="float:right">4 minutes reading time.</small></span>
<br/><br/><a href="http://twitter.com/share" class="twitter-share-button"
      data-url="http://www.gubatron.com/blog/2013/03/19/java-how-to-get-all-the-files-inside-a-folder-and-its-subfolders-without-recursion/"
      data-via="gubatron"
      data-text="java: How to get all the files inside a folder and its subfolders without recursion"
      data-related="gubatron:Founder of FrostWire"
      data-count="vertical">Tweet</a>
<br/>

			<div class="entrytext">
				<p>Most programmers will do this in a recursive fashion, but doing that is putting yourself at risk of hitting a stack overflow error, and it&#8217;s 20% slower (according to my tests). Here&#8217;s my first implementation of a method that will return just the files (cause I didn&#8217;t need the folders, you can always hack it to your needs). This is part of FrostWire for Android and FrostWire for Desktop, all the code is available under the GPL at our <a href="https://github.com/frostwire/frostwire-android" target="_blank">github repository</a>.</p>
<pre class="brush: java; auto-links: false;">
/** Given a folder path it&#039;ll return all the files contained within it and it&#039;s subfolders
     * as a flat set of Files.
     * 
     * Non-recursive implementation, up to 20% faster in tests than recursive implementation. <img src="http://www.gubatron.com/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> 
     * 
     * @author gubatron
     * @param folder
     * @param extensions If you only need certain files filtered by their extensions, use this string array (without the &quot;.&quot;). or set to null if you want all files. e.g. [&quot;txt&quot;,&quot;jpg&quot;] if you only want text files and jpegs.
     * 
     * @return The set of files.
     */
    public static Collection&lt;File&gt; getAllFolderFiles(File folder, String[] extensions) {
        Set&lt;File&gt; results = new HashSet&lt;File&gt;();
        Stack&lt;File&gt; subFolders = new Stack&lt;File&gt;();
        File currentFolder = folder;
        while (currentFolder != null &amp;&amp; currentFolder.isDirectory() &amp;&amp; currentFolder.canRead()) {
            File[] fs = null;
            try {
                fs = currentFolder.listFiles();
            } catch (SecurityException e) {
            }
            
            if (fs != null &amp;&amp; fs.length &gt; 0) {
                for (File f : fs) {
                    if (!f.isDirectory()) {
                        if (extensions == null || FilenameUtils.isExtension(f.getName(), extensions)) {
                            results.add(f);
                        }
                    } else {
                        subFolders.push(f);
                    }
                }
            }
            
            if (!subFolders.isEmpty()) {
                currentFolder = subFolders.pop();
            } else {
                currentFolder = null;
            }
        }
        return results;
    }    
</pre>
<p>Here&#8217;s the <a href="https://github.com/frostwire/frostwire-android/blob/master/src/common/com/frostwire/android/util/FilenameUtils.java" target="_blank">FilenameUtils</a> if you want the isExtension() implementation and it&#8217;s dependencies, you can always code your own there</p>


<center><div style="font-size:16px;margin:0 auto;width:300px" class="blockchain-btn"
     data-address="1JN3tP7XR5xTPA4nZc1BHwGWhTWaYJ7evi"
     data-shared="false">
    <div class="blockchain stage-begin">
        <img src="https://blockchain.info//Resources/buttons/donate_64.png"/>
    </div>
    <div class="blockchain stage-loading" style="text-align:center">
        <img src="https://blockchain.info//Resources/loading-large.gif"/>
    </div>
    <div class="blockchain stage-ready">
         <p align="center">Please Donate To Bitcoin Address: <b>[[address]]</b></p>
         <p align="center" class="qr-code"></p>
    </div>
    <div class="blockchain stage-paid">
         Donation of <b>[[value]] BTC</b> Received. Thank You.
    </div>
    <div class="blockchain stage-error">
        <font color="red">[[error]]</font>
    </div>
</div></center>

<center>
<div class="navigation" >
			<div class="alignleft">&laquo; <a href="http://www.gubatron.com/blog/2013/03/12/jar-dependencies-if-you-plan-to-use-the-cling-upnp-library-in-your-android-project/" rel="prev">jar dependencies if you plan to use the cling UPnP library in your android project</a></div>
			<div class="alignright"><a href="http://www.gubatron.com/blog/2013/03/28/archive-org-as-a-new-search-engine-in-frostwire/" rel="next">Archive.org as a new search engine in FrostWire puts millions of free legal files in your hands.</a> &raquo;</div>
<br clear="all/><br clear="all"/>
		</div>

<script type="text/javascript"><!--
google_ad_client = "pub-4974286288685153";
/* gubatron 336x280, created 11/9/09 */
google_ad_slot = "2359188765";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

				
				<p class="postmetadata alt">
					<small>
						This entry was posted
						 
						on Tuesday, March 19th, 2013 at 6:44 pm						and is filed under <a href="http://www.gubatron.com/blog/category/code/" title="View all posts in Code" rel="category tag">Code</a>.
						You can follow any responses to this entry through the <a href='http://www.gubatron.com/blog/2013/03/19/java-how-to-get-all-the-files-inside-a-folder-and-its-subfolders-without-recursion/feed/'>RSS 2.0</a> feed. 

													You can <a href="#respond">leave a response</a>, or <a href="http://www.gubatron.com/blog/2013/03/19/java-how-to-get-all-the-files-inside-a-folder-and-its-subfolders-without-recursion/trackback/" rel="trackback">trackback</a> from your own site.

						
					</small>
				</p>

			</div>
		</div>


	
<!-- You can start editing here. -->


   
		<!-- If comments are open, but there are no comments. -->

	 


<h3 id="respond">Leave a Reply</h3>


<form action="http://www.gubatron.com/blog/wp-comments-post.php" method="post" id="commentform">


<p><input type="text" name="author" id="author" value="" size="22" tabindex="1" />
<label for="author"><small>Name (required)</small></label></p>

<p><input type="text" name="email" id="email" value="" size="22" tabindex="2" />
<label for="email"><small>Mail (will not be published) (required)</small></label></p>

<p><input type="text" name="url" id="url" value="" size="22" tabindex="3" />
<label for="url"><small>Website</small></label></p>


<!--<p><small><strong>XHTML:</strong> You can use these tags: &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </small></p>-->

<p><textarea name="comment" id="comment" cols="100%" rows="10" tabindex="4"></textarea></p>

<p><input name="submit" type="submit" id="submit" tabindex="5" value="Submit Comment" />
<input type="hidden" name="comment_post_ID" value="2941" />
</p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="6c3865a5d5" /></p><script type='text/javascript' src='http://www.gubatron.com/blog/wp-includes/js/jquery/jquery.js?ver=1.11.0'></script>
<script type='text/javascript' src='http://www.gubatron.com/blog/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://www.gubatron.com/blog/wp-content/plugins/akismet/_inc/form.js?ver=3.0.0'></script>
<p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="237"/></p>
</form>



	
	</div>



<hr />
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link someone on your blog is the best way, it's our only promotion or advertising. -->
	<p>
	Follow me at <a href="http://twitter.com/gubatron">http://twitter.com/gubatron</a>
	</p>
</div>
</div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		<script type="text/javascript" src="http://www.gubatron.com/blog/wp-content/plugins/syntax-highlighter/3.0.83/js/shCore.js?ver=3.0.83"></script>
<script type="text/javascript" src="http://www.gubatron.com/blog/wp-content/plugins/syntax-highlighter/3.0.83/js/shBrushJava.js?ver=3.0.83"></script>
<script type="text/javascript">//<![CDATA[
SyntaxHighlighter.all();
//]]></script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-264950-3");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>
