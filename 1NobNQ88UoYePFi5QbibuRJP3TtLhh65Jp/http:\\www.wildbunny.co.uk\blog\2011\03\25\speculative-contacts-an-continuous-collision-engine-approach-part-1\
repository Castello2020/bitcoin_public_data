http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/
HTTP/1.0 200 OK
Date: Wed, 23 Jul 2014 22:10:39 GMT
Server: Apache/2.2.15 (CentOS)
X-Powered-By: PHP/5.3.3
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=k7jij865b6vjgha8377abdljj5; path=/
X-Pingback: http://www.wildbunny.co.uk/blog/xmlrpc.php
Link: <http://www.wildbunny.co.uk/blog/?p=171>; rel=shortlink
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 32441
Connection: close
Content-Type: text/html; charset=UTF-8

<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<title>Speculative Contacts &#8211; a continuous collision engine approach | Wildbunny blog</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://www.wildbunny.co.uk/blog/wp-content/themes/twentyten/style.css?v=0" />
<link rel="pingback" href="http://www.wildbunny.co.uk/blog/xmlrpc.php" />

<!-- BEGIN Metadata added by Add-Meta-Tags WordPress plugin
Get the plugin at: http://www.g-loaded.eu/2006/01/05/add-meta-tags-wordpress-plugin/ -->
<meta name="description" content="Hello and welcome back to my blog... Today i'm going to talk about a�continuous�collision detection�technique called Speculative Contacts which has been employed in games such as Little Big Planet PS3 and PSP versions. First of all we need to answer some basic questions." />
<meta name="keywords" content="collision detection, physics, silverlight, technical, collision detection, games, physics, simulation" />
<meta name="blogcatalog" content="9BC10671562" />
<div id="ScribCode634274886"></div>
<!-- END Metadata added by Add-Meta-Tags WordPress plugin -->

<link rel="alternate" type="application/rss+xml" title="Wildbunny blog &raquo; Feed" href="http://www.wildbunny.co.uk/blog/feed/" />
<link rel="alternate" type="application/rss+xml" title="Wildbunny blog &raquo; Comments Feed" href="http://www.wildbunny.co.uk/blog/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Wildbunny blog &raquo; Speculative Contacts &#8211; a continuous collision engine approach Comments Feed" href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/feed/" />
<link rel='stylesheet' id='bm-author-donations-style-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/bitmate-author-donations/style.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='cntctfrm_stylesheet-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/contact-form-plugin/css/style.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='cookielawinfo-style-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/cookie-law-info/css/cli-style.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='cookielawinfo-table-style-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/cookie-law-info/css/cli-tables.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='oikCSS-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/oik/oik.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='bwlinkCSS-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/oik/bwlink.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='wp125style-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/wp125/wp125.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='thsp-sticky-header-plugin-styles-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/sticky-header/css/public.css?ver=1.0.0' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='featured-post-css-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/featured-post.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='ws-plugin--s2member-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/s2member/s2member-o.php?ws_plugin__s2member_css=1&#038;qcABC=1&#038;ver=140105-140105-2848662513' type='text/css' media='all' />
<link rel='stylesheet' id='mr_social_sharing-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/style.css?ver=3.8.2' type='text/css' media='all' />
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/swfobj/swfobject.js?ver=2.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-includes/js/comment-reply.min.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-includes/js/jquery/jquery.js?ver=1.10.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/cookie-law-info/js/jquery.cookie.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/cookie-law-info/js/cookielawinfo.js?ver=3.8.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var StickyHeaderParams = {"show_at":"200","hide_if_narrower":"600"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/sticky-header/js/public.js?ver=1.0.0'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/script.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/googleplus.js.php?lang=en_US&#038;ver=3.8.2'></script>
<script type='text/javascript' src='http://apis.google.com/js/plusone.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://connect.facebook.net/en_US/all.js?ver=3.8.2#xfbml=1'></script>
<script type='text/javascript' src='http://platform.twitter.com/widgets.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.2'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.wildbunny.co.uk/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.wildbunny.co.uk/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='2d isometric land &#8211; breaking out of the grid update' href='http://www.wildbunny.co.uk/blog/2011/03/18/2d-isometric-land-breaking-out-of-the-grid-update/' />
<link rel='next' title='Isometric coordinate systems &#8211; the modern way' href='http://www.wildbunny.co.uk/blog/2011/03/27/isometric-coordinate-systems-the-modern-way/' />
<meta name="generator" content="WordPress 3.8.2" />
<link rel='canonical' href='http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/' />
<link rel='shortlink' href='http://www.wildbunny.co.uk/blog/?p=171' />
<script type="text/javascript" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/js/bubble.js"></script>
<link rel="stylesheet" type="text/css" href="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/css/style.css" />
<style type="text/css">
<!-- Silverlight WordPress Plugin -->
#silverlightControlHost{height:100%;}
</style>
<!-- Protected by WP-SpamFree v2.1.1.2 :: JS BEGIN -->
<script type="text/javascript" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/wp-spamfree/js/wpsfv2-js.php"></script> 
<!-- Protected by WP-SpamFree v2.1.1.2 :: JS END -->

		<style type="text/css">
			#thsp-sticky-header {
				background-color: #181818;
			}
			#thsp-sticky-header,
			#thsp-sticky-header a {
				color: #f9f9f9 !important;
			}
											</style>
	<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #EAEAEA; }
</style>
<!-- Google Analytics Tracking by Google Analyticator 6.2: http://ronaldheft.com/code/analyticator/ -->
<script type="text/javascript">window.google_analytics_uacct = "ca-pub-4897461488762721";</script>
<script type="text/javascript">
	var analyticsFileTypes = [''];
	var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16999711-1']);
	_gaq.push(['_trackPageview']);
	_gaq.push(['_trackPageLoadTime']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</head>

<body class="single single-post postid-171 single-format-standard custom-background">
<div id="wrapper" class="hfeed">
	<div id="header">
		<div id="masthead">
			<div id="branding" role="banner">
								<div id="site-title">
					<span>
						<a href="http://www.wildbunny.co.uk/blog/" title="Wildbunny blog" rel="home">Wildbunny blog</a>
					</span>
				</div>
				<div id="site-description">Developer knowledge centre</div>

										<img src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/02/bunnyWP1.gif" width="940" height="198" alt="" />
								</div><!-- #branding -->

			<div id="access" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="#content" title="Skip to content">Skip to content</a></div>
								<div class="menu-header"><ul id="menu-flowhub-header" class="menu"><li id="menu-item-272" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-272"><a href="/blog/">All articles</a></li>
<li id="menu-item-1302" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1302"><a href="http://www.wildbunny.co.uk/blog/vector-maths-a-primer-for-games-programmers/">Vector maths</a></li>
<li id="menu-item-319" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-319"><a href="http://www.wildbunny.co.uk/blog/contact-me/">Contact me</a></li>
<li id="menu-item-2072" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2072"><a href="http://www.wildbunny.co.uk/blog/hire-me/">Hire me</a></li>
<li id="menu-item-446" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-446"><a href="http://www.wildbunny.co.uk/blog/membership-sign-up-page/">Subscribe!</a></li>
<li id="menu-item-466" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-466"><a href="http://www.wildbunny.co.uk/blog/welcome-to-our-members-area/">Members</a></li>
<li id="menu-item-1183" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1183"><a href="/blog/buy-source-code">Buy source-code</a></li>
<li id="menu-item-1694" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1694"><a href="http://www.wildbunny.co.uk/blog/privacy-policy/">Privacy policy</a></li>
</ul></div>			</div><!-- #access -->
		</div><!-- #masthead -->
	</div><!-- #header -->

	<div id="main">

		<div id="container">
			<div id="content" role="main">


				<div id="nav-above" class="navigation">
					<div class="nav-previous"><a href="http://www.wildbunny.co.uk/blog/2011/03/18/2d-isometric-land-breaking-out-of-the-grid-update/" rel="prev"><span class="meta-nav">&larr;</span> 2d isometric land &#8211; breaking out of the grid update</a></div>
					<div class="nav-next"><a href="http://www.wildbunny.co.uk/blog/2011/03/27/isometric-coordinate-systems-the-modern-way/" rel="next">Isometric coordinate systems &#8211; the modern way <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-above -->

				<div id="post-171" class="post-171 post type-post status-publish format-standard hentry category-collision-detection-platform-game category-physics-2 category-silverlight-2 category-technical tag-collision-detection tag-games tag-physics tag-simulation">
					<h1 class="entry-title">Speculative Contacts &#8211; a continuous collision engine approach</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted on</span> <a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" title="2:40 pm" rel="bookmark"><span class="entry-date">March 25, 2011</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="http://www.wildbunny.co.uk/blog/author/paulfirth/" title="View all posts by Paul Firth">Paul Firth</a></span>					</div><!-- .entry-meta -->

					<div class="entry-content">
						<img width="150" height="21" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi1.png" class="attachment-single-post-thumbnail wp-post-image" alt="Iteration 1" />						
				<!-- Social Sharing Toolkit v2.0.4 | http://www.marijnrongen.com/wordpress-plugins/social_sharing_toolkit/ -->
				<div class="mr_social_sharing_wrapper"><span class="mr_social_sharing"><script type="text/javascript">
							  reddit_url = "http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/";
							  reddit_title = "Speculative Contacts – a continuous collision engine approach";
							</script>
							<script type="text/javascript" src="http://www.reddit.com/static/button/button1.js"></script></span><span class="mr_social_sharing"><a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" data-count="horizontal" data-text="Speculative Contacts – a continuous collision engine approach">Tweet</a></span><span class="mr_social_sharing"><iframe src="https://www.facebook.com/plugins/like.php?locale=en_US&amp;href=http%3A%2F%2Fwww.wildbunny.co.uk%2Fblog%2F2011%2F03%2F25%2Fspeculative-contacts-an-continuous-collision-engine-approach-part-1%2F&amp;layout=button_count&amp;show_faces=false&amp;width=90px&amp;height=21px" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90px; height:21px;" allowTransparency="true"></iframe></span><span class="mr_social_sharing"><div id="fb-root"></div><fb:send href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" font=""></fb:send></span><span class="mr_social_sharing"><g:plusone size="medium" href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/"></g:plusone></span><span class="mr_social_sharing"><a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Fwww.wildbunny.co.uk%2Fblog%2F2011%2F03%2F25%2Fspeculative-contacts-an-continuous-collision-engine-approach-part-1%2F&amp;title=Speculative+Contacts+%E2%80%93+a+continuous+collision+engine+approach" target="_blank" class="mr_social_sharing_popup_link"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/images/buttons/stumbleupon.png" alt="Submit to StumbleUpon" title="Submit to StumbleUpon"/></a></span></div><p>Hello and welcome back to my blog&#8230;</p>
<p>Today i&#8217;m going to talk about a�continuous�collision detection�technique called <em>Speculative Contacts</em> which has been employed in games such as Little Big Planet PS3 and PSP versions.</p>
<p>First of all we need to answer some basic questions.</p>
<h2>What is�continuous�collision detection?</h2>
<p>Continuous collision detection attempts to solve the bullet through paper problem as shown in Figure 1.</p>
<div id="attachment_172" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure11.png"><img class="size-medium wp-image-172" title="figure1" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure11-300x232.png" alt="" width="300" height="232" /></a><p class="wp-caption-text">Figure 1</p></div>
<p>In Figure 1, object A is travelling so fast that within one frame it has passed straight through object B.</p>
<p>With traditional time-stepping techniques (i.e. an intersection check on each frame), this case is missed.</p>
<p>This is the first part of the problem (and actually the easiest part to solve). The second part of the problem is how you deal with many simultaneous collisions within one frame, the so called Time Of Impact ordering problem.</p>
<div id="attachment_173" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure21.png"><img class="size-medium wp-image-173" title="figure2" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure21-300x139.png" alt="" width="300" height="139" /></a><p class="wp-caption-text">Figure 2</p></div>
<p>So in <em>Figure 2</em>, we&#8217;ve gone ahead and found the exact time of impact between <em>A </em>and <em>B </em>and we&#8217;re happy until <em>C </em>comes along and messes everything up by colliding with <em>A </em>before <em>A</em> collides with <em>B</em>.</p>
<p>This turns out to be a real pain in the ass in general because it means that the collision detection problem is no longer separated from the act of moving objects around, its now very closely tied to it which means everything suddenly gets a lot more expensive to compute.</p>
<p>To solve this problem you need to treat all collisions in TOI (Time Of Impact) order, from the earliest TOI in the scene to the latest.</p>
<p>And even if you do that, you might find that as you resolve each collision, the trajectory of the objects changes so much that now objects that you didn&#8217;t expect to be colliding at all, are now in fact colliding.</p>
<div id="attachment_175" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure31.png"><img class="size-medium wp-image-175" title="figure3" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure31-300x156.png" alt="" width="300" height="156" /></a><p class="wp-caption-text">Figure 3</p></div>
<p>In <em>Figure 3</em>, <em>A </em>collides with <em>B </em>and is resolved, but <em>A</em>&#8216;s new velocity causes it to collide with <em>C</em> which wasn&#8217;t originally expected by the collision system. This cannoning problem means that collision detection must be re-performed as each TOI impact is processed, which can get very expensive.</p>
<p>To mitigate this problem, typically each object is bounded by a box which contains the object at the start and end of the time-step, and then all such boxes which overlap are considered to reside within a TOI island, wherein any objects are candidates for collision with any other object in the island.</p>
<p>This is all very tiresome and expensive, it would be nice if there was just some magic solution to all these problems, or at least some acceptable approximation&#8230;</p>
<h2>Speculative Contacts</h2>
<p>Enter speculative contacts. The basic idea is to try and move the majority of the work out of the collision detection system and into the contact solver, which is designed for finding the &#8216;global correct solution&#8217; to problems involving many simultaneous interacting influences (either through <a href="http://www.bulletphysics.com/ftp/pub/test/physics/papers/IterativeDynamics.pdf">projected-gauss-seidel</a> ref: Erin Catto of the excellent <a href="http://www.box2d.org/">Box2d</a>, or other methods).</p>
<div id="attachment_179" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure4.png"><img class="size-medium wp-image-179" title="figure4" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure4-300x231.png" alt="" width="300" height="231" /></a><p class="wp-caption-text">Figure 4</p></div>
<p>In<em> Figure 4</em>, we compute the closest distance <em>d</em> between the two objects; the idea is that we want to remove exactly the right amount of velocity from <em>A </em>such that it will be exactly in touching contact with <em>B </em>on the next frame. This is the essence of the speculative contacts technique.</p>
<div id="attachment_181" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure5.png"><img class="size-medium wp-image-181" title="figure5" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure5-300x151.png" alt="" width="300" height="151" /></a><p class="wp-caption-text">Figure 5</p></div>
<p>Figure 5 shows where we want to see A on the next frame. Note that this is cheating slightly because we&#8217;re throwing away time &#8211; compared to Figure 3, you can see that the motion of A is cut short; it no longer rolls across B as it used to. It postpones the secondary motion of A to the next frame.</p>
<p>Its very important that the speculative contact do no work (i.e. not have any influence on other objects) unless the relative normal velocity is greater than the distance between the objects divided by the time-step.</p>
<div id="attachment_205" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure6.png"><img class="size-medium wp-image-205" title="figure6" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure6-300x151.png" alt="" width="300" height="151" /></a><p class="wp-caption-text">Figure 6</p></div>
<p>In Figure 6, <em>v.n</em> is less than the distance <em>d</em> (divided by time-step) &#8211; i.e. <em>A</em> will not touch <em>B</em> next frame, so the constraint should do nothing.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;">Contact con <span style="color: #008000;">=</span> contacts<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
Vector2 n <span style="color: #008000;">=</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_normal</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// get all of relative normal velocity</span>
<span style="color: #6666cc; font-weight: bold;">double</span> relNv <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">-</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Dot</span><span style="color: #008000;">&#40;</span>n<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// we want to remove only the amount which leaves them touching next frame</span>
<span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">=</span> relNv <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span><span style="color: #008000;">/</span>Constants<span style="color: #008000;">.</span><span style="color: #0000FF;">kTimeStep</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
	<span style="color: #008080; font-style: italic;">// compute impulse</span>
	<span style="color: #6666cc; font-weight: bold;">double</span> imp <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">/</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span> <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
	<span style="color: #008080; font-style: italic;">// apply impulse</span>
	con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">+=</span> imp <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
	con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">-=</span> imp <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>The above code fragment demonstrates the calculation involved to achieve the result in Figure 5, for a non rotating body. Note, this is simplified for�understandability.</p>
<h2>Stability</h2>
<p>Stability is a measure of how stable a simulation is &#8211; i.e how much jittering is present, or how well the simulation copes with big piles of objects.</p>
<p>I just wanted to compare and contrast the discrete method for collision resolution at this point because i think it will prove very interesting.</p>
<p>In discrete collision detection, the above code fragment might look like this:</p>
<p><em>UPDATE: since i wrote this article a number of people contacted me and quite rightly pointed out that i didn&#8217;t include any penetration resolution in the discrete solver; the main reason was that i didn&#8217;t want to make the discrete solver look worse than it was in the simplest of demos &#8211; i often found that penetration resolution would actually cause a solver to jitter more than if it weren&#8217;t there at all.</em></p>
<p><em>However, by not including it i made the more complex demos behave more poorly than they should have, since they would tend to sink and sag more than they should. I have since updated all the live demos and code snippits to include penetration resolution.</em></p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;">Contact con <span style="color: #008000;">=</span> contacts<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
Vector2 n <span style="color: #008000;">=</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_normal</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// get all of relative normal velocity</span>
<span style="color: #6666cc; font-weight: bold;">double</span> relNv <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">-</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Dot</span><span style="color: #008000;">&#40;</span>n<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// remove all of it + resolve penetration over the course of some frames</span>
<span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">=</span> relNv <span style="color: #008000;">+</span> <span style="color: #FF0000;">0.4</span> <span style="color: #008000;">*</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span> <span style="color: #008000;">+</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">/</span> Constants<span style="color: #008000;">.</span><span style="color: #0000FF;">kTimeStep</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// but only when objects are intersecting and moving towards each other</span>
<span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span> <span style="color: #008000;">&amp;&amp;</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
	<span style="color: #6666cc; font-weight: bold;">double</span> imp <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">/</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span> <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
	<span style="color: #008080; font-style: italic;">// apply impulse</span>
	con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">+=</span> imp <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
	con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">-=</span> imp <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>Note that probably you would never even get to the above code when the objects are separated in a discrete collision system (since why would you run the contact solver on separated objects?), but for comparison purposes i&#8217;ve converted the original code to be discrete.</p>
<p>Now, the actual difference between these two pieces of code is tiny, but the difference the speculative method makes to the stability of the simulation is <strong>amazing</strong>.</p>
<p>In all the demos on this page, the time-step is fixed to 1 / 30 of a second.</p>
<p><div id="silverlightControlHost0"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsSingleJitter2.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<p>You can pick the ball up by dragging it.</p>
<p>In this simple example, a frictionless ball is resting on the concave intersection of two rectangles; note the slight�jittery�motion of the ball. In this example there is no penetration resolution at all, and the solver defaults to the discrete code above running 1 iteration only.</p>
<p>The jittering present in this most simple of examples�exemplifies�the problem facing all physics engines which deal with the collision problem in a discrete manor &#8211; its a real PITA to solve.</p>
<p>The chief reason for it is this condition check (taken from the above code):</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008080; font-style: italic;">/*remove &lt; 0 &amp;&amp;*/</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
<span style="color: #008000;">...</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>The check for <em>intersection</em>. The reason this causes the jittering is because it forces the contact to activate and deactivate constantly as the collision is resolved and then unresolved frame after frame.</p>
<p>A quick trace of the number of contacts solved on the first few frames confirms it:</p>
<div id="_mcePaste">
<ol>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">2</span></li>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">2</span></li>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">2</span></li>
</ol>
</div>
<p>Now, click on the drop-down�labelled�&#8217;discrete&#8217; and change the mode to speculative. Notice the jittering is gone?</p>
<p>The same trace this time looks like this:</p>
<ol>
<li>2</li>
<li>0</li>
<li>1</li>
<li>2</li>
<li>2</li>
<li>2</li>
<li>2</li>
<li>2</li>
</ol>
<p>Much more pleasing &#8211; the resolved contact count�stabilises�quite quickly leading to a much more stable simulation.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">=</span> relNv <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span><span style="color: #008000;">/</span>Constants<span style="color: #008000;">.</span><span style="color: #0000FF;">kTimeStep</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
<span style="color: #008000;">...</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>The above is the speculative code; the only difference is the handling of what relative normal velocity to remove. The speculative code always removes enough of the relative normal velocity for the object to just touch the surface on the next frame. The contact is now not getting turned on/off so often, and this makes <em>all the difference</em>.</p>
<p><div id="silverlightControlHost1"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsMultiBall2.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<!-- Easy AdSense V2.79 -->
<!-- Post[count: 1] -->
<div class="ezAdsense adsense adsense-midtext" style="text-align:center;margin:12px; "><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- medi -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-4897461488762721"
     data-ad-slot="9797433564"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div><p>The above example defaults to a speculative solver, with a lot more balls. Note that there is still only one iteration! If you change the solver mode to discrete you can see the difference it makes.</p>
<p>I&#8217;ve included a sequential discrete solver in the drop down for comparison &#8211; even at 10 iterations the system isn&#8217;t fully resolved.</p>
<h2>Angular</h2>
<p>No article discussing continuous collision detection and resolution would be complete without attempting to address angular continuous collision. That is, when an object rotates very quickly it should still not miss collisions.</p>
<div id="attachment_222" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/Figure8.png"><img class="size-medium wp-image-222" title="Figure8" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/Figure8-300x196.png" alt="" width="300" height="196" /></a><p class="wp-caption-text">Figure 8</p></div>
<p>In Figure 8, we would still like to be able to detect the collision of A with B even though A is very thin and rotating very quickly.</p>
<p>Luckily, speculative contacts do trap this case, simply by using the closest points between objects a pretty good approximation can be made with the time of collision. Its not perfect, but it does a reasonable job.</p>
<p><div id="silverlightControlHost2"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsAngular.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<p>As you can see in the above demo, the collision is handled, although the exact point of collision can be slightly wrong in some cases.</p>
<p>It can also handle the following case which crops up a lot in production code.</p>
<div id="attachment_223" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/Figure9.png"><img class="size-medium wp-image-223" title="Figure9" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/Figure9-300x257.png" alt="" width="300" height="257" /></a><p class="wp-caption-text">Figure 9</p></div>
<p>In Figure 9, A is moving toward B quickly and with no rotation, the ensuing collision causes a fast rotation on A, which would cause the right side of A to penetrate B on the next frame. But by simply building the <em>contact set</em> as you would for any discrete collision system and adding both contacts, the case is handled just fine, even with only a few iterations of the solver.</p>
<p><div id="silverlightControlHost3"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsAngularHard.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<h2>Goodbye TOI ordering</h2>
<p>Ok, so now we have the simple stuff out of the way, we can get into the really interesting part; using a simple modification of the speculative code we can actually move the TOI ordering problem out of the collision detection system and into the constraint solver.</p>
<p>But first we need to cover the basics of using a solver to approach the globally correct solution to the problem of constraint resolution.</p>
<h2>Globally correct</h2>
<p>This is a little bit tricky to describe but it basically describes a situation where all constraints have been resolved, but only just &#8211; i.e there was no constraint after the solver has run which is over-resolved (too much correction).</p>
<p>The problem is mainly due to the uni-lateral�contact constraint, which is only allowed to &#8216;push&#8217; objects apart but never &#8216;pull&#8217; them together; otherwise objects would stick together like glue.</p>
<p>Because contacts are only allowed to push, they have no mechanism available to them to counter adjust themselves &#8211; imagine a situation where solving one contact causes another contact to be solved &#8216;too much&#8217; (relative normal velocity now positive rather than 0), this over corrected contact can do nothing about this problem. The result is an unstable simulation.</p>
<p>The solution is to use a solver, such as Erin Catto&#8217;s sequential impulse system which allows the uni-lateral constraints to push <em>and </em>pull during the iterations, but still ensures that the resulting final impulse only pushes. Please see his <a href="http://box2d.googlecode.com/files/GDC2006_ErinCatto.zip">GDC slides</a> for a much better�explanation.</p>
<p>If it sounds confusing, don&#8217;t worry, the actual code associated with it is rather simple by comparison.</p>
<h2>TOI joy</h2>
<p>Ok, so now we have a global solver we can finally tackle the TOI problem. What we do is make a small change to the speculative code:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;">Contact con <span style="color: #008000;">=</span> contacts<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
Vector2 n <span style="color: #008000;">=</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_normal</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// get all of relative normal velocity</span>
<span style="color: #6666cc; font-weight: bold;">double</span> relNv <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">-</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Dot</span><span style="color: #008000;">&#40;</span>n<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// we want to remove only the amount which leaves them touching next frame</span>
<span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">=</span> relNv <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span><span style="color: #008000;">/</span>Constants<span style="color: #008000;">.</span><span style="color: #0000FF;">kTimeStep</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// compute impulse</span>
<span style="color: #6666cc; font-weight: bold;">double</span> imp <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">/</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span> <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// accumulate</span>
<span style="color: #6666cc; font-weight: bold;">double</span> newImpulse <span style="color: #008000;">=</span> Math<span style="color: #008000;">.</span><span style="color: #0000FF;">Min</span><span style="color: #008000;">&#40;</span>imp <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_impulse</span>, <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// compute change</span>
<span style="color: #6666cc; font-weight: bold;">double</span> change <span style="color: #008000;">=</span> newImpulse <span style="color: #008000;">-</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_impulse</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// store accumulated impulse</span>
con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_impusle</span> <span style="color: #008000;">=</span> newImpulse<span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// apply impulse</span>
con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">+=</span> change <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">-=</span> change <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span></pre></td></tr></table></div>

<p>Notice the condition checking for negative relative normal velocity has gone, to be replaced by a clamp inside the impulse calculation, and the impulse is accumulated. This allows the system to converge towards the global solution.</p>
<p><div id="silverlightControlHost4"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsTOI.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<p>In the above demo, the balls are�constrained on the y axis (you can move them by dragging them) and the ghost balls represent where the solid colour balls will end up next frame.</p>
<p>In the start scenario of this demo, red collides first with blue before later colliding with green, which should leave red hanging in the air incorrectly, as per the diagram in Figure 7</p>
<div id="attachment_213" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure7.png"><img class="size-medium wp-image-213" title="figure7" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure7-300x216.png" alt="" width="300" height="216" /></a><p class="wp-caption-text">Figure 7</p></div>
<p>Because the mode is set to &#8216;speculative sequential&#8217;�this situation is handled correctly. If you change mode to simple &#8216;speculative&#8217; you will see the difference.</p>
<p>Here is a step by step of what is happening over a course of 3 iterations (remember its the ghost balls we want to see colliding with each other):</p>
<div id="attachment_214" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi1.png"><img class="size-medium wp-image-214" title="toi1" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi1-300x43.png" alt="" width="300" height="43" /></a><p class="wp-caption-text">Iteration 1</p></div>
<p>On the first iteration, red collides with blue first before green collides with blue at an earlier TOI leaving red in the air as per usual.</p>
<div id="attachment_215" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi2.png"><img class="size-medium wp-image-215" title="toi2" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi2-300x40.png" alt="" width="300" height="40" /></a><p class="wp-caption-text">Iteration  2</p></div>
<p>On the second iteration, the motion of red which was postponed is now allowed to continue by the global solver (allowing pull as well as push during the iterations), but the collision isn&#8217;t resolved yet.</p>
<div id="attachment_216" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi3.png"><img class="size-medium wp-image-216" title="toi3" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi3-300x29.png" alt="" width="300" height="29" /></a><p class="wp-caption-text">Iteration 3</p></div>
<p>The third iteration sees the solution converging to the correct global solution.</p>
<p>By moving the TOI ordering problem inside the constraint solver like this, we completely avoid having to do all the hard work in the collision detection phase.</p>
<p>The number of solver iterations used will affect the quality of the result, as ever.</p>
<h2>Other advantages</h2>
<p>I just wanted to touch on a few other advantages that speculative contacts give:</p>
<ul>
<li>No collision threshold required &#8211; because we don&#8217;t have the discrete collision problem of toggling between colliding/not colliding we don&#8217;t need to mitigate this by having a collision threshold around objects.</li>
<li>No inner hull required &#8211; now that distance is a�fundamental�part of the constraint system we don&#8217;t need to try and avoid penetration by shrinking our collision hulls by some radius which can cause problems with�triangular�objects.</li>
<li>No need to distinguish between objects which are considered to be &#8216;fast&#8217; and have special treatment in collision detection terms. All objects can go through the same system. This means you can have things which have previously been impossible, like a fast moving stack of blocks which all collide with the floor and each other.</li>
</ul>
<h2>Problems</h2>
<p>Of course no technique is without its associated problems. The most notable problem suffered by speculative contacts is the problem of so called &#8216;ghost&#8217; collisions.</p>
<div id="attachment_226" style="width: 265px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure10.png"><img class="size-medium wp-image-226" title="figure10" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure10-255x300.png" alt="" width="255" height="300" /></a><p class="wp-caption-text">Figure 10</p></div>
<p>In Figure 10, the closest points between A and B are shown, but due to the motion of A, a ghost collision will be generated where A incorrectly collides with the plane of the collision normal on B.</p>
<p>In practice the problem is less apparent for circles than it is for polygons. The correct way to solve this problem is to use a technique such as <a href="http://www.continuousphysics.com/BulletContinuousCollisionDetection.pdf">Conservative Advancement</a>, ref Erwin Coumans of <a href="http://www.bulletphysics.org/">Bullet </a>fame, rather than a simple closest points between objects approach as detailed in this article.</p>
<p>The second problem is that if an object is warped into severe penetration it will tend to ping back out again rather than smoothly correct to zero penetration. This can be solved by splitting the distance equation up for negative / positive, but i&#8217;ve not included that in this article for clarity&#8217;s sake.</p>
<h2>Update</h2>
<p>I just realised i&#8217;ve committed a physics faux par by not including a demo of the physics engine &#8216;hello world&#8217; &#8211; the traditional Pile &#8216;O Boxes. So here it is, for your delectation. Running in only 3 iterations, the stability is impressive. I&#8217;ve updated the source code to contain this demo as well &#8211; if you already bought it and want this, just post a comment and i&#8217;ll email you the updated code for free <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p><div id="silverlightControlHost5"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsPileOBoxes2.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<h2>Conclusion</h2>
<p>I believe that speculative contacts are very well suited to physics simulation in computer games where the requirement for speed over absolute accuracy is a good fit for the technique. If you still remain unconvinced, buy a copy of Little Big Planet and have a play around with the &#8216;create mode&#8217; &#8211; see if you can break it; its pretty robust.</p>
<h2>Source code</h2>
<p>If you found this article useful and would like to see more like this, please consider buying the source-code which i have made available on this page for a small cost &#8211; this will allow an indie developer like me to justify his�existence�for another month, and more importantly pay for things like food and rent!</p>
<p>After purchasing, you will be redirected to a page where you can download the source-code of every example in this article, written in c# and requires silverlight to build.</p>
<p>USD 19.99<br />
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
 <input type="hidden" name="business" value="paypal@wildbunny.co.uk" />
 <input type="hidden" name="cmd" value="_xclick" />
 <!-- Instant Payment Notification & Return Page Details -->
 <input type="hidden" name="notify_url" value="http://www.wildbunny.co.uk/blog/?s2member_paypal_notify=1" />
 <input type="hidden" name="cancel_return" value="http://www.wildbunny.co.uk/blog/" />
 <input type="hidden" name="return" value="http://www.wildbunny.co.uk/blog/?s2member_paypal_return=1" />
 <input type="hidden" name="rm" value="2" />
 <!-- Configures Basic Checkout Fields -->
 <input type="hidden" name="lc" value="" />
 <input type="hidden" name="no_shipping" value="1" />
 <input type="hidden" name="no_note" value="1" />
 <input type="hidden" name="custom" value="www.wildbunny.co.uk" />
 <input type="hidden" name="currency_code" value="USD" />
 <input type="hidden" name="page_style" value="paypal" />
 <input type="hidden" name="charset" value="utf-8" />
 <input type="hidden" name="item_name" value="Speculative contacts source" />
 <input type="hidden" name="item_number" value="sp:420:72" />
 <input type="hidden" name="amount" value="19.99" />
 <!-- Configures s2Member's Unique Invoice ID/Code  -->
 <input type="hidden" name="invoice" value="53d032df5a171~54.226.161.112" />
 <!-- Associates Purchase With A User/Member (when/if applicable) -->
 <input type="hidden" name="on0" value="Originating Domain" />
 <input type="hidden" name="os0" value="www.wildbunny.co.uk" />
 <!-- Identifies The Customer's IP Address For Tracking -->
 <input type="hidden" name="on1" value="Customer IP Address" />
 <input type="hidden" name="os1" value="54.226.161.112" />
 <!-- Displays The PayPal Image Button -->
 <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif" style="width:auto; height:auto; border:0;" alt="PayPal" />
</form></p>
<p><a href="http://www.wildbunny.co.uk/blog/welcome-to-our-members-area/">Subscribers can access the source here</a></p>
<p>Have fun,</p>
<p>Cheers, Paul.</p>

				<!-- Social Sharing Toolkit v2.0.4 | http://www.marijnrongen.com/wordpress-plugins/social_sharing_toolkit/ -->
				<div class="mr_social_sharing_wrapper"><span class="mr_social_sharing"><script type="text/javascript">
							  reddit_url = "http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/";
							  reddit_title = "Speculative Contacts – a continuous collision engine approach";
							</script>
							<script type="text/javascript" src="http://www.reddit.com/static/button/button1.js"></script></span><span class="mr_social_sharing"><a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" data-count="horizontal" data-text="Speculative Contacts – a continuous collision engine approach">Tweet</a></span><span class="mr_social_sharing"><iframe src="https://www.facebook.com/plugins/like.php?locale=en_US&amp;href=http%3A%2F%2Fwww.wildbunny.co.uk%2Fblog%2F2011%2F03%2F25%2Fspeculative-contacts-an-continuous-collision-engine-approach-part-1%2F&amp;layout=button_count&amp;show_faces=false&amp;width=90px&amp;height=21px" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90px; height:21px;" allowTransparency="true"></iframe></span><span class="mr_social_sharing"><div id="fb-root"></div><fb:send href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" font=""></fb:send></span><span class="mr_social_sharing"><g:plusone size="medium" href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/"></g:plusone></span><span class="mr_social_sharing"><a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Fwww.wildbunny.co.uk%2Fblog%2F2011%2F03%2F25%2Fspeculative-contacts-an-continuous-collision-engine-approach-part-1%2F&amp;title=Speculative+Contacts+%E2%80%93+a+continuous+collision+engine+approach" target="_blank" class="mr_social_sharing_popup_link"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/images/buttons/stumbleupon.png" alt="Submit to StumbleUpon" title="Submit to StumbleUpon"/></a></span></div><span style="clear:both;display:none;"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/wp-spamfree/img/wpsf-img.php" width="0" height="0" alt="" style="border-style:none;width:0px;height:0px;display:none;" /></span>											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=60&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar -->
						<div id="author-description">
							<h2>About Paul Firth</h2>
							A games industry veteran of ten years, seven of which spent at Sony Computer Entertainment Europe, he has had key technical roles on triple-A titles like the Bafta Award Winning Little Big Planet (PSP), 24: The Game (PS2), special effects work on Heavenly Sword (PS3), some in-show graphics on the BBC�s version of Robot Wars, the TV show, as well as a few more obscure projects.
&nbsp;
Now joint CEO of Wildbunny, he is able to give himself hiccups simply by coughing.
&nbsp;
1NobNQ88UoYePFi5QbibuRJP3TtLhh65Jp							<div id="author-link">
								<a href="http://www.wildbunny.co.uk/blog/author/paulfirth/">
									View all posts by Paul Firth <span class="meta-nav">&rarr;</span>								</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description -->
					</div><!-- #entry-author-info -->

					<div class="entry-utility">
						This entry was posted in <a href="http://www.wildbunny.co.uk/blog/category/platform-game/collision-detection-platform-game/" title="View all posts in Collision Detection" rel="category tag">Collision Detection</a>, <a href="http://www.wildbunny.co.uk/blog/category/physics-2/" title="View all posts in Physics" rel="category tag">Physics</a>, <a href="http://www.wildbunny.co.uk/blog/category/silverlight-2/" title="View all posts in Silverlight" rel="category tag">Silverlight</a>, <a href="http://www.wildbunny.co.uk/blog/category/technical/" title="View all posts in Technical" rel="category tag">Technical</a> and tagged <a href="http://www.wildbunny.co.uk/blog/tag/collision-detection/" rel="tag">collision detection</a>, <a href="http://www.wildbunny.co.uk/blog/tag/games/" rel="tag">games</a>, <a href="http://www.wildbunny.co.uk/blog/tag/physics/" rel="tag">physics</a>, <a href="http://www.wildbunny.co.uk/blog/tag/simulation/" rel="tag">simulation</a>. Bookmark the <a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" title="Permalink to Speculative Contacts &#8211; a continuous collision engine approach" rel="bookmark">permalink</a>.											</div><!-- .entry-utility -->
				</div><!-- #post-## -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://www.wildbunny.co.uk/blog/2011/03/18/2d-isometric-land-breaking-out-of-the-grid-update/" rel="prev"><span class="meta-nav">&larr;</span> 2d isometric land &#8211; breaking out of the grid update</a></div>
					<div class="nav-next"><a href="http://www.wildbunny.co.uk/blog/2011/03/27/isometric-coordinate-systems-the-modern-way/" rel="next">Isometric coordinate systems &#8211; the modern way <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
			<div id="comments">


			<h3 id="comments-title">167 Responses to <em>Speculative Contacts &#8211; a continuous collision engine approach</em></h3>

			<div class="navigation">
				<div class="nav-previous"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comments" ><span class="meta-nav">&larr;</span> Older Comments</a></div>
				<div class="nav-next"></div>
			</div> <!-- .navigation -->

			<ol class="commentlist">
					<li class="comment even thread-even depth-1" id="li-comment-3534">
		<div id="comment-3534">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/6fe10b9f0a5a73fba68e5b62af98d66a?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Xiaoyu</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3534">
			October 29, 2013 at 1:53 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul,</p>
<p>I am wondering how to handle rotation in a speculative solver. Is the angular velocity also removed to ensure that on the next frame the two colliding bodies are just touching each other? Or we respectively compute translational velocity in a speculative way and rotational response in a discrete way?</p>
<p>Thanks, Xiaoyu</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3534#respond' onclick='return addComment.moveForm("comment-3534", "3534", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3535">
		<div id="comment-3535">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3535">
			October 29, 2013 at 9:22 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Xiaoyu,</p>
<p>We use chris hecker&#8217;s impulse equation which solves for both angular and linear velocities, with a couple of additions to make it handle speculative contacts.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3535#respond' onclick='return addComment.moveForm("comment-3535", "3535", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3541">
		<div id="comment-3541">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/f518e43b19fc82a32e6918c325bbb7d0?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ilpo Nikulainen</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3541">
			November 4, 2013 at 2:12 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Paul,</p>
<p>I have succeeded in my experiments with SC + bounces, frictions, joints and flexible bodies in 3D. One thing though for what I haven&#8217;t found a solution is the sleep control of the model objects.</p>
<p>My current (non-functioning) solution puts the objects to sleep when their filtered movement is below a given threshold. And after a collision the objects will be awaken recursively as long as there exists resting contacts or joints. Resting contacts (ie. wake-up-linkedlists in the counterpart objects) are formed up when the sleep controller detects that both colliding objects are going to sleep at the same model update interval. When an object is in sleep, no movement is calculated for it and it is not used as a collision test source.</p>
<p>With Speculative Contacts, I&#8217;m between two conflicting requirements:<br />
A) all the potential colliding objects should be awake before computing the speculation to prevent undetected collisions; Even the objects in middle of a chain shall become a collision test source. I don&#8217;t see re-speculation rounds as an option.<br />
B) On the other hand the objects will be awaken only after there is some activity on it through it&#8217;s resting contacts or joints.</p>
<p>Have you succeeded with the SC + sleep control?</p>
<p>I can see an alternative approach which would use the broad phase collision detection for waking up the objects: take big enough bounding box and wake up everything inside it. But it would be quite inefficient and still there could exist chains of objects reaching outside the box and would not get included in the contact speculation.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3541#respond' onclick='return addComment.moveForm("comment-3541", "3541", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-2" id="li-comment-3542">
		<div id="comment-3542">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/f518e43b19fc82a32e6918c325bbb7d0?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ilpo Nikulainen</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3542">
			November 4, 2013 at 8:28 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I would make an obvious correction the requirement &#8220;B&#8221;: the objects shall be awaken also (and primarily) when a speculative contact does work on them.</p>
<p>I appreciate your patience <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":-)" class="wp-smiley" /> </p>
<p>Regards, Ilpo</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3542#respond' onclick='return addComment.moveForm("comment-3542", "3542", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3544">
		<div id="comment-3544">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3544">
			November 5, 2013 at 9:22 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Ilpo,</p>
<p>Sleep control is one of the hardest things to get looking right &#8211; all the things you&#8217;ve mentioned are the problems that everybody needs to consider when implementing something like this. Although, I don&#8217;t think adding speculative contacts vs discrete contacts has much impact on the behaviour this.</p>
<p>In general, any external forces should recursively wake any objects in a group. And objects in a group should only sleep either all at once or not at all.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3544#respond' onclick='return addComment.moveForm("comment-3544", "3544", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-3545">
		<div id="comment-3545">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/f518e43b19fc82a32e6918c325bbb7d0?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ilpo Nikulainen</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3545">
			November 5, 2013 at 10:58 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Paul,</p>
<p>Thank you for the useful information, once again.</p>
<p>I agree that adding speculative contacts vs discrete contacts does not have much impact on the behaviour. However, I&#8217;m afraid that as speculative contacts moves the computation from the collision detection to the collision response calculation, increasing size of the &#8220;clearance space&#8221; (ie. bounding boxes) in the broad phase collision detection will make much greater effect on performance than it would make when there would exist a narrow phase collision detection (as exists in a discrete contacts method).</p>
<p>In any case it is relevant to minimize the &#8220;clearance space&#8221;, perhaps by using a maximum speed parameter in the broad phase detection. </p>
<p>From your answer I also realized that if the recursive put-to-sleep procedure hits to a not-ready-to-sleep object, the whole procedure shall be cancelled in the inverse way, and the procedure should not be initiated anymore to those objects on this model update interval. I also need to add the wake-up to happen when the external forces like gravity and user input are changing.</p>
<p>Regards, Ilpo</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3545#respond' onclick='return addComment.moveForm("comment-3545", "3545", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3548">
		<div id="comment-3548">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8754a7f303744e828ae886dc0827e9dc?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://kaeel.blogspot.it/' rel='external nofollow' class='url'>Kaeel</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3548">
			November 10, 2013 at 8:12 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul, your pages are still open on my browser since a lot of days <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_razz.gif" alt=":P" class="wp-smiley" /><br />
I tried to implement the speculative contacts technique: to get the minimum distance vector, I implemented the Poly VS Poly strategy you suggested here <a href="http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/" rel="nofollow">http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/</a><br />
and it works very well (vectors and distances calculations seem very accurate). </p>
<p>Now, I&#8217;m not able to find a solution to this problem: after removing the normal component of the velocity and moving the polygon, it stops exactly in the position of contact (and this is good!).<br />
The problem is that on the following frame, the distance vector between the 2 polygons is zero so, when I normalize it to get the &#8216;n&#8217; versor, I get another vector with both components equal to zero.<br />
At this point, the projection of the remaining velocity on that vector gives zero, nothing is removed and the polygon continues to move with reduced velocity. </p>
<p>What could be a solution to this problem?<br />
Maybe there&#8217;s some operation I&#8217;m missing before updating position (such as adding a small offset in the correction, so that next distance will never be equal to zero) or there may be something wrong in the way I compute distance when it&#8217;s zero? </p>
<p>Ty again for the support, these articles are very good in trying to learn how these techniques work!</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3548#respond' onclick='return addComment.moveForm("comment-3548", "3548", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3549">
		<div id="comment-3549">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3549">
			November 10, 2013 at 8:27 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Kaeel,</p>
<p>The collision normal comes from the edge normal of the closest feature &#8211; either from poly A or B, you should have that information available to you already. <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3549#respond' onclick='return addComment.moveForm("comment-3549", "3549", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment even depth-3" id="li-comment-3550">
		<div id="comment-3550">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8754a7f303744e828ae886dc0827e9dc?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://kaeel.blogspot.it/' rel='external nofollow' class='url'>Kaeel</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3550">
			November 10, 2013 at 9:26 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Upz, that&#8217;s right, I really didn&#8217;t figure that out. I just tried to adapt the code and now it works perfectly, THANK YOU! <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3550#respond' onclick='return addComment.moveForm("comment-3550", "3550", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3560">
		<div id="comment-3560">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3560">
			November 20, 2013 at 8:55 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>So I am trying to make something like the scene with one dynamic ball and the concave static walls. However, from what I have right now, the velocity is slowed almost to a halt after it hits the polygon when it should continue with only a slightly reduced velocity. Do you have any idea what the problem might be?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3560#respond' onclick='return addComment.moveForm("comment-3560", "3560", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3561">
		<div id="comment-3561">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3561">
			November 20, 2013 at 9:07 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Joshua,</p>
<p>Afraid not &#8211; without seeing it, it&#8217;s very hard to understand what could be wrong <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Best bet is to debug it.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3561#respond' onclick='return addComment.moveForm("comment-3561", "3561", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-3562">
		<div id="comment-3562">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3562">
			November 20, 2013 at 10:28 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Thanks. Ill figure it out then (Thanks for the quick response btw). I have got another question too. What about in a situation like this:</p>
<p><a href="http://postimg.org/image/klhmtdqa3/" rel="nofollow">http://postimg.org/image/klhmtdqa3/</a></p>
<p>Where the blue ball is dynamic and its velocity is in the direction of the arrow and the triangle is static. According to speculative contacts, wouldn&#8217;t this remove all of the ball&#8217;s velocity since it is already in contact with the static triangle? This would result in really weird results&#8230; or am I wrong?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3562#respond' onclick='return addComment.moveForm("comment-3562", "3562", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-4" id="li-comment-3563">
		<div id="comment-3563">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3563">
			November 20, 2013 at 10:32 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>It removes velocity only in the direction of the contact normal. Other velocity will still remain. <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3563#respond' onclick='return addComment.moveForm("comment-3563", "3563", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-5" id="li-comment-3564">
		<div id="comment-3564">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3564">
			November 21, 2013 at 1:12 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Great! Thanks! That was the solution to the first problem as well. Also, as you seem to be the physics expert, what would I use for the normal if the ball collided with a vertex?</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-5" id="li-comment-3566">
		<div id="comment-3566">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3566">
			November 21, 2013 at 9:12 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>In that case the normal will change every frame the ball moves &#8211; it is the normalised vector between the vertex and the ball centre.</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-3568">
		<div id="comment-3568">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3568">
			November 21, 2013 at 3:14 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>is there any way I can solve the issue where the ball is no longer colliding because it is sitting on the static body and is now (I think due to rounding error) no longer considering on top of the static body because it is inside. What I mean is that I think due to rounding error, the ball is no longer on top but inside the static body? Do you understand? Sorry for the bad explanation. Thanks.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3568#respond' onclick='return addComment.moveForm("comment-3568", "3568", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3569">
		<div id="comment-3569">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3569">
			November 21, 2013 at 3:16 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>It shouldn&#8217;t matter if the ball is right in the middle of the static body &#8211; there should always be a shortest direction out to leave them just touching. The collision detection routine must cope with this case as well.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3569#respond' onclick='return addComment.moveForm("comment-3569", "3569", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3570">
		<div id="comment-3570">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3570">
			November 21, 2013 at 5:26 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I was just thinking that if I did it right because i am only using one dynamic body I could just use SC without penetration resolution.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3570#respond' onclick='return addComment.moveForm("comment-3570", "3570", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3571">
		<div id="comment-3571">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3571">
			November 21, 2013 at 5:36 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>No, this is basically lesson number 1 in physics simulations: penetration will always occur somewhere, so you have to deal with it <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3571#respond' onclick='return addComment.moveForm("comment-3571", "3571", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-3572">
		<div id="comment-3572">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3572">
			November 21, 2013 at 6:08 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Ok. So then how would I deal with a ball at a corner where it has two contact points?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3572#respond' onclick='return addComment.moveForm("comment-3572", "3572", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3573">
		<div id="comment-3573">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3573">
			November 21, 2013 at 8:49 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>A circle never has more than one contact point with another convex object.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3573#respond' onclick='return addComment.moveForm("comment-3573", "3573", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3574">
		<div id="comment-3574">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3574">
			November 21, 2013 at 9:16 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I know that but what about if two convex objects from a concave object. Sorry if what I previously said was confusing.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3574#respond' onclick='return addComment.moveForm("comment-3574", "3574", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3575">
		<div id="comment-3575">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3575">
			November 21, 2013 at 9:20 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Just take things one by one (i.e. one pair of convex objects) and iterate over all contacts. Otherwise things just get too complex to deal with.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3575#respond' onclick='return addComment.moveForm("comment-3575", "3575", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-3576">
		<div id="comment-3576">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/397498b9076970394971dd04abb49a0b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ricardo Baptista</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3576">
			November 22, 2013 at 4:34 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul!</p>
<p>In the speculative contact approach, if there is bouncing involved (coeffiecient of restitution &gt; 0) then the two objects are not expected to be perfectly touching in the next frame, but already slightly apart (due to restitution), right? So they will never really touch/penetrate?<br />
If it is the case, then to make this happen should I remove not only the amount to leave they touching, but also some amount (restitution) (using Chris Hecker impulse resolution formula) so they start to move in opposite directions? I mean:<br />
double remove = (1 + e) * relNv + con.m_dist/Constants.kTimeStep;<br />
If that is right, should I expect some decrease in speed along the normal after a bounce (even when restitution is 1.0), because I just clipped con.m_dist/Constants.kTimeStep from the original velocity?</p>
<p>Thanks!</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3576#respond' onclick='return addComment.moveForm("comment-3576", "3576", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3577">
		<div id="comment-3577">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3577">
			November 22, 2013 at 8:20 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Ricardo,</p>
<p>Unfortunately, speculative contacts does not work with non zero restitution coefficients.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3577#respond' onclick='return addComment.moveForm("comment-3577", "3577", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-3578">
		<div id="comment-3578">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/397498b9076970394971dd04abb49a0b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ricardo Baptista</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3578">
			November 22, 2013 at 12:58 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi, Paul!</p>
<p>Thanks for the fast reply.<br />
So, was that what you meant by &#8220;the coefficient of restitution is never required to be non-0&#8243; on the &#8220;Physics engines for dummies&#8221; article when you solved the problem of balls penetrating each other?<br />
Then a good option would be to use the discrete sequencial approach for bouncing objects and the speculative for non-bouncing pairs? Is it ok to merge the two strategies by checking the restitution factor of a pair and decrease their velocities (speculative) only if they don&#8217;t bounce? And handle the other (bouncing) pairs by the discrete way?</p>
<p>Cheers</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3578#respond' onclick='return addComment.moveForm("comment-3578", "3578", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-4" id="li-comment-3579">
		<div id="comment-3579">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3579">
			November 22, 2013 at 1:33 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I think I also mention this in the spec contacts article as well. You could mix and match solvers quite easily, actually &#8211; IIRC I&#8217;ve done this before and it works fine <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3579#respond' onclick='return addComment.moveForm("comment-3579", "3579", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-5" id="li-comment-3580">
		<div id="comment-3580">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/397498b9076970394971dd04abb49a0b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ricardo Baptista</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3580">
			November 22, 2013 at 2:11 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Great &#8211; thanks for sharing the knowledge.</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3581">
		<div id="comment-3581">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3581">
			November 23, 2013 at 4:19 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Thanks so much for your help so far. I have been trying to solbe a problem and I really have had a hard time, Maybe you could help me. What I am trying to do is particle (or small circle) against convex polygon collision. What I have works, but only if the convex polygons don&#8217;t make up concave polygons because then the particles fall through the cracks in between the convex polygons. Anything you could do to help me would be very appreciated. Thanks.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3581#respond' onclick='return addComment.moveForm("comment-3581", "3581", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3583">
		<div id="comment-3583">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3583">
			November 23, 2013 at 8:50 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>The only thing you can do is to make sure your particles have a radius &#8216;big enough&#8217; to stop them falling through.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3583#respond' onclick='return addComment.moveForm("comment-3583", "3583", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3582">
		<div id="comment-3582">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3582">
			November 23, 2013 at 5:00 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I got some particle based liquid physics working so now I am trying to get it to collide with the world which consists of static convex objects</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3582#respond' onclick='return addComment.moveForm("comment-3582", "3582", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3596">
		<div id="comment-3596">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/6344e5a739d267a74941da9dc88bc560?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://jeaton.matero.net' rel='external nofollow' class='url'>Jason Eaton</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3596">
			December 20, 2013 at 5:42 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi, </p>
<p>This was a great series of articles!!!  I have been trying to get a good simple platformer engine for a long time now, and this seemed to be the last piece of the puzzle.  Check out my demo:</p>
<p><a href="http://jeaton.matero.net/misc/PlatformTestBed.html" rel="nofollow">http://jeaton.matero.net/misc/PlatformTestBed.html</a></p>
<p>It is funny, we were having the exact same thoughts about wanting a simple engine like the old snes and nes games (I read the same MC kids article for my independent study in college).  This current version does not use speculative contacts quite like yours does, but I did come to the current form from implementing them your way for a bit.  This current engine actually guarantees that there is no penetration using a very simplified sweep that is almost like a speculative contact (there are some ghost collisions, but not noticeable)  Except there is one case where an object is wedged between two other objects and penetration is forced.  (no rotations are used to achieve this).  </p>
<p>Now for my question, could you go into a little more depth on how you do the rotation speculative contact?  If an object has a velocity, and angular velocity, I&#8217;m not sure where to stop it exactly.  No rotation is easy, just clip the velocity with the normal of the closest features, but I&#8217;m not sure how you would go about clipping a rotational velocity?  And deciding if the normal velocity should be clipped as well?  </p>
<p>Thanks for the great article!</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3596#respond' onclick='return addComment.moveForm("comment-3596", "3596", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3600">
		<div id="comment-3600">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3600">
			December 24, 2013 at 11:32 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Jason,</p>
<p>I&#8217;m afraid the answer to your question is outside the scope of this reply. The fully correct solution involves solving an equation which deals with both the linear and angular velocity of the contact point, producing an impulse vector.</p>
<p>I wrote an article which just deals with rotation, which should give you a clearer picture of how that part works, but the full solution is rather mathsy to say the least.</p>
<p><a href="http://www.wildbunny.co.uk/blog/2012/04/02/the-physics-of-rolling/" rel="nofollow">http://www.wildbunny.co.uk/blog/2012/04/02/the-physics-of-rolling/</a></p>
<p>The full solution is discussed in chris heckers articles:</p>
<p><a href="http://chrishecker.com/Rigid_body_dynamics" rel="nofollow">http://chrishecker.com/Rigid_body_dynamics</a></p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3600#respond' onclick='return addComment.moveForm("comment-3600", "3600", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-3630">
		<div id="comment-3630">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/473c4d8d1cc452ff248f7b3e49dfb135?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3630">
			February 5, 2014 at 11:34 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>So for the impulse equation with the collision, if the collision feature on a shape is a line, would I just use the midpoint of the line as the contact point for that shape? Or would I need to adjust for that second contact point in Chris Hecker&#8217;s impulse equation?</p>
<p>Thanks</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3630#respond' onclick='return addComment.moveForm("comment-3630", "3630", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3631">
		<div id="comment-3631">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3631">
			February 6, 2014 at 8:32 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi joshua,</p>
<p>No, its more complex than that &#8211; treat a line as a polygon with two points.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3631#respond' onclick='return addComment.moveForm("comment-3631", "3631", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3632">
		<div id="comment-3632">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/473c4d8d1cc452ff248f7b3e49dfb135?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3632">
			February 8, 2014 at 8:58 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hmm, would you mind expounding a little more, right now I am doing just dynamic box to static box interaction with rotation. So what I did with the impulse equation was just treat each contact point as another point and just added it to the denominator of the impulse equation, just how Chris Hecker adds the contacts in the denominator (except he only accounts for one per body). I then calculated the rotational velocity added by each contact point using the equation he gives. Is this right?</p>
<p>Thanks so much for your time,<br />
Joshua</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3632#respond' onclick='return addComment.moveForm("comment-3632", "3632", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3633">
		<div id="comment-3633">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/cb866ae92492548d79d4b15d4353d4f4?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">vinny</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3633">
			February 10, 2014 at 2:17 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hello i have bought your source code, there are some projects covering different parts, i&#8217; like to ask what is the most complete to start to convert into c++ , is there any differnece with angular and hardangular ( i am referring to 2 different projects ) , is one more complete than the other to be used in a small game ?. Another question is about silverlight i didn&#8217;t install it because i didn&#8217;t want to mess with my visual studio installation, and since i am not very well versed in c# i&#8217;d like to ask you if the transformation is performed in the control class from whose you derive the rigid body class, i need to implement my rotation code using matrices am i right ?<br />
thanks for your time</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3633#respond' onclick='return addComment.moveForm("comment-3633", "3633", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3634">
		<div id="comment-3634">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3634">
			February 10, 2014 at 2:25 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Vinny,</p>
<p>The pileoboxes project is the most complete to convert to c++.</p>
<p>Regarding visual studio, if you download visual web developer 2010 express, that will keep the installation separate from any other versions you might have, and will make your life much easier when you need to compare behaviours in your port.</p>
<p>Transformation should be performed in the Matrix23 class.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3634#respond' onclick='return addComment.moveForm("comment-3634", "3634", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3635">
		<div id="comment-3635">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/cb866ae92492548d79d4b15d4353d4f4?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">vinny</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3635">
			February 10, 2014 at 2:58 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I have already installed visual studio pro and i don&#8217;t want to mess with this installation.<br />
By the way i mean, how do you store the trasnformed vertices you collect after the transformgroup function ? are they stored internally ? i have seen in one of your demo a ball falling and sticking to a box, is there any inherent (sp??) reason why the restituition factor is so low ? its becasue of the speculative algorithm ?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3635#respond' onclick='return addComment.moveForm("comment-3635", "3635", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3636">
		<div id="comment-3636">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3636">
			February 10, 2014 at 3:14 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Vinny,</p>
<p>VS2010 web express installs as a separate program.</p>
<p>Vertices are not transformed and then stored, they are transformed as required in Rectangle.GetWorldSpacePoint(). This isn&#8217;t massively efficient, I would recommend changing that so once per frame the vertices are transformed and then stored.</p>
<p>Non-zero restitution is not possible with speculative contacts.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3636#respond' onclick='return addComment.moveForm("comment-3636", "3636", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3637">
		<div id="comment-3637">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/cb866ae92492548d79d4b15d4353d4f4?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">vinny</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3637">
			February 10, 2014 at 3:28 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>So basically you say that thins don&#8217;t bounce back when they collide , don&#8217;t you ?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3637#respond' onclick='return addComment.moveForm("comment-3637", "3637", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3638">
		<div id="comment-3638">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3638">
			February 10, 2014 at 3:28 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Yes, that&#8217;s correct.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3638#respond' onclick='return addComment.moveForm("comment-3638", "3638", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3640">
		<div id="comment-3640">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/473c4d8d1cc452ff248f7b3e49dfb135?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3640">
			February 10, 2014 at 11:24 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>So I bought the source code and was just wondering if the RectRectClosestPoints function also works with arbitrary convex polygons. Thanks.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3640#respond' onclick='return addComment.moveForm("comment-3640", "3640", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3641">
		<div id="comment-3641">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3641">
			February 11, 2014 at 8:09 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Joshua,</p>
<p>Yes, I believe it will <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3641#respond' onclick='return addComment.moveForm("comment-3641", "3641", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3642">
		<div id="comment-3642">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/473c4d8d1cc452ff248f7b3e49dfb135?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://liquidsunshinelabs.com' rel='external nofollow' class='url'>Joshua</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3642">
			February 13, 2014 at 9:02 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>So if two polygons are seperated, are the contact points computed the same way ad if they are intersecting? Just wondering because if they are seperated the contact points will move as the two polygons/bodies move, so it would make it hard to generate contact points for two moving seperated polygons.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3642#respond' onclick='return addComment.moveForm("comment-3642", "3642", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3644">
		<div id="comment-3644">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3644">
			February 14, 2014 at 8:15 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Joshua</p>
<p>Separation is dealt with differently than penetration, although both are dealt with simultaneously in the code. Actually, contact points will move as the two bodies move even in the case of penetration.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3644#respond' onclick='return addComment.moveForm("comment-3644", "3644", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3643">
		<div id="comment-3643">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/473c4d8d1cc452ff248f7b3e49dfb135?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3643">
			February 13, 2014 at 11:16 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I was also wondering where you resolve the penetration in the Pile O Boxes demo.  Thanks.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3643#respond' onclick='return addComment.moveForm("comment-3643", "3643", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3645">
		<div id="comment-3645">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3645">
			February 14, 2014 at 8:15 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Penetration is resolved automatically as a consequence of speculative contacts. The distance between objects factor deals with that aspect.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3645#respond' onclick='return addComment.moveForm("comment-3645", "3645", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3646">
		<div id="comment-3646">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3646">
			February 14, 2014 at 4:13 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Ok thanks. I actually just got it working last night. One problem I ran into is that when it hits the ground, the body flies up due to the penetration. Is there a way I can keep it from found this?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3646#respond' onclick='return addComment.moveForm("comment-3646", "3646", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3647">
		<div id="comment-3647">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3647">
			February 14, 2014 at 5:10 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>There shouldn&#8217;t be any penetration in a simple scenario like that. You should only get penetration when objects are getting pushed through each other.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3647#respond' onclick='return addComment.moveForm("comment-3647", "3647", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3648">
		<div id="comment-3648">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/15b8c95b843722d46b779724aa6de6fc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3648">
			February 14, 2014 at 5:47 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I&#8217;m not sure why you say there wouldn&#8217;t be any penetration. There is penetration in the first angular demo.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3648#respond' onclick='return addComment.moveForm("comment-3648", "3648", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-3657">
		<div id="comment-3657">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/986c4bcb2e06cebbed1a5de138618296?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">karim</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3657">
			February 23, 2014 at 10:14 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi dear Paul, i have took a look at your source codes, your contact class have two argument for contact point, but in some situation we just have one contact point like this:<br />
<a href="http://www.freeuploadsite.com/do.php?img=34845" rel="nofollow">http://www.freeuploadsite.com/do.php?img=34845</a><br />
 i&#8217;m confused, what is your contact generation method ?<br />
thanks</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3657#respond' onclick='return addComment.moveForm("comment-3657", "3657", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3658">
		<div id="comment-3658">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3658">
			February 23, 2014 at 11:17 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Karim,</p>
<p>The technique I use to generate the contact points is described in this article:</p>
<p><a href="http://www.wildbunny.co.uk/blog/2011/06/07/how-to-make-angry-birds-part-2/" rel="nofollow">http://www.wildbunny.co.uk/blog/2011/06/07/how-to-make-angry-birds-part-2/</a></p>
<p>Hope that helps!</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3658#respond' onclick='return addComment.moveForm("comment-3658", "3658", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3660">
		<div id="comment-3660">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/986c4bcb2e06cebbed1a5de138618296?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">karim</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3660">
			March 2, 2014 at 9:45 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi again, thank you for reply, i have some other problem, whats going on in&#8221;Geometry.RectRectClosestPoints()&#8221; ? Can you explain more?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3660#respond' onclick='return addComment.moveForm("comment-3660", "3660", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3661">
		<div id="comment-3661">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3661">
			March 2, 2014 at 10:09 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Karim,</p>
<p>It&#8217;s outside the scope of this reply to describe everything, but elements are described here:</p>
<p><a href="http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/" rel="nofollow">http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/</a></p>
<p>and here:</p>
<p><a href="http://www.wildbunny.co.uk/blog/2011/06/07/how-to-make-angry-birds-part-2/" rel="nofollow">http://www.wildbunny.co.uk/blog/2011/06/07/how-to-make-angry-birds-part-2/</a></p>
<p>Hope that helps,</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3661#respond' onclick='return addComment.moveForm("comment-3661", "3661", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-3701">
		<div id="comment-3701">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/cb866ae92492548d79d4b15d4353d4f4?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">vinny</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3701">
			April 7, 2014 at 6:05 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hello , its me again i am going further into 2d physics thanks to your code and tutorials.<br />
But i have a problem , i want to create a system of particles ( not a particle system ) connecting many spheres and keep them at a fixed distances between each ohter.<br />
I have succesfully implemented a single constraints between 2 particles, but when i connect more than 2 , the simulation explodes, this is due to the fact that continous rearrangement of velocities ( i am using an impulse method ) move the particles around and creat a sort of race between them.<br />
How can i solve this problem ??? is it possibile to hire you ? i have read about jacobian but looks like every document doesn&#8217;t hint to a possible solution for multiple distances.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3701#respond' onclick='return addComment.moveForm("comment-3701", "3701", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3743">
		<div id="comment-3743">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8e5ed95efb952817467ee4d454d349cb?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Nathan</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3743">
			May 23, 2014 at 2:49 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hello.  I am trying to get the code beneath figure 6 to work and have looked at some debug messages.  Is it possible for the distance between the two AABBs to be negative and have the remove variable &gt; 0?  That is happening to me and it doesn&#8217;t seem right.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3743#respond' onclick='return addComment.moveForm("comment-3743", "3743", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3744">
		<div id="comment-3744">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3744">
			May 23, 2014 at 9:27 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Nathan,</p>
<p>Yes, the distance between AABBs can be negative &#8211; that indicates they are penetrating. This is ok, because the penetration will be resolved by the speculative contacts system.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3744#respond' onclick='return addComment.moveForm("comment-3744", "3744", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment even depth-3" id="li-comment-3745">
		<div id="comment-3745">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8e5ed95efb952817467ee4d454d349cb?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Nathan</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3745">
			May 23, 2014 at 4:17 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Is the code below figure 6 functional?  You mentioned it is simplified for understanding.  What is simplified?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3745#respond' onclick='return addComment.moveForm("comment-3745", "3745", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-4" id="li-comment-3746">
		<div id="comment-3746">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3746">
			May 23, 2014 at 4:23 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Should be functional &#8211; looking at it, I&#8217;m not sure what&#8217;s been simplified, its been a while now since I wrote that post!</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3746#respond' onclick='return addComment.moveForm("comment-3746", "3746", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even depth-4" id="li-comment-3747">
		<div id="comment-3747">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8e5ed95efb952817467ee4d454d349cb?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Nathan</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3747">
			May 23, 2014 at 4:28 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>In response to your last response, can the distance be negative and remove &gt; 0 at the same time?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3747#respond' onclick='return addComment.moveForm("comment-3747", "3747", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-5" id="li-comment-3748">
		<div id="comment-3748">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3748">
			May 24, 2014 at 11:58 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>That would mean the objects are penetrating but moving apart.</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-3750">
		<div id="comment-3750">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8e5ed95efb952817467ee4d454d349cb?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Nathan</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3750">
			May 24, 2014 at 10:10 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Sorry that I&#8217;m asking a lot of questions, but I&#8217;m trying to get this to work and really appreciate your help.  I have gotten speculative contacts to work perfectly with one dynamic and one static object, but I get a lot of problems when I try to collide two dynamic objects.  I have done the math and I believe it is correct.  Is this a proper collision? </p>
<p>Ninja vs physics tile<br />
Collision normal: 0,-1<br />
Ninja velocity: 0.0,40.0<br />
Tile velocity: 0.0,0.0<br />
Relative velocity: 0,40<br />
Relative normal velocity: -40<br />
Dist: 26<br />
Remove: -14<br />
Ninja new velocity: 0.0,36.315735<br />
Tile new velocity: 0.0,10.315735</p>
<p>I think that is correct, but the problem is when the tile collides with another object and its velocity is decreased, there is penetration between the first two.  Is that normal?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3750#respond' onclick='return addComment.moveForm("comment-3750", "3750", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3755">
		<div id="comment-3755">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8e5ed95efb952817467ee4d454d349cb?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Nate</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3755">
			May 28, 2014 at 7:59 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>How are multiple iterations implimented besides just looping over the collision function a few extra times?  Is the timeStep affected?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3755#respond' onclick='return addComment.moveForm("comment-3755", "3755", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-3756">
		<div id="comment-3756">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-2/#comment-3756">
			May 28, 2014 at 10:00 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Nate,</p>
<p>The iterations are all inside the solver &#8211; as I explain in the article, speculative contacts obviate the need for multiple collision iterations as they move the TOI problem inside the constraint solver.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/?replytocom=3756#respond' onclick='return addComment.moveForm("comment-3756", "3756", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
			</ol>

			<div class="navigation">
				<div class="nav-previous"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comments" ><span class="meta-nav">&larr;</span> Older Comments</a></div>
				<div class="nav-next"></div>
			</div><!-- .navigation -->


								<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://www.wildbunny.co.uk/blog/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='171' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
							<script type='text/javascript'>
	<!--
	refJS = escape( document[ 'referrer' ] );
	document.write("<input type='hidden' name='refJS' value='"+refJS+"'>");
	// -->
	</script>
	<p style="font-size:9px;clear:both;">WP-SpamFree by <a rel="nofollow" href="http://www.polepositionmarketing.com/library/wp-spamfree/" title="WP-SpamFree WordPress Anti-Spam Plugin" >Pole Position Marketing</a>

					</form>
							</div><!-- #respond -->
			
</div><!-- #comments -->


			</div><!-- #content -->
		</div><!-- #container -->


		<div id="primary" class="widget-area" role="complementary">
			<ul class="xoxo">

<li id="search-3" class="widget-container widget_search"><h3 class="widget-title">Search</h3><form role="search" method="get" id="searchform" class="searchform" action="http://www.wildbunny.co.uk/blog/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></li><li id="categories-3" class="widget-container widget_categories"><h3 class="widget-title">Choose a category</h3><select name='cat' id='cat' class='postform' >
	<option value='-1'>Select Category</option>
	<option class="level-0" value="104">Algorithmic trading&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="7">Animal Army&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="35">AS3&nbsp;&nbsp;(19)</option>
	<option class="level-0" value="44">Beginner&nbsp;&nbsp;(3)</option>
	<option class="level-0" value="114">Bitcoin&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="6">Business&nbsp;&nbsp;(7)</option>
	<option class="level-0" value="73">Chip tunes&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="71">Circles&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="40">Collision Detection&nbsp;&nbsp;(8)</option>
	<option class="level-0" value="53">Developer love&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="117">Entity systems&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="103">Finance&nbsp;&nbsp;(6)</option>
	<option class="level-0" value="101">Full games&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="67">Geometry&nbsp;&nbsp;(9)</option>
	<option class="level-0" value="58">Graphics&nbsp;&nbsp;(9)</option>
	<option class="level-0" value="100">JSON&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="42">Ladders and AI&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="96">learning-to-program&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="28">Making angry birds&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="47">Micro-transactions&nbsp;&nbsp;(3)</option>
	<option class="level-0" value="90">Multi-player&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="72">Music&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="118">Optimisation&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="41">Parallax and Tiles&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="65">paypal&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="97">Physics&nbsp;&nbsp;(8)</option>
	<option class="level-0" value="36">Platform game&nbsp;&nbsp;(5)</option>
	<option class="level-0" value="68">Polygons&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="98">Portals&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="52">Promotion&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="93">Self improvement&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="66">Server side&nbsp;&nbsp;(7)</option>
	<option class="level-0" value="99">Silverlight&nbsp;&nbsp;(5)</option>
	<option class="level-0" value="45">Stencyl&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="5">Technical&nbsp;&nbsp;(28)</option>
	<option class="level-0" value="1">Uncategorized&nbsp;&nbsp;(1)</option>
</select>

<script type='text/javascript'>
/* <![CDATA[ */
	var dropdown = document.getElementById("cat");
	function onCatChange() {
		if ( dropdown.options[dropdown.selectedIndex].value > 0 ) {
			location.href = "http://www.wildbunny.co.uk/blog/?cat="+dropdown.options[dropdown.selectedIndex].value;
		}
	}
	dropdown.onchange = onCatChange;
/* ]]> */
</script>

</li>			</ul>
		</div><!-- #primary .widget-area -->


		<div id="secondary" class="widget-area" role="complementary">
			<ul class="xoxo">
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"><div style="text-align:center">About the author</div></h3><div class="ub-grav" style="margin:5px 5px 0px 5px;text-align:center;"><img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=128&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D128&amp;r=G' class='avatar avatar-128 photo' height='128' width='128' /></div>A games industry veteran of ten years, seven of which spent at Sony Computer Entertainment Europe, he has had key technical roles on triple-A titles like the Bafta Award Winning Little Big Planet (PSP), 24: The Game (PS2), special effects work on Heavenly Sword (PS3), some in-show graphics on the BBC�s version of Robot Wars, the TV show, as well as a few more obscure projects.
&nbsp;
Now joint CEO of Wildbunny, he is able to give himself hiccups simply by coughing.
&nbsp;
1NobNQ88UoYePFi5QbibuRJP3TtLhh65Jp
</li><li id="widget_featured-posts-2" class="widget-container widget_featured-posts"><h3 class="widget-title">Featured Posts</h3>	
	<ul id="yiw-featured-post">
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2012/11/01/10-steps-to-becoming-a-better-programmer/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2012/11/stencylRules.png&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="10 steps to becoming a better programmer" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2012/11/01/10-steps-to-becoming-a-better-programmer/">10 steps to becoming a better programmer</a>
	       </h4>
	   </li>
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2011/12/11/how-to-make-a-2d-platform-game-part-1/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/12/giantStar.png&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="How to make a 2d Platform Game &#8211; part 1" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2011/12/11/how-to-make-a-2d-platform-game-part-1/">How to make a 2d Platform Game &#8211; part 1</a>
	       </h4>
	   </li>
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2012/11/20/how-to-make-a-multi-player-game-part-2/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2012/11/shop.png&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="How to make a multi-player game � part 2" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2012/11/20/how-to-make-a-multi-player-game-part-2/">How to make a multi-player game � part 2</a>
	       </h4>
	   </li>
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2013/04/17/algorithmic-trading-for-dummies-part-2/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2013/04/stop-loss.jpg&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="Algorithmic trading for dummies &#8211; part 2" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2013/04/17/algorithmic-trading-for-dummies-part-2/">Algorithmic trading for dummies &#8211; part 2</a>
	       </h4>
	   </li>
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2012/01/06/how-to-make-games/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/12/flashLogo.png&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="How to make games" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2012/01/06/how-to-make-games/">How to make games</a>
	       </h4>
	   </li>
	</ul>
	
	</li><li id="advanced-featured-page-widget-3" class="widget-container widget_advanced-featured-page-widget"><h3 class="widget-title">Tutorials with code to buy</h3><div class="post-2295 page type-page status-publish hentry"><a href="http://www.wildbunny.co.uk/blog/buy-multiplayer-asteroids-engine/" title="Buy multiplayer asteroids engine" class="alignnone"><img width="200" height="200" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2014/05/multiplayer.jpg" class="attachment-200 by 200 image" alt="multiplayer" /></a></div><!--end post_class()-->

</li><li id="advanced-featured-page-widget-2" class="widget-container widget_advanced-featured-page-widget"><div class="post-2299 page type-page status-publish hentry"><a href="http://www.wildbunny.co.uk/blog/buy-angrybirds-alike-engine/" title="Buy Angrybirds-alike engine" class="alignnone"><img width="200" height="200" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2014/05/birds.jpg" class="attachment-200 by 200 image" alt="birds" /></a></div><!--end post_class()-->

</li><li id="advanced-featured-page-widget-4" class="widget-container widget_advanced-featured-page-widget"><div class="post-2301 page type-page status-publish hentry"><a href="http://www.wildbunny.co.uk/blog/buy-platform-game-engine/" title="Buy platform game engine" class="alignnone"><img width="200" height="200" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2014/05/platform.png" class="attachment-200 by 200 image" alt="platform" /></a></div><!--end post_class()-->

</li><li id="wp125" class="widget-container wp125_write_ads_widget">
<h3 class="widget-title">Affiliates</h3><div id="wp125adwrap_1c">
<div class="wp125ad odd"><a href="index.php?adclick=10" title="plus500" rel="nofollow"target='_blank'><img src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2013/03/plus500-200x200.gif" alt="plus500" /></a></div>
<div class="wp125ad even"><a href="https://www.cavirtex.com/Z/50680" title="cavirtex" rel="nofollow"target='_blank'><img src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2014/03/caVirtex.gif" alt="cavirtex" /></a></div>
<div class="wp125ad odd"><a href="http://www.freelancer.co.uk/affiliates/wildbunny2/" title="freelancer" rel="nofollow"target='_blank'><img src="/images/freelancer.png" alt="freelancer" /></a></div>
<div class="wp125ad even"><a href="http://www.shareasale.com/r.cfm?b=531904&u=949687&m=41388&urllink=&afftrack=" title="wp engine" rel="nofollow"target='_blank'><img src="http://www.shareasale.com/image/41388/sas_banner_250x250.jpg" alt="wp engine" /></a></div>
<div class="wp125ad odd"><a href="http://www.wildbunny.co.uk/blog/advertise-here/" rel="nofollow"target='_blank'><img src="http://www.wildbunny.co.uk/images/blankAdvert.png" alt="" /></a></div>
</div>
</li><li id="ezadswidget-4" class="widget-container ezAdsWidget"><h3 class="widget-title">My MetaTrader 5 products</h3><!-- Easy AdSense V2.79 -->
<!-- Widg[count: 2] -->
<div class="ezAdsense adsense adsense-widget"><div style="text-align:center;margin:0px; "><div style="width:350px">
<a target="_blank" href="http://mql5.com/dzz" title="Download VWAP technical indicator from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/925/mid" alt="Buy VWAP customer indicator in the store selling algo trading systems" width="400" height="60"></a>
<a target="_blank" href="http://mql5.com/e08" title="Download Average Spread technical indicator from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/951/mid" alt="Buy Average Spread customer indicator in the store selling algo trading systems" width="400" height="60"></a>
<a target="_blank" href="http://mql5.com/e09" title="Download Bid Ask Volumes technical indicator from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/950/mid" alt="Buy Bid Ask Volumes customer indicator in the store selling algo trading systems" width="400" height="60"></a>
<a target="_blank" href="http://mql5.com/po9" title="Download Market Activity technical indicator from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/963/mid" alt="Buy Market Activity customer indicator in the store selling algo trading systems" width="400" height="60"></a>
<a target="_blank" href="http://mql5.com/poa" title="Download Precision Scalper trading system from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/972/mid" alt="Buy Precision Scalper trading application in the store of automated robot systems" width="400" height="60"></a>
</div></div></div></li>			</ul>
		</div><!-- #secondary .widget-area -->

	</div><!-- #main -->

	<div id="footer" role="contentinfo">
		<div id="colophon">



			<div id="site-info">
				<a href="http://www.wildbunny.co.uk/blog/" title="Wildbunny blog" rel="home">
					Wildbunny blog				</a>
			</div><!-- #site-info -->

			<div id="site-generator">
								<a href="http://wordpress.org/"
						title="Semantic Personal Publishing Platform" rel="generator">
					Proudly powered by WordPress.				</a>
			</div><!-- #site-generator -->

		</div><!-- #colophon -->
	</div><!-- #footer -->

</div><!-- #wrapper -->

		
		<script type="text/javascript">
			//<![CDATA[
			jQuery(document).ready(function() {
				var a = '<div id="cookie-law-info-bar"><span>This website uses cookies to improve your experience. We\'ll assume you\'re ok with this, but you can opt-out if you wish.<a href=\"#\" id=\"cookie_action_close_header\"  class=\"medium cli-plugin-button cli-plugin-main-button\" >Accept</a> <a href=\"http://www.wildbunny.co.uk/blog/privacy-policy/\" id=\"CONSTANT_OPEN_URL\" target=\"_new\"  class=\"cli-plugin-main-link\"  >Read More</a></span></div>';
				var b = '{"animate_speed_hide":"500","animate_speed_show":"500","background":"#fff","border":"#444","border_on":true,"button_1_button_colour":"#000","button_1_button_hover":"#000000","button_1_link_colour":"#fff","button_1_as_button":true,"button_2_button_colour":"#333","button_2_button_hover":"#292929","button_2_link_colour":"#444","button_2_as_button":false,"font_family":"inherit","notify_animate_hide":true,"notify_animate_show":false,"notify_div_id":"#cookie-law-info-bar","notify_position_horizontal":"right","notify_position_vertical":"bottom","showagain_tab":false,"showagain_background":"#fff","showagain_border":"#000","showagain_div_id":"#cookie-law-info-again","showagain_x_position":"50%","text":"#000"}';
				cli_show_cookiebar(a,b);
				
							});
			//]]>
		</script>
		
		 
			<a id="FollowMeTabLeftLg" onClick="showFollowMe()" href="#" style="border-bottom:none;"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/leftlg.gif" border="0" /></a>	

<div id="FollowMeBubbleBG" style="visibility:hidden;"></div>
<div id="FollowMeBubble" style="visibility:hidden;border-bottom:none;">


<div class="top" style="background-image:url('http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/followme_top.gif');width:329px;height:60px;float:left;display:block;border-bottom:none;">
<a id="close" onClick="hideFollowMe()" href="#" style="border-bottom:none"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/close.png" border="0" /> </a>
<!-- <a id="grab" target="_blank" title="grab this" href="http://www.ignitesocialmedia.com/tools/follow-me/"><span>grab this</span></a>--></div>
<div class="mid" style="background-image:url('http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/followme_mid.gif');width:329px;background-repeat:repeat-y;float:left;">
<div id="stretch">
<span><a title="
Twitter" target="_blank" href="http://twitter.com/paul_m_firth" rel="me"><img width="32px" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/
twitter.png" border="0" alt="
Twitter" /> 
Twitter</a></span>
<span><a title="
Facebook" target="_blank" href="http://www.facebook.com/WildbunnyLtd" rel="me"><img width="32px" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/
facebook.png" border="0" alt="
Facebook" /> 
Facebook</a></span>
<span><a title="
RSS" target="_blank" href="http://wildbunny.co.uk/blog/feed" rel="me"><img width="32px" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/
rss.png" border="0" alt="
RSS" /> 
RSS</a></span>
</div></div>
<div class="bottom" style="background-image:url('http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/followme_bottom.gif');height:34px;width:329px;clear:both;float:left;">
<a id="grab" target="_blank" title="grab this" style="border-bottom:none;" href="http://www.ignitesocialmedia.com/tools/follow-me/"><span>grab this</span></a>
</div>
<div class="grab" style="width:329px;clear:both;float:left;"><a style="border-bottom:none;" href="http://www.ignitesocialmedia.com/tools/follow-me/"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/followme_grab.gif" /></a></div>
</div>







<div id="thsp-sticky-header">
	<div id="thsp-sticky-header-inner">
		<div id="thsp-sticky-header-title">
			<a href="http://www.wildbunny.co.uk/blog" title="Developer knowledge centre">Wildbunny blog</a>
		</div>
		
		<ul id="thsp-sticky-header-menu" class="menu"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-272"><a href="/blog/">All articles</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1302"><a href="http://www.wildbunny.co.uk/blog/vector-maths-a-primer-for-games-programmers/">Vector maths</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-319"><a href="http://www.wildbunny.co.uk/blog/contact-me/">Contact me</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2072"><a href="http://www.wildbunny.co.uk/blog/hire-me/">Hire me</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-446"><a href="http://www.wildbunny.co.uk/blog/membership-sign-up-page/">Subscribe!</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-466"><a href="http://www.wildbunny.co.uk/blog/welcome-to-our-members-area/">Members</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1183"><a href="/blog/buy-source-code">Buy source-code</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1694"><a href="http://www.wildbunny.co.uk/blog/privacy-policy/">Privacy policy</a></li>
</ul>	</div><!-- #thsp-sticky-header-inner -->
</div><!-- #thsp-sticky-header --><script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/s2member/s2member-o.php?ws_plugin__s2member_js_w_globals=1&#038;qcABC=1&#038;ver=140105-140105-2848662513'></script>
</body>
</html>

