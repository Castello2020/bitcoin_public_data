http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/
HTTP/1.0 200 OK
Date: Thu, 24 Jul 2014 04:21:49 GMT
Server: Apache/2.2.15 (CentOS)
X-Powered-By: PHP/5.3.3
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=haa2jkl2nsb1oeiqkh8l3mkbk6; path=/
X-Pingback: http://www.wildbunny.co.uk/blog/xmlrpc.php
Link: <http://www.wildbunny.co.uk/blog/?p=171>; rel=shortlink
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 43558
Connection: close
Content-Type: text/html; charset=UTF-8

<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<title>Speculative Contacts &#8211; a continuous collision engine approach | Wildbunny blog</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="http://www.wildbunny.co.uk/blog/wp-content/themes/twentyten/style.css?v=0" />
<link rel="pingback" href="http://www.wildbunny.co.uk/blog/xmlrpc.php" />

<!-- BEGIN Metadata added by Add-Meta-Tags WordPress plugin
Get the plugin at: http://www.g-loaded.eu/2006/01/05/add-meta-tags-wordpress-plugin/ -->
<meta name="description" content="Hello and welcome back to my blog... Today i'm going to talk about a�continuous�collision detection�technique called Speculative Contacts which has been employed in games such as Little Big Planet PS3 and PSP versions. First of all we need to answer some basic questions." />
<meta name="keywords" content="collision detection, physics, silverlight, technical, collision detection, games, physics, simulation" />
<meta name="blogcatalog" content="9BC10671562" />
<div id="ScribCode634274886"></div>
<!-- END Metadata added by Add-Meta-Tags WordPress plugin -->

<link rel="alternate" type="application/rss+xml" title="Wildbunny blog &raquo; Feed" href="http://www.wildbunny.co.uk/blog/feed/" />
<link rel="alternate" type="application/rss+xml" title="Wildbunny blog &raquo; Comments Feed" href="http://www.wildbunny.co.uk/blog/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Wildbunny blog &raquo; Speculative Contacts &#8211; a continuous collision engine approach Comments Feed" href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/feed/" />
<link rel='stylesheet' id='bm-author-donations-style-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/bitmate-author-donations/style.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='cntctfrm_stylesheet-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/contact-form-plugin/css/style.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='cookielawinfo-style-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/cookie-law-info/css/cli-style.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='cookielawinfo-table-style-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/cookie-law-info/css/cli-tables.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='oikCSS-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/oik/oik.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='bwlinkCSS-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/oik/bwlink.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='wp125style-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/wp125/wp125.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='thsp-sticky-header-plugin-styles-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/sticky-header/css/public.css?ver=1.0.0' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='featured-post-css-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/featured-post.css?ver=3.8.2' type='text/css' media='all' />
<link rel='stylesheet' id='ws-plugin--s2member-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/s2member/s2member-o.php?ws_plugin__s2member_css=1&#038;qcABC=1&#038;ver=140105-140105-2848662513' type='text/css' media='all' />
<link rel='stylesheet' id='mr_social_sharing-css'  href='http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/style.css?ver=3.8.2' type='text/css' media='all' />
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/swfobj/swfobject.js?ver=2.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-includes/js/comment-reply.min.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-includes/js/jquery/jquery.js?ver=1.10.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/cookie-law-info/js/jquery.cookie.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/cookie-law-info/js/cookielawinfo.js?ver=3.8.2'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var StickyHeaderParams = {"show_at":"200","hide_if_narrower":"600"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/sticky-header/js/public.js?ver=1.0.0'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/script.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/googleplus.js.php?lang=en_US&#038;ver=3.8.2'></script>
<script type='text/javascript' src='http://apis.google.com/js/plusone.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://connect.facebook.net/en_US/all.js?ver=3.8.2#xfbml=1'></script>
<script type='text/javascript' src='http://platform.twitter.com/widgets.js?ver=3.8.2'></script>
<script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.2'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.wildbunny.co.uk/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.wildbunny.co.uk/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='2d isometric land &#8211; breaking out of the grid update' href='http://www.wildbunny.co.uk/blog/2011/03/18/2d-isometric-land-breaking-out-of-the-grid-update/' />
<link rel='next' title='Isometric coordinate systems &#8211; the modern way' href='http://www.wildbunny.co.uk/blog/2011/03/27/isometric-coordinate-systems-the-modern-way/' />
<meta name="generator" content="WordPress 3.8.2" />
<link rel='canonical' href='http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comments' />
<link rel='shortlink' href='http://www.wildbunny.co.uk/blog/?p=171' />
<script type="text/javascript" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/js/bubble.js"></script>
<link rel="stylesheet" type="text/css" href="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/css/style.css" />
<style type="text/css">
<!-- Silverlight WordPress Plugin -->
#silverlightControlHost{height:100%;}
</style>
<!-- Protected by WP-SpamFree v2.1.1.2 :: JS BEGIN -->
<script type="text/javascript" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/wp-spamfree/js/wpsfv2-js.php"></script> 
<!-- Protected by WP-SpamFree v2.1.1.2 :: JS END -->

		<style type="text/css">
			#thsp-sticky-header {
				background-color: #181818;
			}
			#thsp-sticky-header,
			#thsp-sticky-header a {
				color: #f9f9f9 !important;
			}
											</style>
	<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #EAEAEA; }
</style>
<!-- Google Analytics Tracking by Google Analyticator 6.2: http://ronaldheft.com/code/analyticator/ -->
<script type="text/javascript">window.google_analytics_uacct = "ca-pub-4897461488762721";</script>
<script type="text/javascript">
	var analyticsFileTypes = [''];
	var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16999711-1']);
	_gaq.push(['_trackPageview']);
	_gaq.push(['_trackPageLoadTime']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</head>

<body class="single single-post postid-171 single-format-standard custom-background">
<div id="wrapper" class="hfeed">
	<div id="header">
		<div id="masthead">
			<div id="branding" role="banner">
								<div id="site-title">
					<span>
						<a href="http://www.wildbunny.co.uk/blog/" title="Wildbunny blog" rel="home">Wildbunny blog</a>
					</span>
				</div>
				<div id="site-description">Developer knowledge centre</div>

										<img src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/02/bunnyWP1.gif" width="940" height="198" alt="" />
								</div><!-- #branding -->

			<div id="access" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="#content" title="Skip to content">Skip to content</a></div>
								<div class="menu-header"><ul id="menu-flowhub-header" class="menu"><li id="menu-item-272" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-272"><a href="/blog/">All articles</a></li>
<li id="menu-item-1302" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1302"><a href="http://www.wildbunny.co.uk/blog/vector-maths-a-primer-for-games-programmers/">Vector maths</a></li>
<li id="menu-item-319" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-319"><a href="http://www.wildbunny.co.uk/blog/contact-me/">Contact me</a></li>
<li id="menu-item-2072" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2072"><a href="http://www.wildbunny.co.uk/blog/hire-me/">Hire me</a></li>
<li id="menu-item-446" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-446"><a href="http://www.wildbunny.co.uk/blog/membership-sign-up-page/">Subscribe!</a></li>
<li id="menu-item-466" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-466"><a href="http://www.wildbunny.co.uk/blog/welcome-to-our-members-area/">Members</a></li>
<li id="menu-item-1183" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1183"><a href="/blog/buy-source-code">Buy source-code</a></li>
<li id="menu-item-1694" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1694"><a href="http://www.wildbunny.co.uk/blog/privacy-policy/">Privacy policy</a></li>
</ul></div>			</div><!-- #access -->
		</div><!-- #masthead -->
	</div><!-- #header -->

	<div id="main">

		<div id="container">
			<div id="content" role="main">


				<div id="nav-above" class="navigation">
					<div class="nav-previous"><a href="http://www.wildbunny.co.uk/blog/2011/03/18/2d-isometric-land-breaking-out-of-the-grid-update/" rel="prev"><span class="meta-nav">&larr;</span> 2d isometric land &#8211; breaking out of the grid update</a></div>
					<div class="nav-next"><a href="http://www.wildbunny.co.uk/blog/2011/03/27/isometric-coordinate-systems-the-modern-way/" rel="next">Isometric coordinate systems &#8211; the modern way <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-above -->

				<div id="post-171" class="post-171 post type-post status-publish format-standard hentry category-collision-detection-platform-game category-physics-2 category-silverlight-2 category-technical tag-collision-detection tag-games tag-physics tag-simulation">
					<h1 class="entry-title">Speculative Contacts &#8211; a continuous collision engine approach</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted on</span> <a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" title="2:40 pm" rel="bookmark"><span class="entry-date">March 25, 2011</span></a> <span class="meta-sep">by</span> <span class="author vcard"><a class="url fn n" href="http://www.wildbunny.co.uk/blog/author/paulfirth/" title="View all posts by Paul Firth">Paul Firth</a></span>					</div><!-- .entry-meta -->

					<div class="entry-content">
						<img width="150" height="21" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi1.png" class="attachment-single-post-thumbnail wp-post-image" alt="Iteration 1" />						
				<!-- Social Sharing Toolkit v2.0.4 | http://www.marijnrongen.com/wordpress-plugins/social_sharing_toolkit/ -->
				<div class="mr_social_sharing_wrapper"><span class="mr_social_sharing"><script type="text/javascript">
							  reddit_url = "http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/";
							  reddit_title = "Speculative Contacts – a continuous collision engine approach";
							</script>
							<script type="text/javascript" src="http://www.reddit.com/static/button/button1.js"></script></span><span class="mr_social_sharing"><a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" data-count="horizontal" data-text="Speculative Contacts – a continuous collision engine approach">Tweet</a></span><span class="mr_social_sharing"><iframe src="https://www.facebook.com/plugins/like.php?locale=en_US&amp;href=http%3A%2F%2Fwww.wildbunny.co.uk%2Fblog%2F2011%2F03%2F25%2Fspeculative-contacts-an-continuous-collision-engine-approach-part-1%2F&amp;layout=button_count&amp;show_faces=false&amp;width=90px&amp;height=21px" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90px; height:21px;" allowTransparency="true"></iframe></span><span class="mr_social_sharing"><div id="fb-root"></div><fb:send href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" font=""></fb:send></span><span class="mr_social_sharing"><g:plusone size="medium" href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/"></g:plusone></span><span class="mr_social_sharing"><a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Fwww.wildbunny.co.uk%2Fblog%2F2011%2F03%2F25%2Fspeculative-contacts-an-continuous-collision-engine-approach-part-1%2F&amp;title=Speculative+Contacts+%E2%80%93+a+continuous+collision+engine+approach" target="_blank" class="mr_social_sharing_popup_link"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/images/buttons/stumbleupon.png" alt="Submit to StumbleUpon" title="Submit to StumbleUpon"/></a></span></div><p>Hello and welcome back to my blog&#8230;</p>
<p>Today i&#8217;m going to talk about a�continuous�collision detection�technique called <em>Speculative Contacts</em> which has been employed in games such as Little Big Planet PS3 and PSP versions.</p>
<p>First of all we need to answer some basic questions.</p>
<h2>What is�continuous�collision detection?</h2>
<p>Continuous collision detection attempts to solve the bullet through paper problem as shown in Figure 1.</p>
<div id="attachment_172" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure11.png"><img class="size-medium wp-image-172" title="figure1" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure11-300x232.png" alt="" width="300" height="232" /></a><p class="wp-caption-text">Figure 1</p></div>
<p>In Figure 1, object A is travelling so fast that within one frame it has passed straight through object B.</p>
<p>With traditional time-stepping techniques (i.e. an intersection check on each frame), this case is missed.</p>
<p>This is the first part of the problem (and actually the easiest part to solve). The second part of the problem is how you deal with many simultaneous collisions within one frame, the so called Time Of Impact ordering problem.</p>
<div id="attachment_173" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure21.png"><img class="size-medium wp-image-173" title="figure2" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure21-300x139.png" alt="" width="300" height="139" /></a><p class="wp-caption-text">Figure 2</p></div>
<p>So in <em>Figure 2</em>, we&#8217;ve gone ahead and found the exact time of impact between <em>A </em>and <em>B </em>and we&#8217;re happy until <em>C </em>comes along and messes everything up by colliding with <em>A </em>before <em>A</em> collides with <em>B</em>.</p>
<p>This turns out to be a real pain in the ass in general because it means that the collision detection problem is no longer separated from the act of moving objects around, its now very closely tied to it which means everything suddenly gets a lot more expensive to compute.</p>
<p>To solve this problem you need to treat all collisions in TOI (Time Of Impact) order, from the earliest TOI in the scene to the latest.</p>
<p>And even if you do that, you might find that as you resolve each collision, the trajectory of the objects changes so much that now objects that you didn&#8217;t expect to be colliding at all, are now in fact colliding.</p>
<div id="attachment_175" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure31.png"><img class="size-medium wp-image-175" title="figure3" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure31-300x156.png" alt="" width="300" height="156" /></a><p class="wp-caption-text">Figure 3</p></div>
<p>In <em>Figure 3</em>, <em>A </em>collides with <em>B </em>and is resolved, but <em>A</em>&#8216;s new velocity causes it to collide with <em>C</em> which wasn&#8217;t originally expected by the collision system. This cannoning problem means that collision detection must be re-performed as each TOI impact is processed, which can get very expensive.</p>
<p>To mitigate this problem, typically each object is bounded by a box which contains the object at the start and end of the time-step, and then all such boxes which overlap are considered to reside within a TOI island, wherein any objects are candidates for collision with any other object in the island.</p>
<p>This is all very tiresome and expensive, it would be nice if there was just some magic solution to all these problems, or at least some acceptable approximation&#8230;</p>
<h2>Speculative Contacts</h2>
<p>Enter speculative contacts. The basic idea is to try and move the majority of the work out of the collision detection system and into the contact solver, which is designed for finding the &#8216;global correct solution&#8217; to problems involving many simultaneous interacting influences (either through <a href="http://www.bulletphysics.com/ftp/pub/test/physics/papers/IterativeDynamics.pdf">projected-gauss-seidel</a> ref: Erin Catto of the excellent <a href="http://www.box2d.org/">Box2d</a>, or other methods).</p>
<div id="attachment_179" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure4.png"><img class="size-medium wp-image-179" title="figure4" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure4-300x231.png" alt="" width="300" height="231" /></a><p class="wp-caption-text">Figure 4</p></div>
<p>In<em> Figure 4</em>, we compute the closest distance <em>d</em> between the two objects; the idea is that we want to remove exactly the right amount of velocity from <em>A </em>such that it will be exactly in touching contact with <em>B </em>on the next frame. This is the essence of the speculative contacts technique.</p>
<div id="attachment_181" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure5.png"><img class="size-medium wp-image-181" title="figure5" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure5-300x151.png" alt="" width="300" height="151" /></a><p class="wp-caption-text">Figure 5</p></div>
<p>Figure 5 shows where we want to see A on the next frame. Note that this is cheating slightly because we&#8217;re throwing away time &#8211; compared to Figure 3, you can see that the motion of A is cut short; it no longer rolls across B as it used to. It postpones the secondary motion of A to the next frame.</p>
<p>Its very important that the speculative contact do no work (i.e. not have any influence on other objects) unless the relative normal velocity is greater than the distance between the objects divided by the time-step.</p>
<div id="attachment_205" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure6.png"><img class="size-medium wp-image-205" title="figure6" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure6-300x151.png" alt="" width="300" height="151" /></a><p class="wp-caption-text">Figure 6</p></div>
<p>In Figure 6, <em>v.n</em> is less than the distance <em>d</em> (divided by time-step) &#8211; i.e. <em>A</em> will not touch <em>B</em> next frame, so the constraint should do nothing.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;">Contact con <span style="color: #008000;">=</span> contacts<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
Vector2 n <span style="color: #008000;">=</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_normal</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// get all of relative normal velocity</span>
<span style="color: #6666cc; font-weight: bold;">double</span> relNv <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">-</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Dot</span><span style="color: #008000;">&#40;</span>n<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// we want to remove only the amount which leaves them touching next frame</span>
<span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">=</span> relNv <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span><span style="color: #008000;">/</span>Constants<span style="color: #008000;">.</span><span style="color: #0000FF;">kTimeStep</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
	<span style="color: #008080; font-style: italic;">// compute impulse</span>
	<span style="color: #6666cc; font-weight: bold;">double</span> imp <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">/</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span> <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
	<span style="color: #008080; font-style: italic;">// apply impulse</span>
	con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">+=</span> imp <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
	con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">-=</span> imp <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>The above code fragment demonstrates the calculation involved to achieve the result in Figure 5, for a non rotating body. Note, this is simplified for�understandability.</p>
<h2>Stability</h2>
<p>Stability is a measure of how stable a simulation is &#8211; i.e how much jittering is present, or how well the simulation copes with big piles of objects.</p>
<p>I just wanted to compare and contrast the discrete method for collision resolution at this point because i think it will prove very interesting.</p>
<p>In discrete collision detection, the above code fragment might look like this:</p>
<p><em>UPDATE: since i wrote this article a number of people contacted me and quite rightly pointed out that i didn&#8217;t include any penetration resolution in the discrete solver; the main reason was that i didn&#8217;t want to make the discrete solver look worse than it was in the simplest of demos &#8211; i often found that penetration resolution would actually cause a solver to jitter more than if it weren&#8217;t there at all.</em></p>
<p><em>However, by not including it i made the more complex demos behave more poorly than they should have, since they would tend to sink and sag more than they should. I have since updated all the live demos and code snippits to include penetration resolution.</em></p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;">Contact con <span style="color: #008000;">=</span> contacts<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
Vector2 n <span style="color: #008000;">=</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_normal</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// get all of relative normal velocity</span>
<span style="color: #6666cc; font-weight: bold;">double</span> relNv <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">-</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Dot</span><span style="color: #008000;">&#40;</span>n<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// remove all of it + resolve penetration over the course of some frames</span>
<span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">=</span> relNv <span style="color: #008000;">+</span> <span style="color: #FF0000;">0.4</span> <span style="color: #008000;">*</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span> <span style="color: #008000;">+</span> <span style="color: #FF0000;">1</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">/</span> Constants<span style="color: #008000;">.</span><span style="color: #0000FF;">kTimeStep</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// but only when objects are intersecting and moving towards each other</span>
<span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span> <span style="color: #008000;">&amp;&amp;</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
	<span style="color: #6666cc; font-weight: bold;">double</span> imp <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">/</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span> <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
	<span style="color: #008080; font-style: italic;">// apply impulse</span>
	con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">+=</span> imp <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
	con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">-=</span> imp <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>Note that probably you would never even get to the above code when the objects are separated in a discrete collision system (since why would you run the contact solver on separated objects?), but for comparison purposes i&#8217;ve converted the original code to be discrete.</p>
<p>Now, the actual difference between these two pieces of code is tiny, but the difference the speculative method makes to the stability of the simulation is <strong>amazing</strong>.</p>
<p>In all the demos on this page, the time-step is fixed to 1 / 30 of a second.</p>
<p><div id="silverlightControlHost0"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsSingleJitter2.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<p>You can pick the ball up by dragging it.</p>
<p>In this simple example, a frictionless ball is resting on the concave intersection of two rectangles; note the slight�jittery�motion of the ball. In this example there is no penetration resolution at all, and the solver defaults to the discrete code above running 1 iteration only.</p>
<p>The jittering present in this most simple of examples�exemplifies�the problem facing all physics engines which deal with the collision problem in a discrete manor &#8211; its a real PITA to solve.</p>
<p>The chief reason for it is this condition check (taken from the above code):</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #008080; font-style: italic;">/*remove &lt; 0 &amp;&amp;*/</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
<span style="color: #008000;">...</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>The check for <em>intersection</em>. The reason this causes the jittering is because it forces the contact to activate and deactivate constantly as the collision is resolved and then unresolved frame after frame.</p>
<p>A quick trace of the number of contacts solved on the first few frames confirms it:</p>
<div id="_mcePaste">
<ol>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">2</span></li>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">2</span></li>
<li><span style="line-height: 19px;">1</span></li>
<li><span style="line-height: 19px;">2</span></li>
</ol>
</div>
<p>Now, click on the drop-down�labelled�&#8217;discrete&#8217; and change the mode to speculative. Notice the jittering is gone?</p>
<p>The same trace this time looks like this:</p>
<ol>
<li>2</li>
<li>0</li>
<li>1</li>
<li>2</li>
<li>2</li>
<li>2</li>
<li>2</li>
<li>2</li>
</ol>
<p>Much more pleasing &#8211; the resolved contact count�stabilises�quite quickly leading to a much more stable simulation.</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;"><span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">=</span> relNv <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span><span style="color: #008000;">/</span>Constants<span style="color: #008000;">.</span><span style="color: #0000FF;">kTimeStep</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #0600FF; font-weight: bold;">if</span> <span style="color: #008000;">&#40;</span><span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">&lt;</span> <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
<span style="color: #008000;">...</span>
<span style="color: #008000;">&#125;</span></pre></td></tr></table></div>

<p>The above is the speculative code; the only difference is the handling of what relative normal velocity to remove. The speculative code always removes enough of the relative normal velocity for the object to just touch the surface on the next frame. The contact is now not getting turned on/off so often, and this makes <em>all the difference</em>.</p>
<p><div id="silverlightControlHost1"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsMultiBall2.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<!-- Easy AdSense V2.79 -->
<!-- Post[count: 1] -->
<div class="ezAdsense adsense adsense-midtext" style="text-align:center;margin:12px; "><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- medi -->
<ins class="adsbygoogle"
     style="display:inline-block;width:300px;height:250px"
     data-ad-client="ca-pub-4897461488762721"
     data-ad-slot="9797433564"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div><p>The above example defaults to a speculative solver, with a lot more balls. Note that there is still only one iteration! If you change the solver mode to discrete you can see the difference it makes.</p>
<p>I&#8217;ve included a sequential discrete solver in the drop down for comparison &#8211; even at 10 iterations the system isn&#8217;t fully resolved.</p>
<h2>Angular</h2>
<p>No article discussing continuous collision detection and resolution would be complete without attempting to address angular continuous collision. That is, when an object rotates very quickly it should still not miss collisions.</p>
<div id="attachment_222" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/Figure8.png"><img class="size-medium wp-image-222" title="Figure8" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/Figure8-300x196.png" alt="" width="300" height="196" /></a><p class="wp-caption-text">Figure 8</p></div>
<p>In Figure 8, we would still like to be able to detect the collision of A with B even though A is very thin and rotating very quickly.</p>
<p>Luckily, speculative contacts do trap this case, simply by using the closest points between objects a pretty good approximation can be made with the time of collision. Its not perfect, but it does a reasonable job.</p>
<p><div id="silverlightControlHost2"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsAngular.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<p>As you can see in the above demo, the collision is handled, although the exact point of collision can be slightly wrong in some cases.</p>
<p>It can also handle the following case which crops up a lot in production code.</p>
<div id="attachment_223" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/Figure9.png"><img class="size-medium wp-image-223" title="Figure9" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/Figure9-300x257.png" alt="" width="300" height="257" /></a><p class="wp-caption-text">Figure 9</p></div>
<p>In Figure 9, A is moving toward B quickly and with no rotation, the ensuing collision causes a fast rotation on A, which would cause the right side of A to penetrate B on the next frame. But by simply building the <em>contact set</em> as you would for any discrete collision system and adding both contacts, the case is handled just fine, even with only a few iterations of the solver.</p>
<p><div id="silverlightControlHost3"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsAngularHard.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<h2>Goodbye TOI ordering</h2>
<p>Ok, so now we have the simple stuff out of the way, we can get into the really interesting part; using a simple modification of the speculative code we can actually move the TOI ordering problem out of the collision detection system and into the constraint solver.</p>
<p>But first we need to cover the basics of using a solver to approach the globally correct solution to the problem of constraint resolution.</p>
<h2>Globally correct</h2>
<p>This is a little bit tricky to describe but it basically describes a situation where all constraints have been resolved, but only just &#8211; i.e there was no constraint after the solver has run which is over-resolved (too much correction).</p>
<p>The problem is mainly due to the uni-lateral�contact constraint, which is only allowed to &#8216;push&#8217; objects apart but never &#8216;pull&#8217; them together; otherwise objects would stick together like glue.</p>
<p>Because contacts are only allowed to push, they have no mechanism available to them to counter adjust themselves &#8211; imagine a situation where solving one contact causes another contact to be solved &#8216;too much&#8217; (relative normal velocity now positive rather than 0), this over corrected contact can do nothing about this problem. The result is an unstable simulation.</p>
<p>The solution is to use a solver, such as Erin Catto&#8217;s sequential impulse system which allows the uni-lateral constraints to push <em>and </em>pull during the iterations, but still ensures that the resulting final impulse only pushes. Please see his <a href="http://box2d.googlecode.com/files/GDC2006_ErinCatto.zip">GDC slides</a> for a much better�explanation.</p>
<p>If it sounds confusing, don&#8217;t worry, the actual code associated with it is rather simple by comparison.</p>
<h2>TOI joy</h2>
<p>Ok, so now we have a global solver we can finally tackle the TOI problem. What we do is make a small change to the speculative code:</p>

<div class="wp_syntax"><table><tr><td class="code"><pre class="csharp" style="font-family:monospace;">Contact con <span style="color: #008000;">=</span> contacts<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span><span style="color: #008000;">;</span>
Vector2 n <span style="color: #008000;">=</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_normal</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// get all of relative normal velocity</span>
<span style="color: #6666cc; font-weight: bold;">double</span> relNv <span style="color: #008000;">=</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">-</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">.</span><span style="color: #0000FF;">Dot</span><span style="color: #008000;">&#40;</span>n<span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// we want to remove only the amount which leaves them touching next frame</span>
<span style="color: #6666cc; font-weight: bold;">double</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">=</span> relNv <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_dist</span><span style="color: #008000;">/</span>Constants<span style="color: #008000;">.</span><span style="color: #0000FF;">kTimeStep</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// compute impulse</span>
<span style="color: #6666cc; font-weight: bold;">double</span> imp <span style="color: #008000;">=</span> <span style="color: #0600FF; font-weight: bold;">remove</span> <span style="color: #008000;">/</span> <span style="color: #008000;">&#40;</span>con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span> <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// accumulate</span>
<span style="color: #6666cc; font-weight: bold;">double</span> newImpulse <span style="color: #008000;">=</span> Math<span style="color: #008000;">.</span><span style="color: #0000FF;">Min</span><span style="color: #008000;">&#40;</span>imp <span style="color: #008000;">+</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_impulse</span>, <span style="color: #FF0000;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// compute change</span>
<span style="color: #6666cc; font-weight: bold;">double</span> change <span style="color: #008000;">=</span> newImpulse <span style="color: #008000;">-</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_impulse</span><span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// store accumulated impulse</span>
con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_impusle</span> <span style="color: #008000;">=</span> newImpulse<span style="color: #008000;">;</span>
&nbsp;
<span style="color: #008080; font-style: italic;">// apply impulse</span>
con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">+=</span> change <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_a</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span>
con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_Vel</span> <span style="color: #008000;">-=</span> change <span style="color: #008000;">*</span> n <span style="color: #008000;">*</span> con<span style="color: #008000;">.</span><span style="color: #0000FF;">m_b</span><span style="color: #008000;">.</span><span style="color: #0000FF;">m_InvMass</span><span style="color: #008000;">;</span></pre></td></tr></table></div>

<p>Notice the condition checking for negative relative normal velocity has gone, to be replaced by a clamp inside the impulse calculation, and the impulse is accumulated. This allows the system to converge towards the global solution.</p>
<p><div id="silverlightControlHost4"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsTOI.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<p>In the above demo, the balls are�constrained on the y axis (you can move them by dragging them) and the ghost balls represent where the solid colour balls will end up next frame.</p>
<p>In the start scenario of this demo, red collides first with blue before later colliding with green, which should leave red hanging in the air incorrectly, as per the diagram in Figure 7</p>
<div id="attachment_213" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure7.png"><img class="size-medium wp-image-213" title="figure7" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure7-300x216.png" alt="" width="300" height="216" /></a><p class="wp-caption-text">Figure 7</p></div>
<p>Because the mode is set to &#8216;speculative sequential&#8217;�this situation is handled correctly. If you change mode to simple &#8216;speculative&#8217; you will see the difference.</p>
<p>Here is a step by step of what is happening over a course of 3 iterations (remember its the ghost balls we want to see colliding with each other):</p>
<div id="attachment_214" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi1.png"><img class="size-medium wp-image-214" title="toi1" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi1-300x43.png" alt="" width="300" height="43" /></a><p class="wp-caption-text">Iteration 1</p></div>
<p>On the first iteration, red collides with blue first before green collides with blue at an earlier TOI leaving red in the air as per usual.</p>
<div id="attachment_215" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi2.png"><img class="size-medium wp-image-215" title="toi2" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi2-300x40.png" alt="" width="300" height="40" /></a><p class="wp-caption-text">Iteration  2</p></div>
<p>On the second iteration, the motion of red which was postponed is now allowed to continue by the global solver (allowing pull as well as push during the iterations), but the collision isn&#8217;t resolved yet.</p>
<div id="attachment_216" style="width: 310px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi3.png"><img class="size-medium wp-image-216" title="toi3" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/toi3-300x29.png" alt="" width="300" height="29" /></a><p class="wp-caption-text">Iteration 3</p></div>
<p>The third iteration sees the solution converging to the correct global solution.</p>
<p>By moving the TOI ordering problem inside the constraint solver like this, we completely avoid having to do all the hard work in the collision detection phase.</p>
<p>The number of solver iterations used will affect the quality of the result, as ever.</p>
<h2>Other advantages</h2>
<p>I just wanted to touch on a few other advantages that speculative contacts give:</p>
<ul>
<li>No collision threshold required &#8211; because we don&#8217;t have the discrete collision problem of toggling between colliding/not colliding we don&#8217;t need to mitigate this by having a collision threshold around objects.</li>
<li>No inner hull required &#8211; now that distance is a�fundamental�part of the constraint system we don&#8217;t need to try and avoid penetration by shrinking our collision hulls by some radius which can cause problems with�triangular�objects.</li>
<li>No need to distinguish between objects which are considered to be &#8216;fast&#8217; and have special treatment in collision detection terms. All objects can go through the same system. This means you can have things which have previously been impossible, like a fast moving stack of blocks which all collide with the floor and each other.</li>
</ul>
<h2>Problems</h2>
<p>Of course no technique is without its associated problems. The most notable problem suffered by speculative contacts is the problem of so called &#8216;ghost&#8217; collisions.</p>
<div id="attachment_226" style="width: 265px" class="wp-caption alignnone"><a href="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure10.png"><img class="size-medium wp-image-226" title="figure10" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/03/figure10-255x300.png" alt="" width="255" height="300" /></a><p class="wp-caption-text">Figure 10</p></div>
<p>In Figure 10, the closest points between A and B are shown, but due to the motion of A, a ghost collision will be generated where A incorrectly collides with the plane of the collision normal on B.</p>
<p>In practice the problem is less apparent for circles than it is for polygons. The correct way to solve this problem is to use a technique such as <a href="http://www.continuousphysics.com/BulletContinuousCollisionDetection.pdf">Conservative Advancement</a>, ref Erwin Coumans of <a href="http://www.bulletphysics.org/">Bullet </a>fame, rather than a simple closest points between objects approach as detailed in this article.</p>
<p>The second problem is that if an object is warped into severe penetration it will tend to ping back out again rather than smoothly correct to zero penetration. This can be solved by splitting the distance equation up for negative / positive, but i&#8217;ve not included that in this article for clarity&#8217;s sake.</p>
<h2>Update</h2>
<p>I just realised i&#8217;ve committed a physics faux par by not including a demo of the physics engine &#8216;hello world&#8217; &#8211; the traditional Pile &#8216;O Boxes. So here it is, for your delectation. Running in only 3 iterations, the stability is impressive. I&#8217;ve updated the source code to contain this demo as well &#8211; if you already bought it and want this, just post a comment and i&#8217;ll email you the updated code for free <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p><div id="silverlightControlHost5"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="640" height="480"><param name="source" value="http://www.wildbunny.co.uk/media/SpeculativeContactsPileOBoxes2.xap"/><param name="background" value="white" /><param name="minRuntimeVersion" value="3.0.40723.0" /><param name="autoupgrade" value="true" /><param name="enableHtmlAccess" value="true" /><param name="initParams" value="3.0.40818.0" /><a href="http://go.microsoft.com/fwlink/?LinkID=149156" style="text-decoration: none;"><img src="http://storage.timheuer.com/sl4wp-ph.png" alt="Install Microsoft Silverlight" style="border-style: none; width:400px; height:200px"/></a></object><iframe style="visibility:hidden;height:0;width:0;border:0px" id="_sl_historyFrame"></iframe></div><br /></p>
<h2>Conclusion</h2>
<p>I believe that speculative contacts are very well suited to physics simulation in computer games where the requirement for speed over absolute accuracy is a good fit for the technique. If you still remain unconvinced, buy a copy of Little Big Planet and have a play around with the &#8216;create mode&#8217; &#8211; see if you can break it; its pretty robust.</p>
<h2>Source code</h2>
<p>If you found this article useful and would like to see more like this, please consider buying the source-code which i have made available on this page for a small cost &#8211; this will allow an indie developer like me to justify his�existence�for another month, and more importantly pay for things like food and rent!</p>
<p>After purchasing, you will be redirected to a page where you can download the source-code of every example in this article, written in c# and requires silverlight to build.</p>
<p>USD 19.99<br />
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
 <input type="hidden" name="business" value="paypal@wildbunny.co.uk" />
 <input type="hidden" name="cmd" value="_xclick" />
 <!-- Instant Payment Notification & Return Page Details -->
 <input type="hidden" name="notify_url" value="http://www.wildbunny.co.uk/blog/?s2member_paypal_notify=1" />
 <input type="hidden" name="cancel_return" value="http://www.wildbunny.co.uk/blog/" />
 <input type="hidden" name="return" value="http://www.wildbunny.co.uk/blog/?s2member_paypal_return=1" />
 <input type="hidden" name="rm" value="2" />
 <!-- Configures Basic Checkout Fields -->
 <input type="hidden" name="lc" value="" />
 <input type="hidden" name="no_shipping" value="1" />
 <input type="hidden" name="no_note" value="1" />
 <input type="hidden" name="custom" value="www.wildbunny.co.uk" />
 <input type="hidden" name="currency_code" value="USD" />
 <input type="hidden" name="page_style" value="paypal" />
 <input type="hidden" name="charset" value="utf-8" />
 <input type="hidden" name="item_name" value="Speculative contacts source" />
 <input type="hidden" name="item_number" value="sp:420:72" />
 <input type="hidden" name="amount" value="19.99" />
 <!-- Configures s2Member's Unique Invoice ID/Code  -->
 <input type="hidden" name="invoice" value="53d089dd9b55f~54.82.187.225" />
 <!-- Associates Purchase With A User/Member (when/if applicable) -->
 <input type="hidden" name="on0" value="Originating Domain" />
 <input type="hidden" name="os0" value="www.wildbunny.co.uk" />
 <!-- Identifies The Customer's IP Address For Tracking -->
 <input type="hidden" name="on1" value="Customer IP Address" />
 <input type="hidden" name="os1" value="54.82.187.225" />
 <!-- Displays The PayPal Image Button -->
 <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif" style="width:auto; height:auto; border:0;" alt="PayPal" />
</form></p>
<p><a href="http://www.wildbunny.co.uk/blog/welcome-to-our-members-area/">Subscribers can access the source here</a></p>
<p>Have fun,</p>
<p>Cheers, Paul.</p>

				<!-- Social Sharing Toolkit v2.0.4 | http://www.marijnrongen.com/wordpress-plugins/social_sharing_toolkit/ -->
				<div class="mr_social_sharing_wrapper"><span class="mr_social_sharing"><script type="text/javascript">
							  reddit_url = "http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/";
							  reddit_title = "Speculative Contacts – a continuous collision engine approach";
							</script>
							<script type="text/javascript" src="http://www.reddit.com/static/button/button1.js"></script></span><span class="mr_social_sharing"><a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" data-count="horizontal" data-text="Speculative Contacts – a continuous collision engine approach">Tweet</a></span><span class="mr_social_sharing"><iframe src="https://www.facebook.com/plugins/like.php?locale=en_US&amp;href=http%3A%2F%2Fwww.wildbunny.co.uk%2Fblog%2F2011%2F03%2F25%2Fspeculative-contacts-an-continuous-collision-engine-approach-part-1%2F&amp;layout=button_count&amp;show_faces=false&amp;width=90px&amp;height=21px" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:90px; height:21px;" allowTransparency="true"></iframe></span><span class="mr_social_sharing"><div id="fb-root"></div><fb:send href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" font=""></fb:send></span><span class="mr_social_sharing"><g:plusone size="medium" href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/"></g:plusone></span><span class="mr_social_sharing"><a href="http://www.stumbleupon.com/submit?url=http%3A%2F%2Fwww.wildbunny.co.uk%2Fblog%2F2011%2F03%2F25%2Fspeculative-contacts-an-continuous-collision-engine-approach-part-1%2F&amp;title=Speculative+Contacts+%E2%80%93+a+continuous+collision+engine+approach" target="_blank" class="mr_social_sharing_popup_link"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/social-sharing-toolkit/images/buttons/stumbleupon.png" alt="Submit to StumbleUpon" title="Submit to StumbleUpon"/></a></span></div><span style="clear:both;display:none;"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/wp-spamfree/img/wpsf-img.php" width="0" height="0" alt="" style="border-style:none;width:0px;height:0px;display:none;" /></span>											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=60&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar -->
						<div id="author-description">
							<h2>About Paul Firth</h2>
							A games industry veteran of ten years, seven of which spent at Sony Computer Entertainment Europe, he has had key technical roles on triple-A titles like the Bafta Award Winning Little Big Planet (PSP), 24: The Game (PS2), special effects work on Heavenly Sword (PS3), some in-show graphics on the BBC�s version of Robot Wars, the TV show, as well as a few more obscure projects.
&nbsp;
Now joint CEO of Wildbunny, he is able to give himself hiccups simply by coughing.
&nbsp;
1NobNQ88UoYePFi5QbibuRJP3TtLhh65Jp							<div id="author-link">
								<a href="http://www.wildbunny.co.uk/blog/author/paulfirth/">
									View all posts by Paul Firth <span class="meta-nav">&rarr;</span>								</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description -->
					</div><!-- #entry-author-info -->

					<div class="entry-utility">
						This entry was posted in <a href="http://www.wildbunny.co.uk/blog/category/platform-game/collision-detection-platform-game/" title="View all posts in Collision Detection" rel="category tag">Collision Detection</a>, <a href="http://www.wildbunny.co.uk/blog/category/physics-2/" title="View all posts in Physics" rel="category tag">Physics</a>, <a href="http://www.wildbunny.co.uk/blog/category/silverlight-2/" title="View all posts in Silverlight" rel="category tag">Silverlight</a>, <a href="http://www.wildbunny.co.uk/blog/category/technical/" title="View all posts in Technical" rel="category tag">Technical</a> and tagged <a href="http://www.wildbunny.co.uk/blog/tag/collision-detection/" rel="tag">collision detection</a>, <a href="http://www.wildbunny.co.uk/blog/tag/games/" rel="tag">games</a>, <a href="http://www.wildbunny.co.uk/blog/tag/physics/" rel="tag">physics</a>, <a href="http://www.wildbunny.co.uk/blog/tag/simulation/" rel="tag">simulation</a>. Bookmark the <a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/" title="Permalink to Speculative Contacts &#8211; a continuous collision engine approach" rel="bookmark">permalink</a>.											</div><!-- .entry-utility -->
				</div><!-- #post-## -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://www.wildbunny.co.uk/blog/2011/03/18/2d-isometric-land-breaking-out-of-the-grid-update/" rel="prev"><span class="meta-nav">&larr;</span> 2d isometric land &#8211; breaking out of the grid update</a></div>
					<div class="nav-next"><a href="http://www.wildbunny.co.uk/blog/2011/03/27/isometric-coordinate-systems-the-modern-way/" rel="next">Isometric coordinate systems &#8211; the modern way <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
			<div id="comments">


			<h3 id="comments-title">167 Responses to <em>Speculative Contacts &#8211; a continuous collision engine approach</em></h3>

			<div class="navigation">
				<div class="nav-previous"></div>
				<div class="nav-next"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/#comments" >Newer Comments <span class="meta-nav">&rarr;</span></a></div>
			</div> <!-- .navigation -->

			<ol class="commentlist">
					<li class="comment even thread-even depth-1" id="li-comment-93">
		<div id="comment-93">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/a0c2d0b538ba33a57cee055a97eb4546?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.metanetsoftware.com/blog' rel='external nofollow' class='url'>raigan</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-93">
			March 25, 2011 at 5:38 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Excellent article! I have a couple questions:</p>
<p>In Fig 5, shouldn&#8217;t the future position of A be further to the right? Currently it looks like A&#8217;s movement is being truncated, when really it should be projected straight above the future position in Fig 4&#8230; unless I&#8217;m missing something.</p>
<p>Secondly, do you handle circles specially? Specifically, the contact normal n isn&#8217;t well-defined for two circles (i.e you can&#8217;t just use a fixed value, it changes as the circles move position) which means you have to calculate closest points/contact normal immediately before solving the constraint. Is this something that you do with all contact pairs, or just circle-circle pairs? I suppose I&#8217;m being lazy, I could just browse the source&#8230;</p>
<p>Thanks <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=93#respond' onclick='return addComment.moveForm("comment-93", "93", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-95">
		<div id="comment-95">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-95">
			March 25, 2011 at 11:31 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Raigan,</p>
<p>In figure 5, the collsion point is the at the first TOI between A and B &#8211; you&#8217;re correct in terms of where it would be if you projected the remaining velocity along B (like happens in figure 3), but this is one of the &#8216;features&#8217; of speculative contacts; it postpones the movement until next frame&#8230;</p>
<p>Circles are not handled any differently &#8211; just the closest points are used as usual at the start of the time-step. It isn&#8217;t perfectly correct, but the visible artefacts are minimal in the tests that i&#8217;ve run. If they are not acceptable in your case, you can simply linear sweep the circles together (equivalent to raycast from origin to minkowski sum) and take contact points from the real point of contact <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=95#respond' onclick='return addComment.moveForm("comment-95", "95", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-94">
		<div id="comment-94">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/907d3b7b04855bee1c8be00860758a16?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://howlingmoonsoftware.com' rel='external nofollow' class='url'>Scott Lembcke</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-94">
			March 25, 2011 at 11:08 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>So I used to do something similar, but totally broken. Collisions that would happen within the next frame would be handled in place. Because the solver ran before integrating position, objects would &#8220;pre collide&#8221;. This was sort of a nasty artifact where a high speed object would collide with a solid wall part of a step too early and fall to the ground. For a while I thought this was preferable to missing the collision, but eventually just started making games that avoided the need for swept collisions altogether.</p>
<p>This is starting to make sense to me though. I&#8217;m totally going to have to try this out in Chipmunk! Now I just need to get off my lazy bum and implement CA&#8230;</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=94#respond' onclick='return addComment.moveForm("comment-94", "94", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-96">
		<div id="comment-96">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-96">
			March 25, 2011 at 11:39 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Scott,</p>
<p>I think i&#8217;ve implemented a system like that before &#8211; IIRC it was from the Eran Guendelman paper, &#8216;stacking rigid bodies&#8217; <a href="http://physbam.stanford.edu/~fedkiw/papers/stanford2003-01.pdf" rel="nofollow">http://physbam.stanford.edu/~fedkiw/papers/stanford2003-01.pdf</a> it would predict the contacts next frame but still in a discrete fashion which meant that things would bounce off the floor just slightly before they were supposed to, as you say <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>This technique is quite different, and really easy to try out if you have a spare moment <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>You don&#8217;t really need CA as prerequisite, you can get quite a long way without it &#8211; i know it can be a tricky thing to implement correctly <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=96#respond' onclick='return addComment.moveForm("comment-96", "96", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-97">
		<div id="comment-97">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/907d3b7b04855bee1c8be00860758a16?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://howlingmoonsoftware.com' rel='external nofollow' class='url'>Scott Lembcke</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-97">
			March 26, 2011 at 12:06 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Yeah, it was inspired by that paper actually. I also used to use elastic iterations in Chipmunk for a long time until I figured out a trivial way to get rid of them by moving some operations around in my time step. I wasn&#8217;t actually repositioning objects and re-colliding them like in the paper, as I was only interested in stable stacking of elastic objects without using thresholds.</p>
<p>I&#8217;ve dabbled with a couple ideas in the past few years for approximating TOI impacts without actually sorting, but none of them have actually worked well at all. This totally has that &#8220;Now why didn&#8217;t I think of that!&#8221; feel to it, though I know I never would have come up with it in a million years. Heh <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=97#respond' onclick='return addComment.moveForm("comment-97", "97", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-98">
		<div id="comment-98">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-98">
			March 26, 2011 at 12:13 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Elastic collisions always seem to be a nightmare <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  Oddly, none of the games i&#8217;ve ever worked on have called for them, so we&#8217;ve gotten off lightly because it makes solving the system a lot easier&#8230;</p>
<p>I think the TOI ordering problem is a lot more difficult to solve than just predicting the TOI between two objects &#8211; it makes things a lot more messy which is why this is such a liberating technique, its only slightly more complex than discrete collision <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=98#respond' onclick='return addComment.moveForm("comment-98", "98", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-99">
		<div id="comment-99">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e1f20ba9240c3e043dd94e876fc09fad?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://theindiestone.com/nick' rel='external nofollow' class='url'>Nick Cowen (Nickenstein)</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-99">
			March 26, 2011 at 6:18 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Fantastic work, Paul! I utterly love it! <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_biggrin.gif" alt=":D" class="wp-smiley" /> </p>
<p>Buy Paul&#8217;s clever code, people! (If you don&#8217;t, then you are just being nasty!)</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=99#respond' onclick='return addComment.moveForm("comment-99", "99", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-101">
		<div id="comment-101">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/1ed1b5bd39da55997b174105bb865a41?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.draknek.org/' rel='external nofollow' class='url'>Alan Hazelden</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-101">
			March 26, 2011 at 11:58 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>This looks like an interesting approach, will have to try it out at some point</p>
<p>I wish the demos were in Flash rather than Silverlight though. I can&#8217;t view them on this computer&#8230;</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=101#respond' onclick='return addComment.moveForm("comment-101", "101", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-102">
		<div id="comment-102">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-102">
			March 27, 2011 at 12:03 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Alan,</p>
<p>I&#8217;m trying to migrate to flash part by part (simply because the install base is so much better), but i just find silverlight much easier to work with <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=102#respond' onclick='return addComment.moveForm("comment-102", "102", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-566">
		<div id="comment-566">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/c06ae173ad8ac24943326a32cae5ed88?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.olhovsky.com' rel='external nofollow' class='url'>Kris Olhovsky</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-566">
			May 10, 2011 at 9:36 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I notice that you started writing examples in flash. If you feel like writing some of your future examples in Silverlight though, then I wouldn&#8217;t complain <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  I prefer to read C# code over Actionscript, personally.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=566#respond' onclick='return addComment.moveForm("comment-566", "566", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-4" id="li-comment-567">
		<div id="comment-567">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-567">
			May 10, 2011 at 10:00 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Kris,</p>
<p>Its a tricky one; I totally agree with you about the readability of c# over actionscript and indeed, I much prefer silverlight in general than flash, however the stats I&#8217;ve been gathering about the percentage of people with silverlight installed are worrying &#8211; something like only 50% which really cuts the readership in two&#8230; Its a shame&#8230;</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=567#respond' onclick='return addComment.moveForm("comment-567", "567", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-107">
		<div id="comment-107">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/af9527316daaded00d474e385a9c76fc?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://adidassamba.theblogsyndicate.com/' rel='external nofollow' class='url'>Connie</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-107">
			March 27, 2011 at 8:24 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Amazing details! I have been previously looking for something such as this for a while now. Thx!</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=107#respond' onclick='return addComment.moveForm("comment-107", "107", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-115">
		<div id="comment-115">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/a0c2d0b538ba33a57cee055a97eb4546?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.metanetsoftware.com/blog' rel='external nofollow' class='url'>raigan</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-115">
			March 29, 2011 at 2:54 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Could I get the latest source? Thanks <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=115#respond' onclick='return addComment.moveForm("comment-115", "115", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-116">
		<div id="comment-116">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-116">
			March 29, 2011 at 2:59 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Sure, i&#8217;ll mail it <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=116#respond' onclick='return addComment.moveForm("comment-116", "116", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://ominian.com/2011/03/29/advanced-collision-detection/' rel='external nofollow' class='url'>Advanced collision detection - Refactored scope</a></p>
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-125">
		<div id="comment-125">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/49a99749f959d44ba6b496403b714b32?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Dirk Gregorius</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-125">
			March 30, 2011 at 9:03 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul,</p>
<p>thanks for the article. It seems as if your discrete solver is not using any stabilization. If I am correct I would argue that this is not a fair comparison since it let&#8217;s the discrete solver appear much worse than the speculative. The speculative contacts should solve tunneling issues and not lead to improved physics quality how it is suggested from your demos.</p>
<p>Thanks,<br />
-Dirk</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=125#respond' onclick='return addComment.moveForm("comment-125", "125", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-126">
		<div id="comment-126">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-126">
			March 30, 2011 at 10:00 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Dirk,</p>
<p>By stabilisation do you mean penetration correction? I&#8217;m sorry i&#8217;m not fully clued up on all the terminology <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>If so, i always found that by doing any penetration resolution the stability of the simulation would always decrease &#8211; the reason being the main point i sight in the article &#8211; the transition from positive distance to penetration would always cause a jarring discontinuity which was the main cause of the jittering i found. The beauty of the speculative contacts is that because of the distance calculation, this is factored directly in to the solver making a much more stable simulation.</p>
<p>I hope that makes sense <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=126#respond' onclick='return addComment.moveForm("comment-126", "126", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-130">
		<div id="comment-130">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/866e338016c46fb0be0f201e02102d88?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://box2d.org' rel='external nofollow' class='url'>Erin Catto</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-130">
			March 31, 2011 at 7:27 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul,</p>
<p>Great article! I look forward to trying this in Box2D.</p>
<p>On the flip side of separation, we have penetration. Your speculative solver also removes penetration.</p>
<p>You can get the same effect in the discrete solver (often called Baumgarte stabilization) by modifying the discrete solver from:</p>
<p><code>double remove = relNv;</code></p>
<p>to:</p>
<p><code>double remove = relNv + 0.4 * (con.m_dist + 1) / Constants.kTimeStep;</code></p>
<p>The value 0.4 is the Baumgarte factor which removes overlap over several time steps.  The value of 1 added to the distance is the collision slop which removes jitter by allowing a small overlap. Obviously this introduces some fudge factors that speculative contacts seem to avoid.</p>
<p>I don&#8217;t think you will find a discrete solver without this type of position stablization or better, so you should probably update your demos because the difference is huge.</p>
<p>Cheers,<br />
Erin</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=130#respond' onclick='return addComment.moveForm("comment-130", "130", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-131">
		<div id="comment-131">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-131">
			March 31, 2011 at 10:27 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Erin,</p>
<p>You are quite right, the speculative solver does deal with penetration simply by the fact that its dealing with distance as a primary part of the solver. I had originally intentionally not tried to implement penetration resolution in the discrete solver in the articles because i was worried it would cause the first example to jitter more than it would otherwise have done, and unfairly skew the results in favour of the speculative solver. </p>
<p>But i can see how it looks like an unfair comparison in the demos where there are many interacting bodies &#8211; so i&#8217;ve updated all the demos and source code to represent the penetration resolution you described <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Thanks for the feedback <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=131#respond' onclick='return addComment.moveForm("comment-131", "131", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-145">
		<div id="comment-145">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/177c2f822b8db218063b9c261999f6f6?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Bart Siwek</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-145">
			April 1, 2011 at 1:37 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Excellent post!<br />
Did you considered submitting it to #altdevblogaday?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=145#respond' onclick='return addComment.moveForm("comment-145", "145", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-148">
		<div id="comment-148">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-148">
			April 1, 2011 at 2:07 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I didn&#8217;t know about that site! Thanks for pointing it out <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=148#respond' onclick='return addComment.moveForm("comment-148", "148", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://www.wildfactor.net/news/continuous-collision.html' rel='external nofollow' class='url'>Continuous Collision | Wild Factor</a></p>
	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://www.wildbunny.co.uk/blog/2011/04/06/physics-engines-for-dummies/' rel='external nofollow' class='url'>Physics engines for dummies | Paul&#039;s blog@Wildbunny</a></p>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-251">
		<div id="comment-251">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/321a6fbcb29849d8efbc48fbd01decfe?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">The Mad Pirate</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-251">
			April 9, 2011 at 8:28 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>PKnzip ??????? Man !!!! You are EVIL !!!!</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=251#respond' onclick='return addComment.moveForm("comment-251", "251", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-303">
		<div id="comment-303">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/b85d1273c9132bd30a0667145a0cefe9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Binh Nguyen</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-303">
			April 13, 2011 at 1:30 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>This is basically what we did in dVC2d and dVC3d.<br />
That&#8217;s the reason why the two engines never had problems with tunelling issues. It&#8217;s also why I always bug Erwin for positive contact distance in Bullet. In the end, I had to modify Bullet to get it.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=303#respond' onclick='return addComment.moveForm("comment-303", "303", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-306">
		<div id="comment-306">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-306">
			April 13, 2011 at 9:46 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hey great!</p>
<p>More real world use cases <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  dVC2d &#8211; is that the Da Vinci Code? I googled dVC2d but it didn&#8217;t turn anything up&#8230;</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=306#respond' onclick='return addComment.moveForm("comment-306", "306", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-328">
		<div id="comment-328">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/b85d1273c9132bd30a0667145a0cefe9?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Binh Nguyen</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-328">
			April 15, 2011 at 2:34 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul,</p>
<p>dVC2d website and source code can be accessed here: <a href="http://sourceforge.net/projects/dvc/" rel="nofollow">http://sourceforge.net/projects/dvc/</a></p>
<p>Cheers</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=328#respond' onclick='return addComment.moveForm("comment-328", "328", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-4" id="li-comment-329">
		<div id="comment-329">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-329">
			April 15, 2011 at 2:36 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Ahhh, cool! <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  Good work&#8230;.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=329#respond' onclick='return addComment.moveForm("comment-329", "329", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-369">
		<div id="comment-369">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/a5be73dba3d3fd1c4b15fb396fd21702?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">peter</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-369">
			April 19, 2011 at 1:00 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>i realy like the article, i did some beginners level into this, so you got my attention.<br />
i never programmed silverlight,  is the sample code in silverlight ? (so a webserver is required) or is it both within and without that?</p>
<p>instead of paypall do you accept other payment methods, (ideal) ?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=369#respond' onclick='return addComment.moveForm("comment-369", "369", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-378">
		<div id="comment-378">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-378">
			April 19, 2011 at 11:16 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Peter,</p>
<p>Yes this particular article&#8217;s sample code is written for silverlight in c#, but you don&#8217;t need a webserver to run it, just microsoft visual web developer express 2008, which is free and the silverlight 3.0 developer kit which is also free&#8230;</p>
<p>Currently I can&#8217;t accept payment other than paypal, I&#8217;m afraid&#8230;</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=378#respond' onclick='return addComment.moveForm("comment-378", "378", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://www.jschweiss.de/blog/post/2011/04/23/Physics-engine.aspx' rel='external nofollow' class='url'>Blog J.Schweiss | Physics engine</a></p>
	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-524">
		<div id="comment-524">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/f8124e33e55a46a55a65da66e1613c00?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Chris</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-524">
			April 27, 2011 at 6:50 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul,</p>
<p>I purchased the source for this article, and I&#8217;ve implemented your speculative contact system, which works brilliantly by the way, but I have a question about friction. Setting a higher friction factor causes linear movement to influence angular velocity more, and will slow linear velocity somewhat, however, no matter how high the friction is set, the bodies seem to always slide and rotate a little, and will never come to a complete stop. I realize I could zero velocities when they fall below an epsilon, but it seems that once they reach a certain point, they stop slowing down. Do you know how to solve this problem?</p>
<p>Also, I believe you said implementing restitution in a specular contact system is very difficult. Do you have any tips on where to start?</p>
<p>Thanks!<br />
Chris H.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=524#respond' onclick='return addComment.moveForm("comment-524", "524", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-525">
		<div id="comment-525">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-525">
			April 27, 2011 at 8:16 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Chris,</p>
<p>The friction stuff in the code was never really finished which is why I didn&#8217;t cover it in the article (and why it was set to zero in the demos) &#8211; I found the same thing as you when I was playing with it for a couple of minutes.</p>
<p>It might be that I have a bug in there somewhere <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_neutral.gif" alt=":|" class="wp-smiley" />  or its possible that the system doesn&#8217;t have enough iterations to converge for friction as well.</p>
<p>Definitely do not zero the velocities below a threshold &#8211; that will cause all sorts of problems&#8230;. <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>For restitution, I&#8217;ve never tried actually so i&#8217;m not sure what to advise &#8211; I have a feeling its hard to impossible i&#8217;m afraid <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_neutral.gif" alt=":|" class="wp-smiley" /> </p>
<p>Sorry I can&#8217;t help more,</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=525#respond' onclick='return addComment.moveForm("comment-525", "525", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-531">
		<div id="comment-531">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/f8124e33e55a46a55a65da66e1613c00?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Chris</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-531">
			April 27, 2011 at 10:47 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Alright, I&#8217;ll see if I can try to get these things working. Let me know if you fix the friction problem. And great job on these articles! I&#8217;d love to see some more physics programming articles, and the source code is well worth the price, keep it up!</p>
<p>Chris H.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=531#respond' onclick='return addComment.moveForm("comment-531", "531", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-4" id="li-comment-537">
		<div id="comment-537">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-537">
			April 28, 2011 at 9:35 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Thanks chris, I will do <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=537#respond' onclick='return addComment.moveForm("comment-537", "537", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://www.realtimerendering.com/blog/seven-things-for-may-4th-2011/' rel='external nofollow' class='url'>Real-Time Rendering &middot; Seven Things for May 4th, 2011</a></p>
	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://www.olhovsky.com/2011/05/physics-engine/' rel='external nofollow' class='url'>Physics engine. | Olhovsky</a></p>
	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-olhovsky odd alt thread-even depth-1" id="li-comment-573">
		<div id="comment-573">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/c06ae173ad8ac24943326a32cae5ed88?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Kris</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-573">
			May 12, 2011 at 1:19 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I notice that you don&#8217;t do anything with the contact positions in the Contacts (as the solver doesn&#8217;t require them explicitly). I&#8217;m experimenting with building a simple physics simulator and I was wondering what use we might have for the closest points on either object?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=573#respond' onclick='return addComment.moveForm("comment-573", "573", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-olhovsky even depth-2" id="li-comment-574">
		<div id="comment-574">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/c06ae173ad8ac24943326a32cae5ed88?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Kris</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-574">
			May 12, 2011 at 5:58 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>You can disregard that comment. I see now <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=574#respond' onclick='return addComment.moveForm("comment-574", "574", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-722">
		<div id="comment-722">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/5e177ae689d85c7714dbdc2e4a1cceeb?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://knarf.se/' rel='external nofollow' class='url'>Frank M. Eriksson</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-722">
			July 26, 2011 at 4:57 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Well, You shall not forget everybody that is browsing the internet on their phones, tables, iPads, whatnot either.</p>
<p>The way of digesting internet content is rapidly changing, and the only safe bet to get your content to show up would be with HTML5.</p>
<p>But that might not be most enjoyful way to make whatever your silverlight demos was supposed to show (No, I did not see them. I would bet that among all high-end internet enabled devices, the figure is far below 50%. Maybe its 50% of windows users which would be like 34% of all PCs, no squat of other internet devices, not even the 7% of windows phones I&#8217;d guess)</p>
<p>I have not played around with Silverlight myself, but I&#8217;d guess that it&#8217;s probably waay better than Flash (Which really has grown beyond it&#8217;s scope).</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=722#respond' onclick='return addComment.moveForm("comment-722", "722", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-723">
		<div id="comment-723">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-723">
			July 26, 2011 at 9:34 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Frank,</p>
<p>I dislike HTML5 with a passion &#8211; java-script is a joke of a language; no classes, weak types etc&#8230; I moved to flash pretty much directly after I wrote this article which is only slightly better than java-script as a language but has no adoption problems like silverlight did.</p>
<p>Apple devices are pretty much the only ones not to support flash, which is a shame, but it still remains the one platform with the greatest reach dispite HTML5&#8242;s inroads. It will be years before HTML5 is even on level terms with flash; there is no way you can replace all the tools, shared knowledge and infrastructure quickly enough for HTML5 to become dominant any time soon. <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=723#respond' onclick='return addComment.moveForm("comment-723", "723", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-724">
		<div id="comment-724">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/58e9f7a41e29f22423db294f86474864?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Lurchi</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-724">
			July 27, 2011 at 1:01 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hello Paul,</p>
<p>first of all many thanks for all your physic-engine related articles. Very interesting technique (I was experimenting with repositioning the objects and they got stuck all the time and the whole simulation got instable). But finally my physic engine works fine with your help <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_wink.gif" alt=";-)" class="wp-smiley" /> </p>
<p>But I was wondering if it&#8217;s possible to let f.e. a ball bounce on a plane. Currently if a ball falls on a plane it&#8217;s perfectly sldiding on it. But sometimes it would be more useful that the ball is allowed to &#8220;bounce back&#8221; (Elastic collision?).  </p>
<p>Is there any way to implement this or any literature to read? Or is it simply not possible? <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_neutral.gif" alt=":|" class="wp-smiley" /> </p>
<p>Thank you,</p>
<p>Lurchi</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=724#respond' onclick='return addComment.moveForm("comment-724", "724", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-725">
		<div id="comment-725">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-725">
			July 27, 2011 at 1:04 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Lurchi,</p>
<p>No problem, glad you enjoyed them!</p>
<p>Unfortunately, non-0 coefficients of restitution are not handled at all with this technique and I&#8217;ve never tried to implement them either &#8211; none of the games which use this technique have ever called for that. </p>
<p>Sorry I can&#8217;t be more help!</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=725#respond' onclick='return addComment.moveForm("comment-725", "725", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-734">
		<div id="comment-734">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/07b468fdc1d6a7e7c4fcfec3862e1ad5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Niall</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-734">
			August 11, 2011 at 7:52 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hey Paul, first of all great article!</p>
<p>I&#8217;ve been trying a simple dynamic circle &#8211; static line segment collision detection/response thing, and while the detection works I&#8217;m having trouble computing the right impulse. I understand everything regarding relative normal velocity and such, and normally my standard velocity reflection thing would be 2*(velocity dot normal)*normal so I assumed the speculative version&#8217;s impulse would just be remove divided by that, however it tends to just fall straight through.<br />
Do you know what I could be doing wrong?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=734#respond' onclick='return addComment.moveForm("comment-734", "734", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-735">
		<div id="comment-735">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-735">
			August 11, 2011 at 8:47 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Niall,</p>
<p>Can you post the code you&#8217;re using; its difficult to tell otherwise? <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=735#respond' onclick='return addComment.moveForm("comment-735", "735", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-736">
		<div id="comment-736">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/07b468fdc1d6a7e7c4fcfec3862e1ad5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Niall</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-736">
			August 11, 2011 at 9:17 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hey Paul, here&#8217;s what my discrete solver code looks like:<br />
<code>if (d &lt; radius) {<br />
	// Collision normal<br />
	var ndx = dx/d;<br />
	var ndy = dy/d;</p>
<p>	// Impulse<br />
	var imp = 2*(char.vx*ndx+char.vy*ndy);</p>
<p>	char.vx -= imp*ndx;<br />
	char.vy -= imp*ndy;</p>
<p>	// Positional correction<br />
	char.x -= (radius-d)*ndx;<br />
	char.y -= (radius-d)*ndy;<br />
}</code><br />
d being distance from the ball&#8217;s center point to the contact, dx and dy being the x/y components.</p>
<p>So my speculative version looks like this:</p>
<p><code><br />
var rv = char.vx*l.nx+char.vy*l.ny;<br />
var remove = rv+d;<br />
if (remove &lt; 0) {<br />
	var ndx = dx/d;<br />
	var ndy = dy/d;</p>
<p>	var imp = remove/(2*(char.vx*ndx+char.vy*ndy));</p>
<p>	char.vx -= imp*ndx;<br />
	char.vy -= imp*ndy;<br />
}<br />
</code><br />
However the ball just falls straight through the line, and the impulse is very small.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=736#respond' onclick='return addComment.moveForm("comment-736", "736", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-4" id="li-comment-737">
		<div id="comment-737">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-737">
			August 11, 2011 at 10:34 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Niall,</p>
<p>Have you got an implicit coefficient of restitution of 1 in there? I.e. elastic collision?</p>
<p>That&#8217;s the one thing that this technique does not handle <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  Its only designed for completely plastic collisions &#8211; i.e ball hits floor and stops dead.</p>
<p>However, that may not be the exact cause of your bug&#8230; I think the maths you have for computing the speculative response is wrong.</p>
<p>&#8216;remove&#8217; is calculated correctly, although I don&#8217;t see you dividing by the timestep in there?</p>
<p>But, apart from that, it would simply be:</p>
<p>remove = rv+d/dt<br />
if (remove &lt; 0)<br />
{<br />
   imp = remove;<br />
   char.vx -= imp*ndx;<br />
   char.vy -= imp*ndy;<br />
}</p>
<p>I think <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=737#respond' onclick='return addComment.moveForm("comment-737", "737", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-5" id="li-comment-738">
		<div id="comment-738">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/07b468fdc1d6a7e7c4fcfec3862e1ad5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Niall</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-738">
			August 11, 2011 at 11:13 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Ah right, I wasn&#8217;t aware of the coefficient of restitution problem. As for not dividing by the timestep, I was just neglecting it due to having a timestep of 1. I can&#8217;t see a reason why it wouldn&#8217;t still work, however it&#8217;s still just passing straight through ):</p>
<p>Do you think this could be caused by a lack of positional correction, or is it something else at fault?</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-5" id="li-comment-739">
		<div id="comment-739">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-739">
			August 12, 2011 at 9:45 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Its very difficult to say without sitting down in front of it and debugging it <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>At the very least you should be able to get the ball to stop dead exactly at the point of collision, rather than passing straight though. Do you have a debugger? If not liberal use of printf/trace will help! <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-741">
		<div id="comment-741">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/07b468fdc1d6a7e7c4fcfec3862e1ad5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Niall</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-741">
			August 13, 2011 at 12:32 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul, just a quick followup &#8211; turns out my distance variable was the closest point on the line segment to the circle&#8217;s center, not accounting for circle radius &#8211; so it behaved a bit oddly! I&#8217;ve got it working now, just needed to adjust remove to rv+(d-radius).</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=741#respond' onclick='return addComment.moveForm("comment-741", "741", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://jitter-physics.com/wordpress/?p=109' rel='external nofollow' class='url'>Speculative Contacts &laquo; Jitter Physics</a></p>
	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-864">
		<div id="comment-864">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/d3ddc8a97531a4ee5ef782ddd737c045?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joshua</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-864">
			October 12, 2011 at 7:14 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Paul, this is an excellent article.  Thanks for all the effort you put into it.  There is one benefit to this system that so far no one has mentioned, probably because it is aesthetic and not technical, and that is the &#8220;hit&#8221; frame.  In traditional animation we try really hard to emphasize the impact frame of objects that are contacting.  This system (by default) gives you a nice contact frame since it doesn&#8217;t immediately traverse the reflection trajectory.  I notice that a lot of games, especially with very fast objects/projectiles have poor contact frames and sometimes the contact frame isn&#8217;t even visible.  I&#8217;m not sure if you thought about this when designing this system, but I consider it a feature!</p>
<p>P.S.  I spent way to much time in the Little Big Planet editor breaking stuff <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_razz.gif" alt=":P" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=864#respond' onclick='return addComment.moveForm("comment-864", "864", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-865">
		<div id="comment-865">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-865">
			October 12, 2011 at 9:16 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Joshua,</p>
<p>Thanks for the input &#8211; that&#8217;s a very good point you have there. I think the fact that the hit frame is always visible gives a very nice solidity to the feel of the system which is important as you say <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Thanks for pointing it out!</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=865#respond' onclick='return addComment.moveForm("comment-865", "865", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-866">
		<div id="comment-866">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/de588f02761bdfd6c3f2801a0be23a86?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Matt</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-866">
			October 12, 2011 at 7:43 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Excellent point Joshua.<br />
Brilliant article as always Paul.</p>
<p>I had a few questions trying to implement this myself and thought i&#8217;d ask here so others could share the answers.</p>
<p>Not considering any kind of resting state:<br />
1.) Are Speculative contacts solved along side with penetrating elastic contacts? Or is all contact resolution handled in this speculative way?<br />
 &#8211; The reason i suspect all contacts are handled this way is because if this system always prevents collision then there would be no other types of collision to handle? (only penetration)<br />
2.) How do speculative contacts work with persistence? Is it valid to keep monitoring the speculative contact witnesses after it has been resolved? Or is it best to ditch these immediately?<br />
3.) For the angular case, does one compute the impulse in the traditional elastic contact way, for the amount of velocity to be removed?</p>
<p>Currently my physics step looks like this:</p>
<p>* Update velocities from world forces( gravity )<br />
* Update broadphase to encompass current and predicted future location.<br />
* Perform SAT on potential pairs, keep the penetration and closest point for all pairs.<br />
* Iterate contact points adjusting velocities and correcting any penetration. Keep penetration up to date with each step.<br />
* Advance body&#8217;s positions and angles based on new velocities<br />
* Apply constraint forces and relax error</p>
<p>Currently this addition has made my simulation more unstable, albeit nearly tunnel proof. I believe this is due to me locating position integration after contact resolution.</p>
<p>Also, boxes that bounce up on to one corner and come to rest appear heavily damped, near the resting state. That&#8217;s why I asked about the persistence.</p>
<p>When i initially read the article, and you mentioned loss of time. I took that as literally clamping dt for the current frame when integrating velocity into position. Such that no velocity is lost, literally only time. And then collision would be handled on the next frame as usual. Have you tried a method like that?</p>
<p>Thank you so much for your time Paul. Please keep up these great articles.<br />
-Matt Kincaid</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=866#respond' onclick='return addComment.moveForm("comment-866", "866", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-867">
		<div id="comment-867">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/de588f02761bdfd6c3f2801a0be23a86?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Matt</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-867">
			October 13, 2011 at 5:30 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I have made good progress.<br />
Using only speculative collisions the simulation is extremely solid now!<br />
It allows my small ragdoll bodies to collide and come to rest on top of each other which was not possible before.</p>
<p>I found the major problem with my stability was my implementation of this equation:<br />
//j =  	        magnitude<br />
//     &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;<br />
//       1/ma + Dot( N, ((rAp x direction) / Ia) x rAp)<br />
from: David Baraff, Siggraph &#8217;01</p>
<p>I noticed the speculative contacts seem to produce an outward velocity to solve penetration somehow.  Could you explain how this works? </p>
<p>To me it just seems that the illustration flips over the collision plane and the function works to settle the velocity in the outward velocity. If that were the case it seems like it glue them together.</p>
<p>Thanks again for the great reads Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=867#respond' onclick='return addComment.moveForm("comment-867", "867", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-870">
		<div id="comment-870">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-870">
			October 14, 2011 at 9:24 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Matt,</p>
<p>Glad you are making good progress <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Regarding the penetration resolution &#8211; I found that speculative contacts would cause objects in penetration to &#8216;ping&#8217; out slightly unnaturally (adding velocity to the system). So what I did in the angry birds article was to split the positive and negative component of the speculative contact &#8211; the positive is used as is and the negative (penetration) is separated and used as a split impulse so that no energy is introduced. This lead to a more stable simulation.</p>
<p>Check the angry birds article for a description of how I handle persistence as well <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=870#respond' onclick='return addComment.moveForm("comment-870", "870", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-1595">
		<div id="comment-1595">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/bfec6e9c5291cc5ea735b39fca5c57ab?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Alejandro Guillen B.</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1595">
			September 20, 2012 at 8:47 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Paul could you expand on this?<br />
I have the same problem of objects &#8220;bouncing&#8221; when they are interpenetrating. What is a split impulse?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1595#respond' onclick='return addComment.moveForm("comment-1595", "1595", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://www.wildbunny.co.uk/blog/2011/06/07/how-to-make-angry-birds-part-2/' rel='external nofollow' class='url'>How to make Angry Birds &#8211; part 2 | Paul&#039;s blog@Wildbunny</a></p>
	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://tomicren.allergiesaid.com/2011/11/03/figured-contacts/' rel='external nofollow' class='url'>Figured contacts | Tomicren</a></p>
	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://www.wildfactor.net/game-development/continuous-collision.html' rel='external nofollow' class='url'>Continuous Collision | Wild Factor</a></p>
	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://www.wildbunny.co.uk/blog/2011/12/14/how-to-make-a-2d-platform-game-part-2-collision-detection/' rel='external nofollow' class='url'>How to make a 2d platform game &#8211; part 2 collision detection | Paul&#039;s blog@Wildbunny</a></p>
	</li><!-- #comment-## -->
	<li class="post pingback">
		<p>Pingback: <a href='http://michaelrush.net/47/' rel='external nofollow' class='url'>Collisions: Part 2 | Michael Rush</a></p>
	</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-1469">
		<div id="comment-1469">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/f13d2c0adf296e93530abf30e9319a41?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Pierre</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1469">
			June 13, 2012 at 4:20 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hello there,<br />
I&#8217;m actually trying to make a small game in AS3. And recently I put my hands into collision detection and simple physics (no rotations are needed for my game purposes)<br />
The shapes involved essentially are AABBs. I implementes a really simple brute force SAP to manage my broad phase and i&#8217;m trying to implement these speculative collisions described here. I find the approach much more logical than doing micro impulses.<br />
At this time, i extended my aabb shapes with their velocities for the broadphase to detect &#8220;future collisions&#8221;. My AABBtoAABB contact looks like this : </p>
<p>private function collideAABB(other:AABB):void{</p>
<p>			amin.x=_x;				amax.x=amin.x+_width;<br />
			amin.y=_y;				amax.y=amin.y+_height;</p>
<p>			bmin.x=other.x; 	                bmax.x=bmin.x+other._width;<br />
			bmin.y=other.y;	                bmax.y=bmin.y+other._height;</p>
<p>			// main collision detection;<br />
			Vr.x = other._parent.velocity.x-_parent.velocity.x;<br />
			Vr.y = other._parent.velocity.y-_parent.velocity.y;</p>
<p>			ax.x=(bmin.x+other._width/2)-(amin.x+_width/2);<br />
			ax.y=(bmin.y+other._height/2)-(amin.y+_height/2);</p>
<p>			cw.x=_width/2+other._width/2;<br />
			cw.y=_height/2+other._height/2;</p>
<p>			if(math.abs(ax.x)=math.abs(ax.y)){<br />
				ax.y=cw.y=0;<br />
				d=math.abs(ax.x)-cw.x;<br />
			}</p>
<p>			N = ax.normalize();<br />
			sV=Vr.dot(N);<br />
			remove = sV+ (d/3);<br />
			iM = _parent.invMass+other._parent.invMass;//totalInverseMass;</p>
<p>			if(remove&lt;0){<br />
				imp = (remove/iM);<br />
				_parent.velocity.plusEq(N.mult(imp*_parent.invMass));<br />
				other.parent.velocity.minusEq(N.mult(imp*other.parent.invMass));<br />
			}<br />
		}</p>
<p>the thing is :<br />
I got some problems with &quot;ghost collisions&quot;  when my character is for exemple affected by gravity and moving on x at the same time. It collides with the edges of the stage tiles.</p>
<p>But most important, I think I have something wrong with my RigidBody integration<br />
and /or my distance calculation!<br />
my integration looks like this :<br />
position += velocity</p>
<p>the distance calculation is :<br />
ax=distance between centers<br />
cw=combined halfextents</p>
<p>I choose the axis where Math.abs(ax[i]) is the lowest<br />
then distance d = Math.abs(ax[i])-cw[i].</p>
<p>I can&#039;t find any example of these kind because AABBtoAABB seems to be only<br />
used to return a boolean value.</p>
<p>These errors I made are the reason why when I compute the impulse,<br />
if I do : impulse = relativeNormalVelocity + distance<br />
the objects seems to bounce against each other in a unrealistic way.<br />
So I need to divide this distance by a magic number (say 3 or 10).<br />
But When it comes to a stack of boxes with gravity I see there is some error somewhere. objects under other objects are jittering for some frames before to stabilize. </p>
<p>So, sorry to ask, I would be glad to find this solution by myself but i&#039;m still trying.<br />
Maybe it&#039;s the TimeStep missing in my implementation?<br />
don&#039;t know.</p>
<p>If you can help or see an horrid mistake I commited <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley" /><br />
My last Math or Physic Lesson is waaaayyyy too far.<br />
Thanks. Oh! and I love this blog. For a newbie trying to figure out &quot;how to&quot; it&#039;s a real pleasure to read.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1469#respond' onclick='return addComment.moveForm("comment-1469", "1469", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-1476">
		<div id="comment-1476">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1476">
			June 20, 2012 at 11:44 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Pierre,</p>
<p>Internal edges do represent a problem &#8211; when two tiles are exactly next to each other the edge between them can act as a catch. In order to eliminate this they need to be detected.</p>
<p>The code to do so is featured in the free version of the code which accompanies this article:</p>
<p><a href="http://www.wildbunny.co.uk/blog/how-to-make-a-platform-game-source-code-options/" rel="nofollow">http://www.wildbunny.co.uk/blog/how-to-make-a-platform-game-source-code-options/</a></p>
<p>I would take a look through there and hopefully it will give you some ideas!</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1476#respond' onclick='return addComment.moveForm("comment-1476", "1476", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1545">
		<div id="comment-1545">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/cbbafda19523335ad4aa80594b93d16c?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">David</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1545">
			August 14, 2012 at 9:33 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hello,</p>
<p>Would it be possible to avoid the ghost collisions by performing the algorithm and integrating the positions and afterwards check if there actually is a contact made? (this check could be quite fast I guess if we reuse the contact information from before).  We do not apply the new impulses if there is no contact. Of course we get a kind of delay when a ghost collision takes place, but it should not be noticeable.</p>
<p>BR</p>
<p>David</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1545#respond' onclick='return addComment.moveForm("comment-1545", "1545", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-1548">
		<div id="comment-1548">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1548">
			August 16, 2012 at 10:16 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi David,</p>
<p>Its kind of tough, that, because there are lots of contacts that could potentially be affecting the result of the check after integration. You may end up with a situation where you accidentally discard contacts that you end up needing.</p>
<p>Having said that, I&#8217;ve never tried this so it could work &#8211; worth a go! Let me know if you get around to trying it <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1548#respond' onclick='return addComment.moveForm("comment-1548", "1548", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="li-comment-1596">
		<div id="comment-1596">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/4b5352c4a463e50e15f47fa6c336b432?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Graeme</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1596">
			September 20, 2012 at 10:47 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul</p>
<p>Thanks for such an amazing and helpful website. I purchased this source code a while back but would really like a fuller explantion of the angular contact resolution(inertia, tensors etc). I know you have a link to another webpage for this information, but would love to have your down to earth explanation of it. If its covered in more detail in another download then please let me know.</p>
<p>Many thanks</p>
<p>Graeme</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1596#respond' onclick='return addComment.moveForm("comment-1596", "1596", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-1597">
		<div id="comment-1597">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1597">
			September 21, 2012 at 9:08 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Graeme,</p>
<p>Its best explained in chris hecker&#8217;s notes <a href="http://chrishecker.com/Rigid_body_dynamics" rel="nofollow">http://chrishecker.com/Rigid_body_dynamics</a>.</p>
<p>I&#8217;ve not yet gone into a full explanation on this site, just didn&#8217;t get time yet <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_neutral.gif" alt=":|" class="wp-smiley" /> </p>
<p>Cheers,Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1597#respond' onclick='return addComment.moveForm("comment-1597", "1597", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-1748">
		<div id="comment-1748">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/538febcb09a1bb116e317b82cb6ceefc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">el</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1748">
			November 28, 2012 at 8:16 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>purchased source code and absolutely satisfied.  thanks.  simple and readable &#8211; c# is not my language but making port wasn&#8217;t too much work.  getting friction to each rigid body was quite simple, but i have some troubles to implement bouncing.  any hint please?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1748#respond' onclick='return addComment.moveForm("comment-1748", "1748", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-1749">
		<div id="comment-1749">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1749">
			November 28, 2012 at 8:39 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi el,</p>
<p>Glad you&#8217;re having fun! Unfortunately, bouncing is something that this technique just cannot handle &#8211; its the main limitation of speculative contacts <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1749#respond' onclick='return addComment.moveForm("comment-1749", "1749", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment even depth-3" id="li-comment-1751">
		<div id="comment-1751">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/538febcb09a1bb116e317b82cb6ceefc?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">el</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1751">
			November 29, 2012 at 1:47 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>ok.  it&#8217;s not neccesary for my game.  friction is enough.<br />
Anyway i think there is a bug in Vector2 class in function Clamp:</p>
<p>public Vector2 Clamp(Vector2 min, Vector2 max)<br />
{<br />
	this = Max(min);<br />
	return Min(max);<br />
}</p>
<p>modifying &#8220;this&#8221; is pretty undesired side-effect, probably it should be:</p>
<p>public Vector2 Clamp(Vector2 min, Vector2 max)<br />
{<br />
   return Max(min).Min(max);<br />
}</p>
<p>i&#8217;m not c# expert so maybe i&#8217;m wrong.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1751#respond' onclick='return addComment.moveForm("comment-1751", "1751", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-1758">
		<div id="comment-1758">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/df227d93cefb283a144f7beb8853c348?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Steve</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-1758">
			December 2, 2012 at 11:01 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul,<br />
Truncating the velocity like this does seem like a neat shortcut to avoiding most of the pain of continuous collision detection. (I don&#8217;t see why adding restitution would be so difficult though. Surely you just need to factor it into the calculation of the next frame&#8217;s velocity.) </p>
<p>However I get a little concerned that previously fast moving objects might suddenly spend a frame not moving hardly at all if they happened to start the next frame close to another object. Maybe the glitches won&#8217;t be noticeable, but I wondered if you might compensate slightly by elongating the object&#8217;s next frame timestep to account for the truncated velocity in the last frame. This runs the risk of adding energy to the system in a non-stop spiral of doom, but maybe something hacky could be done to detect and avert those situations. </p>
<p>I just wondered if it was something you might have played around with.</p>
<p>Cheers,<br />
Steve</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=1758#respond' onclick='return addComment.moveForm("comment-1758", "1758", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-2002">
		<div id="comment-2002">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8cbaf45ad408b315b0c487bec1d6cce5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ashish</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2002">
			February 17, 2013 at 12:59 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>sir i m facing some problem<br />
i have downloaded the microsoft silverlight but the demos are not running even then.<br />
please assist me on the same.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2002#respond' onclick='return addComment.moveForm("comment-2002", "2002", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-2005">
		<div id="comment-2005">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2005">
			February 17, 2013 at 1:27 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Do the demos on the page in the article work for you?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2005#respond' onclick='return addComment.moveForm("comment-2005", "2005", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment even depth-3" id="li-comment-2006">
		<div id="comment-2006">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8cbaf45ad408b315b0c487bec1d6cce5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ashish</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2006">
			February 17, 2013 at 3:13 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>no they are also not working</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2006#respond' onclick='return addComment.moveForm("comment-2006", "2006", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-4" id="li-comment-2007">
		<div id="comment-2007">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2007">
			February 17, 2013 at 3:39 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>This means silverlight isn&#8217;t correctly installed on your machine, or the version is too old. What platform/browser is it?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2007#respond' onclick='return addComment.moveForm("comment-2007", "2007", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment even depth-5" id="li-comment-2008">
		<div id="comment-2008">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8cbaf45ad408b315b0c487bec1d6cce5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ashish</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2008">
			February 18, 2013 at 4:24 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>i am using a laptop of 32 bit operating system and its ram is 2 GB<br />
processor is Intel(R) Pentium(R) CPU B960 @ 2.20Ghz  2.20Ghz.</p>
<p>The product version of silverlight installed is<br />
5.5.0031.0</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-2011">
		<div id="comment-2011">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/8cbaf45ad408b315b0c487bec1d6cce5?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ashish</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2011">
			February 18, 2013 at 5:30 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Thank u so much sir now the demos are running on the page in the article</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2011#respond' onclick='return addComment.moveForm("comment-2011", "2011", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-2025">
		<div id="comment-2025">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/c09b8ffec094734c286d5ac8e8835101?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Alex Walters</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2025">
			February 26, 2013 at 10:09 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Why are all your articles so informative, thought provoking, and awesome? Your articles on physics make my mind hurt with all of the cool possibilities that I can think of. Thanks so much for writing them!</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2025#respond' onclick='return addComment.moveForm("comment-2025", "2025", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-2099">
		<div id="comment-2099">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/642e7bfd1cd65e23f4310be2a96b3c63?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Christian</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2099">
			March 20, 2013 at 3:57 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul, great set of articles you have here. Really been enjoying reading them.</p>
<p>I was wondering though, could you clarify what &#8220;sequential&#8221; means in the demos in this article? What&#8217;s different between &#8220;discrete&#8221; and &#8220;discrete sequential&#8221;?</p>
<p>Thanks in advance.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2099#respond' onclick='return addComment.moveForm("comment-2099", "2099", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-2100">
		<div id="comment-2100">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2100">
			March 20, 2013 at 4:06 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Christian,</p>
<p>Discrete refers to collision detection (i.e. not continuous) and sequential refers to the manor in which the contact solver solves impulses; so discrete by itself just means discrete collision detection with standard non-sequential solver, and discrete+sequential is both.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2100#respond' onclick='return addComment.moveForm("comment-2100", "2100", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-2101">
		<div id="comment-2101">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/642e7bfd1cd65e23f4310be2a96b3c63?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Christian</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2101">
			March 20, 2013 at 4:57 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>So does &#8220;sequential&#8221; specifically refer to Catto�s sequential impulse solver, or are there other kinds of solvers called &#8220;sequential&#8221; as well? (The article is a bit confusing as you mention Catto&#8217;s sequential impulse system only after having already referred to a solver as sequential &#8212; so I&#8217;m not sure if they are the same.)</p>
<p>And as for standard non-sequential solvers, can I assume those works as you describe solvers in the &#8220;physics engines for dummies&#8221; article?</p>
<p>(As you can tell I&#8217;m simply not sure how many basic kinds of solvers there are.)</p>
<p>Thanks for the quick response!</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2101#respond' onclick='return addComment.moveForm("comment-2101", "2101", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-4" id="li-comment-2102">
		<div id="comment-2102">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2102">
			March 20, 2013 at 5:09 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Christian,</p>
<p>Yes, sequential is Erin Catto&#8217;s solver technique. The non-sequential solver just applies individual impulses without considering impulse history; similar to the one I describe in the PED article, but with rotation as well.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2102#respond' onclick='return addComment.moveForm("comment-2102", "2102", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-5" id="li-comment-2104">
		<div id="comment-2104">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/642e7bfd1cd65e23f4310be2a96b3c63?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Christian</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2104">
			March 20, 2013 at 5:12 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Great, thanks for the clarification! See the post I added below as to why someone might find simply calling the technique &#8220;sequential&#8221; confusing given the context. <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers!</p>
</div>

		<div class="reply">
					</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even depth-4" id="li-comment-2103">
		<div id="comment-2103">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/642e7bfd1cd65e23f4310be2a96b3c63?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Christian</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2103">
			March 20, 2013 at 5:10 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I should add, when I think of &#8220;sequential&#8221; in this context I think of &#8220;sequential vs simultaneous motion&#8221; &#8212; e.g. do you update objects one at a time (and completely solve its collision against the other, static, object) or do you move all at once (more physically accurate, but harder to solve because of TOI-issues etc.).</p>
<p>The other related issue is &#8220;discrete vs continuous motion&#8221;, e.g. use of swept-volumes or not and so on. </p>
<p>Using this terminology &#8220;discrete sequential&#8221; has a very specific meaning which doesn&#8217;t seem to apply here. <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  </p>
<p>Both these distinctions are from Ericson&#8217;s book on real-time collision detection, if you&#8217;ve read it.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2103#respond' onclick='return addComment.moveForm("comment-2103", "2103", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2130">
		<div id="comment-2130">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/d20455e568df14ee53e302a8cca5127b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Andrew</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2130">
			March 30, 2013 at 3:27 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hey Paul,<br />
Just downloaded the code- very clear and simple to understand. </p>
<p>However, where in the code do you alter the values of say, the number of balls on screen, the position of the floor and even things like the images used for the balls? </p>
<p>I checked the code but this may just be me being stupid&#8230; Your help is appreciated! <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Thanks in advance,<br />
Andrew</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2130#respond' onclick='return addComment.moveForm("comment-2130", "2130", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-2132">
		<div id="comment-2132">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2132">
			March 31, 2013 at 11:30 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Andrew,</p>
<p>These modifications are performed using the Expression Design editor and end up in the .xaml files <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2132#respond' onclick='return addComment.moveForm("comment-2132", "2132", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-2232">
		<div id="comment-2232">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/1f3e0ecf42fadb48bd315b5e2d3076bb?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Jon Slater</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2232">
			April 21, 2013 at 4:32 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul,</p>
<p>in your toi section, you state that &#8216;the condition checking for negative relative normal velocity has gone, to be replaced by a clamp inside the impulse calculation, and the impulse is accumulated&#8217;, and i can see this works great.</p>
<p>but how would you incorporate this into a system that computes a rebound velocity as a function of incoming velocity and a coefficient of restitution? i am wondering if it could be better to use a split integration model in this type of system, so that the position can be corrected first to prevent inter-penetration, before computing the rebound velocity..</p>
<p>what do you think?</p>
<p>as ever thanks for a great article.</p>
<p>cheers, Jon</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2232#respond' onclick='return addComment.moveForm("comment-2232", "2232", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-2233">
		<div id="comment-2233">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2233">
			April 21, 2013 at 4:48 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Jon,</p>
<p>I&#8217;ve never done this myself &#8211; I just accept it as a limitation of the system. However I know some people have modified this system to work with restitution; I heard one idea was to run two sets of contacts; friction-less speculative, and also frictioned restitutional in the same system working independently. Unfortunately I have no further information about how this might be achieved in practice &#8211; if you manage to get something like this working, I&#8217;d love to hear about it! <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2233#respond' onclick='return addComment.moveForm("comment-2233", "2233", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-2239">
		<div id="comment-2239">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/1f3e0ecf42fadb48bd315b5e2d3076bb?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Jon Slater</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2239">
			April 23, 2013 at 2:48 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul,</p>
<p>Interesting. I&#8217;m trying to develop a solution to this now; i&#8217;ll let you know if i get anywhere..</p>
<p>by the way sorry to be a pain again, but i also downloaded this article before my hard-drive fault, any chance of a download link for this too?</p>
<p>thanks again,<br />
Jon</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2239#respond' onclick='return addComment.moveForm("comment-2239", "2239", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-2281">
		<div id="comment-2281">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/d4cee372452f15d9ffe2113f998d0bd1?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.dhteumeuleu.com' rel='external nofollow' class='url'>Gerard Ferrandez</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2281">
			April 28, 2013 at 1:52 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Paul,</p>
<p>Great tutorial and excellent C# code ! Many thanks. The below link is a quick HTML 5 port of your pile &#8216;O boxes demo. I hope you don&#8217;t mind <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_wink.gif" alt=";-)" class="wp-smiley" /> </p>
<p><a href="http://www.dhteumeuleu.com/dhtml/box2D-demo.html" title="HTML5 Pile-O-boxes demo" rel="nofollow"></p>
<p>The demo will probably work on any current browsers and devices &#8211; PC, tablets and mobiles&#8230; This version is optimized for speed (low GC presure) rather than readibility as unfortunately I had to inline your vector class.</p>
<p>One question though: Your friction code does not work as expected. Any hint on how to implement friction on contact points? That would make the whole thing much more realistic.</p>
<p>keep it up !</p>
<p>Cheers,<br />
Gerard</a></p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2281#respond' onclick='return addComment.moveForm("comment-2281", "2281", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-2283">
		<div id="comment-2283">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2283">
			April 28, 2013 at 11:09 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hey very cool! Thanks Gerard! <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2283#respond' onclick='return addComment.moveForm("comment-2283", "2283", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment even depth-3" id="li-comment-2286">
		<div id="comment-2286">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/d4cee372452f15d9ffe2113f998d0bd1?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.dhteumeuleu.com' rel='external nofollow' class='url'>Gerard Ferrandez</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2286">
			April 28, 2013 at 11:43 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>I think I&#8217;ve got the friction code work now&#8230; And FWIW, I have refactored the code using a small vector class. </p>
<p><a href="http://www.dhteumeuleu.com/dhtml/box2D-demo-vectorclass.html" rel="nofollow">Here is the JS demo.</a></p>
<p>cheers<br />
Gerard</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2286#respond' onclick='return addComment.moveForm("comment-2286", "2286", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-2394">
		<div id="comment-2394">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/3cc8cb9fd0909618661b04b82810a729?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">PhisModeler</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2394">
			May 17, 2013 at 7:06 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hello,Paul! Thanks for good and interesting lessons.<br />
Now,I have some question about this tutorial.<br />
For example, how I can calculate variable con.m_dist from first examples?</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2394#respond' onclick='return addComment.moveForm("comment-2394", "2394", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-2403">
		<div id="comment-2403">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2403">
			May 18, 2013 at 3:15 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi there,</p>
<p>Please take a look at my article on collision detection for the answer:</p>
<p><a href="http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/" rel="nofollow">http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/</a></p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2403#respond' onclick='return addComment.moveForm("comment-2403", "2403", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2547">
		<div id="comment-2547">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/0f18413e51a5e77dedd449d32644abba?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Joe Holt</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2547">
			May 28, 2013 at 10:13 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Great article, it&#8217;s been a big help with a physics project I&#8217;m working on. I bought the code, studied it for a while and then implemented the technique into my code. I&#8217;ve got a weird problem though. Very often, objects will get &#8220;stuck&#8221; when sliding. They will just freeze in place. Maybe I&#8217;ve implemented the technique incorrectly but it&#8217;s a problem that I&#8217;ve spent weeks trying to fix. Not sure what&#8217;s going on, do you have any suggestions as to what the problem could be?<br />
Thanks,<br />
Joe.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2547#respond' onclick='return addComment.moveForm("comment-2547", "2547", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-2548">
		<div id="comment-2548">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2548">
			May 28, 2013 at 10:17 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Joe,</p>
<p>That kind of thing can happen if the contact constraint is allowed to pull as well as push overall. An easy quick way to test this is to make sure you only treat contacts with negative relative normal velocity. If that fixes it, you have a bug somewhere around that area of the code <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2548#respond' onclick='return addComment.moveForm("comment-2548", "2548", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment odd alt thread-even depth-1" id="li-comment-2687">
		<div id="comment-2687">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/f518e43b19fc82a32e6918c325bbb7d0?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ilpo Nikulainen</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2687">
			June 27, 2013 at 8:45 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi,</p>
<p>I can&#8217;t see how this technique and SI are compatible together. </p>
<p>This technique needs a certain negative normal velocity (approaching) so that any work will be done by the contact. No work must be done for contacts which are not approaching fast enough. </p>
<p>However, SI requires that positive normal velocity can do work (corrective pull) on temporarily receding contacts. I see that putting &#8220;if (remove &lt; 0)&quot; before compute, clamp and apply of the impulse, prevents SI from doing pull on contacts which have a positive normal velocity (temporal receding) from the previous iteration or from same iteration (applied by some other contact on same object).</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2687#respond' onclick='return addComment.moveForm("comment-2687", "2687", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor even depth-2" id="li-comment-2688">
		<div id="comment-2688">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2688">
			June 27, 2013 at 9:16 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi there,</p>
<p>Yes, you can&#8217;t really put that condition in production code because as you rightly say it reduces the effectiveness. Instead you should use the code snippet I posted under the section named &#8216;TOI joy&#8217; which is effectively just SI with speculative contacts thrown in.</p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2688#respond' onclick='return addComment.moveForm("comment-2688", "2688", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment odd alt depth-3" id="li-comment-2689">
		<div id="comment-2689">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/f518e43b19fc82a32e6918c325bbb7d0?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Ilpo Nikulainen</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-2689">
			June 27, 2013 at 9:41 am</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Many thanks! I&#8217;m amazed at this wonderful painkiller technique! <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":-)" class="wp-smiley" /> </p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=2689#respond' onclick='return addComment.moveForm("comment-2689", "2689", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="li-comment-3257">
		<div id="comment-3257">
		<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/1404c68a2bedd4e9aed26e39ba22482b?s=40&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn">Philip Borchert</cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-3257">
			September 16, 2013 at 3:33 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Paul Firth, GREAT article so great that any sort of article on speculative contacts in fact on <a href="http://jitter-physics.com/wordpress/?p=109" rel="nofollow">http://jitter-physics.com/wordpress/?p=109</a> at the very start this author claims &#8220;Paul doesn�t claim to be the inventor of the mechanism but he made it quite popular. The idea of the algorithm is � as Paul stated -<br />
(..) to try and move the majority of the work out of the collision detection system and into the contact solver (..)</p>
<p>I guess I have a burning desire to always find the start of something.  I&#8217;ve done tons of google research and I know there was some discussion in the physics world of &#8220;Speculative contact&#8221; having nothing to do with coding but an idea&#8230;  and I ASSUME this is where it originated from.  However, I was looking for or wanting an article that would start with something like, Speculative Contact is the brain child of  the term meaning to make an educated guess (Speculate) at what an object will contact given it&#8217;s current path.  Then go on to discuss the math and various other components involved?  Would you have any references or discussions that could help me with this?  I think the only thing missing from this AMAZING article is references.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=3257#respond' onclick='return addComment.moveForm("comment-3257", "3257", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	<ul class="children">
	<li class="comment byuser comment-author-paulfirth bypostauthor odd alt depth-2" id="li-comment-3258">
		<div id="comment-3258">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=40&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D40&amp;r=G' class='avatar avatar-40 photo' height='40' width='40' />			<cite class="fn"><a href='http://www.wildbunny.co.uk' rel='external nofollow' class='url'>Paul Firth</a></cite> <span class="says">says:</span>		</div><!-- .comment-author .vcard -->
		
		<div class="comment-meta commentmetadata"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#comment-3258">
			September 16, 2013 at 3:41 pm</a>		</div><!-- .comment-meta .commentmetadata -->

		<div class="comment-body"><p>Hi Philip,</p>
<p>Sorry, I don&#8217;t have a reference for where the name originates. I first heard this technique called that from Erin Catto when I met him at GDC. <img src="http://www.wildbunny.co.uk/blog/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>
<p>Cheers, Paul.</p>
</div>

		<div class="reply">
			<a class='comment-reply-link' href='/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/?replytocom=3258#respond' onclick='return addComment.moveForm("comment-3258", "3258", "respond", "171")'>Reply</a>		</div><!-- .reply -->
	</div><!-- #comment-##  -->

	</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
			</ol>

			<div class="navigation">
				<div class="nav-previous"></div>
				<div class="nav-next"><a href="http://www.wildbunny.co.uk/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/#comments" >Newer Comments <span class="meta-nav">&rarr;</span></a></div>
			</div><!-- .navigation -->


								<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/2011/03/25/speculative-contacts-an-continuous-collision-engine-approach-part-1/comment-page-1/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://www.wildbunny.co.uk/blog/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='171' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
							<script type='text/javascript'>
	<!--
	refJS = escape( document[ 'referrer' ] );
	document.write("<input type='hidden' name='refJS' value='"+refJS+"'>");
	// -->
	</script>
	<p style="font-size:9px;clear:both;">WP-SpamFree by <a rel="nofollow" href="http://www.polepositionmarketing.com/library/wp-spamfree/" title="WP-SpamFree WordPress Anti-Spam Plugin" >Pole Position Marketing</a>

					</form>
							</div><!-- #respond -->
			
</div><!-- #comments -->


			</div><!-- #content -->
		</div><!-- #container -->


		<div id="primary" class="widget-area" role="complementary">
			<ul class="xoxo">

<li id="search-3" class="widget-container widget_search"><h3 class="widget-title">Search</h3><form role="search" method="get" id="searchform" class="searchform" action="http://www.wildbunny.co.uk/blog/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></li><li id="categories-3" class="widget-container widget_categories"><h3 class="widget-title">Choose a category</h3><select name='cat' id='cat' class='postform' >
	<option value='-1'>Select Category</option>
	<option class="level-0" value="104">Algorithmic trading&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="7">Animal Army&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="35">AS3&nbsp;&nbsp;(19)</option>
	<option class="level-0" value="44">Beginner&nbsp;&nbsp;(3)</option>
	<option class="level-0" value="114">Bitcoin&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="6">Business&nbsp;&nbsp;(7)</option>
	<option class="level-0" value="73">Chip tunes&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="71">Circles&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="40">Collision Detection&nbsp;&nbsp;(8)</option>
	<option class="level-0" value="53">Developer love&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="117">Entity systems&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="103">Finance&nbsp;&nbsp;(6)</option>
	<option class="level-0" value="101">Full games&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="67">Geometry&nbsp;&nbsp;(9)</option>
	<option class="level-0" value="58">Graphics&nbsp;&nbsp;(9)</option>
	<option class="level-0" value="100">JSON&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="42">Ladders and AI&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="96">learning-to-program&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="28">Making angry birds&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="47">Micro-transactions&nbsp;&nbsp;(3)</option>
	<option class="level-0" value="90">Multi-player&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="72">Music&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="118">Optimisation&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="41">Parallax and Tiles&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="65">paypal&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="97">Physics&nbsp;&nbsp;(8)</option>
	<option class="level-0" value="36">Platform game&nbsp;&nbsp;(5)</option>
	<option class="level-0" value="68">Polygons&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="98">Portals&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="52">Promotion&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="93">Self improvement&nbsp;&nbsp;(4)</option>
	<option class="level-0" value="66">Server side&nbsp;&nbsp;(7)</option>
	<option class="level-0" value="99">Silverlight&nbsp;&nbsp;(5)</option>
	<option class="level-0" value="45">Stencyl&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="5">Technical&nbsp;&nbsp;(28)</option>
	<option class="level-0" value="1">Uncategorized&nbsp;&nbsp;(1)</option>
</select>

<script type='text/javascript'>
/* <![CDATA[ */
	var dropdown = document.getElementById("cat");
	function onCatChange() {
		if ( dropdown.options[dropdown.selectedIndex].value > 0 ) {
			location.href = "http://www.wildbunny.co.uk/blog/?cat="+dropdown.options[dropdown.selectedIndex].value;
		}
	}
	dropdown.onchange = onCatChange;
/* ]]> */
</script>

</li>			</ul>
		</div><!-- #primary .widget-area -->


		<div id="secondary" class="widget-area" role="complementary">
			<ul class="xoxo">
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"><div style="text-align:center">About the author</div></h3><div class="ub-grav" style="margin:5px 5px 0px 5px;text-align:center;"><img alt='' src='http://0.gravatar.com/avatar/e19935619bbfb2c4d003acdb0669ca46?s=128&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D128&amp;r=G' class='avatar avatar-128 photo' height='128' width='128' /></div>A games industry veteran of ten years, seven of which spent at Sony Computer Entertainment Europe, he has had key technical roles on triple-A titles like the Bafta Award Winning Little Big Planet (PSP), 24: The Game (PS2), special effects work on Heavenly Sword (PS3), some in-show graphics on the BBC�s version of Robot Wars, the TV show, as well as a few more obscure projects.
&nbsp;
Now joint CEO of Wildbunny, he is able to give himself hiccups simply by coughing.
&nbsp;
1NobNQ88UoYePFi5QbibuRJP3TtLhh65Jp
</li><li id="widget_featured-posts-2" class="widget-container widget_featured-posts"><h3 class="widget-title">Featured Posts</h3>	
	<ul id="yiw-featured-post">
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2011/04/figure111.png&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="Collision detection for dummies" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/">Collision detection for dummies</a>
	       </h4>
	   </li>
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2013/04/17/algorithmic-trading-for-dummies-part-2/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2013/04/stop-loss.jpg&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="Algorithmic trading for dummies &#8211; part 2" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2013/04/17/algorithmic-trading-for-dummies-part-2/">Algorithmic trading for dummies &#8211; part 2</a>
	       </h4>
	   </li>
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2012/11/20/how-to-make-a-multi-player-game-part-2/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2012/11/shop.png&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="How to make a multi-player game � part 2" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2012/11/20/how-to-make-a-multi-player-game-part-2/">How to make a multi-player game � part 2</a>
	       </h4>
	   </li>
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2014/03/03/what-is-a-bitcoin/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2014/03/Bitcoin_Mining_Farm_Logo.jpg&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="What is a Bitcoin?" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2014/03/03/what-is-a-bitcoin/">What is a Bitcoin?</a>
	       </h4>
	   </li>
	   <li>
	       <a href="http://www.wildbunny.co.uk/blog/2012/11/01/10-steps-to-becoming-a-better-programmer/" class="featured-thumb">
	                      <img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/featured-post-with-thumbnail/scripts/timthumb.php?src=http://www.wildbunny.co.uk/blog/wp-content/uploads/2012/11/stencylRules.png&amp;h=200&amp;w=200&amp;zc=1" class="alignleft" alt="10 steps to becoming a better programmer" />
           
	       	       </a>
           
           <h4 class="featured-title">
	           <a href="http://www.wildbunny.co.uk/blog/2012/11/01/10-steps-to-becoming-a-better-programmer/">10 steps to becoming a better programmer</a>
	       </h4>
	   </li>
	</ul>
	
	</li><li id="advanced-featured-page-widget-3" class="widget-container widget_advanced-featured-page-widget"><h3 class="widget-title">Tutorials with code to buy</h3><div class="post-2295 page type-page status-publish hentry"><a href="http://www.wildbunny.co.uk/blog/buy-multiplayer-asteroids-engine/" title="Buy multiplayer asteroids engine" class="alignnone"><img width="200" height="200" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2014/05/multiplayer.jpg" class="attachment-200 by 200 image" alt="multiplayer" /></a></div><!--end post_class()-->

</li><li id="advanced-featured-page-widget-2" class="widget-container widget_advanced-featured-page-widget"><div class="post-2299 page type-page status-publish hentry"><a href="http://www.wildbunny.co.uk/blog/buy-angrybirds-alike-engine/" title="Buy Angrybirds-alike engine" class="alignnone"><img width="200" height="200" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2014/05/birds.jpg" class="attachment-200 by 200 image" alt="birds" /></a></div><!--end post_class()-->

</li><li id="advanced-featured-page-widget-4" class="widget-container widget_advanced-featured-page-widget"><div class="post-2301 page type-page status-publish hentry"><a href="http://www.wildbunny.co.uk/blog/buy-platform-game-engine/" title="Buy platform game engine" class="alignnone"><img width="200" height="200" src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2014/05/platform.png" class="attachment-200 by 200 image" alt="platform" /></a></div><!--end post_class()-->

</li><li id="wp125" class="widget-container wp125_write_ads_widget">
<h3 class="widget-title">Affiliates</h3><div id="wp125adwrap_1c">
<div class="wp125ad odd"><a href="index.php?adclick=10" title="plus500" rel="nofollow"target='_blank'><img src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2013/03/plus500-200x200.gif" alt="plus500" /></a></div>
<div class="wp125ad even"><a href="https://www.cavirtex.com/Z/50680" title="cavirtex" rel="nofollow"target='_blank'><img src="http://www.wildbunny.co.uk/blog/wp-content/uploads/2014/03/caVirtex.gif" alt="cavirtex" /></a></div>
<div class="wp125ad odd"><a href="http://www.freelancer.co.uk/affiliates/wildbunny2/" title="freelancer" rel="nofollow"target='_blank'><img src="/images/freelancer.png" alt="freelancer" /></a></div>
<div class="wp125ad even"><a href="http://www.shareasale.com/r.cfm?b=531904&u=949687&m=41388&urllink=&afftrack=" title="wp engine" rel="nofollow"target='_blank'><img src="http://www.shareasale.com/image/41388/sas_banner_250x250.jpg" alt="wp engine" /></a></div>
<div class="wp125ad odd"><a href="http://www.wildbunny.co.uk/blog/advertise-here/" rel="nofollow"target='_blank'><img src="http://www.wildbunny.co.uk/images/blankAdvert.png" alt="" /></a></div>
</div>
</li><li id="ezadswidget-4" class="widget-container ezAdsWidget"><h3 class="widget-title">My MetaTrader 5 products</h3><!-- Easy AdSense V2.79 -->
<!-- Widg[count: 2] -->
<div class="ezAdsense adsense adsense-widget"><div style="text-align:center;margin:0px; "><div style="width:350px">
<a target="_blank" href="http://mql5.com/dzz" title="Download VWAP technical indicator from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/925/mid" alt="Buy VWAP customer indicator in the store selling algo trading systems" width="400" height="60"></a>
<a target="_blank" href="http://mql5.com/e08" title="Download Average Spread technical indicator from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/951/mid" alt="Buy Average Spread customer indicator in the store selling algo trading systems" width="400" height="60"></a>
<a target="_blank" href="http://mql5.com/e09" title="Download Bid Ask Volumes technical indicator from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/950/mid" alt="Buy Bid Ask Volumes customer indicator in the store selling algo trading systems" width="400" height="60"></a>
<a target="_blank" href="http://mql5.com/po9" title="Download Market Activity technical indicator from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/963/mid" alt="Buy Market Activity customer indicator in the store selling algo trading systems" width="400" height="60"></a>
<a target="_blank" href="http://mql5.com/poa" title="Download Precision Scalper trading system from MQL5 Market"><img src="http://www.mql5.com/en/market/widget/972/mid" alt="Buy Precision Scalper trading application in the store of automated robot systems" width="400" height="60"></a>
</div></div></div></li>			</ul>
		</div><!-- #secondary .widget-area -->

	</div><!-- #main -->

	<div id="footer" role="contentinfo">
		<div id="colophon">



			<div id="site-info">
				<a href="http://www.wildbunny.co.uk/blog/" title="Wildbunny blog" rel="home">
					Wildbunny blog				</a>
			</div><!-- #site-info -->

			<div id="site-generator">
								<a href="http://wordpress.org/"
						title="Semantic Personal Publishing Platform" rel="generator">
					Proudly powered by WordPress.				</a>
			</div><!-- #site-generator -->

		</div><!-- #colophon -->
	</div><!-- #footer -->

</div><!-- #wrapper -->

		
		<script type="text/javascript">
			//<![CDATA[
			jQuery(document).ready(function() {
				var a = '<div id="cookie-law-info-bar"><span>This website uses cookies to improve your experience. We\'ll assume you\'re ok with this, but you can opt-out if you wish.<a href=\"#\" id=\"cookie_action_close_header\"  class=\"medium cli-plugin-button cli-plugin-main-button\" >Accept</a> <a href=\"http://www.wildbunny.co.uk/blog/privacy-policy/\" id=\"CONSTANT_OPEN_URL\" target=\"_new\"  class=\"cli-plugin-main-link\"  >Read More</a></span></div>';
				var b = '{"animate_speed_hide":"500","animate_speed_show":"500","background":"#fff","border":"#444","border_on":true,"button_1_button_colour":"#000","button_1_button_hover":"#000000","button_1_link_colour":"#fff","button_1_as_button":true,"button_2_button_colour":"#333","button_2_button_hover":"#292929","button_2_link_colour":"#444","button_2_as_button":false,"font_family":"inherit","notify_animate_hide":true,"notify_animate_show":false,"notify_div_id":"#cookie-law-info-bar","notify_position_horizontal":"right","notify_position_vertical":"bottom","showagain_tab":false,"showagain_background":"#fff","showagain_border":"#000","showagain_div_id":"#cookie-law-info-again","showagain_x_position":"50%","text":"#000"}';
				cli_show_cookiebar(a,b);
				
							});
			//]]>
		</script>
		
		 
			<a id="FollowMeTabLeftLg" onClick="showFollowMe()" href="#" style="border-bottom:none;"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/leftlg.gif" border="0" /></a>	

<div id="FollowMeBubbleBG" style="visibility:hidden;"></div>
<div id="FollowMeBubble" style="visibility:hidden;border-bottom:none;">


<div class="top" style="background-image:url('http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/followme_top.gif');width:329px;height:60px;float:left;display:block;border-bottom:none;">
<a id="close" onClick="hideFollowMe()" href="#" style="border-bottom:none"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/close.png" border="0" /> </a>
<!-- <a id="grab" target="_blank" title="grab this" href="http://www.ignitesocialmedia.com/tools/follow-me/"><span>grab this</span></a>--></div>
<div class="mid" style="background-image:url('http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/followme_mid.gif');width:329px;background-repeat:repeat-y;float:left;">
<div id="stretch">
<span><a title="
Twitter" target="_blank" href="http://twitter.com/paul_m_firth" rel="me"><img width="32px" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/
twitter.png" border="0" alt="
Twitter" /> 
Twitter</a></span>
<span><a title="
Facebook" target="_blank" href="http://www.facebook.com/WildbunnyLtd" rel="me"><img width="32px" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/
facebook.png" border="0" alt="
Facebook" /> 
Facebook</a></span>
<span><a title="
RSS" target="_blank" href="http://wildbunny.co.uk/blog/feed" rel="me"><img width="32px" src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/
rss.png" border="0" alt="
RSS" /> 
RSS</a></span>
</div></div>
<div class="bottom" style="background-image:url('http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/followme_bottom.gif');height:34px;width:329px;clear:both;float:left;">
<a id="grab" target="_blank" title="grab this" style="border-bottom:none;" href="http://www.ignitesocialmedia.com/tools/follow-me/"><span>grab this</span></a>
</div>
<div class="grab" style="width:329px;clear:both;float:left;"><a style="border-bottom:none;" href="http://www.ignitesocialmedia.com/tools/follow-me/"><img src="http://www.wildbunny.co.uk/blog/wp-content/plugins/follow-me/images/followme_grab.gif" /></a></div>
</div>







<div id="thsp-sticky-header">
	<div id="thsp-sticky-header-inner">
		<div id="thsp-sticky-header-title">
			<a href="http://www.wildbunny.co.uk/blog" title="Developer knowledge centre">Wildbunny blog</a>
		</div>
		
		<ul id="thsp-sticky-header-menu" class="menu"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-272"><a href="/blog/">All articles</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1302"><a href="http://www.wildbunny.co.uk/blog/vector-maths-a-primer-for-games-programmers/">Vector maths</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-319"><a href="http://www.wildbunny.co.uk/blog/contact-me/">Contact me</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2072"><a href="http://www.wildbunny.co.uk/blog/hire-me/">Hire me</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-446"><a href="http://www.wildbunny.co.uk/blog/membership-sign-up-page/">Subscribe!</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-466"><a href="http://www.wildbunny.co.uk/blog/welcome-to-our-members-area/">Members</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1183"><a href="/blog/buy-source-code">Buy source-code</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1694"><a href="http://www.wildbunny.co.uk/blog/privacy-policy/">Privacy policy</a></li>
</ul>	</div><!-- #thsp-sticky-header-inner -->
</div><!-- #thsp-sticky-header --><script type='text/javascript' src='http://www.wildbunny.co.uk/blog/wp-content/plugins/s2member/s2member-o.php?ws_plugin__s2member_js_w_globals=1&#038;qcABC=1&#038;ver=140105-140105-2848662513'></script>
</body>
</html>

