http://www.keithf4.com/extension_tips_4/
HTTP/1.0 200 OK
Date: Wed, 23 Jul 2014 10:00:04 GMT
Server: Apache/2.2.22 (Debian)
X-Powered-By: PHP/5.4.4-14+deb7u12
X-Pingback: http://www.keithf4.com/xmlrpc.php
Link: <http://www.keithf4.com/?p=187>; rel=shortlink
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 8250
Connection: close
Content-Type: text/html; charset=UTF-8

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
<title>   PostgreSQL Extension Developer Tips – Part 4 at Keith&#039;s Ramblings&#8230;</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="description" content="WARNING: If accidentally read, induce vomiting" />
<meta name="generator" content="WordPress 3.9.1" /> <!-- leave this for stats please -->
<link href="http://www.keithf4.com/wp-content/themes/journalist/style.css" rel="stylesheet" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Keith&#039;s Ramblings&#8230; RSS Feed" href="http://www.keithf4.com/feed/" />
<link rel="shortcut icon" type="image/x-png" href="http://www.keithf4.com/wp-content/themes/journalist/favicon.png" />
<link rel="pingback" href="http://www.keithf4.com/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="Keith&#039;s Ramblings... &raquo; PostgreSQL Extension Developer Tips – Part 4 Comments Feed" href="http://www.keithf4.com/extension_tips_4/feed/" />
<link rel='stylesheet' id='crayon-css'  href='http://www.keithf4.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=2.6.5' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-classic-css'  href='http://www.keithf4.com/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=2.6.5' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='http://www.keithf4.com/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=2.6.5' type='text/css' media='all' />
<script type='text/javascript' src='http://www.keithf4.com/wp-includes/js/jquery/jquery.js?ver=1.11.0'></script>
<script type='text/javascript' src='http://www.keithf4.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var quicktagsL10n = {"closeAllOpenTags":"Close all open tags","closeTags":"close tags","enterURL":"Enter the URL","enterImageURL":"Enter the URL of the image","enterImageDescription":"Enter a description of the image","fullscreen":"fullscreen","toggleFullscreen":"Toggle fullscreen mode","textdirection":"text direction","toggleTextdirection":"Toggle Editor Text Direction"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.keithf4.com/wp-includes/js/quicktags.min.js?ver=3.9.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.6.5","is_admin":"0","ajaxurl":"http:\/\/www.keithf4.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
var CrayonTagEditorSettings = {"home_url":"http:\/\/www.keithf4.com","css":"crayon-te","css_selected":"crayon-selected","code_css":"#crayon-code","url_css":"#crayon-url","url_info_css":"#crayon-te-url-info","lang_css":"#crayon-lang","title_css":"#crayon-title","mark_css":"#crayon-mark","range_css":"#crayon-range","inline_css":"crayon-inline","inline_hide_css":"crayon-hide-inline","inline_hide_only_css":"crayon-hide-inline-only","hl_css":"#crayon-highlight","switch_html":"#content-html","switch_tmce":"#content-tmce","tinymce_button_generic":".mce-btn","tinymce_button":"a.mce_crayon_tinymce,.mce-i-crayon_tinymce","tinymce_button_unique":"mce_crayon_tinymce","tinymce_highlight":"mce-active","submit_css":"#crayon-te-ok","cancel_css":"#crayon-te-cancel","content_css":"#crayon-te-content","dialog_title_css":"#crayon-te-title","submit_wrapper_css":"#crayon-te-submit-wrapper","data_value":"data-value","attr_sep":":","css_sep":"_","fallback_lang":"default","dialog_title_add":"Add Crayon Code","dialog_title_edit":"Edit Crayon Code","submit_add":"Add","submit_edit":"Save","bar":"#crayon-te-bar","bar_content":"#crayon-te-bar-content","extensions":{"scpt":"applescript","applescript":"applescript","swf":"as","fla":"as","cs":"c#","h":"c++","hh":"c++","hpp":"c++","hxx":"c++","h++":"c++","cc":"c++","cpp":"c++","cxx":"c++","c++":"c++","pas":"delphi","java":"java","class":"java","jar":"java","mv":"miva","mvc":"miva","mvt":"miva","m":"objc","mm":"objc","pl":"perl","py":"python","pyw":"python","pyc":"python","pyo":"python","pyd":"python","rb":"ruby","rbx":"ruby","rhtml":"ruby","vbs":"vb"}};
var CrayonSyntaxSettings = {"version":"2.6.5","is_admin":"0","ajaxurl":"http:\/\/www.keithf4.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.keithf4.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.te.min.js?ver=2.6.5'></script>
<script type='text/javascript' src='http://www.keithf4.com/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.4.7.3'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.keithf4.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.keithf4.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Mimeo &#8211; A per-table replication extension for PostgreSQL' href='http://www.keithf4.com/mimeo-introduction/' />
<link rel='next' title='Mimeo &#8211; Incremental Replication' href='http://www.keithf4.com/mimeo-incremental-replication/' />
<meta name="generator" content="WordPress 3.9.1" />
<link rel='canonical' href='http://www.keithf4.com/extension_tips_4/' />
<link rel='shortlink' href='http://www.keithf4.com/?p=187' />
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css">.broken_link, a.broken_link {
	text-decoration: line-through;
}</style><!-- Google Analytics Tracking by Google Analyticator 6.4.7.3: http://www.videousermanuals.com/google-analyticator/ -->
<script type="text/javascript">
                var analyticsFileTypes = [''];
                            var analyticsSnippet = 'enabled';
                var analyticsEventTracking = 'enabled';
            </script>
<script type="text/javascript">
	var _gaq = _gaq || [];
  
	_gaq.push(['_setAccount', 'UA-28065688-1']);
    _gaq.push(['_addDevId', 'i9k95']); // Google Analyticator App ID with Google
	_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
</head>

<body>
<div id="container" class="group">

<h1><a href="http://www.keithf4.com/">Keith&#039;s Ramblings&#8230;</a></h1>
<div id="bubble"><p>WARNING: If accidentally read, induce vomiting</p></div> <!-- erase this line if you want to turn the bubble off -->

<div id="content" class="group">

<h2 id="post-187"><a href="http://www.keithf4.com/extension_tips_4/" rel="bookmark">PostgreSQL Extension Developer Tips – Part 4</a></h2>
<p class="comments"><a href="http://www.keithf4.com/extension_tips_4/#comments"><span class="dsq-postid" rel="187 http://www.keithf4.com/?p=187">without comments</span></a></p>

<div class="main">
	<p>So my latest release of <a href="https://github.com/omniti-labs/mimeo" target="_blank">mimeo</a> (v0.10.0) taught me a lesson to look up a new feature to make sure of when it was added and that it would be compatible for the versions I&#8217;m trying to support. That feature was the new <a href="http://www.postgresql.org/docs/9.2/static/plpgsql-control-structures.html#PLPGSQL-ERROR-TRAPPING" target="_blank">GET STACKED DIAGNOSTICS</a> command that allows the capture and display of more details in the exception block to help make debugging problems easier. However that was introduced in 9.2 and I&#8217;m trying to stay compatible with 9.1. I tried wrapping the call in an IF statement that checked the current postgres version, but apparently that command gets evaluated when the function is installed, not on execution. So I&#8217;ve had to remove what I thought was a nice additional feature for now.</p>
<p>The reason this post is an extension developer tip was the way I handled releasing a fix for this. If you&#8217;re upgrading an extension and you are several released versions behind, when you run the ALTER EXTENSION &#8230; UPDATE TO &#8230; command, all of the updates between your version and the target version are run in sequence. However, due to the issue described above, the 0.9.3 -&gt; 0.10.0 update script would fail if you&#8217;re not running postgres 9.2. This means anyone updating from 0.9.3 and earlier to 0.10.0 and later would never be able to run the intermediary update script, and hence never upgrade. The key to allowing a bypass of this version update is in the way the update scripts are named.</p><!-- Crayon Syntax Highlighter v2.6.5 -->

		<div id="crayon-53cf87a4a8df4538463289" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
mimeo--0.9.3--0.10.0.sql</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53cf87a4a8df4538463289-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53cf87a4a8df4538463289-1"><span class="crayon-v">mimeo</span><span class="crayon-o">--</span><span class="crayon-cn">0.9.3</span><span class="crayon-o">--</span><span class="crayon-cn">0.10.0.sql</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>The name you give the file must be the version you&#8217;re upgrading from and the version it is upgrading you to. The trick to bypass the 0.10.0 update is to just create an update script like this</p><!-- Crayon Syntax Highlighter v2.6.5 -->

		<div id="crayon-53cf87a4a8e02217709598" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
mimeo--0.9.3--0.10.1.sql</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53cf87a4a8e02217709598-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53cf87a4a8e02217709598-1"><span class="crayon-v">mimeo</span><span class="crayon-o">--</span><span class="crayon-cn">0.9.3</span><span class="crayon-o">--</span><span class="crayon-cn">0.10.1.sql</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>Seeing this file, the extension update planner will see that it is a shorter update path and choose it instead of running the intermediate update step from 0.9.3 to 0.10.0. The important thing you have to remember is to include ALL updates that occurred between the given versions in the bypass script.</p>
<p>There&#8217;s a handy function that can show you the update path that an extension update (or downgrade) can take so you can be sure things will work as expected</p><!-- Crayon Syntax Highlighter v2.6.5 -->

		<div id="crayon-53cf87a4a8e0a066252405" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Transact-SQL</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
pg_extension_update_paths('extension_name')</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53cf87a4a8e0a066252405-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53cf87a4a8e0a066252405-1"><span class="crayon-e">pg_extension_update_paths</span><span class="crayon-sy">(</span><span class="crayon-s">'extension_name'</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p>This will show you every single update and downgrade path possible, and if a valid path exists, all the steps along that path. This can be quite spammy for extensions with a long update history. Luckily this function returns a record set, so you can filter with a WHERE condition. Here&#8217;s an example with mimeo 0.9.2 installed and the path that would be taken without the bypass script.</p><!-- Crayon Syntax Highlighter v2.6.5 -->

		<div id="crayon-53cf87a4a8e11426952634" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
keith=# select * from pg_extension_update_paths('mimeo') where source = '0.9.2' and path is not null;
 source | target |             path             
--------+--------+------------------------------
 0.9.2  | 0.9.3  | 0.9.2--0.9.3
 0.9.2  | 0.10.0 | 0.9.2--0.9.3--0.10.0
 0.9.2  | 0.10.1 | 0.9.2--0.9.3--0.10.0--0.10.1</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53cf87a4a8e11426952634-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-53cf87a4a8e11426952634-2">2</div><div class="crayon-num" data-line="crayon-53cf87a4a8e11426952634-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-53cf87a4a8e11426952634-4">4</div><div class="crayon-num" data-line="crayon-53cf87a4a8e11426952634-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-53cf87a4a8e11426952634-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53cf87a4a8e11426952634-1"><span class="crayon-v">keith</span><span class="crayon-o">=</span><span class="crayon-p"># select * from pg_extension_update_paths('mimeo') where source = '0.9.2' and path is not null;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53cf87a4a8e11426952634-2"><span class="crayon-h"> </span><span class="crayon-v">source</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">target</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">path</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></div><div class="crayon-line" id="crayon-53cf87a4a8e11426952634-3"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">+</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">+</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span></div><div class="crayon-line crayon-striped-line" id="crayon-53cf87a4a8e11426952634-4"><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.9.3</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-o">--</span><span class="crayon-cn">0.9.3</span></div><div class="crayon-line" id="crayon-53cf87a4a8e11426952634-5"><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.10.0</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-o">--</span><span class="crayon-cn">0.9.3</span><span class="crayon-o">--</span><span class="crayon-cn">0.10.0</span></div><div class="crayon-line crayon-striped-line" id="crayon-53cf87a4a8e11426952634-6"><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.10.1</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-o">--</span><span class="crayon-cn">0.9.3</span><span class="crayon-o">--</span><span class="crayon-cn">0.10.0</span><span class="crayon-o">--</span><span class="crayon-cn">0.10.1</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0024 seconds] -->
<p>With the bypass script available, the update paths turn into this.</p><!-- Crayon Syntax Highlighter v2.6.5 -->

		<div id="crayon-53cf87a4a8e18577063183" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
keith=# select * from pg_extension_update_paths('mimeo') where source = '0.9.2' and path is not null;
 source | target |         path         
--------+--------+----------------------
 0.9.2  | 0.9.3  | 0.9.2--0.9.3
 0.9.2  | 0.10.0 | 0.9.2--0.9.3--0.10.0
 0.9.2  | 0.10.1 | 0.9.2--0.9.3--0.10.1</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53cf87a4a8e18577063183-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-53cf87a4a8e18577063183-2">2</div><div class="crayon-num" data-line="crayon-53cf87a4a8e18577063183-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-53cf87a4a8e18577063183-4">4</div><div class="crayon-num" data-line="crayon-53cf87a4a8e18577063183-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-53cf87a4a8e18577063183-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53cf87a4a8e18577063183-1"><span class="crayon-v">keith</span><span class="crayon-o">=</span><span class="crayon-p"># select * from pg_extension_update_paths('mimeo') where source = '0.9.2' and path is not null;</span></div><div class="crayon-line crayon-striped-line" id="crayon-53cf87a4a8e18577063183-2"><span class="crayon-h"> </span><span class="crayon-v">source</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">target</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-v">path</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></div><div class="crayon-line" id="crayon-53cf87a4a8e18577063183-3"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">+</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">+</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span></div><div class="crayon-line crayon-striped-line" id="crayon-53cf87a4a8e18577063183-4"><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.9.3</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-o">--</span><span class="crayon-cn">0.9.3</span></div><div class="crayon-line" id="crayon-53cf87a4a8e18577063183-5"><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.10.0</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-o">--</span><span class="crayon-cn">0.9.3</span><span class="crayon-o">--</span><span class="crayon-cn">0.10.0</span></div><div class="crayon-line crayon-striped-line" id="crayon-53cf87a4a8e18577063183-6"><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.10.1</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-cn">0.9.2</span><span class="crayon-o">--</span><span class="crayon-cn">0.9.3</span><span class="crayon-o">--</span><span class="crayon-cn">0.10.1</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0022 seconds] -->
<p>So now when I give the update command</p><!-- Crayon Syntax Highlighter v2.6.5 -->

		<div id="crayon-53cf87a4a8e1f772726255" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
ALTER EXTENSION mimeo UPDATE TO '0.10.1';</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-53cf87a4a8e1f772726255-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-line" id="crayon-53cf87a4a8e1f772726255-1"><span class="crayon-e">ALTER </span><span class="crayon-e">EXTENSION </span><span class="crayon-e">mimeo </span><span class="crayon-e">UPDATE </span><span class="crayon-st">TO</span><span class="crayon-h"> </span><span class="crayon-s">'0.10.1'</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0003 seconds] -->
<p>it will skip right over the 0.10.0 update script. This will allow PostgreSQL versions older than 9.2 to update without any issues. So, my apologies to anyone that grabbed my extension right away after my blog post and ran into issues. At least this gave me an opportunity for another tip!</p>
</div>

<div class="meta group">
<div class="signature">
    <p>Written by Keith <span class="edit"></span></p>
    <p>February 9th, 2013 at 11:42 am</p>
</div>	
<div class="tags">
    <p>Posted in <a href="http://www.keithf4.com/category/postgresql-stuff/" title="View all posts in PostgreSQL" rel="category tag">PostgreSQL</a></p>
    <p>Tagged with <a href="http://www.keithf4.com/tag/extensions/" rel="tag">extensions</a>, <a href="http://www.keithf4.com/tag/mimeo/" rel="tag">mimeo</a>, <a href="http://www.keithf4.com/tag/postgresql/" rel="tag">postgresql</a>, <a href="http://www.keithf4.com/tag/tips/" rel="tag">tips</a></p></div>
</div>

<div class="navigation group">
    <div class="alignleft">&laquo; <a href="http://www.keithf4.com/mimeo-introduction/" rel="prev">Mimeo &#8211; A per-table replication extension for PostgreSQL</a></div>
    <div class="alignright"><a href="http://www.keithf4.com/mimeo-incremental-replication/" rel="next">Mimeo &#8211; Incremental Replication</a> &raquo;</div>
</div>


<div id="disqus_thread">
    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'http://www.keithf4.com/extension_tips_4/';
    var disqus_identifier = '187 http://www.keithf4.com/?p=187';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'keithf4';
    var disqus_title = "PostgreSQL Extension Developer Tips – Part 4";
    var disqus_config = function () {
        var config = this; // Access to the config object
        config.language = '';

        /* Add the ability to add javascript callbacks */
        
        /*
           All currently supported events:
            * preData — fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            var script = document.createElement('script');
            script.async = true;
            script.src = '?cf_action=sync_comments&post_id=187';

            var firstScript = document.getElementsByTagName( "script" )[0];
            firstScript.parentNode.insertBefore(script, firstScript);
        });
                    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/www.keithf4.com\/extension_tips_4\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.' + 'disqus.com' + '/' + 'embed' + '.js' + '?pname=wordpress&pver=2.77';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>


</div> 

<div id="sidebar">
<h3>My Stuff</h3>		<ul>
			<li class="page_item page-item-24"><a href="http://www.keithf4.com/projects/">Projects</a></li>
<li class="page_item page-item-512"><a href="http://www.keithf4.com/publications/">Publications</a></li>
		</ul>
					<div class="textwidget"><script src="http://coinwidget.com/widget/coin.js"></script>
<script>
CoinWidgetCom.go({
        wallet_address: "19cf6fhqCUNV7wzpWQW4DPEWh8MyLhfbu"
        , currency: "bitcoin"
        , counter: "count"
        , alignment: "bl"
        , qrcode: true
        , auto_show: false
        , lbl_button: "Donate"
        , lbl_address: "My Bitcoin Address:"
        , lbl_count: "donations"
        , lbl_amount: "BTC"
});
</script>
<br><br>
<a href="http://steamcommunity.com/profiles/76561197984029286/wishlist/" target="_blank">Steam Wishlist</a></div>
		<form role="search" method="get" id="searchform" class="searchform" action="http://www.keithf4.com/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form>				<h3>Recent Posts</h3>		<ul>
					<li>
				<a href="http://www.keithf4.com/table-partitioning-and-foreign-keys/">Table Partitioning and Foreign Keys</a>
						</li>
					<li>
				<a href="http://www.keithf4.com/partitioning-with-custom-time-intervals/">Partitioning With Custom Time Intervals</a>
						</li>
					<li>
				<a href="http://www.keithf4.com/version-specific-postgresql-extension-features/">Version Specific PostgreSQL Extension Features</a>
						</li>
					<li>
				<a href="http://www.keithf4.com/managing-constraint-exclusion-in-table-partitioning/">Managing Constraint Exclusion in Table Partitioning</a>
						</li>
					<li>
				<a href="http://www.keithf4.com/monitoring_streaming_slave_lag/">Monitoring Streaming Slave Lag Effectively</a>
						</li>
				</ul>
		<h3>Tags</h3><div class="tagcloud"><a href='http://www.keithf4.com/tag/backup/' class='tag-link-22' title='1 topic' style='font-size: 8pt;'>backup</a>
<a href='http://www.keithf4.com/tag/circonus/' class='tag-link-11' title='1 topic' style='font-size: 8pt;'>circonus</a>
<a href='http://www.keithf4.com/tag/dst/' class='tag-link-16' title='1 topic' style='font-size: 8pt;'>dst</a>
<a href='http://www.keithf4.com/tag/extensions/' class='tag-link-25' title='17 topics' style='font-size: 19.586206896552pt;'>extensions</a>
<a href='http://www.keithf4.com/tag/fdw/' class='tag-link-18' title='2 topics' style='font-size: 10.172413793103pt;'>fdw</a>
<a href='http://www.keithf4.com/tag/full-text-search/' class='tag-link-6' title='1 topic' style='font-size: 8pt;'>full-text search</a>
<a href='http://www.keithf4.com/tag/logging/' class='tag-link-14' title='3 topics' style='font-size: 11.620689655172pt;'>logging</a>
<a href='http://www.keithf4.com/tag/mimeo/' class='tag-link-26' title='6 topics' style='font-size: 14.637931034483pt;'>mimeo</a>
<a href='http://www.keithf4.com/tag/minecraft/' class='tag-link-21' title='1 topic' style='font-size: 8pt;'>minecraft</a>
<a href='http://www.keithf4.com/tag/monitoring/' class='tag-link-9' title='5 topics' style='font-size: 13.793103448276pt;'>monitoring</a>
<a href='http://www.keithf4.com/tag/nagios/' class='tag-link-10' title='1 topic' style='font-size: 8pt;'>nagios</a>
<a href='http://www.keithf4.com/tag/oracle/' class='tag-link-17' title='2 topics' style='font-size: 10.172413793103pt;'>oracle</a>
<a href='http://www.keithf4.com/tag/partitioning/' class='tag-link-28' title='4 topics' style='font-size: 12.827586206897pt;'>partitioning</a>
<a href='http://www.keithf4.com/tag/pg_dump/' class='tag-link-13' title='2 topics' style='font-size: 10.172413793103pt;'>pg_dump</a>
<a href='http://www.keithf4.com/tag/pg_extractor/' class='tag-link-12' title='2 topics' style='font-size: 10.172413793103pt;'>pg_extractor</a>
<a href='http://www.keithf4.com/tag/pg_jobmon/' class='tag-link-8' title='5 topics' style='font-size: 13.793103448276pt;'>pg_jobmon</a>
<a href='http://www.keithf4.com/tag/pg_partman/' class='tag-link-29' title='6 topics' style='font-size: 14.637931034483pt;'>pg_partman</a>
<a href='http://www.keithf4.com/tag/pg_upgrade/' class='tag-link-15' title='1 topic' style='font-size: 8pt;'>pg_upgrade</a>
<a href='http://www.keithf4.com/tag/postgresql/' class='tag-link-3' title='28 topics' style='font-size: 22pt;'>postgresql</a>
<a href='http://www.keithf4.com/tag/replication/' class='tag-link-27' title='5 topics' style='font-size: 13.793103448276pt;'>replication</a>
<a href='http://www.keithf4.com/tag/schema/' class='tag-link-24' title='1 topic' style='font-size: 8pt;'>schema</a>
<a href='http://www.keithf4.com/tag/tips/' class='tag-link-4' title='8 topics' style='font-size: 15.844827586207pt;'>tips</a>
<a href='http://www.keithf4.com/tag/wuala/' class='tag-link-23' title='1 topic' style='font-size: 8pt;'>wuala</a></div>
<h3>Recent Comments</h3><ul id="recentcomments"><li class="recentcomments">arun desai on <a href="http://www.keithf4.com/table-partitioning-and-foreign-keys/#comment-914">Table Partitioning and Foreign Keys</a></li><li class="recentcomments">keithf4 on <a href="http://www.keithf4.com/table-partitioning-and-foreign-keys/#comment-913">Table Partitioning and Foreign Keys</a></li><li class="recentcomments">arun desai on <a href="http://www.keithf4.com/table-partitioning-and-foreign-keys/#comment-912">Table Partitioning and Foreign Keys</a></li><li class="recentcomments">keithf4 on <a href="http://www.keithf4.com/managing-constraint-exclusion-in-table-partitioning/#comment-911">Managing Constraint Exclusion in Table Partitioning</a></li><li class="recentcomments">arun desai on <a href="http://www.keithf4.com/managing-constraint-exclusion-in-table-partitioning/#comment-910">Managing Constraint Exclusion in Table Partitioning</a></li></ul><h3>About Me</h3>			<div class="textwidget">I'm a database administrator with <a href="http://www.omniti.com">OmniTI, Inc</a> and play way too many video games. You can find me lurking in #postgresql on <a href="http://freenode.net/">Freenode IRC</a>
or join me in <a href="https://secure.eveonline.com/trial/?invc=afd96c42-585c-4789-94ee-2677abcc9f33&action=buddy" target="_blank">Tranquility</a>.</div>
		<h3>Archives</h3>		<ul>
	<li><a href='http://www.keithf4.com/2014/05/'>May 2014</a></li>
	<li><a href='http://www.keithf4.com/2014/02/'>February 2014</a></li>
	<li><a href='http://www.keithf4.com/2014/01/'>January 2014</a></li>
	<li><a href='http://www.keithf4.com/2013/10/'>October 2013</a></li>
	<li><a href='http://www.keithf4.com/2013/09/'>September 2013</a></li>
	<li><a href='http://www.keithf4.com/2013/07/'>July 2013</a></li>
	<li><a href='http://www.keithf4.com/2013/04/'>April 2013</a></li>
	<li><a href='http://www.keithf4.com/2013/03/'>March 2013</a></li>
	<li><a href='http://www.keithf4.com/2013/02/'>February 2013</a></li>
	<li><a href='http://www.keithf4.com/2013/01/'>January 2013</a></li>
	<li><a href='http://www.keithf4.com/2012/12/'>December 2012</a></li>
	<li><a href='http://www.keithf4.com/2012/11/'>November 2012</a></li>
	<li><a href='http://www.keithf4.com/2012/10/'>October 2012</a></li>
	<li><a href='http://www.keithf4.com/2012/07/'>July 2012</a></li>
	<li><a href='http://www.keithf4.com/2012/06/'>June 2012</a></li>
	<li><a href='http://www.keithf4.com/2012/04/'>April 2012</a></li>
	<li><a href='http://www.keithf4.com/2012/03/'>March 2012</a></li>
	<li><a href='http://www.keithf4.com/2012/02/'>February 2012</a></li>
	<li><a href='http://www.keithf4.com/2012/01/'>January 2012</a></li>
		</ul>


</div>

</div>

<div id="footer">
	<p>The Journalist template by <a href="http://lucianmarin.com/" rel="designer">Lucian E. Marin</a> &mdash; Built for <a href="http://wordpress.org/">WordPress</a></p>
</div>

</body>
</html>
