http://www.cocotron.org/Tools/Debugging/Insight-GDB/?path=Tools/Debugging/Insight-GDB
HTTP/1.1 200 OK
Date: Wed, 23 Jul 2014 01:38:47 GMT
Server: Apache/2.2.22 (Ubuntu)
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 4936
Connection: close
Content-Type: text/html

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html>
 <head>
  <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">

  <title>
   The Cocotron

  </title>

<style type="text/css" media="all">
html {
   background-color:#eee;
}

html, body {
font:100% Helvetica, Arial, sans-serif;height:100%;
}

a {
 color:black;
 text-decoration:underline;
}

a:visited {
  color:black;
 text-decoration:underline;
  }

a:hover {
  color: #660033;
 text-decoration:underline;
  }

#header {
   background-color:#ABA;
   padding:0px;
   margin:0px;
   float:right;
   width:100%;
   height:60px;
}

#header img {
height:50px;margin-left:10px;margin-right:10px;margin-top:5px;
}

#header h2 {
margin-left:10px;margin-top:10px;font: bold 24pt Century Gothic, sans-serif;color: black;
}

#info {
   background-color:#fff;
float:left; color:black;width:100%;
}

#info h1 {
float:right; width:65%;padding:0px;margin:8px;font: 100% bold Century Gothic, sans-serif;min-width:200px;color:#555;
}

#infoimage {
float:left;width:30%;vertical-align:bottom;
}

#menu {
height:20px;float:left;padding-top:5px;padding-bottom:5px;margin:0px;width:100%; background-color:#CDC;

}

#content {
float:right;color:#020;background-color:white;width:79%;
}

#content a:visited {
  color:#880;
  text-decoration:none;
  }

#content a:hover {
  color:#F00;
  text-decoration:none;
  }

#contentcontent {
width:90%;
}

#sidebar {
font-size:80%;float:left;width:20%;background-color:#DED;color:black;
border: solid #999 1px; min-width:120;
}

#sidebar a {
 color:#080;
 text-decoration:underline;
}

#sidebar a:visited {
  color:#880;
  text-decoration:underline;
  }

#sidebar a:hover {
 color:black;
  text-decoration:underline;
}

#footer {
background-color:#fff;width:100%;padding-top:3px;padding-bottom:3px;color:black;
font:75% Helvetica, Arial, sans-serif;}

.spacer {
 clear:both;width:100%;height:3px;
}

.menuitem  {
   font-weight:bold;
   color:#000;
   float:left;
   width:24%;
   text-align:center;
}

.menuitemSelected {
   background-color:black;
   font-weight:bold;
   color:white;
   float:left;
   width:24%;
   text-align:center;
}

 </style>
 </head>

 <body>

<div style="min-width:300px;width:100%;height:100%;">

<div id="header">

<div style="width:70px;float:left;"><img src="/images/logo.png" alt="Cocotron Logo"></div>

<div style="margin:0px;float:left;">
<h2><a href="/" >THE COCOTRON</a></h2>

</div>
<div style="padding-right:10px;float:right">
   <a href="https://www.digitalocean.com/?refcode=d66a1c0e9476">cocotron.org is hosted on Digital Ocean - $5/mo SSD server</a>
</div>

</div>

<div class="spacer"></div>

<div id="info">

<h1>The Cocotron is an open source project which aims to implement a cross-platform Objective-C API similar to that described by Apple Inc.'s Cocoa documentation. This includes the AppKit, Foundation, Objective-C runtime and support APIs such as CoreGraphics and CoreFoundation.
</h1>

<div id="infoimage"><img src="/images/debugging.jpg" alt="Cocotron Debugging" style="width:100%;vertical-align:middle;">
</div>

</div>


<div class="spacer"></div>

<div id="menu">
<div class="menuitem"><a href="/Info">INFO</a></div>
<div class="menuitem"><a href="/Tools">TOOLS</a></div>
<div class="menuitem"><a href="/Code">SOURCE</a></div>
<div class="menuitem"><a href="http://blog.cocotron.org">BLOG</a></div>
</div>

<div class="spacer"></div>

<div style="width:100%;">

<div id="sidebar">
<div style="text-align:left;margin:5%;" >

<form name="_xclick" action="https://www.paypal.com/us/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="cocotron@gmail.com">
<input type="hidden" name="item_name" value="Cocotron">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="amount" value="5">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form>
<a href="bitcoin:1LVL58wfzPFjfTZViG5b2V2yoJWJ3iHLay?amount=0.003&message=Cocotron%20Donation">Donate using Bitcoin</a>
<br>

<p><a href="/Tools">Overview</a></p>

<p><a href="/Tools/InstallCDT">InstallCDT - Xcode cross-compilers </a></p>
<p><a href="/Tools/Cross_Compiling">How To Cross Compile</a></p>

<p><a href="/Tools/Creating_Targets">Creating Cocotron Targets</a></p>
<p><a href="/Tools/Build_Settings">Build Settings</a></p>
<ul>
<li><a href="/Tools/retargetBundle">retargetBundle - DLL organizer</a></li>
</ul>
<p><a href="/Tools/Windows_Resource_Files">Application Icon aka Compiling Windows Resource Files</a></p>
<p><a href="/Tools/Platform_Interface">Platform Interface</a></p>
<p>Debugging</p>
<ul>
<li><a href="/Tools/Debugging/Insight-GDB">Insight-GDB Source Level Debugging</a></li>
<li><a href="/Tools/Debugging/Dispatch_Logging">Message Dispatch Logging</a></li>
</ul>

</div>
</div>

<div id="content" >

<div id="contentcontent" style="text-align:left;margin:5%;">
<p><b>Cocotron Source Level Debugging with Insight-GDB</b></p>
<p>By Dr. Rolf Jansen</p>
<p style="height:10px"></p>
<p><b>1. Download MinGW, MSYS, Insight-GDB and 7zip</b></p>

<ol type="A">
<li><p>Download the MinGW installer from Sourceforge: <a href="http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/MinGW%205.1.4/MinGW-5.1.4.exe/download">MinGW-5.1.4.exe</a></p></li>

<li><p>Download the MSYS installer from Sourceforge: <a href="http://sourceforge.net/projects/mingw/files/MSYS%20Base%20System/Previous%20Release%20-%20msys-1.0.10/MSYS-1.0.10.exe/download">MSYS-1.0.10.exe</a></p></li>
		
<li><p>Download Insight-GDB from Sourceforge: <a href="http://sourceforge.net/projects/mingw/files/GNU%20Source-Level%20Debugger/Release%20Candidate_%20gdb-6.6/insight-6.6-mingw.tar.bz2/download">insight-6.6-mingw.tar.bz2</a></p></li>
		
<li><p>Download the open source compression and decompression utility 7zip: <a href="http://downloads.sourceforge.net/sevenzip/7z457.exe">7z457.exe</a></p></li>
</ol>

<p>If you want to use WinZip instead for decompression and unarchiving of Insight-GDB, then you need to pay attention to the special warning on the MinGW site: <a href="http://www.mingw.org/wiki/WinZip">http://www.mingw.org/wiki/WinZip</a></p>

<img src="Insight-GDB/Image01.png">


<p><b>2. Install 7zip using the downloaded installer 7z457.exe, then restart Windows, so that the 7zip context menu can be used.</b></p>

<p><b>3. Install MinGW using the installer MinGW-5.1.3.exe</b></p>

<img src="Insight-GDB/Image02.png"><br>
<img src="Insight-GDB/Image03.png"><br>
<img src="Insight-GDB/Image04.png"><br>
<img src="Insight-GDB/Image05.png"><br>

<p>You can take a coffee break now, while the MinGW installer is downloading and installing the basic components.</p>

<img src="Insight-GDB/Image06.png">

<p><b>4. Install MSYS using the installer MSYS-1.0.10.exe</b></p>

<img src="Insight-GDB/Image07.png">


<p>Then answer the post-installer questions in the console window. The answers are:
"y", "y" and "c:/mingw".</p>

<img src="Insight-GDB/Image08.png">


<p><b>5. Install Insight-GDB from the insight-6.6-mingw.tar.bz2 archive, using 7zip for decompression and unarchiving</b></p>

<p>- extract the .bz2 into the .tar archive using the 7zip contextual menu</p>

<img src="Insight-GDB/Image09.png">


<p>- open the just extracted .tar archive using 7zip, for modification before extracting</p>

<img src="Insight-GDB/Image10.png">


<p>- rename the directory inside the archive from "insight-mingw" to "mingw".</p>


<img src="Insight-GDB/Image11.png"><br>
<img src="Insight-GDB/Image12.png">


<p>This is necesarray, because otherwise the contents would be extracted in
	separate directory and not into the mingw directory tree.</p>

<p>	- extract the directory tree of the .tar-archive into the respective mingw directories.
	  Push the blue "&mdash;"-Extract button and enter the target path in the
	  upcoming dialog box. Important, the target path is "C:\" only:</p>

<img src="Insight-GDB/Image13.png">


<p>Confirm that some files should be overwritten by the contents of the archive.</p>

<p><b>6. Cleaning-Up</b></p>

<p>- move the MSYS starter to a convenient location, where you can find it later</p>
<p>- move all archives and installers from the download location to the trash,
	  since they are needed no longer</p>


<p><b>7. Preparation of your files for debugging</b></p>

<p><b>IMPORTANT:</b> Compile and build Cocotron and then your Application with the Debug configuration. Make sure that for the following the "Debug" and not the "Release" flavours of your executable and the frameworks are used.</p>

<p>In order to source level debug your code and Cocotron, GDB at the Windows XP machine needs to have access to the respective source files, that were used to compile the code.</p>

<p>For this, the most easy approach is, to copy the whole project directory of your application and the whole source tree of cocotron into your MSYS home directory, which you will find at:  "c:\msys\home\yourwinxpusername".</p>

<p>For example, my Windows XP user name is Rolf, and my application is named CVA, and I would copy the needed files by the way of a network share from my Mac to the Win XP machine. There might be other suitable ways, though.</p>


<img src="Insight-GDB/Image14.png">



<p><b>8.	Create a GDB command file</b></p>

<p>Since cocotron has a lot of sub-directories, we need to tell GDB, where to find everything. This is best done by the way of a command file. While there, it is also a good idea to specify the executable to be debugged. My GDB command file contains the following entries:</p>

<pre>
dir ~/cocotron/Foundation/CoreFoundation
dir ~/cocotron/Foundation/NSArray
dir ~/cocotron/Foundation/NSAttributedString
dir ~/cocotron/Foundation/NSAutoreleasePool
dir ~/cocotron/Foundation/NSCharacterSet
dir ~/cocotron/Foundation/NSConnection
dir ~/cocotron/Foundation/NSData
dir ~/cocotron/Foundation/NSDate
dir ~/cocotron/Foundation/NSDecimal
dir ~/cocotron/Foundation/NSDictionary
dir ~/cocotron/Foundation/NSException
dir ~/cocotron/Foundation/NSHTTPCookie
dir ~/cocotron/Foundation/NSIndexSet
dir ~/cocotron/Foundation/NSKeyValueCoding
dir ~/cocotron/Foundation/NSKeyedArchiving
dir ~/cocotron/Foundation/NSLock
dir ~/cocotron/Foundation/NSMetadata
dir ~/cocotron/Foundation/NSNetService
dir ~/cocotron/Foundation/NSNotification
dir ~/cocotron/Foundation/NSNotificationCenter
dir ~/cocotron/Foundation/NSNotificationQueue
dir ~/cocotron/Foundation/NSNumber
dir ~/cocotron/Foundation/NSObject
dir ~/cocotron/Foundation/NSPortNameServer
dir ~/cocotron/Foundation/NSPredicate
dir ~/cocotron/Foundation/NSPropertyList
dir ~/cocotron/Foundation/NSRunLoop
dir ~/cocotron/Foundation/NSScanner
dir ~/cocotron/Foundation/NSSet
dir ~/cocotron/Foundation/NSStream
dir ~/cocotron/Foundation/NSString
dir ~/cocotron/Foundation/NSStringsFileFormat
dir ~/cocotron/Foundation/NSThread
dir ~/cocotron/Foundation/NSTimeZone
dir ~/cocotron/Foundation/NSTimer
dir ~/cocotron/Foundation/NSURL
dir ~/cocotron/Foundation/NSUndoManager
dir ~/cocotron/Foundation/NSUserDefaults
dir ~/cocotron/Foundation/NSValue
dir ~/cocotron/Foundation/NSValueTransformer
dir ~/cocotron/Foundation/NSZone
dir ~/cocotron/Foundation/objc
dir ~/cocotron/Foundation/platform_win32
dir ~/cocotron/Foundation/xml
dir ~/cocotron/AppKit/CoreGraphics.subproj
dir ~/cocotron/AppKit/ImageIO
dir ~/cocotron/AppKit/NSAnimation
dir ~/cocotron/AppKit/NSColor.subproj
dir ~/cocotron/AppKit/NSColorPanel.nib
dir ~/cocotron/AppKit/NSColorPicker.subproj
dir ~/cocotron/AppKit/NSController
dir ~/cocotron/AppKit/NSDrawer.subproj
dir ~/cocotron/AppKit/NSEvent.subproj
dir ~/cocotron/AppKit/NSFontPanel.nib
dir ~/cocotron/AppKit/NSInterfacePart
dir ~/cocotron/AppKit/NSKeyBinding.subproj
dir ~/cocotron/AppKit/NSKeyValueBinding
dir ~/cocotron/AppKit/NSMenu.subproj
dir ~/cocotron/AppKit/NSSegmentedControl
dir ~/cocotron/AppKit/NSSystemInfoPanel
dir ~/cocotron/AppKit/NSTextTable
dir ~/cocotron/AppKit/NSTextView.subproj
dir ~/cocotron/AppKit/NSToolbar.subproj
dir ~/cocotron/AppKit/OpenGL.subproj
dir ~/cocotron/AppKit/RTF.subproj
dir ~/cocotron/AppKit/Win32.subproj
dir ~/cocotron/AppKit/X11.subproj
dir ~/cocotron/AppKit/nib.subproj
dir ~/cocotron/objc
dir ~/cocotron/Foundation
dir ~/cocotron/AppKit
dir ~/CVA
file ~/CVA/build/Windows/Debug/CVA.app/Contents/Windows/CVA.exe
</pre>
<p>Copy these entries into a pure test file, and change CVA to the name of your application. Save the file as gdb-cmd.txt into your MSYS home directory.</p>


<p><b>9.	Start MSYS using the MSYS starter at your desktop</b></p>

<img src="Insight-GDB/Image15.png">


<p>At the command line, you might want to check that everything is there, so enter:</p>

<pre>ls -R</pre>

<p>Then start Insight-GDB with the following command:</p>

<pre>insight gdbcmd.txt</pre>


<img src="Insight-GDB/Image16.png">

<p>Insight should start and display the file which contains the main() of your program.</p>

<img src="Insight-GDB/Image17.png">


<p>At this stage, GDB loaded only the symbol table of your application. The symbol tables of the coocotron frameworks are loaded only, after the program has started. So set a breakpoint at line #12 by clicking at the dash in front of 12 and start the debugging session, by clicking on the blue runner icon.</p>

<img src="Insight-GDB/Image18.png">


<p>Before continuing you program, you might want to use the function browser, which you would choose from the menu View, to set more breakpoints. NOTE: There seems to be a bug in Insight, so never press the "Select All" button with an empty Function Filter, since this will freeze Insight.</p>

<img src="Insight-GDB/Image19.png">


<p>After you set the breakpoints to your debugging needs, press continue, or step in/out your application and cocotron.</p>

<img src="Insight-GDB/Image20.png">




</div>
</div>

<!----
<div style="width:18%;float:right;margin-right:10px;text-align:left;padding:5px;border:solid #000 1px;">
<div>
<a href="/Info/Consulting" style="font-weight:bold;"><img src="/images/consultingThumbnail.png" width="100%"><br>Experienced iPhone, Cocoa, Objective-C developer available for hire.</a>
</div>

</div>
---->



</div>

<div class="spacer"></div>

<div id="footer" >
<p  >Copyright &copy; 2006-2008 by Christopher Lloyd</p>
</div>

</div>

<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-2271976-2";
urchinTracker();
</script>
</body>
</html>

