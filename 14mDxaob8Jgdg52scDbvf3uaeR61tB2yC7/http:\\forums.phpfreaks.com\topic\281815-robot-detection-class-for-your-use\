http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/
HTTP/1.1 200 OK
Server: nginx
Date: Wed, 23 Jul 2014 21:45:15 GMT
Content-Type: text/html;charset=UTF-8
Connection: close
Set-Cookie: session_id=ab5bc16206a58ef0c98520779b8f2c22; path=/; domain=.phpfreaks.com; httponly
Set-Cookie: modpids=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.phpfreaks.com
Cache-Control: no-cache, must-revalidate, max-age=0
Expires: Tue, 22 Jul 2014 21:45:15 GMT
Pragma: no-cache
Set-Cookie: itemMarking_forums_items=eJyrVjKyMLQwNFWyMjQxMDM0NbQ0NK0FXDAy3QSx; expires=Thu, 23-Jul-2015 21:45:15 GMT; path=/; domain=.phpfreaks.com
Content-Encoding: gzip
Vary: Accept-Encoding

<!DOCTYPE html>
	<html lang="en"  xmlns:fb="http://www.facebook.com/2008/fbml">
	<head>
		<meta charset="UTF-8" />
		<title>Robot Detection Class - For Your Use - Beta Test Your Stuff! - PHP Freaks</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<link rel="shortcut icon" href='http://forums.phpfreaks.com/favicon.ico' />
		<link rel="image_src" href='http://forums.phpfreaks.com/public/style_images/phpfreaks/meta_image.png' />
		<script type='text/javascript'>
		//<![CDATA[
			jsDebug			= 0; /* Must come before JS includes */
			DISABLE_AJAX	= parseInt(0); /* Disables ajax requests where text is sent to the DB; helpful for charset issues */
			inACP			= false;
			var isRTL		= false;
			var rtlIe		= '';
			var rtlFull		= '';
		//]]>
		</script>
		
	
				
	

				
	

				
	

				
	

				
	
	
		<link rel="stylesheet" type="text/css" media='screen,print' href="http://forums.phpfreaks.com/public/min/index.php?ipbv=e08d28e6ababab965cd84e26ca7636f8&amp;f=public/style_css/css_5/calendar_select.css,public/style_css/css_5/ipb_common.css,public/style_css/css_5/ipb_styles.css,public/style_css/css_5/phpfreaks.css,public/style_css/prettify.css" />
	

<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" title='Main' media="screen" href="http://forums.phpfreaks.com/public/style_css/css_5/ipb_ie.css" />
<![endif]-->
<!--[if lte IE 8]>
	<style type='text/css'>
		.ipb_table { table-layout: fixed; }
		.ipsLayout_content { width: 99.5%; }
	</style>
<![endif]-->

	<style type='text/css'>
		img.bbc_img { max-width: 100% !important; }
	</style>

		<meta property="og:title" content="Robot Detection Class - For Your Use - Beta Test Your Stuff!"/>
		<meta property="og:site_name" content="PHP Freaks"/>
		<meta property="og:type" content="article" />
		
	
		
		
			<meta property="og:updated_time" content="1406151915" />
		
		
		
		
	

		
		
			<meta name="keywords" content="Robot,Detection,Class,For,Your,Use,have,knocked,liitle,class,retrieving,list,known,robot,user,agents,from,really,rather,helpfull,people,over" />
		
		
		
		
	

		
		
			<meta name="description" content="Robot Detection Class - For Your Use - posted in Beta Test Your Stuff!: I have knocked up this liitle class for retrieving a list of known robot user agents from the really rather helpfull people over at robotstxt.org.&nbsp; It pulls info from their site and builds an array that can be used to compare against the $_SERVER[HTTP_USER_AGENT] varable.&nbsp; It has an exlusion array that can be altered to suit your personal prefferences and can be echoed directly to produce a valid JSON string..." />
		
		
		
			<meta property="og:description" content="Robot Detection Class - For Your Use - posted in Beta Test Your Stuff!: I have knocked up this liitle class for retrieving a list of known robot user agents from the really rather helpfull people over at robotstxt.org.&nbsp; It pulls info from their site and builds an array that can be used to compare against the $_SERVER[HTTP_USER_AGENT] varable.&nbsp; It has an exlusion array that can be altered to suit your personal prefferences and can be echoed directly to produce a valid JSON string..." />
		
		
	

		
		
			<meta name="identifier-url" content="http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/" />
		
		
			<meta property="og:url" content="http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/" />
		
		
		
	

<meta property="og:image" content="http://forums.phpfreaks.com/public/style_images/phpfreaks/meta_image.png"/>
		
		
		<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js'></script>
		<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/scriptaculous/1.9/scriptaculous.js?load=effects,dragdrop,builder'></script>
	<script type='text/javascript' src='http://forums.phpfreaks.com/public/min/index.php?ipbv=e08d28e6ababab965cd84e26ca7636f8&amp;charset=UTF-8&amp;f=public/js/ipb.js,cache/lang_cache/2/ipb.lang.js,public/js/ips.hovercard.js,public/js/ips.quickpm.js,public/js/ips.sharelinks.js,public/js/ips.topic.js,public/js/ips.like.js' charset='UTF-8'></script>


	
		
			
			
			
			
				<link id="ipsCanonical" rel="canonical" href="http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/" />
			
		

			
			
			
			
				<link rel='stylesheet' type='text/css' title='Main' media='print' href='http://forums.phpfreaks.com/public/style_css/css_5/ipb_print.css' />
			
		

			
			
			
			
				<link rel='up' href='http://forums.phpfreaks.com/forum/46-beta-test-your-stuff/' />
			
		

			
			
			
			
				<link rel='author' href='http://forums.phpfreaks.com/user/92522-muddy-funster/' />
			
		
	

		
			
			
				<link rel="alternate" type="application/rss+xml" title="PHP Freaks News & Announcements" href="http://forums.phpfreaks.com/rss/forums/1-php-freaks-news-announcements/" />
			
			
			
		

			
			
				<link rel="alternate" type="application/rss+xml" title="PHP Freaks: PHP Help" href="http://forums.phpfreaks.com/rss/forums/2-php-freaks-php-help/" />
			
			
			
		
	

	


	



		
		<script type='text/javascript'>
	//<![CDATA[
		/* ---- URLs ---- */
		ipb.vars['base_url'] 			= 'http://forums.phpfreaks.com/index.php?s=ab5bc16206a58ef0c98520779b8f2c22&';
		ipb.vars['board_url']			= 'http://forums.phpfreaks.com';
		ipb.vars['img_url'] 			= "http://forums.phpfreaks.com/public/style_images/phpfreaks";
		ipb.vars['loading_img'] 		= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/loading.gif';
		ipb.vars['active_app']			= 'forums';
		ipb.vars['upload_url']			= 'http://forums.phpfreaks.com/uploads';
		/* ---- Member ---- */
		ipb.vars['member_id']			= parseInt( 0 );
		ipb.vars['is_supmod']			= parseInt( 0 );
		ipb.vars['is_admin']			= parseInt( 0 );
		ipb.vars['secure_hash'] 		= '880ea6a14ea49e853634fbdc5015a024';
		ipb.vars['session_id']			= 'ab5bc16206a58ef0c98520779b8f2c22';
		ipb.vars['twitter_id']			= 0;
		ipb.vars['fb_uid']				= 0;
		ipb.vars['auto_dst']			= parseInt( 0 );
		ipb.vars['dst_in_use']			= parseInt(  );
		ipb.vars['is_touch']			= false;
		ipb.vars['member_group']		= {"g_mem_info":"1"}
		/* ---- cookies ----- */
		ipb.vars['cookie_id'] 			= '';
		ipb.vars['cookie_domain'] 		= '.phpfreaks.com';
		ipb.vars['cookie_path']			= '/';
		/* ---- Rate imgs ---- */
		ipb.vars['rate_img_on']			= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/star.png';
		ipb.vars['rate_img_off']		= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/star_off.png';
		ipb.vars['rate_img_rated']		= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/star_rated.png';
		/* ---- Uploads ---- */
		ipb.vars['swfupload_swf']		= 'http://forums.phpfreaks.com/public/js/3rd_party/swfupload/swfupload.swf';
		ipb.vars['swfupload_enabled']	= true;
		ipb.vars['use_swf_upload']		= ( '' == 'flash' ) ? true : false;
		ipb.vars['swfupload_debug']		= false;
		/* ---- other ---- */
		ipb.vars['highlight_color']     = "#ade57a";
		ipb.vars['charset']				= "UTF-8";
		ipb.vars['time_offset']			= "-5";
		ipb.vars['hour_format']			= "12";
		ipb.vars['seo_enabled']			= 1;
		
		ipb.vars['seo_params']			= {"start":"-","end":"\/","varBlock":"?","varPage":"page-","varSep":"&","varJoin":"="};
		
		/* Templates/Language */
		ipb.templates['inlineMsg']		= "";
		ipb.templates['ajax_loading'] 	= "<div id='ajax_loading'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/ajax_loading.gif' alt='" + ipb.lang['loading'] + "' /></div>";
		ipb.templates['close_popup']	= "<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/close_popup.png' alt='x' />";
		ipb.templates['rss_shell']		= new Template("<ul id='rss_menu' class='ipbmenu_content'>#{items}</ul>");
		ipb.templates['rss_item']		= new Template("<li><a href='#{url}' title='#{title}'>#{title}</a></li>");
		
		ipb.templates['autocomplete_wrap'] = new Template("<ul id='#{id}' class='ipb_autocomplete' style='width: 250px;'></ul>");
		ipb.templates['autocomplete_item'] = new Template("<li id='#{id}' data-url='#{url}'><img src='#{img}' alt='' class='ipsUserPhoto ipsUserPhoto_mini' />&nbsp;&nbsp;#{itemvalue}</li>");
		ipb.templates['page_jump']		= new Template("<div id='#{id}_wrap' class='ipbmenu_content'><h3 class='bar'>Jump to page</h3><p class='ipsPad'><input type='text' class='input_text' id='#{id}_input' size='8' /> <input type='submit' value='Go' class='input_submit add_folder' id='#{id}_submit' /></p></div>");
		ipb.templates['global_notify'] 	= new Template("<div class='popupWrapper'><div class='popupInner'><div class='ipsPad'>#{message} #{close}</div></div></div>");
		
		
		ipb.templates['header_menu'] 	= new Template("<div id='#{id}' class='ipsHeaderMenu boxShadow'></div>");
		
		Loader.boot();
	//]]>
	</script>
	<script>
  var _gaq = _gaq || [];
  _gaq.push(
    ["orig._setAccount", "UA-1625146-1"],
    ["orig._setDomainName", "phpfreaks.com"],
    ["orig._trackPageview"]
  );
  (function() {
    var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;
    ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
    var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);
  })();

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-33447233-1', 'phpfreaks.com');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

  ga('create', 'UA-33447233-2', 'phpfreaks.com', {name: 'ua'});
  ga('ua.send', 'pageview');
</script></head>
	<body id='ipboard_body'>
		<p id='content_jump' class='hide'><a id='top'></a><a href='#j_content' title='Jump to content' accesskey='m'>Jump to content</a></p>
		<div id='ipbwrapper'>
			<!-- ::: TOP BAR: Sign in / register or user drop down and notification alerts ::: -->
			<div id='header_bar' class='clearfix'>
				<div class='main_width'>
					
					<div id='user_navigation' class='not_logged_in'>
							
							<ul class='ipsList_inline right'>
								<li>
									<span class='services'>
										
											<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=facebook'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/facebook.png' alt='Log in with Facebook' /></a>
										
										
											<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=twitter'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/twitter.png' alt='Log in with Twitter' /></a>
										
										
									</span>
									&nbsp;&nbsp;&nbsp;&nbsp;
									<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login' title='Sign In' id='sign_in'>Sign In</a>&nbsp;&nbsp;&nbsp;
								</li>
								<li>
									<a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=register" title='Create Account' id='register_link'>Create Account</a>
								</li>
							</ul>
						</div>
				</div>
			</div>
			<!-- ::: BRANDING STRIP: Logo and search box ::: -->
			<div id='branding'>
				<div class='main_width'>
					<div id='logo'>
						
							<a href='http://forums.phpfreaks.com' title='Go to community index' rel="home" accesskey='1'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/logo.png' alt='Logo' /></a>
						
					</div>
					
						<div id='search' class='right'>
	<form action="http://forums.phpfreaks.com/index.php?app=core&amp;module=search&amp;do=search&amp;fromMainBar=1" method="post" id='search-box' >
		<fieldset>
			<label for='main_search' class='hide'>Search</label>
			<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=search&amp;search_in=forums' title='Advanced Search' accesskey='4' rel="search" id='adv_search' class='right'>Advanced</a>
			<span id='search_wrap' class='right'>
				<input type='text' id='main_search' name='search_term' class='inactive' size='17' tabindex='100' />
				<span class='choice ipbmenu clickable' id='search_options' style='display: none'></span>
				<ul id='search_options_menucontent' class='ipbmenu_content ipsPad' style='display: none'>
					<li class='title'><strong>Search section:</strong></li>
					<li class='special'>
							<label for='s_topic' title='This topic'>
								<input type='radio' name='search_app' value="forums:topic:281815" class='input_radio' id='s_topic' checked="checked" /><strong>This topic</strong>
							</label>
						</li>
					
					
					<li class='app'><label for='s_forums' title='Forums'><input type='radio' name='search_app' class='input_radio' id='s_forums' value="forums"  />Forums</label></li>
					<li class='app'><label for='s_members' title='Members'><input type='radio' name='search_app' class='input_radio' id='s_members' value="members"  />Members</label></li>
					<li class='app'><label for='s_core' title='Help Files'><input type='radio' name='search_app' class='input_radio' id='s_core' value="core"  />Help Files</label></li>
					
						
					

						
					

						
					

						<li class='app'>
								<label for='s_ccs' title='Pages'>
									<input type='radio' name='search_app' class='input_radio' id='s_ccs' value="ccs"  />Pages
								</label>
							</li>
					

						
					
				</ul>
				<input type='submit' class='submit_input clickable' value='Search' />
			</span>
			
		</fieldset>
	</form>
</div>
					
				</div>
			</div>
			<!-- ::: APPLICATION TABS ::: -->
			<div id='primary_nav' class='clearfix'>
				<div class='main_width'>
					<ul class='ipsList_inline' id='community_app_menu'>
						
							<li class='right'>
								<a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=navigation&amp;inapp=forums" rel="quickNavigation" accesskey='9' id='quickNavLaunch' title='Open Quick Navigation'><span>&nbsp;</span></a>
							</li>
						
						<li id='nav_explore' class='right'>
							<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=search&amp;do=viewNewContent&amp;search_app=forums' accesskey='2'>View New Content</a>
						</li>
						
						
								
		
			
				
										
				

										
				

										
				

										
				
			
			
		

			
				
										
				

										
				

										
				

										
				
			
			<li id='nav_app_forums' class="left active"><a href='http://forums.phpfreaks.com/' title='Go to Forums' >Forums</a></li>
		

			
				
										
				

										
				

										
				

										
				
			
			<li id='nav_app_members' class="left "><a href='http://forums.phpfreaks.com/members/' title='Go to Members' >Members</a></li>
		

			
				
										
				

										
				

										
				

										
				
			
			
		
	
	
		
						<li id='nav_menu_3' class="left  ">
					<a id='nav_menu_3_trigger' href='http://www.phpfreaks.com/page/irc-live-chat' title='Come chat with us in IRC&#33;' >Chat </a>
					
					
				</li>
		

						
		

						<li id='nav_menu_5' class="left  ">
					<a id='nav_menu_5_trigger' href='http://www.phpfreaks.com/page/rules-and-terms-of-service' title='Site Rules and Terms of Service' >Rules and ToS </a>
					
					
				</li>
		

						
		
	
						
						<li id='nav_other_apps' style='display: none'>
							<a href='#' class='ipbmenu' id='more_apps'>More <img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/useropts_arrow.png' /></a>
						</li>
					</ul>
				</div>
			</div>	
			
			<!-- ::: MAIN CONTENT AREA ::: -->
			<div id='content' class='clearfix'>
				<!-- ::: NAVIGATION BREADCRUMBS ::: -->
				<div id='secondary_navigation' class='clearfix'>
						<ol class='breadcrumb top ipsList_inline left'>
														<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
									<a href='http://forums.phpfreaks.com/' itemprop="url">
										<span itemprop="title">PHP Freaks</span>
									</a>
								</li>
								
							
								<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
									<span class='nav_sep'>&rarr;</span>
									 <a href='http://forums.phpfreaks.com/forum/8-general-discussion/' title='Return to General Discussion' itemprop="url"><span itemprop="title">General Discussion</span></a>
								</li>
								
							

								<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
									<span class='nav_sep'>&rarr;</span>
									 <a href='http://forums.phpfreaks.com/forum/46-beta-test-your-stuff/' title='Return to Beta Test Your Stuff!' itemprop="url"><span itemprop="title">Beta Test Your Stuff!</span></a>
								</li>
								
							
						</ol>
					</div>
					<br />
				<noscript>
					<div class='message error'>
						<strong>Javascript Disabled Detected</strong>
						<p>You currently have javascript disabled. Several functions may not work. Please re-enable javascript to access full functionality.</p>
					</div>
					<br />
				</noscript>
				<!-- ::: CONTENT ::: -->
				
					<div class='ipsAd'><script type="text/javascript"><!--
google_ad_client = "ca-pub-8794381281316343";
/* PHP Freaks forums */
google_ad_slot = "9136654976";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
				
				

<script type="text/javascript">
//<![CDATA[
	ipb.topic.inSection    = 'topicview';
	ipb.topic.topic_id     = 281815;
	ipb.topic.forum_id     = 46;
	ipb.topic.redirectPost = 1;
	ipb.topic.start_id     = 0;
	ipb.topic.page_id      = 0;
	ipb.topic.topPid       = 0;
	ipb.topic.counts       = { postTotal: 15,
							  curStart:  ipb.topic.start_id,
							  perPage:   20 };
	//Search Setup
	ipb.vars['search_type']			= 'forum';
	ipb.vars['search_type_id']		= 46;
	ipb.vars['search_type_2']		= 'topic';
	ipb.vars['search_type_id_2']	= 281815;
	
	
	// Delete stuff set up
	ipb.topic.deleteUrls['hardDelete'] = new Template( ipb.vars['base_url'] + "app=forums&module=moderate&section=moderate&do=04&f=46&t=281815&page=&auth_key=880ea6a14ea49e853634fbdc5015a024&p=#{pid}" );
	ipb.topic.deleteUrls['softDelete'] = new Template( ipb.vars['base_url'] + "app=forums&module=moderate&section=moderate&do=postchoice&tact=sdelete&t=281815&f=46&auth_key=880ea6a14ea49e853634fbdc5015a024&selectedpids[#{pid}]=#{pid}&pid=#{pid}" );
	
	
	ipb.topic.modPerms	  = [];
	
	
	ipb.templates['post_moderation'] = new Template("<div id='comment_moderate_box' class='ipsFloatingAction' style='display: none'><span class='desc'>With <span id='comment_count'>#{count}</span> checked posts: </span><select id='tactInPopup' class='input_select'><option value='approve'>Approve</option><option value='delete'>Hide</option><option value='sundelete'>Unhide</option><option value='deletedo'>Delete</option><option value='merge'>Merge</option><option value='split'>Split</option><option value='move'>Move</option></select>&nbsp;&nbsp;<input type='button' class='input_submit' id='submitModAction' value='Go' /></div>");
	
//]]>
</script>





	<a href='http://forums.phpfreaks.com/user/92522-muddy-funster/' class='ipsUserPhotoLink left'>

<img src='http://forums.phpfreaks.com/uploads/profile/photo-92522.gif?_r=1354110798' alt='Photo' class='ipsUserPhoto ipsUserPhoto_medium' />

	</a>

<div itemscope itemtype="http://schema.org/Article" class='ipsBox_withphoto'>
	
	<h1 itemprop="name" class='ipsType_pagetitle'>Robot Detection Class - For Your Use</h1>
	<div class='desc lighter blend_links'>
		 Started by <span itemprop="creator"><a hovercard-ref="member" hovercard-id="92522" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/92522-muddy-funster/' title='View Profile'><span itemprop="name">Muddy_Funster</span></a></span>, <span itemprop="dateCreated" datetime="2013-09-03">Sep 03 2013 07:21 AM</span>
	</div>
	
		<a class='ipsTag' href="http://forums.phpfreaks.com/tags/forums/robots/" data-tooltip="Find more content tagged 'robots'"><span>robots</span></a> <a class='ipsTag' href="http://forums.phpfreaks.com/tags/forums/useragent/" data-tooltip="Find more content tagged 'useragent'"><span>useragent</span></a> <a class='ipsTag' href="http://forums.phpfreaks.com/tags/forums/%24_server%5Bhttp_user_agent%5D/" data-tooltip="Find more content tagged '$_server[http_user_agent]'"><span>$_server[http_user_agent]</span></a>
		<br />
	
	<meta itemprop="interactionCount" content="UserComments:15" />
</div>



<br />
<div class='topic_controls'>
	
	


	<ul class='topic_buttons'>
			<li class='important'>
					
							<span><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/lock.png' alt='This topic is locked' /> This topic is locked</span>
						
				</li>
			
			
		</ul>
</div>

<div class='maintitle clear clearfix'>
	<span class='ipsType_small'>
		14 replies to this topic
	</span>
	
</div>

<div class='topic hfeed clear clearfix'>
	
	

	<div class='ipsBox'>
		<div class='ipsBox_container' id='ips_Posts'>
			
				<!--post:1447959-->

<div class='post_block hentry clear clearfix  ' id='post_id_1447959'>
		<a id='entry1447959'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1447959' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1447959' rel='bookmark' title='Robot Detection Class - For Your Use: post #1'>
					
					#1
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #1' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="92522" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/92522-muddy-funster/' title='View Profile'><span itemprop="name">Muddy_Funster</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Muddy_Funster</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/92522-muddy-funster/" title="View Profile: Muddy_Funster" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-92522.gif?_r=1354110798' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,993 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T12:21:27+00:00">03 September 2013 - 07:21 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>I have knocked up this liitle class for retrieving a list of known robot user agents from the really rather helpfull people over at robotstxt.org.&nbsp; It pulls info from their site and builds an array that can be used to compare against the $_SERVER['HTTP_USER_AGENT'] varable.&nbsp; It has an exlusion array that can be altered to suit your personal prefferences and can be echoed directly to produce a valid JSON string that can be passed as is to a JQuery/Javascript using AJAX or anything of that like.&nbsp; I am putting no restrictions on this, but the people over at the robotstxt.org do request that you give them a mention for accessing their data, so I leave that up to anyone who may want to use it.</p>
<p>&nbsp;</p>
<p>Anyway, I found the need to be able to ensure bots didn't get free reign of the site I was making and thought that some other people out there may have a use for this.</p>
<p>&nbsp;</p>
<p>Here it is, enjoy (maybe) - anyway let me know what you guys think of it.&nbsp; (p.s. - I'm new to the whole DocBlock thing... <img src='http://forums.phpfreaks.com/public/style_emoticons/default/wink-02.gif' class='bbc_emoticon' alt=';)' /> )</p>
<pre  class="prettyprint">
&lt;?php
/**
&nbsp;* Generates a list of robot useragent deffinitions for use with
&nbsp;* $_SERVER&#91;'HTTP_USER_AGENT'] to identify robots
&nbsp;*
&nbsp;* This links into the robotstext.org site to access thier current
&nbsp;* robot list.&nbsp; It then produces an arrau of these useragents that
&nbsp;* can be used to check if a visitor is a robot or not. &nbsp;
&nbsp;* Call: $yourVar = new getRobots();
&nbsp;* $robotArray = $yourVar-&gt;robots;
&nbsp;*
&nbsp;* JSON output (if you want to pass to javascript): echo $yourVar;
&nbsp;*
&nbsp;*
&nbsp;* @param string $url Link to robotstxt.org server
&nbsp;* @param array $robots the array list of useragents
&nbsp;* @return __toString Returns JSON string of Object{"robots":array&#91;{"numericalKey":"useragentText"}]
&nbsp;*/
class getRobots{
&nbsp;&nbsp; &nbsp;public $url;
&nbsp;&nbsp; &nbsp;public $robots=array();

&nbsp;&nbsp; &nbsp;public function __construct()
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$url = "http&#58;//www.robotstxt.org/db/all.txt"{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fullList = file($url);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$exlusions = array //add lines here to include exclusions for any other agents in the list
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;(
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"no",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"Due to a deficiency in Java it's not currently possible to set the User-Agent.",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"???",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"no",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"yes"
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "&lt;pre&gt;";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach ($fullList as $line=&gt;$content){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$delimit = ":";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$split = explode($delimit, $content);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(trim($split&#91;'0']) == "robot-useragent"){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$conCount = count($split);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$agent = "";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for($i=0;$i&lt;$conCount;$i++){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if($i != 0){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$conPart = $i;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$agent .= " {$split&#91;$conPart]} ";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;array_push( $this-&gt;robots, trim($agent));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach($this-&gt;robots as $key=&gt;$agent){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(in_array($agent, $exlusions)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;unset($this-&gt;robots&#91;$key]);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;public function __toString(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$json = "{\"robots\":&#91;".json_encode($this-&gt;robots)."]}";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return $json;
&nbsp;&nbsp; &nbsp;}
}
?&gt;</pre>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1447959'>
				<ul class='ipsList_inline'>
					<li id="like_post_1447959" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1447959', { domLikeStripId: 'like_post_1447959', app: 'forums', type: 'pid', typeid: '1447959' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="92522">
	
	A simple password hash :<br /><p class='bbc_center'><pre class='prettyprint lang-auto linenums:0'>function makePass(&#036;word=&#39;&#39;){
  &#036;dbSalt = &#39;&#036;2a&#036;07&#036;&#39;.substr(hash(&#39;whirlpool&#39;,&#036;word),0,22);
  &#036;dbPass = crypt(&#036;word, &#036;dbSalt);
 return substr(&#036;dbPass,12);
}</pre></p><br /><br /><a href='http://muddy-dev.blogspot.com' class='bbc_url' title='External link' rel='external'>My SQL/PHP Blog</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1447959' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
			<script type="text/javascript"><!--
google_ad_client = "ca-pub-8794381281316343";
/* 468x60, created 10/2/10 - PHP Freaks Update */
google_ad_slot = "1560263540";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
		
<script type="text/javascript">
var pid = parseInt(1447959);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1447959') )
	{
		$('multiq_1447959').show();
	}
	
	if( $('toggle_post_1447959') )
	{
		$('toggle_post_1447959').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1447959] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1447963-->

<div class='post_block hentry clear clearfix  ' id='post_id_1447963'>
		<a id='entry1447963'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1447963' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1447963' rel='bookmark' title='Robot Detection Class - For Your Use: post #2'>
					
					#2
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #2' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="19189" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/19189-trq/' title='View Profile'><span itemprop="name">trq</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">trq</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/19189-trq/" title="View Profile: trq" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-thumb-19189.jpg?_r=1402508641' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:red;'>Administrators</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_admin.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			30,895 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Sydney, Australia.</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T13:12:17+00:00">03 September 2013 - 08:12 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p></p><p></p><blockquote  class="ipsBlockquote"><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">It has an exlusion array that can be altered to suit your personal prefferences</span></blockquote>
<p>&nbsp;</p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">No it can't. Not without editing your code.</span></p>
<p>&nbsp;</p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">Kinda misses the entire point of using a class.</span></p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1447963'>
				<ul class='ipsList_inline'>
					<li id="like_post_1447963" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1447963', { domLikeStripId: 'like_post_1447963', app: 'forums', type: 'pid', typeid: '1447963' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="19189">
	
	<p><a data-ipb='nomediaparse' class='bbc_url' href='http://thorpesystems.com'>http://thorpesystems.com</a> | <a data-ipb='nomediaparse' class='bbc_url' href='http://proemframework.org'>http://proemframework.org</a> | <a data-ipb='nomediaparse' class='bbc_url' href='http://github.com/trq'>http://github.com/trq</a><br />
<br />
<a data-ipb='nomediaparse' class='bbc_url' href='https://github.com/trq/smtpcatcher'>SmtpCatcher</a></strong> - A <strong class='bbc'>very</strong> simple mock sendmail useful for testing PHP mail scripts.
<br />
<a data-ipb='nomediaparse' class='bbc_url' href='http://opm.thorpesystems.com'>OPM</a></strong> - My Linux package manager.
</div>
				
				
				
			
				<ul id='postControlsNormal_1447963' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1447963);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1447963') )
	{
		$('multiq_1447963').show();
	}
	
	if( $('toggle_post_1447963') )
	{
		$('toggle_post_1447963').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1447963] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1447967-->

<div class='post_block hentry clear clearfix  ' id='post_id_1447967'>
		<a id='entry1447967'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1447967' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1447967' rel='bookmark' title='Robot Detection Class - For Your Use: post #3'>
					
					#3
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #3' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="92522" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/92522-muddy-funster/' title='View Profile'><span itemprop="name">Muddy_Funster</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Muddy_Funster</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/92522-muddy-funster/" title="View Profile: Muddy_Funster" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-92522.gif?_r=1354110798' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,993 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T13:33:49+00:00">03 September 2013 - 08:33 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<blockquote  class="ipsBlockquote" data-author="trq" data-cid="1447963" data-time="1378213937">
<div>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">No it can't. Not without editing your code.</span></p>
<p>&nbsp;</p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">Kinda misses the entire point of using a class.</span></p>
</div>
</blockquote>
<p>hmm...there's more than a little bit of truth there, let me revise.</p>
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1447967'>
				<ul class='ipsList_inline'>
					<li id="like_post_1447967" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1447967', { domLikeStripId: 'like_post_1447967', app: 'forums', type: 'pid', typeid: '1447967' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="92522">
	
	A simple password hash :<br /><p class='bbc_center'><pre class='prettyprint lang-auto linenums:0'>function makePass(&#036;word=&#39;&#39;){
  &#036;dbSalt = &#39;&#036;2a&#036;07&#036;&#39;.substr(hash(&#39;whirlpool&#39;,&#036;word),0,22);
  &#036;dbPass = crypt(&#036;word, &#036;dbSalt);
 return substr(&#036;dbPass,12);
}</pre></p><br /><br /><a href='http://muddy-dev.blogspot.com' class='bbc_url' title='External link' rel='external'>My SQL/PHP Blog</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1447967' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1447967);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1447967') )
	{
		$('multiq_1447967').show();
	}
	
	if( $('toggle_post_1447967') )
	{
		$('toggle_post_1447967').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1447967] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1447973-->

<div class='post_block hentry clear clearfix  ' id='post_id_1447973'>
		<a id='entry1447973'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1447973' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1447973' rel='bookmark' title='Robot Detection Class - For Your Use: post #4'>
					
					#4
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #4' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="92522" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/92522-muddy-funster/' title='View Profile'><span itemprop="name">Muddy_Funster</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Muddy_Funster</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/92522-muddy-funster/" title="View Profile: Muddy_Funster" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-92522.gif?_r=1354110798' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,993 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T14:17:05+00:00">03 September 2013 - 09:17 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>OK, here's the revision:</p>
<pre  class="prettyprint">
&lt;?php
/**
&nbsp;* Generates a list of robot useragent deffinitions for use with
&nbsp;* $_SERVER&#91;'HTTP_USER_AGENT'] to identify robots
&nbsp;*
&nbsp;* This links into the robotstext.org site to access thier current
&nbsp;* robot list.&nbsp; It then produces an arrau of these useragents that
&nbsp;* can be used to check if a visitor is a robot or not. &nbsp;
&nbsp;* Call: $yourVar = new getRobots();
&nbsp;* $robotArray = $yourVar-&gt;robots;
&nbsp;* $yourVar-&gt;exclude(mixed $mixed); - send values to be excluded.
&nbsp;* &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Accepts either an array of values or a single string vlaue
&nbsp;* JSON output (if you want to pass to javascript): echo $yourVar;
&nbsp;*
&nbsp;*
&nbsp;* @param array $robots the array list of useragents
&nbsp;* @return __toString Returns JSON string of Object{"robots":array&#91;{"numericalKey":"useragentText"}]
&nbsp;*/
&nbsp;&nbsp; &nbsp;class getRobots{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public $robots=array();
&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public function __construct($url = "http&#58;//www.robotstxt.org/db/all.txt"){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fullList = file($url);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$exlusions = array //default exclusion list
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;(
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"Due to a deficiency in Java it's not currently possible to set the User-Agent.",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"Due to a deficiency in Java it's not currently possible",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "&lt;pre&gt;";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach ($fullList as $line=&gt;$content){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$delimit = ":";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$split = explode($delimit, $content);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(trim($split&#91;'0']) == "robot-useragent"){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$conCount = count($split);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$agent = "";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;for($i=0;$i&lt;$conCount;$i++){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if($i != 0){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$conPart = $i;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$agent .= " {$split&#91;$conPart]} ";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;array_push( $this-&gt;robots, trim($agent));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;runExclusion($exlusions);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public function exclude($mixed){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;runExclusion($mixed);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;private function runExclusion($mixed){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(is_array($mixed)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach($this-&gt;robots as $key=&gt;$agent){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(in_array(trim($agent), $mixed)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;unset($this-&gt;robots&#91;$key]);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach($this-&gt;robots as $key=&gt;$agent){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(trim($agent) == trim($mixed)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;unset($this-&gt;robots&#91;$key]);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public function __toString(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$json = "{\"robots\":&#91;".json_encode($this-&gt;robots)."]}";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return $json;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
$robo = new getRobots();
$robo-&gt;exclude(array("",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"no",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"None",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"???",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"no",
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;"yes"
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;));
var_dump($robo);
?&gt;</pre>
<p>Any other/new comments?</p>
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1447973'>
				<ul class='ipsList_inline'>
					<li id="like_post_1447973" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1447973', { domLikeStripId: 'like_post_1447973', app: 'forums', type: 'pid', typeid: '1447973' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="92522">
	
	A simple password hash :<br /><p class='bbc_center'><pre class='prettyprint lang-auto linenums:0'>function makePass(&#036;word=&#39;&#39;){
  &#036;dbSalt = &#39;&#036;2a&#036;07&#036;&#39;.substr(hash(&#39;whirlpool&#39;,&#036;word),0,22);
  &#036;dbPass = crypt(&#036;word, &#036;dbSalt);
 return substr(&#036;dbPass,12);
}</pre></p><br /><br /><a href='http://muddy-dev.blogspot.com' class='bbc_url' title='External link' rel='external'>My SQL/PHP Blog</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1447973' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1447973);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1447973') )
	{
		$('multiq_1447973').show();
	}
	
	if( $('toggle_post_1447973') )
	{
		$('toggle_post_1447973').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1447973] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1447987-->

<div class='post_block hentry clear clearfix  ' id='post_id_1447987'>
		<a id='entry1447987'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1447987' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1447987' rel='bookmark' title='Robot Detection Class - For Your Use: post #5'>
					
					#5
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #5' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="32104" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/32104-psycho/' title='View Profile'><span itemprop="name">Psycho</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Psycho</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/32104-psycho/" title="View Profile: Psycho" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/398431b2f478a346a01365c3d505225a?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			10,708 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Canada</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T16:10:25+00:00">03 September 2013 - 11:10 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p><em>Please be aware that I provide criticism in a very direct manner. So, do not read any personal attacks or derogatory intentions in my reply below</em></p>
<p>&nbsp;</p>
<p>It is a waste to remotely access and process the file each time this script is run. The script should instead process the file into the final array and cache it locally. Then when the script is run, check to see if the remove file is newer than the last one processed. If not, use the cached file. If so, get the file and process it into a new cache file.</p>
<p>&nbsp;</p>
<p>I don't understand the "exclude" array. How is someone wanting to use this supposed to know the structure and content of the exclude array?</p>
<p>&nbsp;</p>
<p>I'm not understanding how the exclusions are done. The sample displayed doesn't make much sense to me. There is an if() statement based upon whether the input is an array or not. But, both the IF and ELSE statement blocks <u>do the exact same thing</u>! The ELSE block would fail for any other input - unless it is an object. I have to assume you didn't test this.</p>
<p>&nbsp;</p>
<p>For the exclusions you will also need to cache something to prevent reprocessing the data each time. I would suggest having the script accept exclusions (as it does now) and then creating a checksum (e.g. MD5 hash or something similar) of all the exclusions and storing that. Then, when the script runs, verify if the currently generated checksum matches the stored one. If so, no need to process anything. Else, need to process the new exclusions.</p>
<p>&nbsp;</p>
<p>I see some inefficiencies as well. For example, you explode a line first, then do a check to see if the first element equals "robot-useragent". If it does then there are several lines to act on that record. Why not just do a strpos() check before going to the trouble of exploding the line. Heck, I'd probably create a method to use with array_filter() to remove all lines that do not have "robot-useragent" and then you have an array with just the data that is needed.</p>
<p>&nbsp;</p>
<p>What is the purpose of the method exclude()? It only takes the input value and passes it to the method runExclusion(). So, why not make runExclusion() a public method and remove the exclusion() method.</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1447987'>
				<ul class='ipsList_inline'>
					<li id="like_post_1447987" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1447987', { domLikeStripId: 'like_post_1447987', app: 'forums', type: 'pid', typeid: '1447987' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="32104">
	
	<strong class='bbc'>The quality of the responses received is <span class='bbc_underline'>directly</span> proportional to the quality of the question asked.</strong><br />
<br />
I do not always test the code I provide, so there may be some syntax errors. In 99% of all cases I found the solution to your problem here: <a href='http://www.php.net' class='bbc_url' title='External link' rel='external'>http://www.php.net</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1447987' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1447987);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1447987') )
	{
		$('multiq_1447987').show();
	}
	
	if( $('toggle_post_1447987') )
	{
		$('toggle_post_1447987').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1447987] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1447990-->

<div class='post_block hentry clear clearfix  ' id='post_id_1447990'>
		<a id='entry1447990'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1447990' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1447990' rel='bookmark' title='Robot Detection Class - For Your Use: post #6'>
					
					#6
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #6' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="32104" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/32104-psycho/' title='View Profile'><span itemprop="name">Psycho</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Psycho</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/32104-psycho/" title="View Profile: Psycho" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/398431b2f478a346a01365c3d505225a?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			10,708 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Canada</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T16:32:41+00:00">03 September 2013 - 11:32 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>OK, a couple other things.</p>
<p>&nbsp;</p>
<p>From the manual</p>
<p></p><p></p><blockquote  class="ipsBlockquote"><strong>Note</strong>: <span> If you use <span><strong>array_push()</strong></span> to add one element to the array it's better to use <em>$array[] = </em> because in that way there is no overhead of calling a function. </span></blockquote>
<p>&nbsp;</p>
<p>In the __contruct method a &lt;pre&gt; tag is being echo'd</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1447990'>
				<ul class='ipsList_inline'>
					<li id="like_post_1447990" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1447990', { domLikeStripId: 'like_post_1447990', app: 'forums', type: 'pid', typeid: '1447990' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="32104">
	
	<strong class='bbc'>The quality of the responses received is <span class='bbc_underline'>directly</span> proportional to the quality of the question asked.</strong><br />
<br />
I do not always test the code I provide, so there may be some syntax errors. In 99% of all cases I found the solution to your problem here: <a href='http://www.php.net' class='bbc_url' title='External link' rel='external'>http://www.php.net</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1447990' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1447990);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1447990') )
	{
		$('multiq_1447990').show();
	}
	
	if( $('toggle_post_1447990') )
	{
		$('toggle_post_1447990').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1447990] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1448026-->

<div class='post_block hentry clear clearfix  ' id='post_id_1448026'>
		<a id='entry1448026'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1448026' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1448026' rel='bookmark' title='Robot Detection Class - For Your Use: post #7'>
					
					#7
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #7' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="92522" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/92522-muddy-funster/' title='View Profile'><span itemprop="name">Muddy_Funster</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Muddy_Funster</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/92522-muddy-funster/" title="View Profile: Muddy_Funster" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-92522.gif?_r=1354110798' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,993 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T20:13:23+00:00">03 September 2013 - 03:13 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>Hey Psycho, thanks for taking the time to pass that feedback.&nbsp; I appreciate it.&nbsp; I'll get on making some of the changes tomorrow morning once I'm back in the office.&nbsp; In answer to some of what you said -</p>
<p>&nbsp;</p>
<p>I wrote the class with the intention of passing a flag into session on pass, so the check would only be run once per agent / per visit.&nbsp; It was such a tiny difference calling against the remote site V's a local copy I decided just to access the remote each time, plus being totally honest, I wouldn't know how to make a check on the files (local V remote) any more efficient than to load up the remote file each time anyway.</p>
<p>&nbsp;</p>
<p>I will add some commenting to explain the exclude array better, I will confess I do tend to under comment code I write for myself.&nbsp; The else in the runExclusion is there so that it can take either an array or a single string as input.&nbsp; I did test this and it worked fine (at least I certainly thought that it did) though I will revisit it tomorrow and examine exactly what it's doing.</p>
<p>&nbsp;</p>
<p>I am very interested in your suggestion of using the checksum, although I have never done anything using that kind of check.&nbsp; I'll look into it, as soon as I get some time and see if I cant refactor the script to use it some time in the not to distant future.</p>
<p>&nbsp;</p>
<p>I went down the explode / rebuild route as when I first started it looked like I was simply dealing with a tab delimited list, that turned out not to be the case as it was simply using spaces and not tabs.&nbsp; I just instantly fell into the thought that "I want to split a string based on a delimiter" and wound up changing the code to fit the thought process rather than the other way round.&nbsp; I will have a shot at the strpos() idea as it does sound cleaner.&nbsp; I'll also look into apply the array_filter that you said.&nbsp;</p>
<p>&nbsp;</p>
<p>Using both the runExclusions and exclude methods instead of just using the exclude method.....to be honest looking at it now I don't even know what I was thinking, I'll get that sorted in the morning.</p>
<p>&nbsp;</p>
<p>The pre tag is just my carelessness,&nbsp; no excuses on that one, so it will go as soon as I get back in front of the code.&nbsp; And I'll swap out the array_push for the use of $array[] at the same time.</p>
<p>&nbsp;</p>
<p>Once again, thanks for taking the time to read over the code and comment on it.&nbsp; Without the crit it (and I) wouldn't get any better.</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1448026'>
				<ul class='ipsList_inline'>
					<li id="like_post_1448026" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1448026', { domLikeStripId: 'like_post_1448026', app: 'forums', type: 'pid', typeid: '1448026' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="92522">
	
	A simple password hash :<br /><p class='bbc_center'><pre class='prettyprint lang-auto linenums:0'>function makePass(&#036;word=&#39;&#39;){
  &#036;dbSalt = &#39;&#036;2a&#036;07&#036;&#39;.substr(hash(&#39;whirlpool&#39;,&#036;word),0,22);
  &#036;dbPass = crypt(&#036;word, &#036;dbSalt);
 return substr(&#036;dbPass,12);
}</pre></p><br /><br /><a href='http://muddy-dev.blogspot.com' class='bbc_url' title='External link' rel='external'>My SQL/PHP Blog</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1448026' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1448026);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1448026') )
	{
		$('multiq_1448026').show();
	}
	
	if( $('toggle_post_1448026') )
	{
		$('toggle_post_1448026').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1448026] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1448037-->

<div class='post_block hentry clear clearfix  ' id='post_id_1448037'>
		<a id='entry1448037'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1448037' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1448037' rel='bookmark' title='Robot Detection Class - For Your Use: post #8'>
					
					#8
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #8' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="124404" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/124404-kicken/' title='View Profile'><span itemprop="name">kicken</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">kicken</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Wiser? Not exactly.</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/124404-kicken/" title="View Profile: kicken" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-124404.png?_r=1359272020' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,638 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Bonita, FL</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T21:28:26+00:00">03 September 2013 - 04:28 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<blockquote  class="ipsBlockquote" data-author="Muddy_Funster" data-cid="1448026" data-time="1378239203"><p>I wrote the class with the intention of passing a flag into session on pass, so the check would only be run once per agent / per visit.&nbsp; It was such a tiny difference calling against the remote site V's a local copy I decided just to access the remote each time, plus being totally honest, I wouldn't know how to make a check on the files (local V remote) any more efficient than to load up the remote file each time anyway.</p></blockquote><br>Something like this would only download the file if it has changed, otherwise you get a not modified response:<br><pre  class="prettyprint lang-auto linenums:0">
function downloadRobots($local){
	if (file_exists($local)){
		$mtime = filemtime($local);
		$ctx = stream_context_create(array(
			'http' =&gt; array(
				'header' =&gt; "If-modified-since: ".gmdate(DATE_RFC1123, $mtime)
			)
		));
	}
	else {
		$ctx = stream_context_create();
	}

	$fp = fopen("http&#58;//www.robotstxt.org/db/all.txt", 'rb', false, $ctx);
	$output = stream_get_contents($fp);
	$meta = stream_get_meta_data($fp);

	if (strpos($meta&#91;'wrapper_data']&#91;0], ' 200 ') !== false){
		file_put_contents($local, $output);
	}

	fclose($fp);
}
</pre>You'd still send a request each time but the response would be smaller if no changes were made. You could expand it further to not send the request until the cache file is over x age.
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1448037'>
				<ul class='ipsList_inline'>
					<li id="like_post_1448037" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1448037', { domLikeStripId: 'like_post_1448037', app: 'forums', type: 'pid', typeid: '1448037' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="124404">
	
	<a href='http://cdrecyclingcenter.org/' class='bbc_url' title='External link' rel='external'>Recycle your old CD&#39;s</a>, don&#39;t trash them&#33;<br />Did I help you out?  Feeling generous? I accept tips via <a href='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=ZLE5XD6TL5F2N' class='bbc_url' title='External link' rel='external'>Paypal</a> or Bitcoin @ <strong class='bbc'>14mDxaob8Jgdg52scDbvf3uaeR61tB2yC7</strong>
</div>
				
				
				
			
				<ul id='postControlsNormal_1448037' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1448037);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1448037') )
	{
		$('multiq_1448037').show();
	}
	
	if( $('toggle_post_1448037') )
	{
		$('toggle_post_1448037').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1448037] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1448038-->

<div class='post_block hentry clear clearfix  ' id='post_id_1448038'>
		<a id='entry1448038'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1448038' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1448038' rel='bookmark' title='Robot Detection Class - For Your Use: post #9'>
					
					#9
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #9' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="32104" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/32104-psycho/' title='View Profile'><span itemprop="name">Psycho</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Psycho</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/32104-psycho/" title="View Profile: Psycho" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/398431b2f478a346a01365c3d505225a?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			10,708 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Canada</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T21:39:12+00:00">03 September 2013 - 04:39 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>I would never rely upon getting an external file because it just created a single point of failure. And, besides, how often is the file updated? Unless it is continually updated it is a waste to fetch the file and do all the processing. As I stated, I would do ALL the processing (external file and exclusions) and store the results. That way you only need to get the file if a newer one exists and you only need to reprocess if a new file exists or the exclusions have changed.</p>
<p>&nbsp;</p>
<blockquote  class="ipsBlockquote" data-author="Muddy_Funster" data-cid="1448026" data-time="1378239203">
<div>The else in the runExclusion is there so that it can take either an array or a single string as input.&nbsp; I did test this and it worked fine (at least I certainly thought that it did) though I will revisit it tomorrow and examine exactly what it's doing.</div>
</blockquote>
<p>&nbsp;</p>
<p>I don't see how that is possible. And, if it is, then you don't need an IF/ELSE since they do the exact same thing.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>This will return an array of JUST the lines that you need</p>
<p></p><pre  class="prettyprint linenums:0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private function getBotData()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $output = array();
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $inputArray = file($this-&gt;url);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach($inputArray as $line)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (strpos($line, 'robot-useragent')!==false)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $output&#91;] = $line;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return $output;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<blockquote  class="ipsBlockquote" data-author="Muddy_Funster" data-cid="1448026" data-time="1378239203">
<p>I am very interested in your suggestion of using the checksum, although I have never done anything using that kind of check.&nbsp; I'll look into it, as soon as I get some time and see if I cant refactor the script to use it some time in the not to distant future.</p>
</blockquote>
<p>&nbsp;</p>
<p>Use the process Kicken provided to determine if you need to get a new file. Then, change the class to operate as follows:</p>
<p>&nbsp;</p>
<p>The construct method should just set a URL property of the class an set defaults (e.g. $exclusions). Then have a method to set additional exclusions - but do not process them - just save to an array property. Then have your methods to return the complete list (e.g. __toString). When the user calls that method, check to see if the external file is newer than the cache (or if the cache does not exist). If so, get the new file. Then check if the exclusions are different than the ones in the cache file.</p>
<p>&nbsp;</p>
<p>If the cached file is good and no changes in exclusions, return the previously saved results.</p>
<p>If the cached file is good and there are changes to exclusions, use the cached file to process the new results and save them.</p>
<p>If the cached file is not good, download a new one and process it with the current exclusions and save the results.</p>
<p>&nbsp;</p>
<p>So, you should have an array of ALL the exclusions before ever trying to process the file. Take that array and create an MD5 hash and save that value. You could include it as part of the results file.</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1448038'>
				<ul class='ipsList_inline'>
					<li id="like_post_1448038" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1448038', { domLikeStripId: 'like_post_1448038', app: 'forums', type: 'pid', typeid: '1448038' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="32104">
	
	<strong class='bbc'>The quality of the responses received is <span class='bbc_underline'>directly</span> proportional to the quality of the question asked.</strong><br />
<br />
I do not always test the code I provide, so there may be some syntax errors. In 99% of all cases I found the solution to your problem here: <a href='http://www.php.net' class='bbc_url' title='External link' rel='external'>http://www.php.net</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1448038' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1448038);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1448038') )
	{
		$('multiq_1448038').show();
	}
	
	if( $('toggle_post_1448038') )
	{
		$('toggle_post_1448038').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1448038] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1448049-->

<div class='post_block hentry clear clearfix  ' id='post_id_1448049'>
		<a id='entry1448049'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1448049' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1448049' rel='bookmark' title='Robot Detection Class - For Your Use: post #10'>
					
					#10
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #10' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="92522" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/92522-muddy-funster/' title='View Profile'><span itemprop="name">Muddy_Funster</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Muddy_Funster</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/92522-muddy-funster/" title="View Profile: Muddy_Funster" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-92522.gif?_r=1354110798' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,993 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-03T23:16:04+00:00">03 September 2013 - 06:16 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>@ kicken - Thanks for that, that's given me some reading to do, I haven't even looked at stream_ at all, so that's going to take some looking into.</p>
<p>&nbsp;</p>
<p>@ psycho - I must have really screwed the code on the if/else - the IF was for if the $mixed was an array, it tries to match the array value from $mixed with the current iteration of $this-&gt;robots and drops it if it matches. The ELSE was to match the current iteration against the value of $mixed as a direct string comparison, allowing $robots-&gt;exclude($mixed) to be sent a single string or an array.&nbsp; I'll definitely get in about it tomorrow and post up something taking your suggestions on board.</p>
<p>&nbsp;</p>
<p>Thanks for the time and help guys, I appreciate it and will try to make the most of your comments.</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1448049'>
				<ul class='ipsList_inline'>
					<li id="like_post_1448049" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1448049', { domLikeStripId: 'like_post_1448049', app: 'forums', type: 'pid', typeid: '1448049' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="92522">
	
	A simple password hash :<br /><p class='bbc_center'><pre class='prettyprint lang-auto linenums:0'>function makePass(&#036;word=&#39;&#39;){
  &#036;dbSalt = &#39;&#036;2a&#036;07&#036;&#39;.substr(hash(&#39;whirlpool&#39;,&#036;word),0,22);
  &#036;dbPass = crypt(&#036;word, &#036;dbSalt);
 return substr(&#036;dbPass,12);
}</pre></p><br /><br /><a href='http://muddy-dev.blogspot.com' class='bbc_url' title='External link' rel='external'>My SQL/PHP Blog</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1448049' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1448049);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1448049') )
	{
		$('multiq_1448049').show();
	}
	
	if( $('toggle_post_1448049') )
	{
		$('toggle_post_1448049').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1448049] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1448102-->

<div class='post_block hentry clear clearfix  ' id='post_id_1448102'>
		<a id='entry1448102'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1448102' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1448102' rel='bookmark' title='Robot Detection Class - For Your Use: post #11'>
					
					#11
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #11' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="92522" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/92522-muddy-funster/' title='View Profile'><span itemprop="name">Muddy_Funster</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Muddy_Funster</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/92522-muddy-funster/" title="View Profile: Muddy_Funster" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-92522.gif?_r=1354110798' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,993 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-04T11:49:16+00:00">04 September 2013 - 06:49 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>OK, been having a go at making the changes suggested.&nbsp; Now I have to confess to getting a little bit lost in it all and I'm not sure if this is actually where I should have went with it, but here is what I am sitting with at the moment.&nbsp; It creates the files on first run, and doesn't seem to update them if the conditions all match, but I'm not exactly sure if I have it set up right to handle partial changes :</p>
<pre  class="prettyprint">
&lt;?php
/**
&nbsp;* Generates a list of robot useragent deffinitions for use with
&nbsp;* $_SERVER&#91;'HTTP_USER_AGENT'] to identify robots
&nbsp;*
&nbsp;* This links into the robotstext.org site to access thier current
&nbsp;* robot list.&nbsp; It then produces an arrau of these useragents that
&nbsp;* can be used to check if a visitor is a robot or not. &nbsp;
&nbsp;* Call: $yourVar = new getRobots();
&nbsp;* $robotArray = $yourVar-&gt;robots;
&nbsp;* $yourVar-&gt;exclude(mixed $mixed); - send values to be excluded.
&nbsp;* &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Accepts either an array of values or a single string vlaue
&nbsp;* JSON output (if you want to pass to javascript): echo $yourVar;
&nbsp;*
&nbsp;*
&nbsp;* @param array $robots the array list of useragents
&nbsp;* @return __toString Returns JSON string of Object{"robots":array&#91;{"numericalKey":"useragentText"}]
&nbsp;*/
&nbsp;&nbsp; &nbsp;class getRobots{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public $robots;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public $excludes;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;private $url;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;private $lfPath;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;private $lfFile;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;private $hashVals;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;private $output;
&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public function __construct(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;url = "http&#58;//www.robotstxt.org/db/all.txt";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;lfPath= substr(__FILE__,0,strripos(__FILE__,'\\')+1).'robots';
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;lfFile= '\\rbtList.txt';
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = "Due to a deficiency in Java it's not currently possible to set the User-Agent.";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = "Due to a deficiency in Java it's not currently possible";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!is_dir($this-&gt;lfPath)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!mkdir($this-&gt;lfPath)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "error creating directory! PHP must have write permissions for this folder -- $lfPath";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return false;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;exit;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public function setExclude($mixed){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(is_array($mixed)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach($mixed as $key=&gt;$toExclude){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = $toExclude;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = $mixed;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public function getBots(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkHashes();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;robots = file($this-&gt;lfPath."\\justBots.txt");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;private function checkFile(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (file_exists($this-&gt;lfPath.$this-&gt;lfFile)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$mtime = filemtime($this-&gt;lfPath.$this-&gt;lfFile);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ctx = stream_context_create(array(
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'http' =&gt; array(
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'header' =&gt; "If-modified-since: ".gmdate(DATE_RFC1123, $mtime)
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;)
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ctx = stream_context_create();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fp = fopen("http&#58;//www.robotstxt.org/db/all.txt", 'rb', false, $ctx);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;output = stream_get_contents($fp);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkBotList();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$meta = stream_get_meta_data($fp);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (strpos($meta&#91;'wrapper_data']&#91;0], ' 200 ') !== false){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;file_put_contents($this-&gt;lfPath.$this-&gt;lfFile, $this-&gt;output);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fclose($fp);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;private function checkBotList(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!empty($this-&gt;output)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$oEx = explode("\n", $this-&gt;output);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$oEx = file($this-&gt;lfPath."\\justBots.txt");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach ($oEx as $key=&gt;$line){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(strpos($line, 'robot-useragent:') !== FALSE){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$robots&#91;] = trim(substr($line, 16));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(isset($robots)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach($this-&gt;excludes as $exclude){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach(array_keys($robots, $exclude) as $key){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$drop&#91;] = $key;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach($drop AS $idx){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;unset($robots&#91;$idx]);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;array_unique($robots);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$bf = fopen($this-&gt;lfPath."\\justBots.txt",'w');
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$bots = implode("\n", $robots);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;hashVals&#91;1] = md5($bots);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fwrite($bf,$bots);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fclose($bf);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;private function checkHashes(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;hashVals&#91;0] = md5(implode("\n", $this-&gt;excludes));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!file_exists($this-&gt;lfPath.'\\mdHashFile.txt')){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkFile();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$hf = fopen($this-&gt;lfPath."\\mdHashFile.txt",'w');
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$hashOut = implode("\n", $this-&gt;hashVals);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fwrite($hf, $hashOut);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$hfVals = file($this-&gt;lfPath."\\mdHashFile.txt");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if($hfVals&#91;0] != $this-&gt;hashVals&#91;0]){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkBotList();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;robots = file($this-&gt;lfPath."\\justBots.txt");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public function __toString(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$json = "{\"robots\":&#91;".json_encode($this-&gt;robots)."]}";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return $json;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
$robo = new getRobots();
$robo-&gt;setExclude(array("", "no", "yes","null"));
$robo-&gt;getBots();
var_dump($robo-&gt;robots);

?&gt;</pre>
<p>Oh - and I haven't updated the DocBloc yet...going to wait untill it's accurate.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>What do you guys think?&nbsp; How wide of the mark am I?</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1448102'>
				<ul class='ipsList_inline'>
					<li id="like_post_1448102" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1448102', { domLikeStripId: 'like_post_1448102', app: 'forums', type: 'pid', typeid: '1448102' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="92522">
	
	A simple password hash :<br /><p class='bbc_center'><pre class='prettyprint lang-auto linenums:0'>function makePass(&#036;word=&#39;&#39;){
  &#036;dbSalt = &#39;&#036;2a&#036;07&#036;&#39;.substr(hash(&#39;whirlpool&#39;,&#036;word),0,22);
  &#036;dbPass = crypt(&#036;word, &#036;dbSalt);
 return substr(&#036;dbPass,12);
}</pre></p><br /><br /><a href='http://muddy-dev.blogspot.com' class='bbc_url' title='External link' rel='external'>My SQL/PHP Blog</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1448102' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1448102);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1448102') )
	{
		$('multiq_1448102').show();
	}
	
	if( $('toggle_post_1448102') )
	{
		$('toggle_post_1448102').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1448102] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1448142-->

<div class='post_block hentry clear clearfix  ' id='post_id_1448142'>
		<a id='entry1448142'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1448142' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1448142' rel='bookmark' title='Robot Detection Class - For Your Use: post #12'>
					
					#12
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #12' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="32104" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/32104-psycho/' title='View Profile'><span itemprop="name">Psycho</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Psycho</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/32104-psycho/" title="View Profile: Psycho" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/398431b2f478a346a01365c3d505225a?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			10,708 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Canada</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-04T16:45:07+00:00">04 September 2013 - 11:45 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>Well, I'm not really going to read through all of it - as I'm not planning to use it. But, here is something that stuck out to me</p>
<p>&nbsp;</p>
<p></p><pre  class="prettyprint linenums:0">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; public function setExclude($mixed){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(is_array($mixed)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach($mixed as $key=&gt;$toExclude){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = $toExclude;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = $mixed;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}</pre>
<p>&nbsp;</p>
<p>First off, it doesn't take into consideration the possibility of duplicate values. That's easy enough to handle. But, it's also more complicated than it needs to be. No need to do a foreach() loop to add the values when you can simply use array_merge(). Also, you can typecast the input as an array so there would be no need for the if/else condition.</p>
<p>&nbsp;</p>
<p></p><pre  class="prettyprint linenums:0">function setExclude($exclusions)
{
&nbsp;&nbsp;&nbsp; //Cast the value as an array
&nbsp;&nbsp;&nbsp; $exclusions = (array) $exclusions;
&nbsp;&nbsp;&nbsp; //Append to current list of exclusions
&nbsp;&nbsp;&nbsp; $this-&gt;excludes = array_merge($this-&gt;excludes, $exclusions);
&nbsp;&nbsp;&nbsp; //Remove duplicates
&nbsp;&nbsp;&nbsp; $this-&gt;excludes = array_unique($this-&gt;excludes);
&nbsp;&nbsp;&nbsp; return $this-&gt;excludes;
}</pre>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1448142'>
				<ul class='ipsList_inline'>
					<li id="like_post_1448142" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1448142', { domLikeStripId: 'like_post_1448142', app: 'forums', type: 'pid', typeid: '1448142' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="32104">
	
	<strong class='bbc'>The quality of the responses received is <span class='bbc_underline'>directly</span> proportional to the quality of the question asked.</strong><br />
<br />
I do not always test the code I provide, so there may be some syntax errors. In 99% of all cases I found the solution to your problem here: <a href='http://www.php.net' class='bbc_url' title='External link' rel='external'>http://www.php.net</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1448142' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1448142);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1448142') )
	{
		$('multiq_1448142').show();
	}
	
	if( $('toggle_post_1448142') )
	{
		$('toggle_post_1448142').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1448142] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1448194-->

<div class='post_block hentry clear clearfix  ' id='post_id_1448194'>
		<a id='entry1448194'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1448194' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1448194' rel='bookmark' title='Robot Detection Class - For Your Use: post #13'>
					
					#13
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #13' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="92522" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/92522-muddy-funster/' title='View Profile'><span itemprop="name">Muddy_Funster</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Muddy_Funster</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/92522-muddy-funster/" title="View Profile: Muddy_Funster" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-92522.gif?_r=1354110798' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,993 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-04T23:40:19+00:00">04 September 2013 - 06:40 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>OK guys, I think I have this nailed now.&nbsp; I have changed the setExclude as you suggested Psycho, and have tested it in all ways I expect to use it.&nbsp; I totally re-wrote the cached file checking because the first time round I made a total mess of it.&nbsp; Anyway I have updated the DocBlock as best as I can work it out (shouldn't be too far off) and what started as the idea of having a check to feed only SEO content to bots and to only render forms to actual users has, with a not insignificant amount of help, turned into this :</p>
<pre  class="prettyprint">
/**
&nbsp;* Generates a list of robot useragent deffinitions for use with
&nbsp;* $_SERVER&#91;'HTTP_USER_AGENT'] to identify robots
&nbsp;*
&nbsp;* A Huge Thank You to Psycho, Kicken and Thorpe @ forums.phpfreaks.com
&nbsp;* for their help and advice.
&nbsp;*
&nbsp;* This links into the robotstext.org site to access thier current
&nbsp;* robot list.&nbsp; It then produces an array of these useragents that
&nbsp;* can be used to check if a visitor is a robot or not. &nbsp;
&nbsp;* Call: $yourVar = new getRobots();
&nbsp;* Setter : $yourVar-&gt;setExclude(mixed $mixed)
&nbsp;* Getter : $robotArray = $yourVar-&gt;getBots;
&nbsp;* $yourVar-&gt;exclude(mixed $mixed); - send values to be excluded.
&nbsp;* &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Accepts either an array of values or a single string vlaue
&nbsp;* JSON output (if you want to pass to javascript): echo $yourVar;
&nbsp;*
&nbsp;*
&nbsp;* @param array $robots the array list of useragents
&nbsp;* @param array $excludes array of exlusions from the bot list
&nbsp;* @param string $url static url value for linking to the
&nbsp;* @param string $lfPath path to generate subfolder to store cache files in
&nbsp;* @param string $masterFile path to master cache file of robotstxt.org data
&nbsp;* @param string $botFile path to cached bot file for qicker repeat array building
&nbsp;* @param string $mdCheckFile path to md5Checksum cache to establish if cached bot file can be used
&nbsp;* @param array $hashVals generated md5 values from current call
&nbsp;* @param array $hashFileVals values from md5 checksum cache file use for comparison
&nbsp;* @param string $output contents retrieved from robotstxt.org site
&nbsp;* @return array getBots() returns array of robot user aganents
&nbsp;* @return string __toString() Returns JSON string of Object{"robots":array&#91;{"numericalKey":"useragentText"}]
&nbsp;*/
class getRobots{
&nbsp;&nbsp; &nbsp;public $robots;
&nbsp;&nbsp; &nbsp;public $excludes;
&nbsp;&nbsp; &nbsp;private $url;
&nbsp;&nbsp; &nbsp;private $lfPath;
&nbsp;&nbsp; &nbsp;private $masterFile;
&nbsp;&nbsp; &nbsp;private $botFile;
&nbsp;&nbsp; &nbsp;private $mdCheckFile;
&nbsp;&nbsp; &nbsp;private $hashVals;
&nbsp;&nbsp; &nbsp;private $hashFileVals;
&nbsp;&nbsp; &nbsp;private $output;

&nbsp;&nbsp; &nbsp;public function __construct(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;url = "http&#58;//www.robotstxt.org/db/all.txt";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;lfPath= substr(__FILE__,0,strripos(__FILE__,'\\')+1).'robots';
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;masterFile= $this-&gt;lfPath.'\\rbtList.txt';
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;botFile = $this-&gt;lfPath."\\allBots.txt";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;mdCheckFile = $this-&gt;lfPath."\\mdHashFile.txt";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = "Due to a deficiency in Java it's not currently possible to set the User-Agent.";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = "Due to a deficiency in Java it's not currently possible";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!is_dir($this-&gt;lfPath)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!mkdir($this-&gt;lfPath)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "error creating directory! PHP must have write permissions for this folder -- $lfPath";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return false;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;exit;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;public function setExclude($mixed){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!is_array($mixed)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$mixed = (array)$mixed;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;$this-&gt;excludes = array_merge($this-&gt;excludes, $mixed);
&nbsp;&nbsp; &nbsp;$this-&gt;excludes = array_unique($this-&gt;excludes);
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;public function getBots(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkFile();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkBotList();
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;private function checkFile(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (file_exists($this-&gt;masterFile)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$mtime = filemtime($this-&gt;masterFile);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ctx = stream_context_create(array(
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'http' =&gt; array(
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'header' =&gt; "If-modified-since: ".gmdate(DATE_RFC1123, $mtime)
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;)
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ctx = stream_context_create();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fp = fopen("http&#58;//www.robotstxt.org/db/all.txt", 'rb', false, $ctx);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;output = stream_get_contents($fp);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkBotList();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$meta = stream_get_meta_data($fp);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (strpos($meta&#91;'wrapper_data']&#91;0], ' 200 ') !== false){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;file_put_contents($this-&gt;masterFile, $this-&gt;output);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fclose($fp);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;private function checkBotList(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$robots = array();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;hashVals&#91;0] = md5(implode("|",$this-&gt;excludes));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!file_exists($this-&gt;mdCheckFile)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fileVals = explode("\n",$this-&gt;output);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;hashFileVals = file($this-&gt;mdCheckFile);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(trim($this-&gt;hashVals&#91;0]) == trim($this-&gt;hashFileVals&#91;0])){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;robots = file($this-&gt;botFile);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fileVals = file($this-&gt;masterFile);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(isset($fileVals)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach ($fileVals as $line=&gt;$text){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (strpos($text, "robot-useragent:") !== FALSE){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$robots&#91;] = trim(substr($text,16));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$filterRobs = array_diff($robots, $this-&gt;excludes);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$filterRobs = array_unique($filterRobs);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;robots = $filterRobs;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$botOut = implode("\n", $filterRobs);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$botHandle = fopen($this-&gt;botFile, 'w');
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fwrite($botHandle, $botOut);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fclose($botHandle);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;hashVals&#91;1] = md5(implode("|", $filterRobs));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$difCheck = array_diff($this-&gt;hashVals, (array)$this-&gt;hashFileVals);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(count($difCheck) &gt;= 1){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$writeback = implode("\n", $this-&gt;hashVals);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$mdHandle = fopen($this-&gt;mdCheckFile, 'w');
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fwrite($mdHandle, $writeback);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;public function __toString(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$json = "{\"robots\":&#91;".json_encode($this-&gt;robots)."]}";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return $json;
&nbsp;&nbsp; &nbsp;}
}</pre>
<p>If there is anything else let me know, and thanks again guys.</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1448194'>
				<ul class='ipsList_inline'>
					<li id="like_post_1448194" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1448194', { domLikeStripId: 'like_post_1448194', app: 'forums', type: 'pid', typeid: '1448194' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="92522">
	
	A simple password hash :<br /><p class='bbc_center'><pre class='prettyprint lang-auto linenums:0'>function makePass(&#036;word=&#39;&#39;){
  &#036;dbSalt = &#39;&#036;2a&#036;07&#036;&#39;.substr(hash(&#39;whirlpool&#39;,&#036;word),0,22);
  &#036;dbPass = crypt(&#036;word, &#036;dbSalt);
 return substr(&#036;dbPass,12);
}</pre></p><br /><br /><a href='http://muddy-dev.blogspot.com' class='bbc_url' title='External link' rel='external'>My SQL/PHP Blog</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1448194' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1448194);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1448194') )
	{
		$('multiq_1448194').show();
	}
	
	if( $('toggle_post_1448194') )
	{
		$('toggle_post_1448194').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1448194] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1448210-->

<div class='post_block hentry clear clearfix  ' id='post_id_1448210'>
		<a id='entry1448210'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1448210' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1448210' rel='bookmark' title='Robot Detection Class - For Your Use: post #14'>
					
					#14
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #14' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="124404" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/124404-kicken/' title='View Profile'><span itemprop="name">kicken</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">kicken</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Wiser? Not exactly.</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/124404-kicken/" title="View Profile: kicken" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-124404.png?_r=1359272020' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,638 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Bonita, FL</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-05T02:26:05+00:00">04 September 2013 - 09:26 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<blockquote  class="ipsBlockquote" data-author="Muddy_Funster" data-cid="1448194" data-time="1378338019"><p></p><pre  class="prettyprint lang-auto linenums:0">&nbsp;&nbsp; &nbsp;public function __toString(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$json = "{\"robots\":&#91;".json_encode($this-&gt;robots)."]}";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return $json;
&nbsp;&nbsp; &nbsp;}
</pre><p></p></blockquote>Rather than do part of the json manually, and part with json_encode, just do the whole thing with json_encode:<br><pre  class="prettyprint lang-auto linenums:0">public function __toString(){
    return json_encode(array('robots' =&gt; $this-&gt;robots));
}
</pre><br><blockquote  class="ipsBlockquote" data-author="Muddy_Funster" data-cid="1448194" data-time="1378338019"><p></p><pre  class="prettyprint lang-auto linenums:0">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fp = fopen("http&#58;//www.robotstxt.org/db/all.txt", 'rb', false, $ctx);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;output = stream_get_contents($fp);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkBotList();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$meta = stream_get_meta_data($fp);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (strpos($meta&#91;'wrapper_data']&#91;0], ' 200 ') !== false){
</pre><p></p></blockquote><br>There isn't really a need for the call to checkBotList there. You call it from getRobots() right after you call checkFile so it'd just get done twice. Also you still have the hard-coded url in the fopen call rather than calling $this-&gt;url like I think you intended.<br>&nbsp;<br><blockquote  class="ipsBlockquote" data-author="Muddy_Funster" data-cid="1448194" data-time="1378338019"><p></p><pre  class="prettyprint lang-auto linenums:0">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!is_dir($this-&gt;lfPath)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!mkdir($this-&gt;lfPath)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "error creating directory! PHP must have write permissions for this folder -- $lfPath";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return false;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;exit;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
</pre><p></p></blockquote><br>Constructor functions do not return a value, nor should they cause a script to suddenly exit. Throw an exception to indicate that error that way the user can choose to ignore (or do something about) it if they wish.<br><pre  class="prettyprint lang-auto linenums:0">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!is_dir($this-&gt;lfPath) &amp;&amp; !mkdir($this-&gt;lfPath)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;throw new RuntimeException("error creating directory! PHP must have write permissions for this folder -- $lfPath");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
</pre><blockquote  class="ipsBlockquote" data-author="Muddy_Funster" data-cid="1448194" data-time="1378338019"><p></p><pre  class="prettyprint lang-auto linenums:0">&nbsp;&nbsp; &nbsp;public function setExclude($mixed){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!is_array($mixed)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$mixed = (array)$mixed;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
</pre><p></p></blockquote><br>There is no need for the is_array check there. If $mixed is an array, then typecasting it to an array does nothing and $mixed is unchanged. If $mixed is a string, typecasting to an array is the same as doing <code class='prettyprint'>$mixed=array($mixed);</code>.<br>&nbsp;<br><blockquote  class="ipsBlockquote" data-author="Muddy_Funster" data-cid="1448194" data-time="1378338019"><p></p><pre  class="prettyprint lang-auto linenums:0">    public function getBots(){
</pre><p></p></blockquote><br>Having a method named <code class='prettyprint'>get*</code> generally implies that it returns something. I'd suggest either you have that method return a value, or rename it, perhaps to <code class='prettyprint'>updateBots</code>.<br><br><br>Lastly, in your docblock you might include an example or two of how exactly this class is supposed to be used.
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1448210'>
				<ul class='ipsList_inline'>
					<li id="like_post_1448210" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1448210', { domLikeStripId: 'like_post_1448210', app: 'forums', type: 'pid', typeid: '1448210' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="124404">
	
	<a href='http://cdrecyclingcenter.org/' class='bbc_url' title='External link' rel='external'>Recycle your old CD&#39;s</a>, don&#39;t trash them&#33;<br />Did I help you out?  Feeling generous? I accept tips via <a href='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=ZLE5XD6TL5F2N' class='bbc_url' title='External link' rel='external'>Paypal</a> or Bitcoin @ <strong class='bbc'>14mDxaob8Jgdg52scDbvf3uaeR61tB2yC7</strong>
</div>
				
				
				
			
				<ul id='postControlsNormal_1448210' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1448210);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1448210') )
	{
		$('multiq_1448210').show();
	}
	
	if( $('toggle_post_1448210') )
	{
		$('toggle_post_1448210').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1448210] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1448245-->

<div class='post_block hentry clear clearfix  ' id='post_id_1448245'>
		<a id='entry1448245'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1448245' href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/#entry1448245' rel='bookmark' title='Robot Detection Class - For Your Use: post #15'>
					
					#15
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Robot Detection Class - For Your Use: post #15' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="92522" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/92522-muddy-funster/' title='View Profile'><span itemprop="name">Muddy_Funster</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Muddy_Funster</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/92522-muddy-funster/" title="View Profile: Muddy_Funster" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-92522.gif?_r=1354110798' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,993 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-09-05T08:19:08+00:00">05 September 2013 - 03:19 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>Thanks again kicken, I have made the changes you suggested. Also, I have added a sort on the $this-&gt;exceptions array as it was failing the hash check if the same values were entered as the previous run but in a different order.&nbsp;</p>
<pre  class="prettyprint">
/**
&nbsp;* Generates a list of robot useragent deffinitions for use with
&nbsp;* $_SERVER&#91;'HTTP_USER_AGENT'] to identify robots
&nbsp;*
&nbsp;* A Huge Thank You to Psycho, Kicken and Thorpe @ forums.phpfreaks.com
&nbsp;* for their help and advice.
&nbsp;*
&nbsp;* This links into the robotstext.org site to access thier current
&nbsp;* robot list.&nbsp; It then produces an array of these useragents that
&nbsp;* can be used to check if a visitor is a robot or not. &nbsp;
&nbsp;* Call: $yourVar = new getRobots();
&nbsp;* Setter : $yourVar-&gt;setExclude(mixed $mixed)
&nbsp;* Getter : $robotArray = $yourVar-&gt;makeBots;
&nbsp;* $yourVar-&gt;exclude(mixed $mixed); - send values to be excluded.
&nbsp;* &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Accepts either an array of values or a single string vlaue
&nbsp;* JSON output (if you want to pass to javascript): echo $yourVar;
&nbsp;*
&nbsp;* --------------------------------------------------------------
&nbsp;* @example 1 : PHP BOT Check
&nbsp;*
&nbsp;* $bots = new getRobots;
&nbsp;* $bots-&gt;setExclude(array("", "none", "no", "yes"));
&nbsp;* $bots-&gt;makeBotList();
&nbsp;* $botArray = $bots-&gt;robots;
&nbsp;*
&nbsp;* if(!in_array($_SERVER('HTTP_USER_AGENT'), $botArray){
&nbsp;*&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;import_request_variables("g", "user_"); //example of something to do
&nbsp;* &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;...
&nbsp;* &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;...
&nbsp;* }
&nbsp;* else{
&nbsp;*&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;echo "Bot Safe Site Visited"; //example of something to do
&nbsp;* &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;...
&nbsp;* &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;...
&nbsp;* }
&nbsp;* -------------------------------------------------------------
&nbsp;* @example 2 : output to JSON
&nbsp;*
&nbsp;* $bots = new getRobots;
&nbsp;* $bots-&gt;setExclude("");
&nbsp;* $bots-&gt;setExclude("none");
&nbsp;* $bots-&gt;setExclude("???");
&nbsp;* $bots-&gt;setExclude("no");
&nbsp;* $bots-&gt;setExclude("yes");
&nbsp;* $bots-&gt;makeBotList();
&nbsp;*
&nbsp;* header("Content-type: application/json");
&nbsp;* echo $bots;
&nbsp;* exit;
&nbsp;* -----------------------------------------------------------
&nbsp;*
&nbsp;* @param array $robots the array list of useragents
&nbsp;* @param array $excludes array of exlusions from the bot list
&nbsp;* @param string $url static url value for linking to the
&nbsp;* @param string $lfPath path to generate subfolder to store cache files in
&nbsp;* @param string $masterFile path to master cache file of robotstxt.org data
&nbsp;* @param string $botFile path to cached bot file for qicker repeat array building
&nbsp;* @param string $mdCheckFile path to md5Checksum cache to establish if cached bot file can be used
&nbsp;* @param array $hashVals generated md5 values from current call
&nbsp;* @param array $hashFileVals values from md5 checksum cache file use for comparison
&nbsp;* @param string $output contents retrieved from robotstxt.org site
&nbsp;* @return array getBots() returns array of robot user aganents
&nbsp;* @return string __toString() Returns JSON string of Object{"robots":array&#91;{"numericalKey":"useragentText"}]
&nbsp;*/
class getRobots{
&nbsp;&nbsp; &nbsp;public $robots;
&nbsp;&nbsp; &nbsp;public $excludes;
&nbsp;&nbsp; &nbsp;private $url;
&nbsp;&nbsp; &nbsp;private $lfPath;
&nbsp;&nbsp; &nbsp;private $masterFile;
&nbsp;&nbsp; &nbsp;private $botFile;
&nbsp;&nbsp; &nbsp;private $mdCheckFile;
&nbsp;&nbsp; &nbsp;private $hashVals;
&nbsp;&nbsp; &nbsp;private $hashFileVals;
&nbsp;&nbsp; &nbsp;private $output;

&nbsp;&nbsp; &nbsp;public function __construct(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;url = "http&#58;//www.robotstxt.org/db/all.txt";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;lfPath= substr(__FILE__,0,strripos(__FILE__,'\\')+1).'robots';
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;masterFile= $this-&gt;lfPath.'\\rbtList.txt';
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;botFile = $this-&gt;lfPath."\\allBots.txt";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;mdCheckFile = $this-&gt;lfPath."\\mdHashFile.txt";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = "Due to a deficiency in Java it's not currently possible to set the User-Agent.";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;excludes&#91;] = "Due to a deficiency in Java it's not currently possible";
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!is_dir($this-&gt;lfPath)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!mkdir($this-&gt;lfPath)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;throw new RuntimeException("error creating directory! PHP must have write permissions for this folder -- $lfPath");
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;public function setExclude($mixed){
&nbsp;&nbsp; &nbsp;$mixed = (array)$mixed;
&nbsp;&nbsp; &nbsp;$this-&gt;excludes = array_merge($this-&gt;excludes, $mixed);
&nbsp;&nbsp; &nbsp;$this-&gt;excludes = array_unique($this-&gt;excludes);
&nbsp;&nbsp; &nbsp;sort($this-&gt;excludes);
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;public function makeBots(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkFile();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;checkBotList();
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;private function checkFile(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (file_exists($this-&gt;masterFile)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$mtime = filemtime($this-&gt;masterFile);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ctx = stream_context_create(array(
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'http' =&gt; array(
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;'header' =&gt; "If-modified-since: ".gmdate(DATE_RFC1123, $mtime)
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;)
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else {
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$ctx = stream_context_create();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fp = fopen($this-&gt;url, 'rb', false, $ctx);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;output = stream_get_contents($fp);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$meta = stream_get_meta_data($fp);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (strpos($meta&#91;'wrapper_data']&#91;0], ' 200 ') !== false){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;file_put_contents($this-&gt;masterFile, $this-&gt;output);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fclose($fp);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;}&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;private function checkBotList(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$robots = array();
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;hashVals&#91;0] = md5(implode("|",$this-&gt;excludes));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(!file_exists($this-&gt;mdCheckFile)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fileVals = explode("\n",$this-&gt;output);&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;hashFileVals = file($this-&gt;mdCheckFile);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(trim($this-&gt;hashVals&#91;0]) == trim($this-&gt;hashFileVals&#91;0])){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;robots = file($this-&gt;botFile);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;else{
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$fileVals = file($this-&gt;masterFile);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(isset($fileVals)){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;foreach ($fileVals as $line=&gt;$text){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (strpos($text, "robot-useragent:") !== FALSE){&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$robots&#91;] = trim(substr($text,16));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$filterRobs = array_diff($robots, $this-&gt;excludes);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$filterRobs = array_unique($filterRobs);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;robots = $filterRobs;
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$botOut = implode("\n", $filterRobs);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$botHandle = fopen($this-&gt;botFile, 'w');
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fwrite($botHandle, $botOut);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fclose($botHandle);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$this-&gt;hashVals&#91;1] = md5(implode("|", $filterRobs));
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$difCheck = array_diff($this-&gt;hashVals, (array)$this-&gt;hashFileVals);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if(count($difCheck) &gt;= 1){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$writeback = implode("\n", $this-&gt;hashVals);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$mdHandle = fopen($this-&gt;mdCheckFile, 'w');
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;fwrite($mdHandle, $writeback);
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;}
&nbsp;&nbsp; &nbsp;public function __toString(){
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return json_encode(array('robots' =&gt; $this-&gt;robots));
&nbsp;&nbsp; &nbsp;}
}
</pre>
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1448245'>
				<ul class='ipsList_inline'>
					<li id="like_post_1448245" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1448245', { domLikeStripId: 'like_post_1448245', app: 'forums', type: 'pid', typeid: '1448245' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="92522">
	
	A simple password hash :<br /><p class='bbc_center'><pre class='prettyprint lang-auto linenums:0'>function makePass(&#036;word=&#39;&#39;){
  &#036;dbSalt = &#39;&#036;2a&#036;07&#036;&#39;.substr(hash(&#39;whirlpool&#39;,&#036;word),0,22);
  &#036;dbPass = crypt(&#036;word, &#036;dbSalt);
 return substr(&#036;dbPass,12);
}</pre></p><br /><br /><a href='http://muddy-dev.blogspot.com' class='bbc_url' title='External link' rel='external'>My SQL/PHP Blog</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1448245' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1448245);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1448245') )
	{
		$('multiq_1448245').show();
	}
	
	if( $('toggle_post_1448245') )
	{
		$('toggle_post_1448245').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1448245] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			
		</div>
	</div>

<hr />
<div class='topic_controls clear ipsPad_top_bottom_half'>
	
	<div class='ipsPad_top_slimmer right'>
		
		<a href='http://forums.phpfreaks.com/forum/46-beta-test-your-stuff/' class="ipsType_small desc">Back to Beta Test Your Stuff!</a>
		
			&middot; <a href='http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/?view=getnextunread' rel="nofollow" class="ipsType_small desc">Next Unread Topic &rarr;</a>
		
	</div>
</div>

<!-- Close topic -->
</div>
<!-- BOTTOM BUTTONS -->

	<br />
	<div class='clear clearfix left'>
		

	<ul class='topic_share left shareButtons ipsList_inline'>
	
		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=twitter;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MTgxNS1yb2JvdC1kZXRlY3Rpb24tY2xhc3MtZm9yLXlvdXItdXNlLw,,;Um9ib3QgRGV0ZWN0aW9uIENsYXNzIC0gRm9yIFlvdXIgVXNl" rel="nofollow" target="_blank" title="Share this link via Twitter" class='_slink' id='slink_twitter'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/twitter.png" /></a></li>
	

		
				<li class='fbLike'><div class="fb-like" data-href="http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/" data-send="false" data-layout="button_count" data-width="150" data-show-faces="false" data-action="like"></div><div id="fb-root"></div></li>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=224092164386333";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
			
	

		
				<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
	
		{lang: 'en-GB'}
	
</script>
<li><div class='googlePlusOne'><g:plusone count="false" size="small"></g:plusone></div></li>
			
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=digg;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MTgxNS1yb2JvdC1kZXRlY3Rpb24tY2xhc3MtZm9yLXlvdXItdXNlLw,,;Um9ib3QgRGV0ZWN0aW9uIENsYXNzIC0gRm9yIFlvdXIgVXNl" rel="nofollow" target="_blank" title="Share this link via Digg" class='_slink' id='slink_digg'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/digg.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=delicious;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MTgxNS1yb2JvdC1kZXRlY3Rpb24tY2xhc3MtZm9yLXlvdXItdXNlLw,,;Um9ib3QgRGV0ZWN0aW9uIENsYXNzIC0gRm9yIFlvdXIgVXNl" rel="nofollow" target="_blank" title="Share this link via Del.icio.us" class='_slink' id='slink_delicious'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/delicious.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=reddit;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MTgxNS1yb2JvdC1kZXRlY3Rpb24tY2xhc3MtZm9yLXlvdXItdXNlLw,,;Um9ib3QgRGV0ZWN0aW9uIENsYXNzIC0gRm9yIFlvdXIgVXNl" rel="nofollow" target="_blank" title="Share this link via Reddit" class='_slink' id='slink_reddit'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/reddit.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=stumble;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MTgxNS1yb2JvdC1kZXRlY3Rpb24tY2xhc3MtZm9yLXlvdXItdXNlLw,,;Um9ib3QgRGV0ZWN0aW9uIENsYXNzIC0gRm9yIFlvdXIgVXNl" rel="nofollow" target="_blank" title="Share this link via StumbleUpon" class='_slink' id='slink_stumble'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/stumble.png" /></a></li>
	

		
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=print;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MTgxNS1yb2JvdC1kZXRlY3Rpb24tY2xhc3MtZm9yLXlvdXItdXNlLw,,;Um9ib3QgRGV0ZWN0aW9uIENsYXNzIC0gRm9yIFlvdXIgVXNl" rel="nofollow" target="_blank" title="Print" class='_slink' id='slink_print'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/print.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=download;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MTgxNS1yb2JvdC1kZXRlY3Rpb24tY2xhc3MtZm9yLXlvdXItdXNlLw,,;Um9ib3QgRGV0ZWN0aW9uIENsYXNzIC0gRm9yIFlvdXIgVXNl" rel="nofollow" target="_blank" title="Download" class='_slink' id='slink_download'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/download.png" /></a></li>
	
	</ul>
	<script type="text/javascript">
		ipb.sharelinks.url   = "http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/";
		ipb.sharelinks.title = "Robot Detection Class - For Your Use";
		ipb.sharelinks.bname = "PHP Freaks";
	</script>

	</div>
	<br />

<!-- SAME TAGGED -->

<!-- ACTIVE USERS -->
<div id='topic_stats' class='statistics clear clearfix'>
		<div id='topic_active_users' class='active_users'>
			<h4 class='statistics_head'>0 user(s) are reading this topic</h4>
			<p class='statistics_brief desc'>0 members, 0 guests, 0 anonymous users</p>
			
		</div>
	</div>


	<script type="text/javascript" src="http://forums.phpfreaks.com/public/js/3rd_party/prettify/prettify.js"></script>
	<script type='text/javascript' src='http://forums.phpfreaks.com/public/js/3rd_party/prettify/lang-sql.js'></script>
	<!-- By default we load generic code, php, css, sql and xml/html; load others here if desired -->
	<script type="text/javascript">
	//<![CDATA[
		Event.observe( window, 'load', function(e){ prettyPrint() });
	//]]>
	</script>
<div id='multiQuoteInsert' style='display: none;' class='ipsFloatingAction'>
	<span class='ipsButton no_width' id='mqbutton'>Reply to quoted posts</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#' id='multiQuoteClear' class='ipsType_smaller desc' title='Clear the posts you have selected with MultiQuote'>Clear</a> &nbsp;&nbsp;&nbsp;
</div>
<form id="modform" method="post" action="http://forums.phpfreaks.com/index.php?">
	<input type="hidden" name="app" value="forums" />
	<input type="hidden" name="module" value="moderate" />
	<input type="hidden" name="section" value="moderate" />
	<input type="hidden" name="do" value="postchoice" />
	<input type="hidden" name="f" value="46" />
	<input type="hidden" name="t" value="281815" />
	<input type="hidden" name="auth_key" value="880ea6a14ea49e853634fbdc5015a024" />
	<input type="hidden" name="st" value="" />
	<input type="hidden" name="page" value="" />
	<input type="hidden" value="" name="selectedpidsJS" id='selectedpidsJS' />
	<input type="hidden" name="tact" id="tact" value="" />
</form>
				
					<div class='ipsAd'><div style="float:left;clear:both;padding:16px;">

    <a href="http://alphabit.com" title="Cheap Linux VPS from $5">Cheap Linux VPS from $5</a><br />
    <span style="color:black"> SSD Storage, 30 day Guarantee<br />
   1 TB of BW, 100% Network Uptime</span><br />
    <a href="http://alphabit.com"  title="Cheap Linux VPS from $5"><span style="color:green">AlphaBit.com</span></a>

</div>
<br /><br />


<script type="text/javascript"><!--
google_ad_client = "ca-pub-8794381281316343";
/* PHP Freaks forums */
google_ad_slot = "9136654976";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
				
				<ol class='breadcrumb bottom ipsList_inline left clearfix clear'>
											<li><a href='http://forums.phpfreaks.com/'>PHP Freaks</a></li>
							
						
							<li><span class='nav_sep'>&rarr;</span> <a href='http://forums.phpfreaks.com/forum/8-general-discussion/' title='Return to General Discussion'><span>General Discussion</span></a></li>
							
						

							<li><span class='nav_sep'>&rarr;</span> <a href='http://forums.phpfreaks.com/forum/46-beta-test-your-stuff/' title='Return to Beta Test Your Stuff!'><span>Beta Test Your Stuff!</span></a></li>
							
						

					
					<li class='right ipsType_smaller'>
						<a rel="nofollow" href='http://forums.phpfreaks.com/privacypolicy/'>Privacy Policy</a>
					</li>
					
					<li class='right ipsType_smaller'>
							<a href='http://www.phpfreaks.com/page/rules-and-terms-of-service'>Forum Rules &amp; Terms of Service</a> &middot; 
						</li>	
				</ol>
			</div>
			<!-- ::: FOOTER (Change skin, language, mark as read, etc) ::: -->
			<div id='footer_utilities' class='main_width clearfix clear'>
				<a rel="nofollow" href='#top' id='backtotop' title='Go to top'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/top.png' alt='' /></a>
				<ul class='ipsList_inline left'>
					<li>
						<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/feed.png' alt='RSS Feed' id='rss_feed' class='clickable' />
					</li>
					
							
								<li>
									<a rel="nofollow" id='new_skin' href='#'>Change Theme</a>			
									<ul id='new_skin_menucontent' class='ipbmenu_content with_checks' style='display: none'>
										
											<li >
												<a href='#' data-clicklaunch='changeSkin' data-skinid='2'>IP.Board Mobile</a>
											</li>
										

											<li class='selected'>
												<a href='#' data-clicklaunch='changeSkin' data-skinid='5'>PHP Freaks</a>
											</li>
										
									</ul>
								</li>
							
					
						<li>
							<a rel="nofollow" href='#' id='new_language'>PHP Freaks - English (USA)</a>							
							<ul id='new_language_menucontent' class='ipbmenu_content with_checks' style='display: none'>
								
									<li >
										<a href="?k=880ea6a14ea49e853634fbdc5015a024&amp;setlanguage=1&amp;cal_id=&amp;langid=1">English (USA)</a>
									</li>
								

									<li class='selected'>
										<a href="?k=880ea6a14ea49e853634fbdc5015a024&amp;setlanguage=1&amp;cal_id=&amp;langid=2">PHP Freaks - English (USA)</a>
									</li>
								
							</ul>
						</li>
					
					
						<li>
							<a rel="nofollow" id='mark_all_read' href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=all&amp;k=880ea6a14ea49e853634fbdc5015a024" title='Mark all as read'>Mark Community Read</a>
							<ul id='mark_all_read_menucontent' class='ipbmenu_content' style='display: none'>
								
									<li>
										
									</li>
								

									<li>
										<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=app&amp;markApp=forums&amp;k=880ea6a14ea49e853634fbdc5015a024">Forums</a>
									</li>
								

									<li>
										<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=app&amp;markApp=members&amp;k=880ea6a14ea49e853634fbdc5015a024">Members</a>
									</li>
								

									<li>
										<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=app&amp;markApp=ccs&amp;k=880ea6a14ea49e853634fbdc5015a024">Pages</a>
									</li>
								
								<li>
									<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=all&amp;k=880ea6a14ea49e853634fbdc5015a024"><strong>Mark all as read</strong></a>
								</li>
							</ul>
						</li>
					
					<li>
						<a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=help" title='View help' rel="help" accesskey='6'>Help</a>
					</li>				
				</ul>
				<!-- Copyright Information -->
        				  <p id='copyright'>
        				  	<a href='http://www.invisionpower.com/apps/board/' title='Community Forum Software by Invision Power Services'>Community Forum Software by IP.Board</a><br />Licensed to: Philip Lawrence, PHP Freaks</p>
		<!-- / Copyright -->
			</div>
			
			
			
				<script type='text/javascript' src='http://forums.phpfreaks.com/public/js/3rd_party/lightbox.js'></script>
<script type='text/javascript'>
//<![CDATA[
	// Lightbox Configuration
	LightboxOptions = Object.extend({
	    fileLoadingImage:        'http://forums.phpfreaks.com/public/style_images/phpfreaks/lightbox/loading.gif',
	    fileBottomNavCloseImage: 'http://forums.phpfreaks.com/public/style_images/phpfreaks/lightbox/closelabel.gif',
	    overlayOpacity: 0.8,   // controls transparency of shadow overlay
	    animate: true,         // toggles resizing animations
	    resizeSpeed: 10,        // controls the speed of the image resizing animations (1=slowest and 10=fastest)
	    borderSize: 10,         //if you adjust the padding in the CSS, you will need to update this variable
		// When grouping images this is used to write: Image # of #.
		// Change it for non-english localization
		labelImage: "Image",
		labelOf: "of"
	}, window.LightboxOptions || {});
/* Watch for a lightbox image and set up our downloadbutton watcher */
document.observe('click', (function(event){
    var target = event.findElement('a[rel*="lightbox"]') || event.findElement('area[rel*="lightbox"]') || event.findElement('span[rel*="lightbox"]');
    if (target) {
        event.stop();
        gbl_addDownloadButton();
    }
}).bind(this));
var _to    = '';
var _last  = '';
function gbl_addDownloadButton()
{
	if ( typeof( ipsLightbox.lightboxImage ) != 'undefined' && ipsLightbox.lightboxImage.src )
	{
		if ( _last != ipsLightbox.lightboxImage.src )
		{
			if ( ! $('gbl_d') )
			{
				$('bottomNav').insert( { top: "<div id='gbl_d' style='text-align:right;padding-bottom:4px;'></div>" } );
			}
			
			$('gbl_d').update( "<a href='"+ ipsLightbox.lightboxImage.src + "' target='_blank'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/lightbox/download-icon.png' /></a>" );
			
			_last = ipsLightbox.lightboxImage.src;
		}
	}
	
	/* Check for init and then keep checking for new image */
	_to = setTimeout( "gbl_addDownloadButton()", 1000 );
}
//]]>
</script>
			
			<div id='inline_login_form' style="display:none">
		<form action="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;do=process" method="post" id='login'>
				<input type='hidden' name='auth_key' value='880ea6a14ea49e853634fbdc5015a024' />
				<input type="hidden" name="referer" value="http://forums.phpfreaks.com/topic/281815-robot-detection-class-for-your-use/" />
				<h3>Sign In</h3>
				<div class='ipsBox_notice'>
						<ul class='ipsList_inline'>
							
								<li><a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=facebook" class='ipsButton_secondary'><img src="http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/facebook.png" alt="Facebook" /> &nbsp; Use Facebook</a></li>
							
							
								<li><a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=twitter" class='ipsButton_secondary'><img src="http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/twitter.png" alt="Twitter" /> &nbsp; Use Twitter</a></li>
							
							
							
						</ul>
					</div>
				<br />
				<div class='ipsForm ipsForm_horizontal'>
					<fieldset>
						<ul>
							<li class='ipsField'>
								<div class='ipsField_content'>
									Need an account? <a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=register" title='Register now!'>Register now!</a>
								</div>
							</li>
							<li class='ipsField ipsField_primary'>
								<label for='ips_username' class='ipsField_title'>Username</label>
								<div class='ipsField_content'>
									<input id='ips_username' type='text' class='input_text' name='ips_username' size='30' tabindex='0' />
								</div>
							</li>
							<li class='ipsField ipsField_primary'>
								<label for='ips_password' class='ipsField_title'>Password</label>
								<div class='ipsField_content'>
									<input id='ips_password' type='password' class='input_text' name='ips_password' size='30' tabindex='0' /><br />
									<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=lostpass' title='Retrieve password'>I've forgotten my password</a>
								</div>
							</li>
							<li class='ipsField ipsField_checkbox'>
								<input type='checkbox' id='inline_remember' checked='checked' name='rememberMe' value='1' class='input_check' tabindex='0' />
								<div class='ipsField_content'>
									<label for='inline_remember'>
										<strong>Remember me</strong><br />
										<span class='desc lighter'>This is not recommended for shared computers</span>
									</label>
								</div>
							</li>
							
								<li class='ipsField ipsField_checkbox'>
									<input type='checkbox' id='inline_invisible' name='anonymous' value='1' class='input_check' tabindex='0' />
									<div class='ipsField_content'>
										<label for='inline_invisible'>
											<strong>Sign in anonymously</strong><br />
											<span class='desc lighter'>Don't add me to the active users list</span>
										</label>
									</div>
								</li>
							
							
							<li class='ipsPad_top ipsForm_center desc ipsType_smaller'>
								<a rel="nofollow" href='http://forums.phpfreaks.com/privacypolicy/'>Privacy Policy</a>
							</li>
							
						</ul>
					</fieldset>
					
					<div class='ipsForm_submit ipsForm_center'>
						<input type='submit' class='ipsButton' value='Sign In' tabindex='0' />
					</div>
				</div>
			</form>
	</div>
		</div>
		
		
		<script type='text/javascript'>
			if( $('primary_nav') ){	ipb.global.activateMainMenu(); }
		</script>
			
<script>
$$('#copyright > a')[0].setAttribute('href', 'https://www.invisionpower.com/clients/index.php?app=nexus&module=promotion&section=referral&id=61219&direct=aHR0cHM6Ly93d3cuaW52aXNpb25wb3dlci5jb20vY2xpZW50cy9pbmRleC5waHA%2F');
</script>
</body>
</html>
