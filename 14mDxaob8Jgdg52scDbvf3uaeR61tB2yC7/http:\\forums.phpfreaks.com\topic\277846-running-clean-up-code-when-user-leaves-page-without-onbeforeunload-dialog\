http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/
HTTP/1.1 200 OK
Server: nginx
Date: Wed, 23 Jul 2014 03:21:58 GMT
Content-Type: text/html;charset=UTF-8
Connection: close
Set-Cookie: session_id=ebfc7b18392576ce31a32b0e36c0d4db; path=/; domain=.phpfreaks.com; httponly
Set-Cookie: modpids=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.phpfreaks.com
Cache-Control: no-cache, must-revalidate, max-age=0
Expires: Tue, 22 Jul 2014 03:21:58 GMT
Pragma: no-cache
Set-Cookie: itemMarking_forums_items=eJyrVjIyN7cwMVOyMjQxMDOwMDU3tKgFXDAziQTB; expires=Thu, 23-Jul-2015 03:21:58 GMT; path=/; domain=.phpfreaks.com
Content-Encoding: gzip
Vary: Accept-Encoding

<!DOCTYPE html>
	<html lang="en"  xmlns:fb="http://www.facebook.com/2008/fbml">
	<head>
		<meta charset="UTF-8" />
		<title>running clean up code when user leaves page without onbeforeunload dialog. - J&#097;v&#097;script Help - PHP Freaks</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<link rel="shortcut icon" href='http://forums.phpfreaks.com/favicon.ico' />
		<link rel="image_src" href='http://forums.phpfreaks.com/public/style_images/phpfreaks/meta_image.png' />
		<script type='text/javascript'>
		//<![CDATA[
			jsDebug			= 0; /* Must come before JS includes */
			DISABLE_AJAX	= parseInt(0); /* Disables ajax requests where text is sent to the DB; helpful for charset issues */
			inACP			= false;
			var isRTL		= false;
			var rtlIe		= '';
			var rtlFull		= '';
		//]]>
		</script>
		
	
				
	

				
	

				
	

				
	

				
	
	
		<link rel="stylesheet" type="text/css" media='screen,print' href="http://forums.phpfreaks.com/public/min/index.php?ipbv=e08d28e6ababab965cd84e26ca7636f8&amp;f=public/style_css/css_5/calendar_select.css,public/style_css/css_5/ipb_common.css,public/style_css/css_5/ipb_styles.css,public/style_css/css_5/phpfreaks.css,public/style_css/prettify.css" />
	

<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" title='Main' media="screen" href="http://forums.phpfreaks.com/public/style_css/css_5/ipb_ie.css" />
<![endif]-->
<!--[if lte IE 8]>
	<style type='text/css'>
		.ipb_table { table-layout: fixed; }
		.ipsLayout_content { width: 99.5%; }
	</style>
<![endif]-->

	<style type='text/css'>
		img.bbc_img { max-width: 100% !important; }
	</style>

		<meta property="og:title" content="running clean up code when user leaves page without onbeforeunload dialog. - J&#097;v&#097;script Help"/>
		<meta property="og:site_name" content="PHP Freaks"/>
		<meta property="og:type" content="article" />
		
	
		
		
			<meta property="og:updated_time" content="1406085718" />
		
		
		
		
	

		
		
			<meta name="keywords" content="running,clean,code,user,leaves,page,without,onbeforeunload,dialog,have,data,entry,form,required,fields,want,disable,ability" />
		
		
		
		
	

		
		
			<meta name="description" content="running clean up code when user leaves page without onbeforeunload dialog. - posted in J&#097;v&#097;script Help: I have a data entry form that has required fields. &nbsp;I want to disable the ability for a user to browse away from this page until either these required fields are filled out, or they choose to cancel.
&nbsp;
I found this on the net :
&nbsp;
window.onbeforeunload&nbsp;=&nbsp;function()&nbsp;{
&nbsp; &nbsp;return&nbsp;You have unsaved changes!;}
&nbsp;
But it is not going to..." />
		
		
		
			<meta property="og:description" content="running clean up code when user leaves page without onbeforeunload dialog. - posted in J&#097;v&#097;script Help: I have a data entry form that has required fields. &nbsp;I want to disable the ability for a user to browse away from this page until either these required fields are filled out, or they choose to cancel.
&nbsp;
I found this on the net :
&nbsp;
window.onbeforeunload&nbsp;=&nbsp;function()&nbsp;{
&nbsp; &nbsp;return&nbsp;You have unsaved changes!;}
&nbsp;
But it is not going to..." />
		
		
	

		
		
			<meta name="identifier-url" content="http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/" />
		
		
			<meta property="og:url" content="http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/" />
		
		
		
	

<meta property="og:image" content="http://forums.phpfreaks.com/public/style_images/phpfreaks/meta_image.png"/>
		
		
		<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js'></script>
		<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/scriptaculous/1.9/scriptaculous.js?load=effects,dragdrop,builder'></script>
	<script type='text/javascript' src='http://forums.phpfreaks.com/public/min/index.php?ipbv=e08d28e6ababab965cd84e26ca7636f8&amp;charset=UTF-8&amp;f=public/js/ipb.js,cache/lang_cache/2/ipb.lang.js,public/js/ips.hovercard.js,public/js/ips.quickpm.js,public/js/ips.sharelinks.js,public/js/ips.topic.js,public/js/ips.like.js' charset='UTF-8'></script>


	
		
			
			
			
			
				<link id="ipsCanonical" rel="canonical" href="http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/" />
			
		

			
			
			
			
				<link rel='stylesheet' type='text/css' title='Main' media='print' href='http://forums.phpfreaks.com/public/style_css/css_5/ipb_print.css' />
			
		

			
			
			
			
				<link rel='up' href='http://forums.phpfreaks.com/forum/18-jvscript-help/' />
			
		

			
			
			
			
				<link rel='author' href='http://forums.phpfreaks.com/user/125511-njdubois/' />
			
		
	

		
			
			
				<link rel="alternate" type="application/rss+xml" title="PHP Freaks News & Announcements" href="http://forums.phpfreaks.com/rss/forums/1-php-freaks-news-announcements/" />
			
			
			
		

			
			
				<link rel="alternate" type="application/rss+xml" title="PHP Freaks: PHP Help" href="http://forums.phpfreaks.com/rss/forums/2-php-freaks-php-help/" />
			
			
			
		
	

	


	



		
		<script type='text/javascript'>
	//<![CDATA[
		/* ---- URLs ---- */
		ipb.vars['base_url'] 			= 'http://forums.phpfreaks.com/index.php?s=ebfc7b18392576ce31a32b0e36c0d4db&';
		ipb.vars['board_url']			= 'http://forums.phpfreaks.com';
		ipb.vars['img_url'] 			= "http://forums.phpfreaks.com/public/style_images/phpfreaks";
		ipb.vars['loading_img'] 		= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/loading.gif';
		ipb.vars['active_app']			= 'forums';
		ipb.vars['upload_url']			= 'http://forums.phpfreaks.com/uploads';
		/* ---- Member ---- */
		ipb.vars['member_id']			= parseInt( 0 );
		ipb.vars['is_supmod']			= parseInt( 0 );
		ipb.vars['is_admin']			= parseInt( 0 );
		ipb.vars['secure_hash'] 		= '880ea6a14ea49e853634fbdc5015a024';
		ipb.vars['session_id']			= 'ebfc7b18392576ce31a32b0e36c0d4db';
		ipb.vars['twitter_id']			= 0;
		ipb.vars['fb_uid']				= 0;
		ipb.vars['auto_dst']			= parseInt( 0 );
		ipb.vars['dst_in_use']			= parseInt(  );
		ipb.vars['is_touch']			= false;
		ipb.vars['member_group']		= {"g_mem_info":"1"}
		/* ---- cookies ----- */
		ipb.vars['cookie_id'] 			= '';
		ipb.vars['cookie_domain'] 		= '.phpfreaks.com';
		ipb.vars['cookie_path']			= '/';
		/* ---- Rate imgs ---- */
		ipb.vars['rate_img_on']			= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/star.png';
		ipb.vars['rate_img_off']		= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/star_off.png';
		ipb.vars['rate_img_rated']		= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/star_rated.png';
		/* ---- Uploads ---- */
		ipb.vars['swfupload_swf']		= 'http://forums.phpfreaks.com/public/js/3rd_party/swfupload/swfupload.swf';
		ipb.vars['swfupload_enabled']	= true;
		ipb.vars['use_swf_upload']		= ( '' == 'flash' ) ? true : false;
		ipb.vars['swfupload_debug']		= false;
		/* ---- other ---- */
		ipb.vars['highlight_color']     = "#ade57a";
		ipb.vars['charset']				= "UTF-8";
		ipb.vars['time_offset']			= "-5";
		ipb.vars['hour_format']			= "12";
		ipb.vars['seo_enabled']			= 1;
		
		ipb.vars['seo_params']			= {"start":"-","end":"\/","varBlock":"?","varPage":"page-","varSep":"&","varJoin":"="};
		
		/* Templates/Language */
		ipb.templates['inlineMsg']		= "";
		ipb.templates['ajax_loading'] 	= "<div id='ajax_loading'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/ajax_loading.gif' alt='" + ipb.lang['loading'] + "' /></div>";
		ipb.templates['close_popup']	= "<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/close_popup.png' alt='x' />";
		ipb.templates['rss_shell']		= new Template("<ul id='rss_menu' class='ipbmenu_content'>#{items}</ul>");
		ipb.templates['rss_item']		= new Template("<li><a href='#{url}' title='#{title}'>#{title}</a></li>");
		
		ipb.templates['autocomplete_wrap'] = new Template("<ul id='#{id}' class='ipb_autocomplete' style='width: 250px;'></ul>");
		ipb.templates['autocomplete_item'] = new Template("<li id='#{id}' data-url='#{url}'><img src='#{img}' alt='' class='ipsUserPhoto ipsUserPhoto_mini' />&nbsp;&nbsp;#{itemvalue}</li>");
		ipb.templates['page_jump']		= new Template("<div id='#{id}_wrap' class='ipbmenu_content'><h3 class='bar'>Jump to page</h3><p class='ipsPad'><input type='text' class='input_text' id='#{id}_input' size='8' /> <input type='submit' value='Go' class='input_submit add_folder' id='#{id}_submit' /></p></div>");
		ipb.templates['global_notify'] 	= new Template("<div class='popupWrapper'><div class='popupInner'><div class='ipsPad'>#{message} #{close}</div></div></div>");
		
		
		ipb.templates['header_menu'] 	= new Template("<div id='#{id}' class='ipsHeaderMenu boxShadow'></div>");
		
		Loader.boot();
	//]]>
	</script>
	<script>
  var _gaq = _gaq || [];
  _gaq.push(
    ["orig._setAccount", "UA-1625146-1"],
    ["orig._setDomainName", "phpfreaks.com"],
    ["orig._trackPageview"]
  );
  (function() {
    var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;
    ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
    var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);
  })();

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-33447233-1', 'phpfreaks.com');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

  ga('create', 'UA-33447233-2', 'phpfreaks.com', {name: 'ua'});
  ga('ua.send', 'pageview');
</script></head>
	<body id='ipboard_body'>
		<p id='content_jump' class='hide'><a id='top'></a><a href='#j_content' title='Jump to content' accesskey='m'>Jump to content</a></p>
		<div id='ipbwrapper'>
			<!-- ::: TOP BAR: Sign in / register or user drop down and notification alerts ::: -->
			<div id='header_bar' class='clearfix'>
				<div class='main_width'>
					
					<div id='user_navigation' class='not_logged_in'>
							
							<ul class='ipsList_inline right'>
								<li>
									<span class='services'>
										
											<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=facebook'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/facebook.png' alt='Log in with Facebook' /></a>
										
										
											<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=twitter'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/twitter.png' alt='Log in with Twitter' /></a>
										
										
									</span>
									&nbsp;&nbsp;&nbsp;&nbsp;
									<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login' title='Sign In' id='sign_in'>Sign In</a>&nbsp;&nbsp;&nbsp;
								</li>
								<li>
									<a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=register" title='Create Account' id='register_link'>Create Account</a>
								</li>
							</ul>
						</div>
				</div>
			</div>
			<!-- ::: BRANDING STRIP: Logo and search box ::: -->
			<div id='branding'>
				<div class='main_width'>
					<div id='logo'>
						
							<a href='http://forums.phpfreaks.com' title='Go to community index' rel="home" accesskey='1'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/logo.png' alt='Logo' /></a>
						
					</div>
					
						<div id='search' class='right'>
	<form action="http://forums.phpfreaks.com/index.php?app=core&amp;module=search&amp;do=search&amp;fromMainBar=1" method="post" id='search-box' >
		<fieldset>
			<label for='main_search' class='hide'>Search</label>
			<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=search&amp;search_in=forums' title='Advanced Search' accesskey='4' rel="search" id='adv_search' class='right'>Advanced</a>
			<span id='search_wrap' class='right'>
				<input type='text' id='main_search' name='search_term' class='inactive' size='17' tabindex='100' />
				<span class='choice ipbmenu clickable' id='search_options' style='display: none'></span>
				<ul id='search_options_menucontent' class='ipbmenu_content ipsPad' style='display: none'>
					<li class='title'><strong>Search section:</strong></li>
					<li class='special'>
							<label for='s_topic' title='This topic'>
								<input type='radio' name='search_app' value="forums:topic:277846" class='input_radio' id='s_topic' checked="checked" /><strong>This topic</strong>
							</label>
						</li>
					
					
					<li class='app'><label for='s_forums' title='Forums'><input type='radio' name='search_app' class='input_radio' id='s_forums' value="forums"  />Forums</label></li>
					<li class='app'><label for='s_members' title='Members'><input type='radio' name='search_app' class='input_radio' id='s_members' value="members"  />Members</label></li>
					<li class='app'><label for='s_core' title='Help Files'><input type='radio' name='search_app' class='input_radio' id='s_core' value="core"  />Help Files</label></li>
					
						
					

						
					

						
					

						<li class='app'>
								<label for='s_ccs' title='Pages'>
									<input type='radio' name='search_app' class='input_radio' id='s_ccs' value="ccs"  />Pages
								</label>
							</li>
					

						
					
				</ul>
				<input type='submit' class='submit_input clickable' value='Search' />
			</span>
			
		</fieldset>
	</form>
</div>
					
				</div>
			</div>
			<!-- ::: APPLICATION TABS ::: -->
			<div id='primary_nav' class='clearfix'>
				<div class='main_width'>
					<ul class='ipsList_inline' id='community_app_menu'>
						
							<li class='right'>
								<a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=navigation&amp;inapp=forums" rel="quickNavigation" accesskey='9' id='quickNavLaunch' title='Open Quick Navigation'><span>&nbsp;</span></a>
							</li>
						
						<li id='nav_explore' class='right'>
							<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=search&amp;do=viewNewContent&amp;search_app=forums' accesskey='2'>View New Content</a>
						</li>
						
						
								
		
			
				
										
				

										
				

										
				

										
				
			
			
		

			
				
										
				

										
				

										
				

										
				
			
			<li id='nav_app_forums' class="left active"><a href='http://forums.phpfreaks.com/' title='Go to Forums' >Forums</a></li>
		

			
				
										
				

										
				

										
				

										
				
			
			<li id='nav_app_members' class="left "><a href='http://forums.phpfreaks.com/members/' title='Go to Members' >Members</a></li>
		

			
				
										
				

										
				

										
				

										
				
			
			
		
	
	
		
						<li id='nav_menu_3' class="left  ">
					<a id='nav_menu_3_trigger' href='http://www.phpfreaks.com/page/irc-live-chat' title='Come chat with us in IRC&#33;' >Chat </a>
					
					
				</li>
		

						
		

						<li id='nav_menu_5' class="left  ">
					<a id='nav_menu_5_trigger' href='http://www.phpfreaks.com/page/rules-and-terms-of-service' title='Site Rules and Terms of Service' >Rules and ToS </a>
					
					
				</li>
		

						
		
	
						
						<li id='nav_other_apps' style='display: none'>
							<a href='#' class='ipbmenu' id='more_apps'>More <img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/useropts_arrow.png' /></a>
						</li>
					</ul>
				</div>
			</div>	
			
			<!-- ::: MAIN CONTENT AREA ::: -->
			<div id='content' class='clearfix'>
				<!-- ::: NAVIGATION BREADCRUMBS ::: -->
				<div id='secondary_navigation' class='clearfix'>
						<ol class='breadcrumb top ipsList_inline left'>
														<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
									<a href='http://forums.phpfreaks.com/' itemprop="url">
										<span itemprop="title">PHP Freaks</span>
									</a>
								</li>
								
							
								<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
									<span class='nav_sep'>&rarr;</span>
									 <a href='http://forums.phpfreaks.com/forum/6-client-side/' title='Return to Client Side' itemprop="url"><span itemprop="title">Client Side</span></a>
								</li>
								
							

								<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
									<span class='nav_sep'>&rarr;</span>
									 <a href='http://forums.phpfreaks.com/forum/18-jvscript-help/' title='Return to J&#097;v&#097;script Help' itemprop="url"><span itemprop="title">J&#097;v&#097;script Help</span></a>
								</li>
								
							
						</ol>
					</div>
					<br />
				<noscript>
					<div class='message error'>
						<strong>Javascript Disabled Detected</strong>
						<p>You currently have javascript disabled. Several functions may not work. Please re-enable javascript to access full functionality.</p>
					</div>
					<br />
				</noscript>
				<!-- ::: CONTENT ::: -->
				
					<div class='ipsAd'><script type="text/javascript"><!--
google_ad_client = "ca-pub-8794381281316343";
/* PHP Freaks forums */
google_ad_slot = "9136654976";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
				
				

<script type="text/javascript">
//<![CDATA[
	ipb.topic.inSection    = 'topicview';
	ipb.topic.topic_id     = 277846;
	ipb.topic.forum_id     = 18;
	ipb.topic.redirectPost = 1;
	ipb.topic.start_id     = 0;
	ipb.topic.page_id      = 0;
	ipb.topic.topPid       = 0;
	ipb.topic.counts       = { postTotal: 6,
							  curStart:  ipb.topic.start_id,
							  perPage:   20 };
	//Search Setup
	ipb.vars['search_type']			= 'forum';
	ipb.vars['search_type_id']		= 18;
	ipb.vars['search_type_2']		= 'topic';
	ipb.vars['search_type_id_2']	= 277846;
	
	
	// Delete stuff set up
	ipb.topic.deleteUrls['hardDelete'] = new Template( ipb.vars['base_url'] + "app=forums&module=moderate&section=moderate&do=04&f=18&t=277846&page=&auth_key=880ea6a14ea49e853634fbdc5015a024&p=#{pid}" );
	ipb.topic.deleteUrls['softDelete'] = new Template( ipb.vars['base_url'] + "app=forums&module=moderate&section=moderate&do=postchoice&tact=sdelete&t=277846&f=18&auth_key=880ea6a14ea49e853634fbdc5015a024&selectedpids[#{pid}]=#{pid}&pid=#{pid}" );
	
	
	ipb.topic.modPerms	  = [];
	
	
	ipb.templates['post_moderation'] = new Template("<div id='comment_moderate_box' class='ipsFloatingAction' style='display: none'><span class='desc'>With <span id='comment_count'>#{count}</span> checked posts: </span><select id='tactInPopup' class='input_select'><option value='approve'>Approve</option><option value='delete'>Hide</option><option value='sundelete'>Unhide</option><option value='deletedo'>Delete</option><option value='merge'>Merge</option><option value='split'>Split</option><option value='move'>Move</option></select>&nbsp;&nbsp;<input type='button' class='input_submit' id='submitModAction' value='Go' /></div>");
	
//]]>
</script>





	<a href='http://forums.phpfreaks.com/user/125511-njdubois/' class='ipsUserPhotoLink left'>

<img src='http://www.gravatar.com/avatar/bef96338bc1a320b83428d72501d6ee0?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' alt='Photo' class='ipsUserPhoto ipsUserPhoto_medium' />

	</a>

<div itemscope itemtype="http://schema.org/Article" class='ipsBox_withphoto'>
	
	<h1 itemprop="name" class='ipsType_pagetitle'>running clean up code when user leaves page without onbeforeunload dialog.</h1>
	<div class='desc lighter blend_links'>
		 Started by <span itemprop="creator"><a hovercard-ref="member" hovercard-id="125511" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/125511-njdubois/' title='View Profile'><span itemprop="name">njdubois</span></a></span>, <span itemprop="dateCreated" datetime="2013-05-09">May 09 2013 01:24 PM</span>
	</div>
	
	<meta itemprop="interactionCount" content="UserComments:6" />
</div>



<br />
<div class='topic_controls'>
	
	


	<ul class='topic_buttons'>
			<li class='disabled'><span>Please log in to reply</span></li>
			
			
		</ul>
</div>

<div class='maintitle clear clearfix'>
	<span class='ipsType_small'>
		5 replies to this topic
	</span>
	
</div>

<div class='topic hfeed clear clearfix'>
	
	

	<div class='ipsBox'>
		<div class='ipsBox_container' id='ips_Posts'>
			
				<!--post:1429337-->

<div class='post_block hentry clear clearfix  ' id='post_id_1429337'>
		<a id='entry1429337'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1429337' href='http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/#entry1429337' rel='bookmark' title='running clean up code when user leaves page without onbeforeunload dialog.: post #1'>
					
					#1
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='running clean up code when user leaves page without onbeforeunload dialog.: post #1' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="125511" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/125511-njdubois/' title='View Profile'><span itemprop="name">njdubois</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">njdubois</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/125511-njdubois/" title="View Profile: njdubois" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/bef96338bc1a320b83428d72501d6ee0?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			149 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-05-09T18:24:08+00:00">09 May 2013 - 01:24 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>I have a data entry form that has required fields. &nbsp;I want to disable the ability for a user to browse away from this page until either these required fields are filled out, or they choose to cancel.</p>
<p>&nbsp;</p>
<p>I found this on the net :</p>
<p>&nbsp;</p>
<p><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">window</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">.</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">onbeforeunload&nbsp;</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">=</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">&nbsp;</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;color:rgb(0,0,139);">function</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">()</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">&nbsp;</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">{</span></p>
<div><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;color:rgb(0,0,139);">&nbsp; &nbsp;return</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">&nbsp;</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;color:rgb(128,0,0);">'You have unsaved changes!'</span><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">;</span><br><span  style="font-family:Consolas, Menlo, Monaco,'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif;background-color:transparent;margin:0px;">}</span></div>
<p>&nbsp;</p>
<p>But it is not going to do what I need it to do. &nbsp;The user can still leave the page ignoring required fields, and not giving me the chance to delete the record. &nbsp;Thus filling our database with bad data.</p>
<p>&nbsp;</p>
<p>Ideally, The user starts filling out the form and for whatever reason needs to leave the page with the form, say they click the home link or maybe goes to google.com. &nbsp;If any of the required fields are not filled out, I would like the code to prevent the page from changing, and to prompt the user using html and NOT the onbeforeunload dialog. &nbsp;IE: Have some red text populate a div at the top of the page stating "A required field is missing, do you want to cancel this entry?" with a yes and no button.</p>
<p>&nbsp;</p>
<p>Using the onbeforeunload event, I have no way to change the dialog other than the text in the message. &nbsp;I also have no way of running code if they decide to leave the page. &nbsp;I understand that for security reasons it has to be this way. &nbsp;What are my options? &nbsp;What would you do to get around this?</p>
<p>&nbsp;</p>
<p>I'm really stuck against a wall with this, thanks for any help and thanks for even taking the time to read my post!</p>
<p>&nbsp;</p>
<p>Nick</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1429337'>
				<ul class='ipsList_inline'>
					<li id="like_post_1429337" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1429337', { domLikeStripId: 'like_post_1429337', app: 'forums', type: 'pid', typeid: '1429337' }, parseInt('0') );
</script>
				
								
				
				
				
			
				<ul id='postControlsNormal_1429337' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
			<script type="text/javascript"><!--
google_ad_client = "ca-pub-8794381281316343";
/* 468x60, created 10/2/10 - PHP Freaks Update */
google_ad_slot = "1560263540";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
		
<script type="text/javascript">
var pid = parseInt(1429337);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1429337') )
	{
		$('multiq_1429337').show();
	}
	
	if( $('toggle_post_1429337') )
	{
		$('toggle_post_1429337').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1429337] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1429342-->

<div class='post_block hentry clear clearfix  ' id='post_id_1429342'>
		<a id='entry1429342'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1429342' href='http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/#entry1429342' rel='bookmark' title='running clean up code when user leaves page without onbeforeunload dialog.: post #2'>
					
					#2
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='running clean up code when user leaves page without onbeforeunload dialog.: post #2' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="149274" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/149274-irate/' title='View Profile'><span itemprop="name">Irate</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Irate</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/149274-irate/" title="View Profile: Irate" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-thumb-149274.jpg?_r=1378749435' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			358 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Hamburg, Germany</span>
						</li>
					
				

					
						<li>
							<span class="ft">Age:</span><span class="fc">17</span>
						</li>
					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-05-09T18:41:41+00:00">09 May 2013 - 01:41 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p></p><pre class="prettyprint linenums:0">window.onbeforeunload = function(){
if(!required_fields){ // do something to check if all fields are filled
var conf = confirm("You still have some required fields to fill out. Cancel?");
if(!confirm) return false;
else { // add a function that sends something to your database
}
}
};</pre>
<p>&nbsp;</p>
<p>Try something like that.</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1429342'>
				<ul class='ipsList_inline'>
					<li id="like_post_1429342" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1429342', { domLikeStripId: 'like_post_1429342', app: 'forums', type: 'pid', typeid: '1429342' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="149274">
	
	<span  style="color:#343434">Quod placet mihi non placeat tibi. - What I think to be good must not always equal your perception of it.</span><br><br><span  style="color:#2783a6">I am not perfect. I try a lot with the code I provide and I don't guarantee for it to work as I have mostly no option to test it on my mobile phone. I do apologize for any inconvenience I caused, but if I do happen to have helped, liking my posts or marking them as to have solved or answered your question would be nice.</span>
</div>
				
				
				
			
				<ul id='postControlsNormal_1429342' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1429342);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1429342') )
	{
		$('multiq_1429342').show();
	}
	
	if( $('toggle_post_1429342') )
	{
		$('toggle_post_1429342').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1429342] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1429354-->

<div class='post_block hentry clear clearfix  ' id='post_id_1429354'>
		<a id='entry1429354'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1429354' href='http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/#entry1429354' rel='bookmark' title='running clean up code when user leaves page without onbeforeunload dialog.: post #3'>
					
					#3
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='running clean up code when user leaves page without onbeforeunload dialog.: post #3' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="125511" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/125511-njdubois/' title='View Profile'><span itemprop="name">njdubois</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">njdubois</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/125511-njdubois/" title="View Profile: njdubois" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/bef96338bc1a320b83428d72501d6ee0?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			149 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-05-09T19:08:26+00:00">09 May 2013 - 02:08 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<pre class="prettyprint lang-">
var required_fields='true';
window.onbeforeunload = function(){
if(!required_fields){ // do something to check if all fields are filled
var conf = confirm("You still have some required fields to fill out. Cancel?");
if(!confirm) return false;
else { // add a function that sends something to your database
}
}
};
</pre>
<p>does nothing? &nbsp;Whether is set it to true or false, it goes right to the chosen page, no prompts, nothing?</p>
<p>&nbsp;</p>
<p>Based on what I have read, this isn't an option because you don't have control over whats going on inside the onbeforeunload event.</p>
<p>&nbsp;</p>
<p>Thanks for the reply! &nbsp;</p>
<p>&nbsp;</p>
<p>Nick</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1429354'>
				<ul class='ipsList_inline'>
					<li id="like_post_1429354" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1429354', { domLikeStripId: 'like_post_1429354', app: 'forums', type: 'pid', typeid: '1429354' }, parseInt('0') );
</script>
				
								
				
				
				
			
				<ul id='postControlsNormal_1429354' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1429354);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1429354') )
	{
		$('multiq_1429354').show();
	}
	
	if( $('toggle_post_1429354') )
	{
		$('toggle_post_1429354').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1429354] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1429355-->

<div class='post_block hentry clear clearfix  ' id='post_id_1429355'>
		<a id='entry1429355'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1429355' href='http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/#entry1429355' rel='bookmark' title='running clean up code when user leaves page without onbeforeunload dialog.: post #4'>
					
					#4
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='running clean up code when user leaves page without onbeforeunload dialog.: post #4' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="124404" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/124404-kicken/' title='View Profile'><span itemprop="name">kicken</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">kicken</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Wiser? Not exactly.</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/124404-kicken/" title="View Profile: kicken" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-124404.png?_r=1359272020' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,635 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Bonita, FL</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-05-09T19:12:40+00:00">09 May 2013 - 02:12 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<blockquote class="ipsBlockquote" data-author="njdubois" data-cid="1429337" data-time="1368123848"><p>I want to disable the ability for a user to browse away from this page until either these required fields are filled out, or they choose to cancel.</p></blockquote><br>You can't. The user can ALWAYS leave the page. There is no way at all for you to prevent that. There isn't even a reliable way to determine if the user has left the page.<br><br>What you need to do is setup your system so that until all these fields have been filled in, that DB record is considered to be incomplete and is more or less ignored. If you want, you can have a cron job periodically run to delete all the older incomplete records to conserve space.<br><br>Another alternative is to just not create the DB record at all until they have submitted all the necessary information. Store everything into session variables until everything is complete, then create the DB entry at the end.
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1429355'>
				<ul class='ipsList_inline'>
					<li id="like_post_1429355" class='ipsLikeBar_info' >
							<a hovercard-ref="member" hovercard-id="22488" data-ipb="noparse" class="_hovertrigger url fn name  " href='http://forums.phpfreaks.com/user/22488-josh/' title='View Profile'><span itemprop="name">.josh</span></a> and <a hovercard-ref="member" hovercard-id="27180" data-ipb="noparse" class="_hovertrigger url fn name  " href='http://forums.phpfreaks.com/user/27180-jessica/' title='View Profile'><span itemprop="name">Jessica</span></a> like this
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1429355', { domLikeStripId: 'like_post_1429355', app: 'forums', type: 'pid', typeid: '1429355' }, parseInt('2') );
</script>
				
								
				
					<div class="signature" data-memberid="124404">
	
	<a href='http://cdrecyclingcenter.org/' class='bbc_url' title='External link' rel='external'>Recycle your old CD&#39;s</a>, don&#39;t trash them&#33;<br />Did I help you out?  Feeling generous? I accept tips via <a href='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=ZLE5XD6TL5F2N' class='bbc_url' title='External link' rel='external'>Paypal</a> or Bitcoin @ <strong class='bbc'>14mDxaob8Jgdg52scDbvf3uaeR61tB2yC7</strong>
</div>
				
				
				
			
				<ul id='postControlsNormal_1429355' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1429355);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1429355') )
	{
		$('multiq_1429355').show();
	}
	
	if( $('toggle_post_1429355') )
	{
		$('toggle_post_1429355').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1429355] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1429360-->

<div class='post_block hentry clear clearfix  ' id='post_id_1429360'>
		<a id='entry1429360'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1429360' href='http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/#entry1429360' rel='bookmark' title='running clean up code when user leaves page without onbeforeunload dialog.: post #5'>
					
					#5
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='running clean up code when user leaves page without onbeforeunload dialog.: post #5' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="125511" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/125511-njdubois/' title='View Profile'><span itemprop="name">njdubois</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">njdubois</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/125511-njdubois/" title="View Profile: njdubois" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/bef96338bc1a320b83428d72501d6ee0?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			149 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-05-09T19:26:17+00:00">09 May 2013 - 02:26 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<blockquote class="ipsBlockquote" data-author="kicken" data-cid="1429355" data-time="1368126760">
<div>
<p>You can't. The user can ALWAYS leave the page. There is no way at all for you to prevent that. There isn't even a reliable way to determine if the user has left the page.<br><br>
What you need to do is setup your system so that until all these fields have been filled in, that DB record is considered to be incomplete and is more or less ignored. If you want, you can have a cron job periodically run to delete all the older incomplete records to conserve space.<br><br>
Another alternative is to just not create the DB record at all until they have submitted all the necessary information. Store everything into session variables until everything is complete, then create the DB entry at the end.</p>
</div>
</blockquote>
<p>&nbsp;</p>
<p>While reading your reply I had one of those 'DOH!' moments. &nbsp;While I was aware that there was no way to prevent a user from leaving a page, I wasn't looking at it from the other direction. &nbsp;Why not mark is as incomplete, and then output those records differently allowing the user to finish it later.</p>
<p>&nbsp;</p>
<p>Thank you sooo much!!</p>
<p>&nbsp;</p>
<p>Nick</p>
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1429360'>
				<ul class='ipsList_inline'>
					<li id="like_post_1429360" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1429360', { domLikeStripId: 'like_post_1429360', app: 'forums', type: 'pid', typeid: '1429360' }, parseInt('0') );
</script>
				
								
				
				
				
			
				<ul id='postControlsNormal_1429360' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1429360);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1429360') )
	{
		$('multiq_1429360').show();
	}
	
	if( $('toggle_post_1429360') )
	{
		$('toggle_post_1429360').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1429360] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1429399-->

<div class='post_block hentry clear clearfix  ' id='post_id_1429399'>
		<a id='entry1429399'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1429399' href='http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/#entry1429399' rel='bookmark' title='running clean up code when user leaves page without onbeforeunload dialog.: post #6'>
					
					#6
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='running clean up code when user leaves page without onbeforeunload dialog.: post #6' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="22488" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/22488-josh/' title='View Profile'><span itemprop="name">.josh</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">.josh</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>.josh</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/22488-josh/" title="View Profile: .josh" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-thumb-22488.jpg?_r=1380939052' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:red;'>Administrators</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_admin.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			14,807 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-05-09T23:59:09+00:00">09 May 2013 - 06:59 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>It really grinds my tits when a site tries to prevent me from leaving. One way trip to blacklist in my book.&nbsp;</p>
<p>&nbsp;</p>
<p>I agree with <strong class='bbc'>kicken</strong>, this is how I would do it:</p>
<p>&nbsp;</p>
<blockquote class="ipsBlockquote" data-author="kicken" data-cid="1429355" data-time="1368126760"><br />
<div><br />
<p>Another alternative is to just not create the DB record at all until they have submitted all the necessary information. Store everything into session variables until everything is complete, then create the DB entry at the end.</p>
</div>
</blockquote>
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1429399'>
				<ul class='ipsList_inline'>
					<li id="like_post_1429399" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1429399', { domLikeStripId: 'like_post_1429399', app: 'forums', type: 'pid', typeid: '1429399' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="22488">
	
	<!-- isHtml:1 --><!-- isHtml:1 --><!--<p><img src='http://www.crayonviolent.com/randomquotes.jpg' alt='Posted Image' class='bbc_img' />--><br /><em class='bbc'><span style='color: red;font-weight: bold'>Did I help you? Feeling generous?</span></em> <a data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' class='bbc_url' href='https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=crayonviolent%40gmail%2ecom&lc=US&item_name=Donation%20for%20helping%20fix%20coding%20issues%20on%20phpfreaks%2ecom%21&no_note=0¤cy_code=USD&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHostedGuest' target='blank'>Donate to me!</a> || <a data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' data-ipb='nomediaparse' class='bbc_url' href='http://www.phpfreaks.com/page/donations' target='blank'>Donate to phpfreaks!</a><br/><span style='color: gray;font-style: italic'>Please, take the time and do some research and find out how much it would have cost you to get your help from a decent paid-for source. A "roll-of-the-dice" freelancer will charge you $5-$15/hr. A <em class='bbc'>decent</em> entry level freelancer will charge you around $15-30/hr. A professional will charge you anywhere from $50-$100/hr.  An agency will charge anywhere from $100-$250/hr. Think about all this when soliciting for help here. Think about how much money <em class='bbc'>you</em> are making from the work you are asking for help on. No, we do not expect you to pay for the help given here, but donating a few bucks is a fraction of the cost of what you would have paid, shows your appreciation, helps motivate people to keep offering help without the pricetag, and helps make this a higher quality free-help community <img src='http://forums.phpfreaks.com/public/style_emoticons/default/happy-01.gif' class='bbc_emoticon' alt=':)' /> </i></span>
</div>
				
				
				
			
				<ul id='postControlsNormal_1429399' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1429399);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1429399') )
	{
		$('multiq_1429399').show();
	}
	
	if( $('toggle_post_1429399') )
	{
		$('toggle_post_1429399').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1429399] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			
		</div>
	</div>

<hr />
<div class='topic_controls clear ipsPad_top_bottom_half'>
	
	<div class='ipsPad_top_slimmer right'>
		
		<a href='http://forums.phpfreaks.com/forum/18-jvscript-help/' class="ipsType_small desc">Back to J&#097;v&#097;script Help</a>
		
			&middot; <a href='http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/?view=getnextunread' rel="nofollow" class="ipsType_small desc">Next Unread Topic &rarr;</a>
		
	</div>
</div>

<!-- Close topic -->
</div>
<!-- BOTTOM BUTTONS -->

	<br />
	<div class='clear clearfix left'>
		

	<ul class='topic_share left shareButtons ipsList_inline'>
	
		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=twitter;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI3Nzg0Ni1ydW5uaW5nLWNsZWFuLXVwLWNvZGUtd2hlbi11c2VyLWxlYXZlcy1wYWdlLXdpdGhvdXQtb25iZWZvcmV1bmxvYWQtZGlhbG9nLw,,;cnVubmluZyBjbGVhbiB1cCBjb2RlIHdoZW4gdXNlciBsZWF2ZXMgcGFnZSB3aXRob3V0IG9uYmVmb3JldW5sb2FkIGRpYWxvZy4," rel="nofollow" target="_blank" title="Share this link via Twitter" class='_slink' id='slink_twitter'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/twitter.png" /></a></li>
	

		
				<li class='fbLike'><div class="fb-like" data-href="http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/" data-send="false" data-layout="button_count" data-width="150" data-show-faces="false" data-action="like"></div><div id="fb-root"></div></li>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=224092164386333";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
			
	

		
				<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
	
		{lang: 'en-GB'}
	
</script>
<li><div class='googlePlusOne'><g:plusone count="false" size="small"></g:plusone></div></li>
			
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=digg;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI3Nzg0Ni1ydW5uaW5nLWNsZWFuLXVwLWNvZGUtd2hlbi11c2VyLWxlYXZlcy1wYWdlLXdpdGhvdXQtb25iZWZvcmV1bmxvYWQtZGlhbG9nLw,,;cnVubmluZyBjbGVhbiB1cCBjb2RlIHdoZW4gdXNlciBsZWF2ZXMgcGFnZSB3aXRob3V0IG9uYmVmb3JldW5sb2FkIGRpYWxvZy4," rel="nofollow" target="_blank" title="Share this link via Digg" class='_slink' id='slink_digg'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/digg.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=delicious;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI3Nzg0Ni1ydW5uaW5nLWNsZWFuLXVwLWNvZGUtd2hlbi11c2VyLWxlYXZlcy1wYWdlLXdpdGhvdXQtb25iZWZvcmV1bmxvYWQtZGlhbG9nLw,,;cnVubmluZyBjbGVhbiB1cCBjb2RlIHdoZW4gdXNlciBsZWF2ZXMgcGFnZSB3aXRob3V0IG9uYmVmb3JldW5sb2FkIGRpYWxvZy4," rel="nofollow" target="_blank" title="Share this link via Del.icio.us" class='_slink' id='slink_delicious'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/delicious.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=reddit;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI3Nzg0Ni1ydW5uaW5nLWNsZWFuLXVwLWNvZGUtd2hlbi11c2VyLWxlYXZlcy1wYWdlLXdpdGhvdXQtb25iZWZvcmV1bmxvYWQtZGlhbG9nLw,,;cnVubmluZyBjbGVhbiB1cCBjb2RlIHdoZW4gdXNlciBsZWF2ZXMgcGFnZSB3aXRob3V0IG9uYmVmb3JldW5sb2FkIGRpYWxvZy4," rel="nofollow" target="_blank" title="Share this link via Reddit" class='_slink' id='slink_reddit'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/reddit.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=stumble;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI3Nzg0Ni1ydW5uaW5nLWNsZWFuLXVwLWNvZGUtd2hlbi11c2VyLWxlYXZlcy1wYWdlLXdpdGhvdXQtb25iZWZvcmV1bmxvYWQtZGlhbG9nLw,,;cnVubmluZyBjbGVhbiB1cCBjb2RlIHdoZW4gdXNlciBsZWF2ZXMgcGFnZSB3aXRob3V0IG9uYmVmb3JldW5sb2FkIGRpYWxvZy4," rel="nofollow" target="_blank" title="Share this link via StumbleUpon" class='_slink' id='slink_stumble'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/stumble.png" /></a></li>
	

		
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=print;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI3Nzg0Ni1ydW5uaW5nLWNsZWFuLXVwLWNvZGUtd2hlbi11c2VyLWxlYXZlcy1wYWdlLXdpdGhvdXQtb25iZWZvcmV1bmxvYWQtZGlhbG9nLw,,;cnVubmluZyBjbGVhbiB1cCBjb2RlIHdoZW4gdXNlciBsZWF2ZXMgcGFnZSB3aXRob3V0IG9uYmVmb3JldW5sb2FkIGRpYWxvZy4," rel="nofollow" target="_blank" title="Print" class='_slink' id='slink_print'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/print.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=download;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI3Nzg0Ni1ydW5uaW5nLWNsZWFuLXVwLWNvZGUtd2hlbi11c2VyLWxlYXZlcy1wYWdlLXdpdGhvdXQtb25iZWZvcmV1bmxvYWQtZGlhbG9nLw,,;cnVubmluZyBjbGVhbiB1cCBjb2RlIHdoZW4gdXNlciBsZWF2ZXMgcGFnZSB3aXRob3V0IG9uYmVmb3JldW5sb2FkIGRpYWxvZy4," rel="nofollow" target="_blank" title="Download" class='_slink' id='slink_download'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/download.png" /></a></li>
	
	</ul>
	<script type="text/javascript">
		ipb.sharelinks.url   = "http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/";
		ipb.sharelinks.title = "running clean up code when user leaves page without onbeforeunload dialog.";
		ipb.sharelinks.bname = "PHP Freaks";
	</script>

	</div>
	<br />

<!-- SAME TAGGED -->

<!-- ACTIVE USERS -->
<div id='topic_stats' class='statistics clear clearfix'>
		<div id='topic_active_users' class='active_users'>
			<h4 class='statistics_head'>0 user(s) are reading this topic</h4>
			<p class='statistics_brief desc'>0 members, 0 guests, 0 anonymous users</p>
			
		</div>
	</div>


	<script type="text/javascript" src="http://forums.phpfreaks.com/public/js/3rd_party/prettify/prettify.js"></script>
	<script type='text/javascript' src='http://forums.phpfreaks.com/public/js/3rd_party/prettify/lang-sql.js'></script>
	<!-- By default we load generic code, php, css, sql and xml/html; load others here if desired -->
	<script type="text/javascript">
	//<![CDATA[
		Event.observe( window, 'load', function(e){ prettyPrint() });
	//]]>
	</script>
<div id='multiQuoteInsert' style='display: none;' class='ipsFloatingAction'>
	<span class='ipsButton no_width' id='mqbutton'>Reply to quoted posts</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#' id='multiQuoteClear' class='ipsType_smaller desc' title='Clear the posts you have selected with MultiQuote'>Clear</a> &nbsp;&nbsp;&nbsp;
</div>
<form id="modform" method="post" action="http://forums.phpfreaks.com/index.php?">
	<input type="hidden" name="app" value="forums" />
	<input type="hidden" name="module" value="moderate" />
	<input type="hidden" name="section" value="moderate" />
	<input type="hidden" name="do" value="postchoice" />
	<input type="hidden" name="f" value="18" />
	<input type="hidden" name="t" value="277846" />
	<input type="hidden" name="auth_key" value="880ea6a14ea49e853634fbdc5015a024" />
	<input type="hidden" name="st" value="" />
	<input type="hidden" name="page" value="" />
	<input type="hidden" value="" name="selectedpidsJS" id='selectedpidsJS' />
	<input type="hidden" name="tact" id="tact" value="" />
</form>
				
					<div class='ipsAd'><div style="float:left;clear:both;padding:16px;">

    <a href="http://alphabit.com" title="Cheap Linux VPS from $5">Cheap Linux VPS from $5</a><br />
    <span style="color:black"> SSD Storage, 30 day Guarantee<br />
   1 TB of BW, 100% Network Uptime</span><br />
    <a href="http://alphabit.com"  title="Cheap Linux VPS from $5"><span style="color:green">AlphaBit.com</span></a>

</div>
<br /><br />


<script type="text/javascript"><!--
google_ad_client = "ca-pub-8794381281316343";
/* PHP Freaks forums */
google_ad_slot = "9136654976";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
				
				<ol class='breadcrumb bottom ipsList_inline left clearfix clear'>
											<li><a href='http://forums.phpfreaks.com/'>PHP Freaks</a></li>
							
						
							<li><span class='nav_sep'>&rarr;</span> <a href='http://forums.phpfreaks.com/forum/6-client-side/' title='Return to Client Side'><span>Client Side</span></a></li>
							
						

							<li><span class='nav_sep'>&rarr;</span> <a href='http://forums.phpfreaks.com/forum/18-jvscript-help/' title='Return to J&#097;v&#097;script Help'><span>J&#097;v&#097;script Help</span></a></li>
							
						

					
					<li class='right ipsType_smaller'>
						<a rel="nofollow" href='http://forums.phpfreaks.com/privacypolicy/'>Privacy Policy</a>
					</li>
					
					<li class='right ipsType_smaller'>
							<a href='http://www.phpfreaks.com/page/rules-and-terms-of-service'>Forum Rules &amp; Terms of Service</a> &middot; 
						</li>	
				</ol>
			</div>
			<!-- ::: FOOTER (Change skin, language, mark as read, etc) ::: -->
			<div id='footer_utilities' class='main_width clearfix clear'>
				<a rel="nofollow" href='#top' id='backtotop' title='Go to top'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/top.png' alt='' /></a>
				<ul class='ipsList_inline left'>
					<li>
						<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/feed.png' alt='RSS Feed' id='rss_feed' class='clickable' />
					</li>
					
							
								<li>
									<a rel="nofollow" id='new_skin' href='#'>Change Theme</a>			
									<ul id='new_skin_menucontent' class='ipbmenu_content with_checks' style='display: none'>
										
											<li >
												<a href='#' data-clicklaunch='changeSkin' data-skinid='2'>IP.Board Mobile</a>
											</li>
										

											<li class='selected'>
												<a href='#' data-clicklaunch='changeSkin' data-skinid='5'>PHP Freaks</a>
											</li>
										
									</ul>
								</li>
							
					
						<li>
							<a rel="nofollow" href='#' id='new_language'>PHP Freaks - English (USA)</a>							
							<ul id='new_language_menucontent' class='ipbmenu_content with_checks' style='display: none'>
								
									<li >
										<a href="?k=880ea6a14ea49e853634fbdc5015a024&amp;setlanguage=1&amp;cal_id=&amp;langid=1">English (USA)</a>
									</li>
								

									<li class='selected'>
										<a href="?k=880ea6a14ea49e853634fbdc5015a024&amp;setlanguage=1&amp;cal_id=&amp;langid=2">PHP Freaks - English (USA)</a>
									</li>
								
							</ul>
						</li>
					
					
						<li>
							<a rel="nofollow" id='mark_all_read' href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=all&amp;k=880ea6a14ea49e853634fbdc5015a024" title='Mark all as read'>Mark Community Read</a>
							<ul id='mark_all_read_menucontent' class='ipbmenu_content' style='display: none'>
								
									<li>
										
									</li>
								

									<li>
										<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=app&amp;markApp=forums&amp;k=880ea6a14ea49e853634fbdc5015a024">Forums</a>
									</li>
								

									<li>
										<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=app&amp;markApp=members&amp;k=880ea6a14ea49e853634fbdc5015a024">Members</a>
									</li>
								

									<li>
										<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=app&amp;markApp=ccs&amp;k=880ea6a14ea49e853634fbdc5015a024">Pages</a>
									</li>
								
								<li>
									<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=all&amp;k=880ea6a14ea49e853634fbdc5015a024"><strong>Mark all as read</strong></a>
								</li>
							</ul>
						</li>
					
					<li>
						<a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=help" title='View help' rel="help" accesskey='6'>Help</a>
					</li>				
				</ul>
				<!-- Copyright Information -->
        				  <p id='copyright'>
        				  	<a href='http://www.invisionpower.com/apps/board/' title='Community Forum Software by Invision Power Services'>Community Forum Software by IP.Board</a><br />Licensed to: Philip Lawrence, PHP Freaks</p>
		<!-- / Copyright -->
			</div>
			
			
			
				<script type='text/javascript' src='http://forums.phpfreaks.com/public/js/3rd_party/lightbox.js'></script>
<script type='text/javascript'>
//<![CDATA[
	// Lightbox Configuration
	LightboxOptions = Object.extend({
	    fileLoadingImage:        'http://forums.phpfreaks.com/public/style_images/phpfreaks/lightbox/loading.gif',
	    fileBottomNavCloseImage: 'http://forums.phpfreaks.com/public/style_images/phpfreaks/lightbox/closelabel.gif',
	    overlayOpacity: 0.8,   // controls transparency of shadow overlay
	    animate: true,         // toggles resizing animations
	    resizeSpeed: 10,        // controls the speed of the image resizing animations (1=slowest and 10=fastest)
	    borderSize: 10,         //if you adjust the padding in the CSS, you will need to update this variable
		// When grouping images this is used to write: Image # of #.
		// Change it for non-english localization
		labelImage: "Image",
		labelOf: "of"
	}, window.LightboxOptions || {});
/* Watch for a lightbox image and set up our downloadbutton watcher */
document.observe('click', (function(event){
    var target = event.findElement('a[rel*="lightbox"]') || event.findElement('area[rel*="lightbox"]') || event.findElement('span[rel*="lightbox"]');
    if (target) {
        event.stop();
        gbl_addDownloadButton();
    }
}).bind(this));
var _to    = '';
var _last  = '';
function gbl_addDownloadButton()
{
	if ( typeof( ipsLightbox.lightboxImage ) != 'undefined' && ipsLightbox.lightboxImage.src )
	{
		if ( _last != ipsLightbox.lightboxImage.src )
		{
			if ( ! $('gbl_d') )
			{
				$('bottomNav').insert( { top: "<div id='gbl_d' style='text-align:right;padding-bottom:4px;'></div>" } );
			}
			
			$('gbl_d').update( "<a href='"+ ipsLightbox.lightboxImage.src + "' target='_blank'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/lightbox/download-icon.png' /></a>" );
			
			_last = ipsLightbox.lightboxImage.src;
		}
	}
	
	/* Check for init and then keep checking for new image */
	_to = setTimeout( "gbl_addDownloadButton()", 1000 );
}
//]]>
</script>
			
			<div id='inline_login_form' style="display:none">
		<form action="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;do=process" method="post" id='login'>
				<input type='hidden' name='auth_key' value='880ea6a14ea49e853634fbdc5015a024' />
				<input type="hidden" name="referer" value="http://forums.phpfreaks.com/topic/277846-running-clean-up-code-when-user-leaves-page-without-onbeforeunload-dialog/" />
				<h3>Sign In</h3>
				<div class='ipsBox_notice'>
						<ul class='ipsList_inline'>
							
								<li><a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=facebook" class='ipsButton_secondary'><img src="http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/facebook.png" alt="Facebook" /> &nbsp; Use Facebook</a></li>
							
							
								<li><a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=twitter" class='ipsButton_secondary'><img src="http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/twitter.png" alt="Twitter" /> &nbsp; Use Twitter</a></li>
							
							
							
						</ul>
					</div>
				<br />
				<div class='ipsForm ipsForm_horizontal'>
					<fieldset>
						<ul>
							<li class='ipsField'>
								<div class='ipsField_content'>
									Need an account? <a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=register" title='Register now!'>Register now!</a>
								</div>
							</li>
							<li class='ipsField ipsField_primary'>
								<label for='ips_username' class='ipsField_title'>Username</label>
								<div class='ipsField_content'>
									<input id='ips_username' type='text' class='input_text' name='ips_username' size='30' tabindex='0' />
								</div>
							</li>
							<li class='ipsField ipsField_primary'>
								<label for='ips_password' class='ipsField_title'>Password</label>
								<div class='ipsField_content'>
									<input id='ips_password' type='password' class='input_text' name='ips_password' size='30' tabindex='0' /><br />
									<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=lostpass' title='Retrieve password'>I've forgotten my password</a>
								</div>
							</li>
							<li class='ipsField ipsField_checkbox'>
								<input type='checkbox' id='inline_remember' checked='checked' name='rememberMe' value='1' class='input_check' tabindex='0' />
								<div class='ipsField_content'>
									<label for='inline_remember'>
										<strong>Remember me</strong><br />
										<span class='desc lighter'>This is not recommended for shared computers</span>
									</label>
								</div>
							</li>
							
								<li class='ipsField ipsField_checkbox'>
									<input type='checkbox' id='inline_invisible' name='anonymous' value='1' class='input_check' tabindex='0' />
									<div class='ipsField_content'>
										<label for='inline_invisible'>
											<strong>Sign in anonymously</strong><br />
											<span class='desc lighter'>Don't add me to the active users list</span>
										</label>
									</div>
								</li>
							
							
							<li class='ipsPad_top ipsForm_center desc ipsType_smaller'>
								<a rel="nofollow" href='http://forums.phpfreaks.com/privacypolicy/'>Privacy Policy</a>
							</li>
							
						</ul>
					</fieldset>
					
					<div class='ipsForm_submit ipsForm_center'>
						<input type='submit' class='ipsButton' value='Sign In' tabindex='0' />
					</div>
				</div>
			</form>
	</div>
		</div>
		
		
		<script type='text/javascript'>
			if( $('primary_nav') ){	ipb.global.activateMainMenu(); }
		</script>
			
<script>
$$('#copyright > a')[0].setAttribute('href', 'https://www.invisionpower.com/clients/index.php?app=nexus&module=promotion&section=referral&id=61219&direct=aHR0cHM6Ly93d3cuaW52aXNpb25wb3dlci5jb20vY2xpZW50cy9pbmRleC5waHA%2F');
</script>
</body>
</html>
