http://forums.phpfreaks.com/topic/282648-fast-tree/
HTTP/1.1 200 OK
Server: nginx
Date: Sat, 26 Jul 2014 19:15:27 GMT
Content-Type: text/html;charset=UTF-8
Connection: close
Set-Cookie: session_id=e573f838c7bc749d8bec31b9f3a24729; path=/; domain=.phpfreaks.com; httponly
Set-Cookie: modpids=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.phpfreaks.com
Cache-Control: no-cache, must-revalidate, max-age=0
Expires: Fri, 25 Jul 2014 19:15:27 GMT
Pragma: no-cache
Set-Cookie: itemMarking_forums_items=eJyrVjKyMDIzsVCyMjQxMDMxMDI0Mq8FXDAzCASw; expires=Sun, 26-Jul-2015 19:15:27 GMT; path=/; domain=.phpfreaks.com
Content-Encoding: gzip
Vary: Accept-Encoding

<!DOCTYPE html>
	<html lang="en"  xmlns:fb="http://www.facebook.com/2008/fbml">
	<head>
		<meta charset="UTF-8" />
		<title>Fast tree - PHP Coding Help - PHP Freaks</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<link rel="shortcut icon" href='http://forums.phpfreaks.com/favicon.ico' />
		<link rel="image_src" href='http://forums.phpfreaks.com/public/style_images/phpfreaks/meta_image.png' />
		<script type='text/javascript'>
		//<![CDATA[
			jsDebug			= 0; /* Must come before JS includes */
			DISABLE_AJAX	= parseInt(0); /* Disables ajax requests where text is sent to the DB; helpful for charset issues */
			inACP			= false;
			var isRTL		= false;
			var rtlIe		= '';
			var rtlFull		= '';
		//]]>
		</script>
		
	
				
	

				
	

				
	

				
	

				
	
	
		<link rel="stylesheet" type="text/css" media='screen,print' href="http://forums.phpfreaks.com/public/min/index.php?ipbv=e08d28e6ababab965cd84e26ca7636f8&amp;f=public/style_css/css_5/calendar_select.css,public/style_css/css_5/ipb_common.css,public/style_css/css_5/ipb_styles.css,public/style_css/css_5/phpfreaks.css,public/style_css/prettify.css" />
	

<!--[if lte IE 7]>
	<link rel="stylesheet" type="text/css" title='Main' media="screen" href="http://forums.phpfreaks.com/public/style_css/css_5/ipb_ie.css" />
<![endif]-->
<!--[if lte IE 8]>
	<style type='text/css'>
		.ipb_table { table-layout: fixed; }
		.ipsLayout_content { width: 99.5%; }
	</style>
<![endif]-->

	<style type='text/css'>
		img.bbc_img { max-width: 100% !important; }
	</style>

		<meta property="og:title" content="Fast tree - PHP Coding Help"/>
		<meta property="og:site_name" content="PHP Freaks"/>
		<meta property="og:type" content="article" />
		
	
		
		
			<meta property="og:updated_time" content="1406402127" />
		
		
		
		
	

		
		
			<meta name="keywords" content="Fast,tree,Hey,guys,have,database,2800,items,needs,displayed,inside,colaseble,systeme,having,very,big,speed,issue" />
		
		
		
		
	

		
		
			<meta name="description" content="Fast tree - posted in PHP Coding Help: Hey guys i have a database of 2800 items that needs to be displayed inside a colaseble tree systeme. I am having a very big speed issue ... At the moment my code works with 2 fonctions in a recursive way. The page can take up to 50 seconds to load and it uses a lot of the servers CPU. I need to find an other way of doing it ...
&nbsp;


&#60;?php
function page_treeview(){GlOBAL $_SESSION;
&nbsp;&nbsp;&nbsp; $select_page = mysql_query(SELECT * FROM pag..." />
		
		
		
			<meta property="og:description" content="Fast tree - posted in PHP Coding Help: Hey guys i have a database of 2800 items that needs to be displayed inside a colaseble tree systeme. I am having a very big speed issue ... At the moment my code works with 2 fonctions in a recursive way. The page can take up to 50 seconds to load and it uses a lot of the servers CPU. I need to find an other way of doing it ...
&nbsp;


&#60;?php
function page_treeview(){GlOBAL $_SESSION;
&nbsp;&nbsp;&nbsp; $select_page = mysql_query(SELECT * FROM pag..." />
		
		
	

		
		
			<meta name="identifier-url" content="http://forums.phpfreaks.com/topic/282648-fast-tree/" />
		
		
			<meta property="og:url" content="http://forums.phpfreaks.com/topic/282648-fast-tree/" />
		
		
		
	

<meta property="og:image" content="http://forums.phpfreaks.com/public/style_images/phpfreaks/meta_image.png"/>
		
		
		<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js'></script>
		<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/scriptaculous/1.9/scriptaculous.js?load=effects,dragdrop,builder'></script>
	<script type='text/javascript' src='http://forums.phpfreaks.com/public/min/index.php?ipbv=e08d28e6ababab965cd84e26ca7636f8&amp;charset=UTF-8&amp;f=public/js/ipb.js,cache/lang_cache/2/ipb.lang.js,public/js/ips.hovercard.js,public/js/ips.quickpm.js,public/js/ips.sharelinks.js,public/js/ips.topic.js,public/js/ips.like.js' charset='UTF-8'></script>


	
		
			
			
			
			
				<link id="ipsCanonical" rel="canonical" href="http://forums.phpfreaks.com/topic/282648-fast-tree/" />
			
		

			
			
			
			
				<link rel='stylesheet' type='text/css' title='Main' media='print' href='http://forums.phpfreaks.com/public/style_css/css_5/ipb_print.css' />
			
		

			
			
			
			
				<link rel='up' href='http://forums.phpfreaks.com/forum/13-php-coding-help/' />
			
		

			
			
			
			
				<link rel='author' href='http://forums.phpfreaks.com/user/58158-drisate/' />
			
		
	

		
			
			
				<link rel="alternate" type="application/rss+xml" title="PHP Freaks News & Announcements" href="http://forums.phpfreaks.com/rss/forums/1-php-freaks-news-announcements/" />
			
			
			
		

			
			
				<link rel="alternate" type="application/rss+xml" title="PHP Freaks: PHP Help" href="http://forums.phpfreaks.com/rss/forums/2-php-freaks-php-help/" />
			
			
			
		
	

	


	



		
		<script type='text/javascript'>
	//<![CDATA[
		/* ---- URLs ---- */
		ipb.vars['base_url'] 			= 'http://forums.phpfreaks.com/index.php?s=e573f838c7bc749d8bec31b9f3a24729&';
		ipb.vars['board_url']			= 'http://forums.phpfreaks.com';
		ipb.vars['img_url'] 			= "http://forums.phpfreaks.com/public/style_images/phpfreaks";
		ipb.vars['loading_img'] 		= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/loading.gif';
		ipb.vars['active_app']			= 'forums';
		ipb.vars['upload_url']			= 'http://forums.phpfreaks.com/uploads';
		/* ---- Member ---- */
		ipb.vars['member_id']			= parseInt( 0 );
		ipb.vars['is_supmod']			= parseInt( 0 );
		ipb.vars['is_admin']			= parseInt( 0 );
		ipb.vars['secure_hash'] 		= '880ea6a14ea49e853634fbdc5015a024';
		ipb.vars['session_id']			= 'e573f838c7bc749d8bec31b9f3a24729';
		ipb.vars['twitter_id']			= 0;
		ipb.vars['fb_uid']				= 0;
		ipb.vars['auto_dst']			= parseInt( 0 );
		ipb.vars['dst_in_use']			= parseInt(  );
		ipb.vars['is_touch']			= false;
		ipb.vars['member_group']		= {"g_mem_info":"1"}
		/* ---- cookies ----- */
		ipb.vars['cookie_id'] 			= '';
		ipb.vars['cookie_domain'] 		= '.phpfreaks.com';
		ipb.vars['cookie_path']			= '/';
		/* ---- Rate imgs ---- */
		ipb.vars['rate_img_on']			= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/star.png';
		ipb.vars['rate_img_off']		= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/star_off.png';
		ipb.vars['rate_img_rated']		= 'http://forums.phpfreaks.com/public/style_images/phpfreaks/star_rated.png';
		/* ---- Uploads ---- */
		ipb.vars['swfupload_swf']		= 'http://forums.phpfreaks.com/public/js/3rd_party/swfupload/swfupload.swf';
		ipb.vars['swfupload_enabled']	= true;
		ipb.vars['use_swf_upload']		= ( '' == 'flash' ) ? true : false;
		ipb.vars['swfupload_debug']		= false;
		/* ---- other ---- */
		ipb.vars['highlight_color']     = "#ade57a";
		ipb.vars['charset']				= "UTF-8";
		ipb.vars['time_offset']			= "-5";
		ipb.vars['hour_format']			= "12";
		ipb.vars['seo_enabled']			= 1;
		
		ipb.vars['seo_params']			= {"start":"-","end":"\/","varBlock":"?","varPage":"page-","varSep":"&","varJoin":"="};
		
		/* Templates/Language */
		ipb.templates['inlineMsg']		= "";
		ipb.templates['ajax_loading'] 	= "<div id='ajax_loading'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/ajax_loading.gif' alt='" + ipb.lang['loading'] + "' /></div>";
		ipb.templates['close_popup']	= "<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/close_popup.png' alt='x' />";
		ipb.templates['rss_shell']		= new Template("<ul id='rss_menu' class='ipbmenu_content'>#{items}</ul>");
		ipb.templates['rss_item']		= new Template("<li><a href='#{url}' title='#{title}'>#{title}</a></li>");
		
		ipb.templates['autocomplete_wrap'] = new Template("<ul id='#{id}' class='ipb_autocomplete' style='width: 250px;'></ul>");
		ipb.templates['autocomplete_item'] = new Template("<li id='#{id}' data-url='#{url}'><img src='#{img}' alt='' class='ipsUserPhoto ipsUserPhoto_mini' />&nbsp;&nbsp;#{itemvalue}</li>");
		ipb.templates['page_jump']		= new Template("<div id='#{id}_wrap' class='ipbmenu_content'><h3 class='bar'>Jump to page</h3><p class='ipsPad'><input type='text' class='input_text' id='#{id}_input' size='8' /> <input type='submit' value='Go' class='input_submit add_folder' id='#{id}_submit' /></p></div>");
		ipb.templates['global_notify'] 	= new Template("<div class='popupWrapper'><div class='popupInner'><div class='ipsPad'>#{message} #{close}</div></div></div>");
		
		
		ipb.templates['header_menu'] 	= new Template("<div id='#{id}' class='ipsHeaderMenu boxShadow'></div>");
		
		Loader.boot();
	//]]>
	</script>
	<script>
  var _gaq = _gaq || [];
  _gaq.push(
    ["orig._setAccount", "UA-1625146-1"],
    ["orig._setDomainName", "phpfreaks.com"],
    ["orig._trackPageview"]
  );
  (function() {
    var ga = document.createElement("script"); ga.type = "text/javascript"; ga.async = true;
    ga.src = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js";
    var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(ga, s);
  })();

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-33447233-1', 'phpfreaks.com');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

  ga('create', 'UA-33447233-2', 'phpfreaks.com', {name: 'ua'});
  ga('ua.send', 'pageview');
</script></head>
	<body id='ipboard_body'>
		<p id='content_jump' class='hide'><a id='top'></a><a href='#j_content' title='Jump to content' accesskey='m'>Jump to content</a></p>
		<div id='ipbwrapper'>
			<!-- ::: TOP BAR: Sign in / register or user drop down and notification alerts ::: -->
			<div id='header_bar' class='clearfix'>
				<div class='main_width'>
					
					<div id='user_navigation' class='not_logged_in'>
							
							<ul class='ipsList_inline right'>
								<li>
									<span class='services'>
										
											<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=facebook'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/facebook.png' alt='Log in with Facebook' /></a>
										
										
											<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=twitter'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/twitter.png' alt='Log in with Twitter' /></a>
										
										
									</span>
									&nbsp;&nbsp;&nbsp;&nbsp;
									<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login' title='Sign In' id='sign_in'>Sign In</a>&nbsp;&nbsp;&nbsp;
								</li>
								<li>
									<a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=register" title='Create Account' id='register_link'>Create Account</a>
								</li>
							</ul>
						</div>
				</div>
			</div>
			<!-- ::: BRANDING STRIP: Logo and search box ::: -->
			<div id='branding'>
				<div class='main_width'>
					<div id='logo'>
						
							<a href='http://forums.phpfreaks.com' title='Go to community index' rel="home" accesskey='1'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/logo.png' alt='Logo' /></a>
						
					</div>
					
						<div id='search' class='right'>
	<form action="http://forums.phpfreaks.com/index.php?app=core&amp;module=search&amp;do=search&amp;fromMainBar=1" method="post" id='search-box' >
		<fieldset>
			<label for='main_search' class='hide'>Search</label>
			<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=search&amp;search_in=forums' title='Advanced Search' accesskey='4' rel="search" id='adv_search' class='right'>Advanced</a>
			<span id='search_wrap' class='right'>
				<input type='text' id='main_search' name='search_term' class='inactive' size='17' tabindex='100' />
				<span class='choice ipbmenu clickable' id='search_options' style='display: none'></span>
				<ul id='search_options_menucontent' class='ipbmenu_content ipsPad' style='display: none'>
					<li class='title'><strong>Search section:</strong></li>
					<li class='special'>
							<label for='s_topic' title='This topic'>
								<input type='radio' name='search_app' value="forums:topic:282648" class='input_radio' id='s_topic' checked="checked" /><strong>This topic</strong>
							</label>
						</li>
					
					
					<li class='app'><label for='s_forums' title='Forums'><input type='radio' name='search_app' class='input_radio' id='s_forums' value="forums"  />Forums</label></li>
					<li class='app'><label for='s_members' title='Members'><input type='radio' name='search_app' class='input_radio' id='s_members' value="members"  />Members</label></li>
					<li class='app'><label for='s_core' title='Help Files'><input type='radio' name='search_app' class='input_radio' id='s_core' value="core"  />Help Files</label></li>
					
						
					

						
					

						
					

						<li class='app'>
								<label for='s_ccs' title='Pages'>
									<input type='radio' name='search_app' class='input_radio' id='s_ccs' value="ccs"  />Pages
								</label>
							</li>
					

						
					
				</ul>
				<input type='submit' class='submit_input clickable' value='Search' />
			</span>
			
		</fieldset>
	</form>
</div>
					
				</div>
			</div>
			<!-- ::: APPLICATION TABS ::: -->
			<div id='primary_nav' class='clearfix'>
				<div class='main_width'>
					<ul class='ipsList_inline' id='community_app_menu'>
						
							<li class='right'>
								<a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=navigation&amp;inapp=forums" rel="quickNavigation" accesskey='9' id='quickNavLaunch' title='Open Quick Navigation'><span>&nbsp;</span></a>
							</li>
						
						<li id='nav_explore' class='right'>
							<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=search&amp;do=viewNewContent&amp;search_app=forums' accesskey='2'>View New Content</a>
						</li>
						
						
								
		
			
				
										
				

										
				

										
				

										
				
			
			
		

			
				
										
				

										
				

										
				

										
				
			
			<li id='nav_app_forums' class="left active"><a href='http://forums.phpfreaks.com/' title='Go to Forums' >Forums</a></li>
		

			
				
										
				

										
				

										
				

										
				
			
			<li id='nav_app_members' class="left "><a href='http://forums.phpfreaks.com/members/' title='Go to Members' >Members</a></li>
		

			
				
										
				

										
				

										
				

										
				
			
			
		
	
	
		
						<li id='nav_menu_3' class="left  ">
					<a id='nav_menu_3_trigger' href='http://www.phpfreaks.com/page/irc-live-chat' title='Come chat with us in IRC&#33;' >Chat </a>
					
					
				</li>
		

						
		

						<li id='nav_menu_5' class="left  ">
					<a id='nav_menu_5_trigger' href='http://www.phpfreaks.com/page/rules-and-terms-of-service' title='Site Rules and Terms of Service' >Rules and ToS </a>
					
					
				</li>
		

						
		
	
						
						<li id='nav_other_apps' style='display: none'>
							<a href='#' class='ipbmenu' id='more_apps'>More <img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/useropts_arrow.png' /></a>
						</li>
					</ul>
				</div>
			</div>	
			
			<!-- ::: MAIN CONTENT AREA ::: -->
			<div id='content' class='clearfix'>
				<!-- ::: NAVIGATION BREADCRUMBS ::: -->
				<div id='secondary_navigation' class='clearfix'>
						<ol class='breadcrumb top ipsList_inline left'>
														<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
									<a href='http://forums.phpfreaks.com/' itemprop="url">
										<span itemprop="title">PHP Freaks</span>
									</a>
								</li>
								
							
								<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
									<span class='nav_sep'>&rarr;</span>
									 <a href='http://forums.phpfreaks.com/forum/3-php-coding/' title='Return to PHP Coding' itemprop="url"><span itemprop="title">PHP Coding</span></a>
								</li>
								
							

								<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
									<span class='nav_sep'>&rarr;</span>
									 <a href='http://forums.phpfreaks.com/forum/13-php-coding-help/' title='Return to PHP Coding Help' itemprop="url"><span itemprop="title">PHP Coding Help</span></a>
								</li>
								
							
						</ol>
					</div>
					<br />
				<noscript>
					<div class='message error'>
						<strong>Javascript Disabled Detected</strong>
						<p>You currently have javascript disabled. Several functions may not work. Please re-enable javascript to access full functionality.</p>
					</div>
					<br />
				</noscript>
				<!-- ::: CONTENT ::: -->
				
					<div class='ipsAd'><script type="text/javascript"><!--
google_ad_client = "ca-pub-8794381281316343";
/* PHP Freaks forums */
google_ad_slot = "9136654976";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
				
				

<script type="text/javascript">
//<![CDATA[
	ipb.topic.inSection    = 'topicview';
	ipb.topic.topic_id     = 282648;
	ipb.topic.forum_id     = 13;
	ipb.topic.redirectPost = 1;
	ipb.topic.start_id     = 0;
	ipb.topic.page_id      = 0;
	ipb.topic.topPid       = 0;
	ipb.topic.counts       = { postTotal: 17,
							  curStart:  ipb.topic.start_id,
							  perPage:   20 };
	//Search Setup
	ipb.vars['search_type']			= 'forum';
	ipb.vars['search_type_id']		= 13;
	ipb.vars['search_type_2']		= 'topic';
	ipb.vars['search_type_id_2']	= 282648;
	
	
	// Delete stuff set up
	ipb.topic.deleteUrls['hardDelete'] = new Template( ipb.vars['base_url'] + "app=forums&module=moderate&section=moderate&do=04&f=13&t=282648&page=&auth_key=880ea6a14ea49e853634fbdc5015a024&p=#{pid}" );
	ipb.topic.deleteUrls['softDelete'] = new Template( ipb.vars['base_url'] + "app=forums&module=moderate&section=moderate&do=postchoice&tact=sdelete&t=282648&f=13&auth_key=880ea6a14ea49e853634fbdc5015a024&selectedpids[#{pid}]=#{pid}&pid=#{pid}" );
	
	
	ipb.topic.modPerms	  = [];
	
	
	ipb.templates['post_moderation'] = new Template("<div id='comment_moderate_box' class='ipsFloatingAction' style='display: none'><span class='desc'>With <span id='comment_count'>#{count}</span> checked posts: </span><select id='tactInPopup' class='input_select'><option value='approve'>Approve</option><option value='delete'>Hide</option><option value='sundelete'>Unhide</option><option value='deletedo'>Delete</option><option value='merge'>Merge</option><option value='split'>Split</option><option value='move'>Move</option></select>&nbsp;&nbsp;<input type='button' class='input_submit' id='submitModAction' value='Go' /></div>");
	
//]]>
</script>





	<a href='http://forums.phpfreaks.com/user/58158-drisate/' class='ipsUserPhotoLink left'>

<img src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' alt='Photo' class='ipsUserPhoto ipsUserPhoto_medium' />

	</a>

<div itemscope itemtype="http://schema.org/Article" class='ipsBox_withphoto'>
	
	<h1 itemprop="name" class='ipsType_pagetitle'>Fast tree</h1>
	<div class='desc lighter blend_links'>
		 Started by <span itemprop="creator"><a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a></span>, <span itemprop="dateCreated" datetime="2013-10-02">Oct 02 2013 09:50 AM</span>
	</div>
	
	<meta itemprop="interactionCount" content="UserComments:17" />
</div>
<br />
<div class='post post_block feature_box entry-content'>
	
	<a itemprop="url" href="http://forums.phpfreaks.com/user/58158-drisate/" title="View Profile: drisate" class='ipsUserPhotoLink'>
	
	<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' class='ipsUserPhoto ipsUserPhoto_medium left' />
	
	</a>
	
	<div class="ipsBox_withphoto">
	<p class='ipsType_sectiontitle'>
		<span class='ipsBadge ipsBadge_green'>Best Answer</span>
		<a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a>,
		
				<a href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452471'>03 October 2013 - 01:59 PM</a>
			
	</p>
	<p class='ipsPad_top desc'>
		<p>Ok i finaly got this to work and it's VERY VERY VERY fast compare to what i was doing previously.</p>
<p>&nbsp;</p>
<p><pre class='prettyprint'>
</p>
<p>// Create the page array</p>
<p>// FROM: http&#58;//www.tommylacroix.com/2008/09/10/php-design-pattern-building-a-tree/</p>
<p>// Thx !<br>
function mapTree($dataset) {<br>
&nbsp;&nbsp; &nbsp;$tree = array();<br>
&nbsp;&nbsp; &nbsp;foreach ($dataset as $id=&gt;&amp;$node) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ($node['parent'] === null) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$tree[$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} else {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (!isset($dataset[$node['parent']]['children'])) $dataset[$node['parent']]['children'] = array();<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$dataset[$node['parent']]['children'][$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;return $tree;<br>
}<br><br>
// Start the page tree view<br>
function page_treeview(){<br><br>
&nbsp;&nbsp;&nbsp; // Retreive all pages of the DB and formating it for mapTree()<br>
&nbsp;&nbsp;&nbsp; $pages = mysql_query("SELECT id, parent, titre FROM pages"); $t=0;<br>
&nbsp;&nbsp;&nbsp; while($page = mysql_fetch_array($pages)){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][name] = $page[titre];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][parent] = $page[parent];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][id] = $page[id];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $t++;<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp; // Creating the recursive page array<br>
&nbsp;&nbsp;&nbsp; $pages = mapTree($tree,"0");<br><br>
&nbsp;&nbsp;&nbsp; // Looping the first level<br>
&nbsp;&nbsp;&nbsp; if($pages[0][children]){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;ul class="menu-tree accordion dark strips"&gt;'; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach($pages[0][children] as $page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($page[parent]=='0'){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;li&gt;'.$page[name];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($page[children]){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($page[children]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;/ul&gt;';<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br>
}<br><br>
// Recursive function<br>
function page_enfant($sub_page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp; echo "\n".'&lt;ul&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach ($sub_page as $child){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "\n".'&lt;li&gt;'.$child[name];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($child[children]){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($child[children]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;'."\n";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp; echo '&lt;/ul&gt;'."\n";<br>
}</p>
<p>&nbsp;</p>
<p>// How to use??</p>
<p>echo page_treeview();</p>
<p>
</pre></p>
<p>&nbsp;</p>
<p>This code will generate a &lt;ul&gt;&lt;li&gt; infinite tree structure in only one SQL line</p>
<p>I hope it helps</p>

		
				<a href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452471'>
			
			<span class='ipsBadge has_icon ipsBadge_lightgrey'>Go to the full post <img class='icon' src="http://forums.phpfreaks.com/public/style_images/phpfreaks/right_white_10px.png"></span></a>
	</p>
	</div>
</div>


<br />
<div class='topic_controls'>
	
	


	<ul class='topic_buttons'>
			<li class='disabled'><span>Please log in to reply</span></li>
			
			
		</ul>
</div>

<div class='maintitle clear clearfix'>
	<span class='ipsType_small'>
		16 replies to this topic
	</span>
	
</div>

<div class='topic hfeed clear clearfix'>
	
	

	<div class='ipsBox'>
		<div class='ipsBox_container' id='ips_Posts'>
			
				<!--post:1452243-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452243'>
		<a id='entry1452243'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452243' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452243' rel='bookmark' title='Fast tree: post #1'>
					
					#1
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #1' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">drisate</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/58158-drisate/" title="View Profile: drisate" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			796 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T14:50:29+00:00">02 October 2013 - 09:50 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>Hey guys i have a database of 2800 items that needs to be displayed inside a colaseble tree systeme. I am having a very big speed issue ... At the moment my code works with 2 fonctions in a recursive way. The page can take up to 50 seconds to load and it uses a lot of the servers CPU. I need to find an other way of doing it ...</p>
<p>&nbsp;</p>
<p><pre class='prettyprint'>
</p>
<p>&lt;?php</p>
<p>function page_treeview(){GlOBAL $_SESSION;<br>
&nbsp;&nbsp;&nbsp; $select_page = mysql_query("SELECT * FROM pages WHERE parent='0' order by ordre asc") or die(mysql_error()); &nbsp;<br>
&nbsp;&nbsp;&nbsp; if($select_page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;form method="POST" id="ajaxform" class="load_form"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ul class="menu-tree accordion dark strips"&gt;'; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while ($list_page = mysql_fetch_array($select_page))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" id="category-'.$list_page[id].'" /&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;label for="category-'.$list_page[id].'"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;id='.$list_page[id].'&amp;pid='.$list_page[parent].'\'" class="icon-edit-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;del='.$list_page[id].'\'" class="icon-remove-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;id='.$list_page[id].'&amp;pid='.$list_page[parent].'&amp;action=add\'" class="icon-plus-sign-alt"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '.$list_page[titre].'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;span class="notification"&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/label&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($list_page[id]);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;/ul&gt;&lt;br&gt;&lt;input type="submit" value="Sauvegarder l\'ordre" name="saveordre"&gt;&lt;/form&gt;';<br>
&nbsp;&nbsp;&nbsp; }<br>
}<br><br>
function page_enfant($parent, $level = 1){<br>
&nbsp;&nbsp;&nbsp; $select_page_enfant = mysql_query("SELECT * FROM pages WHERE parent ='$parent' order by ordre asc") or die(mysql_error());<br>
&nbsp;&nbsp;&nbsp; if(mysql_num_rows($select_page_enfant)!='')<br>
&nbsp;&nbsp;&nbsp; {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $selectparent = mysql_fetch_array(mysql_query("SELECT * FROM pages WHERE id='$parent'"));<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "\n".'&lt;ul&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while ($list_page_enfant = mysql_fetch_array($select_page_enfant)) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $selectparent = mysql_fetch_array(mysql_query("SELECT * FROM pages WHERE id='$list_page_enfant[id]'"));<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "\n".'&lt;li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" id="category-'.$list_page_enfant[id].'" /&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;label for="category-'.$list_page_enfant[id].'"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-edit-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-remove-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-plus-sign-alt"&gt;&lt;/i&gt; '.$list_page_enfant[titre].'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;span class="notification"&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/label&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($list_page_enfant[id], $level+1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;'."\n";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;/ul&gt;'."\n";<br>
&nbsp;&nbsp;&nbsp; }<br>
}</p>
<p>&nbsp;</p>
<p>echo page_treeview();</p>
<p>?&gt;</p>
<p>&nbsp;</p>
<p>
</pre></p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452243'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452243" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452243', { domLikeStripId: 'like_post_1452243', app: 'forums', type: 'pid', typeid: '1452243' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="58158">
	
	<strong class='bbc'><a href='http://www.VersatileBB.com' class='bbc_url' title='External link' rel='external'>www.VersatileBB.com</a> - Open Source Board</strong><br />
Easy to use and modify board for your website. A very good alt to all those to much&nbsp; popular boards
</div>
				
				
				
			
				<ul id='postControlsNormal_1452243' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
			<script type="text/javascript"><!--
google_ad_client = "ca-pub-8794381281316343";
/* 468x60, created 10/2/10 - PHP Freaks Update */
google_ad_slot = "1560263540";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
		
<script type="text/javascript">
var pid = parseInt(1452243);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452243') )
	{
		$('multiq_1452243').show();
	}
	
	if( $('toggle_post_1452243') )
	{
		$('toggle_post_1452243').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452243] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452269-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452269'>
		<a id='entry1452269'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452269' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452269' rel='bookmark' title='Fast tree: post #2'>
					
					#2
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #2' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">drisate</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/58158-drisate/" title="View Profile: drisate" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			796 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T17:00:06+00:00">02 October 2013 - 12:00 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>I think i am up to something .... but it's not working yet as expected .... The parent = 0 loops well but then everything under breaks.</p>
<p>&nbsp;</p>
<p><pre class='prettyprint'>
function mapTree($dataset) {<br>
&nbsp;&nbsp; &nbsp;$tree = array();<br>
&nbsp;&nbsp; &nbsp;foreach ($dataset as $id=&gt;&amp;$node) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ($node['parent'] === null) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$tree[$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} else {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (!isset($dataset[$node['parent']]['children'])) $dataset[$node['parent']]['children'] = array();<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$dataset[$node['parent']]['children'][$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;return $tree;<br>
}<br><br>
// Liste des pages<br>
function page_treeview(){GlOBAL $_SESSION;<br><br>
&nbsp;&nbsp;&nbsp; $pages = mysql_query("SELECT id, parent, titre FROM pages"); $t=0;<br>
&nbsp;&nbsp;&nbsp; while($page = mysql_fetch_array($pages)){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][name] = $page[titre];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][parent] = $page[parent];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][id] = $page[id];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $t++;<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br><br>
&nbsp;&nbsp;&nbsp; $pages = mapTree($tree,"0");<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp; if($pages[0][children]){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;form method="POST" id="ajaxform" class="load_form"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ul class="menu-tree accordion dark strips"&gt;'; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach($pages[0][children] as $page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($page[parent]=='0'){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" id="category-'.$page[id].'" /&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;label for="category-'.$page[id].'"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;id='.$page[id].'&amp;pid='.$page[parent].'\'" class="icon-edit-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;del='.$page[id].'\'" class="icon-remove-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;id='.$page[id].'&amp;pid='.$page[parent].'&amp;action=add\'" class="icon-plus-sign-alt"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '.$page[name].'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;span class="notification"&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/label&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($page[id], $pages);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;/ul&gt;&lt;br&gt;&lt;input type="submit" value="Sauvegarder l\'ordre" name="saveordre"&gt;&lt;/form&gt;';<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br>
}<br><br><br><br>
function page_enfant($parent, $pages, $level = 1){<br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "\n".'&lt;ul&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach($pages[0][children][$parent] as $page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "\n".'&lt;li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" id="category-'.$page[id].'" /&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;label for="category-'.$page[id].'"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-edit-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-remove-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-plus-sign-alt"&gt;&lt;/i&gt; '.$page[name].'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;span class="notification"&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/label&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($page[id], $level+1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;'."\n";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;/ul&gt;'."\n";<br><br>
}
</pre></p>
<p>&nbsp;</p>
<p>The problem seems to come from the page_enfant function. I not sure how i can loop the $pages var ...</p>
<p>&nbsp;</p>
<p>Array dump sample can be found at </p><pre  class="prettyprint linenums:0">http&#58;// pastie.org/8372608</pre>Link broken so it's not public
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452269'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452269" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452269', { domLikeStripId: 'like_post_1452269', app: 'forums', type: 'pid', typeid: '1452269' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="58158">
	
	<strong class='bbc'><a href='http://www.VersatileBB.com' class='bbc_url' title='External link' rel='external'>www.VersatileBB.com</a> - Open Source Board</strong><br />
Easy to use and modify board for your website. A very good alt to all those to much&nbsp; popular boards
</div>
				
				
				
			
				<ul id='postControlsNormal_1452269' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452269);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452269') )
	{
		$('multiq_1452269').show();
	}
	
	if( $('toggle_post_1452269') )
	{
		$('toggle_post_1452269').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452269] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452273-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452273'>
		<a id='entry1452273'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452273' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452273' rel='bookmark' title='Fast tree: post #3'>
					
					#3
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #3' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="32104" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/32104-psycho/' title='View Profile'><span itemprop="name">Psycho</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Psycho</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/32104-psycho/" title="View Profile: Psycho" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/398431b2f478a346a01365c3d505225a?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			10,714 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Canada</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T17:09:42+00:00">02 October 2013 - 12:09 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>NEVER run queries in loops unless absolutely necessary - and this isn't necessary. You need to JOIN the tables to get all the data you need in one query. I'll take a look and post back.</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452273'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452273" class='ipsLikeBar_info' >
							<a hovercard-ref="member" hovercard-id="38683" data-ipb="noparse" class="_hovertrigger url fn name  " href='http://forums.phpfreaks.com/user/38683-kevinm1/' title='View Profile'><span itemprop="name">KevinM1</span></a> likes this
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452273', { domLikeStripId: 'like_post_1452273', app: 'forums', type: 'pid', typeid: '1452273' }, parseInt('1') );
</script>
				
								
				
					<div class="signature" data-memberid="32104">
	
	<strong class='bbc'>The quality of the responses received is <span class='bbc_underline'>directly</span> proportional to the quality of the question asked.</strong><br />
<br />
I do not always test the code I provide, so there may be some syntax errors. In 99% of all cases I found the solution to your problem here: <a href='http://www.php.net' class='bbc_url' title='External link' rel='external'>http://www.php.net</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1452273' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452273);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452273') )
	{
		$('multiq_1452273').show();
	}
	
	if( $('toggle_post_1452273') )
	{
		$('toggle_post_1452273').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452273] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452276-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452276'>
		<a id='entry1452276'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452276' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452276' rel='bookmark' title='Fast tree: post #4'>
					
					#4
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #4' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="32104" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/32104-psycho/' title='View Profile'><span itemprop="name">Psycho</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Psycho</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/32104-psycho/" title="View Profile: Psycho" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/398431b2f478a346a01365c3d505225a?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			10,714 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Canada</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T17:34:19+00:00">02 October 2013 - 12:34 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>A couple other points.</p>
<p>&nbsp;</p>
<p>1. You are calling the parent function with an ech0, but the functions themselves are echoing content. The functions should return the content.</p>
<p>&nbsp;</p>
<p>2. You use GLOBAL $_SESSION in the functions. The $_SESSION variable is global by default.</p>
<p>&nbsp;</p>
<p>3. You are referencing array values with a non-numeric index that is not enclosed in quotes. That will work but is very inefficient since the PHP parser will first look for a constant of that name then, if that doesn't exist, it will then treat it as a text.</p>
<p>&nbsp;</p>
<p>As to your problem, I see it has many levels. There are numerous articles about handling Hierarchical data in queries. But, that aside, you can get all the data with a greatly reduced number of queries. First query all the records at the parent level. Then query ALL the records at the next level instead of getting the child records for each parent individually.</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452276'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452276" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452276', { domLikeStripId: 'like_post_1452276', app: 'forums', type: 'pid', typeid: '1452276' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="32104">
	
	<strong class='bbc'>The quality of the responses received is <span class='bbc_underline'>directly</span> proportional to the quality of the question asked.</strong><br />
<br />
I do not always test the code I provide, so there may be some syntax errors. In 99% of all cases I found the solution to your problem here: <a href='http://www.php.net' class='bbc_url' title='External link' rel='external'>http://www.php.net</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1452276' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452276);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452276') )
	{
		$('multiq_1452276').show();
	}
	
	if( $('toggle_post_1452276') )
	{
		$('toggle_post_1452276').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452276] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452278-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452278'>
		<a id='entry1452278'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452278' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452278' rel='bookmark' title='Fast tree: post #5'>
					
					#5
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #5' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="164783" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/164783-vinny42/' title='View Profile'><span itemprop="name">vinny42</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">vinny42</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/164783-vinny42/" title="View Profile: vinny42" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-164783.jpg?_r=1378709756' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			414 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T17:37:48+00:00">02 October 2013 - 12:37 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p></p><blockquote  class="ipsBlockquote"><br><p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">&nbsp;You need to JOIN the tables to get all the data you need in one query. I'll take a look and post back.</span></p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif"></span></p></blockquote>
<p>&nbsp;</p>
<p>You can't do recursion in a join.</p>
<p>&nbsp;</p>
<p>You could argue that the recursion could be done in PHP, if the entire tree has to be loaded (and can be loaded) into memory.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>But my first thought would be why the query does a SELECT *, and if there is an index on the columns used in the WHERE clause.</p>
<p>50 seconds is bizarly slow for a maximum of 2800 queries no matter what you do.</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452278'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452278" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452278', { domLikeStripId: 'like_post_1452278', app: 'forums', type: 'pid', typeid: '1452278' }, parseInt('0') );
</script>
				
								
				
				
				
			
				<ul id='postControlsNormal_1452278' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452278);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452278') )
	{
		$('multiq_1452278').show();
	}
	
	if( $('toggle_post_1452278') )
	{
		$('toggle_post_1452278').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452278] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452284-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452284'>
		<a id='entry1452284'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452284' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452284' rel='bookmark' title='Fast tree: post #6'>
					
					#6
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #6' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">drisate</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/58158-drisate/" title="View Profile: drisate" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			796 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T17:46:55+00:00">02 October 2013 - 12:46 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>Thanks for your interest in my problem.</p>
<p>&nbsp;</p>
<p>Using a recursive function or joining in SQL usually are the most common ways for creating tree structures. Both these solutions are of exponential time complexity <a href='http://www.wolframalpha.com/input/?i=plot+2%5EO%28n%29' class='bbc_url' title='External link' rel='external'>2<sup>O(n)</sup></a> and therefore very expensive in computational time. For every element you add to the dataset the computational time theoretically doubles.<br><br>
My problem commes from <span>page_enfant</span>(). it's not completing the loop. On my last version. I am performing only one SQL query and i am using the result to performe my loops instead of my first version where i query the database on every loops almost 3 times.</p>

					
					<br />
					<p class='edit'>
							<strong>Edited by drisate, 02 October 2013 - 12:54 PM.</strong>
							
						</p>
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452284'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452284" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452284', { domLikeStripId: 'like_post_1452284', app: 'forums', type: 'pid', typeid: '1452284' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="58158">
	
	<strong class='bbc'><a href='http://www.VersatileBB.com' class='bbc_url' title='External link' rel='external'>www.VersatileBB.com</a> - Open Source Board</strong><br />
Easy to use and modify board for your website. A very good alt to all those to much&nbsp; popular boards
</div>
				
				
				
			
				<ul id='postControlsNormal_1452284' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452284);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452284') )
	{
		$('multiq_1452284').show();
	}
	
	if( $('toggle_post_1452284') )
	{
		$('toggle_post_1452284').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452284] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452296-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452296'>
		<a id='entry1452296'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452296' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452296' rel='bookmark' title='Fast tree: post #7'>
					
					#7
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #7' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">drisate</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/58158-drisate/" title="View Profile: drisate" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			796 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T18:12:40+00:00">02 October 2013 - 01:12 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>I posted my pages table here <b><a href='http://tinyurl.com/drisate' class='bbc_url' title='External link' rel='external'>http://tinyurl.com/drisate</a></b>.</p>
<p>( it's 110 Mo ... )</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452296'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452296" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452296', { domLikeStripId: 'like_post_1452296', app: 'forums', type: 'pid', typeid: '1452296' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="58158">
	
	<strong class='bbc'><a href='http://www.VersatileBB.com' class='bbc_url' title='External link' rel='external'>www.VersatileBB.com</a> - Open Source Board</strong><br />
Easy to use and modify board for your website. A very good alt to all those to much&nbsp; popular boards
</div>
				
				
				
			
				<ul id='postControlsNormal_1452296' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452296);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452296') )
	{
		$('multiq_1452296').show();
	}
	
	if( $('toggle_post_1452296') )
	{
		$('toggle_post_1452296').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452296] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452303-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452303'>
		<a id='entry1452303'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452303' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452303' rel='bookmark' title='Fast tree: post #8'>
					
					#8
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #8' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="124404" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/124404-kicken/' title='View Profile'><span itemprop="name">kicken</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">kicken</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Wiser? Not exactly.</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/124404-kicken/" title="View Profile: kicken" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-124404.png?_r=1359272020' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,643 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Bonita, FL</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T19:07:18+00:00">02 October 2013 - 02:07 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<a href='http://tech.vg.no/2011/10/31/building-tree-structures-in-php-using-references/' class='bbc_url' title='External link' rel='external'>Building Tree Structures in PHP Using References</a> - Read that.<br><br>Basically you<br>a) Select everything you need in just one query. Make sure parents come before any of their children<br>b) As you loop the results you maintain two arrays. One containing the tree structure, and a second which is a simple ID =&gt; array map. These arrays are connected via a reference.
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452303'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452303" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452303', { domLikeStripId: 'like_post_1452303', app: 'forums', type: 'pid', typeid: '1452303' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="124404">
	
	<a href='http://cdrecyclingcenter.org/' class='bbc_url' title='External link' rel='external'>Recycle your old CD&#39;s</a>, don&#39;t trash them&#33;<br />Did I help you out?  Feeling generous? I accept tips via <a href='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=ZLE5XD6TL5F2N' class='bbc_url' title='External link' rel='external'>Paypal</a> or Bitcoin @ <strong class='bbc'>14mDxaob8Jgdg52scDbvf3uaeR61tB2yC7</strong>
</div>
				
				
				
			
				<ul id='postControlsNormal_1452303' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452303);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452303') )
	{
		$('multiq_1452303').show();
	}
	
	if( $('toggle_post_1452303') )
	{
		$('toggle_post_1452303').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452303] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452306-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452306'>
		<a id='entry1452306'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452306' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452306' rel='bookmark' title='Fast tree: post #9'>
					
					#9
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #9' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="164783" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/164783-vinny42/' title='View Profile'><span itemprop="name">vinny42</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">vinny42</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/164783-vinny42/" title="View Profile: vinny42" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-164783.jpg?_r=1378709756' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			414 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T19:12:34+00:00">02 October 2013 - 02:12 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif"></span></p><p></p><blockquote  class="ipsBlockquote"></blockquote>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">Both these solutions are of exponential time complexity&nbsp;</span><a href='http://www.wolframalpha.com/input/?i=plot+2%5EO%28n%29' class='bbc_url' title='External link' rel='external'>2<sup>O(n)</sup></a><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">&nbsp;and therefore very expensive in computational time. For every element you add to the dataset the computational time theoretically doubles.</span></p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif"></span></p>
<p>
Except that it doesn't.</p>
<p>&nbsp;</p>
<p></p><blockquote  class="ipsBlockquote"><br><p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">My problem commes from&nbsp;</span><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">page_enfant</span><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">(). it's not completing the loop. On my last version. I am performing only one SQL query and i am using the result to performe my loops instead of my first version where i query the database on every loops almost 3 times.</span></p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif"></span></p></blockquote>
<p>&nbsp;</p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">Are you sure you look for children, and not for parents?</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p></p><blockquote  class="ipsBlockquote"><br><p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">Make sure parents come before any of their children</span></p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif"></span></p></blockquote>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>How would you do that, given that you don't know which records are children of which others before you fetch them?</p>
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452306'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452306" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452306', { domLikeStripId: 'like_post_1452306', app: 'forums', type: 'pid', typeid: '1452306' }, parseInt('0') );
</script>
				
								
				
				
				
			
				<ul id='postControlsNormal_1452306' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452306);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452306') )
	{
		$('multiq_1452306').show();
	}
	
	if( $('toggle_post_1452306') )
	{
		$('toggle_post_1452306').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452306] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452307-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452307'>
		<a id='entry1452307'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452307' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452307' rel='bookmark' title='Fast tree: post #10'>
					
					#10
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #10' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="32104" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/32104-psycho/' title='View Profile'><span itemprop="name">Psycho</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">Psycho</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/32104-psycho/" title="View Profile: Psycho" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://www.gravatar.com/avatar/398431b2f478a346a01365c3d505225a?s=100&amp;d=http%3A%2F%2Fforums.phpfreaks.com%2Fpublic%2Fstyle_images%2Fphpfreaks%2Fprofile%2Fdefault_large.png' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			10,714 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Canada</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T19:18:24+00:00">02 October 2013 - 02:18 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<blockquote  class="ipsBlockquote" data-author="vinny42" data-cid="1452278" data-time="1380735468">
<div>
<p>You can't do recursion in a join.</p>
</div>
</blockquote>
<p>&nbsp;</p>
<p>I didn't realize in my initial post that there were multiple levels of children.</p>

					
					<br />
					<p class='edit'>
							<strong>Edited by Psycho, 02 October 2013 - 02:18 PM.</strong>
							
						</p>
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452307'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452307" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452307', { domLikeStripId: 'like_post_1452307', app: 'forums', type: 'pid', typeid: '1452307' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="32104">
	
	<strong class='bbc'>The quality of the responses received is <span class='bbc_underline'>directly</span> proportional to the quality of the question asked.</strong><br />
<br />
I do not always test the code I provide, so there may be some syntax errors. In 99% of all cases I found the solution to your problem here: <a href='http://www.php.net' class='bbc_url' title='External link' rel='external'>http://www.php.net</a>
</div>
				
				
				
			
				<ul id='postControlsNormal_1452307' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452307);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452307') )
	{
		$('multiq_1452307').show();
	}
	
	if( $('toggle_post_1452307') )
	{
		$('toggle_post_1452307').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452307] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452308-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452308'>
		<a id='entry1452308'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452308' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452308' rel='bookmark' title='Fast tree: post #11'>
					
					#11
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #11' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="124404" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/124404-kicken/' title='View Profile'><span itemprop="name">kicken</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">kicken</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Wiser? Not exactly.</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/124404-kicken/" title="View Profile: kicken" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-124404.png?_r=1359272020' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,643 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Bonita, FL</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T19:19:59+00:00">02 October 2013 - 02:19 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<blockquote  class="ipsBlockquote" data-author="vinny42" data-cid="1452306" data-time="1380741154"><p>How would you do that, given that you don't know which records are children of which others before you fetch them?</p></blockquote><br>There may be ways, depends on the data in question. For example my menu system has an added-on date attached to each node. Unless someone decided to go in an manually fiddle around in the DB vs using the menu management interface, the parent's will always have been added before their children so a simple ORDER BY addedOn works.<br><br>If it's truly not possibly at the SQL level to do such ordering, you can extend the PHP processing to handle it. It's simply easier if you can assume parents always come first.
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452308'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452308" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452308', { domLikeStripId: 'like_post_1452308', app: 'forums', type: 'pid', typeid: '1452308' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="124404">
	
	<a href='http://cdrecyclingcenter.org/' class='bbc_url' title='External link' rel='external'>Recycle your old CD&#39;s</a>, don&#39;t trash them&#33;<br />Did I help you out?  Feeling generous? I accept tips via <a href='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=ZLE5XD6TL5F2N' class='bbc_url' title='External link' rel='external'>Paypal</a> or Bitcoin @ <strong class='bbc'>14mDxaob8Jgdg52scDbvf3uaeR61tB2yC7</strong>
</div>
				
				
				
			
				<ul id='postControlsNormal_1452308' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452308);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452308') )
	{
		$('multiq_1452308').show();
	}
	
	if( $('toggle_post_1452308') )
	{
		$('toggle_post_1452308').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452308] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452309-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452309'>
		<a id='entry1452309'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452309' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452309' rel='bookmark' title='Fast tree: post #12'>
					
					#12
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #12' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">drisate</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/58158-drisate/" title="View Profile: drisate" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			796 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T19:25:40+00:00">02 October 2013 - 02:25 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>I saw that link already. If you take a look at my seconde code i posted, thats teh function i am trying to use. But i am failing in the recuresive function. Can you show me an exemple of your "b" point?</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<blockquote  class="ipsBlockquote" data-author="drisate" data-cid="1452269" data-time="1380733206">
<div>
<p>&nbsp;</p>
<p>I think i am up to something .... but it's not working yet as expected .... The parent = 0 loops well but then everything under breaks.</p>
<p>&nbsp;</p>
<p><pre class='prettyprint'>
function mapTree($dataset) {<br>
&nbsp;&nbsp; &nbsp;$tree = array();<br>
&nbsp;&nbsp; &nbsp;foreach ($dataset as $id=&gt;&amp;$node) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ($node['parent'] === null) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$tree[$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} else {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (!isset($dataset[$node['parent']]['children'])) $dataset[$node['parent']]['children'] = array();<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$dataset[$node['parent']]['children'][$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;return $tree;<br>
}<br><br>
// Liste des pages<br>
function page_treeview(){GlOBAL $_SESSION;<br><br>
&nbsp;&nbsp;&nbsp; $pages = mysql_query("SELECT id, parent, titre FROM pages"); $t=0;<br>
&nbsp;&nbsp;&nbsp; while($page = mysql_fetch_array($pages)){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][name] = $page[titre];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][parent] = $page[parent];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][id] = $page[id];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $t++;<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br><br>
&nbsp;&nbsp;&nbsp; $pages = mapTree($tree,"0");<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp; if($pages[0][children]){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;form method="POST" id="ajaxform" class="load_form"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ul class="menu-tree accordion dark strips"&gt;'; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach($pages[0][children] as $page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($page[parent]=='0'){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" id="category-'.$page[id].'" /&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;label for="category-'.$page[id].'"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;id='.$page[id].'&amp;pid='.$page[parent].'\'" class="icon-edit-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;del='.$page[id].'\'" class="icon-remove-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;id='.$page[id].'&amp;pid='.$page[parent].'&amp;action=add\'" class="icon-plus-sign-alt"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '.$page[name].'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;span class="notification"&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/label&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($page[id], $pages);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;/ul&gt;&lt;br&gt;&lt;input type="submit" value="Sauvegarder l\'ordre" name="saveordre"&gt;&lt;/form&gt;';<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br>
}<br><br><br><br>
function page_enfant($parent, $pages, $level = 1){<br><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "\n".'&lt;ul&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach($pages[0][children][$parent] as $page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "\n".'&lt;li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" id="category-'.$page[id].'" /&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;label for="category-'.$page[id].'"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-edit-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-remove-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-plus-sign-alt"&gt;&lt;/i&gt; '.$page[name].'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;span class="notification"&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/label&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($page[id], $level+1);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;'."\n";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;/ul&gt;'."\n";<br><br>
}
</pre></p>
<p>&nbsp;</p>
<p>The problem seems to come from the page_enfant function. I not sure how i can loop the $pages var ...</p>
<p>&nbsp;</p>
<p>Array dump sample can be found at</p>
http:// pastie.org/8372608Link broken so it's not public
<p>&nbsp;</p>
</div>
</blockquote>
					
					<br />
					<p class='edit'>
							<strong>Edited by drisate, 02 October 2013 - 02:28 PM.</strong>
							
						</p>
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452309'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452309" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452309', { domLikeStripId: 'like_post_1452309', app: 'forums', type: 'pid', typeid: '1452309' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="58158">
	
	<strong class='bbc'><a href='http://www.VersatileBB.com' class='bbc_url' title='External link' rel='external'>www.VersatileBB.com</a> - Open Source Board</strong><br />
Easy to use and modify board for your website. A very good alt to all those to much&nbsp; popular boards
</div>
				
				
				
			
				<ul id='postControlsNormal_1452309' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452309);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452309') )
	{
		$('multiq_1452309').show();
	}
	
	if( $('toggle_post_1452309') )
	{
		$('toggle_post_1452309').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452309] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452311-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452311'>
		<a id='entry1452311'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452311' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452311' rel='bookmark' title='Fast tree: post #13'>
					
					#13
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #13' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="164783" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/164783-vinny42/' title='View Profile'><span itemprop="name">vinny42</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">vinny42</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/164783-vinny42/" title="View Profile: vinny42" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-164783.jpg?_r=1378709756' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			414 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T19:35:32+00:00">02 October 2013 - 02:35 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p></p><blockquote  class="ipsBlockquote"><br><p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">Unless someone decided to go in an manually fiddle around in the DB vs using the menu management interface</span></p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif"></span></p></blockquote>
<p>&nbsp;</p>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">Or a node has been moved using the interface :-)</span></p>
<p>&nbsp;</p>
<p></p><p></p><blockquote  class="ipsBlockquote"><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif">If it's truly not possibly at the SQL level to do such ordering, you can extend the PHP processing to handle it. It's simply easier if you can assume parents always come first.&nbsp;</span>
<p><span  style="color:rgb(40,40,40);font-family:helvetica, arial, sans-serif"></span></p></blockquote>
<p>&nbsp;</p>
<p>True, or you could skip all the PHP business and use a database that can do recursion and generate JSON that PHP only has to json_decode() to get the array :-)</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452311'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452311" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452311', { domLikeStripId: 'like_post_1452311', app: 'forums', type: 'pid', typeid: '1452311' }, parseInt('0') );
</script>
				
								
				
				
				
			
				<ul id='postControlsNormal_1452311' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452311);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452311') )
	{
		$('multiq_1452311').show();
	}
	
	if( $('toggle_post_1452311') )
	{
		$('toggle_post_1452311').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452311] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452322-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452322'>
		<a id='entry1452322'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452322' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452322' rel='bookmark' title='Fast tree: post #14'>
					
					#14
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #14' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="124404" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/124404-kicken/' title='View Profile'><span itemprop="name">kicken</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">kicken</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Wiser? Not exactly.</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/124404-kicken/" title="View Profile: kicken" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-124404.png?_r=1359272020' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style='color:green'>Gurus</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_extra/team_icons/phpf_guru.png' alt='' />
			
			</li>
		
		<li class='post_count desc lighter'>
			2,643 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
						<li>
							<span class='ft'>Location</span><span class='fc'>Bonita, FL</span>
						</li>
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T20:17:32+00:00">02 October 2013 - 03:17 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					Your page_enfant function is not designed properly. It always references the root using $pages[0][children] so it cannot go any deeper than one level.<br><br>The way it should be designed is to just accept a $page argument. It would output the li tag for the $page argument then foreach() over the ['children'] sub array for that page, calling itself once for each child.<br>&nbsp;<br><pre  class="prettyprint lang-auto linenums:0">function page_enfant($page){
  echo $page&#91;'name'];
  foreach ($page&#91;'children'] as $child){ 
     page_enfant($child);
  }
}
</pre>
					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452322'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452322" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452322', { domLikeStripId: 'like_post_1452322', app: 'forums', type: 'pid', typeid: '1452322' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="124404">
	
	<a href='http://cdrecyclingcenter.org/' class='bbc_url' title='External link' rel='external'>Recycle your old CD&#39;s</a>, don&#39;t trash them&#33;<br />Did I help you out?  Feeling generous? I accept tips via <a href='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=ZLE5XD6TL5F2N' class='bbc_url' title='External link' rel='external'>Paypal</a> or Bitcoin @ <strong class='bbc'>14mDxaob8Jgdg52scDbvf3uaeR61tB2yC7</strong>
</div>
				
				
				
			
				<ul id='postControlsNormal_1452322' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452322);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452322') )
	{
		$('multiq_1452322').show();
	}
	
	if( $('toggle_post_1452322') )
	{
		$('toggle_post_1452322').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452322] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452325-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452325'>
		<a id='entry1452325'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452325' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452325' rel='bookmark' title='Fast tree: post #15'>
					
					#15
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #15' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">drisate</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/58158-drisate/" title="View Profile: drisate" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			796 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-02T20:31:16+00:00">02 October 2013 - 03:31 PM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>I can't get your exemple to work ...</p>
<p>&nbsp;</p>
<p><pre class='prettyprint'>
function mapTree($dataset) {<br>
&nbsp;&nbsp; &nbsp;$tree = array();<br>
&nbsp;&nbsp; &nbsp;foreach ($dataset as $id=&gt;&amp;$node) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ($node['parent'] === null) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$tree[$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} else {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (!isset($dataset[$node['parent']]['children'])) $dataset[$node['parent']]['children'] = array();<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$dataset[$node['parent']]['children'][$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;return $tree;<br>
}<br><br>
// Liste des pages<br>
function page_treeview(){GlOBAL $_SESSION;<br><br>
&nbsp;&nbsp;&nbsp; $pages = mysql_query("SELECT id, parent, titre FROM pages"); $t=0;<br>
&nbsp;&nbsp;&nbsp; while($page = mysql_fetch_array($pages)){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][name] = $page[titre];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][parent] = $page[parent];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][id] = $page[id];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $t++;<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br><br>
&nbsp;&nbsp;&nbsp; $pages = mapTree($tree,"0");<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp; if($pages[0][children]){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;form method="POST" id="ajaxform" class="load_form"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ul class="menu-tree accordion dark strips"&gt;'; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach($pages[0][children] as $page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($page[parent]=='0'){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" id="category-'.$page[id].'" /&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;label for="category-'.$page[id].'"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;id='.$page[id].'&amp;pid='.$page[parent].'\'" class="icon-edit-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;del='.$page[id].'\'" class="icon-remove-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i onclick="location.href=\'index.php?mod=page&amp;id='.$page[id].'&amp;pid='.$page[parent].'&amp;action=add\'" class="icon-plus-sign-alt"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '.$page[name].'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;span class="notification"&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/label&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($page[id], $pages);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;/ul&gt;&lt;br&gt;&lt;input type="submit" value="Sauvegarder l\'ordre" name="saveordre"&gt;&lt;/form&gt;';<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br>
}<br><br>
function page_enfant($id, $page){<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp; echo "\n".'&lt;ul&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach ($page['children'] as $child){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "\n".'&lt;li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;input type="checkbox" id="category-'.$child[id].'" /&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;label for="category-'.$child[id].'"&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-edit-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-remove-sign"&gt;&lt;/i&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;i class="icon-plus-sign-alt"&gt;&lt;/i&gt; '.$child[name].'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;span class="notification"&gt;&lt;/span&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/label&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($child);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;'."\n";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp; echo '&lt;/ul&gt;'."\n";<br>
}
</pre></p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452325'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452325" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452325', { domLikeStripId: 'like_post_1452325', app: 'forums', type: 'pid', typeid: '1452325' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="58158">
	
	<strong class='bbc'><a href='http://www.VersatileBB.com' class='bbc_url' title='External link' rel='external'>www.VersatileBB.com</a> - Open Source Board</strong><br />
Easy to use and modify board for your website. A very good alt to all those to much&nbsp; popular boards
</div>
				
				
				
			
				<ul id='postControlsNormal_1452325' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452325);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452325') )
	{
		$('multiq_1452325').show();
	}
	
	if( $('toggle_post_1452325') )
	{
		$('toggle_post_1452325').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452325] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452449-->

<div class='post_block hentry clear clearfix  ' id='post_id_1452449'>
		<a id='entry1452449'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452449' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452449' rel='bookmark' title='Fast tree: post #16'>
					
					#16
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #16' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">drisate</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/58158-drisate/" title="View Profile: drisate" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			796 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-03T16:39:23+00:00">03 October 2013 - 11:39 AM</abbr>
					
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>* bump *</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452449'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452449" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452449', { domLikeStripId: 'like_post_1452449', app: 'forums', type: 'pid', typeid: '1452449' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="58158">
	
	<strong class='bbc'><a href='http://www.VersatileBB.com' class='bbc_url' title='External link' rel='external'>www.VersatileBB.com</a> - Open Source Board</strong><br />
Easy to use and modify board for your website. A very good alt to all those to much&nbsp; popular boards
</div>
				
				
				
			
				<ul id='postControlsNormal_1452449' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452449);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452449') )
	{
		$('multiq_1452449').show();
	}
	
	if( $('toggle_post_1452449') )
	{
		$('toggle_post_1452449').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452449] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			

				<!--post:1452471-->

<div class='post_block hentry clear clearfix solved ' id='post_id_1452471'>
		<a id='entry1452471'></a>
		
	
		
		<div class='post_wrap' >
			
				<h3 class='row2'>
			
				<span class='post_id right ipsType_small desc blend_links'>
					
						<a itemprop="replyToUrl" data-entry-pid='1452471' href='http://forums.phpfreaks.com/topic/282648-fast-tree/#entry1452471' rel='bookmark' title='Fast tree: post #17'>
					
					#17
					<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/icon_share.png' class='small' title='Fast tree: post #17' />
					</a>
				</span>
				
				
					<span itemprop="creator name" class="author vcard"><a hovercard-ref="member" hovercard-id="58158" data-ipb="noparse" class="_hovertrigger url fn name " href='http://forums.phpfreaks.com/user/58158-drisate/' title='View Profile'><span itemprop="name">drisate</span></a></span>
				
			
				
			</h3>
			<div class='author_info'>
				<div itemscope itemtype="http://schema.org/Person" class='user_details'>
	<span class='hide' itemprop="name">drisate</span>
	<ul class='basic_info'>
		
			<p class='desc member_title'>Advanced Member</p>
		
		<li class='avatar'>
				
				<a itemprop="url" href="http://forums.phpfreaks.com/user/58158-drisate/" title="View Profile: drisate" class='ipsUserPhotoLink'>
				
				
					<img itemprop="image" src='http://forums.phpfreaks.com/uploads/profile/photo-58158.17600_07944e1ab8cda5a7ce91e59072f780fc829c878d?_r=0' class='ipsUserPhoto ipsUserPhoto_large' />
				
				
				</a>
				
			</li>
		<li class='group_title'>
			<span style="color:#555">Members</span>
		</li>
		<li class='group_icon'>
			
				<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' /><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/bullet_black.png' alt='Pip' />
			
			</li>
		
		<li class='post_count desc lighter'>
			796 posts
		</li>
		
		
	</ul>
	
	
		<ul class='custom_fields'>
			
				
					
				

					
				
			
		</ul>
	
	
</div>
			</div>
			<div class='post_body'>
				<p class='posted_info desc lighter ipsType_small'>
					Posted <abbr class="published" itemprop="commentTime" title="2013-10-03T18:59:57+00:00">03 October 2013 - 01:59 PM</abbr>
					&nbsp; <span class='ipsBadge ipsBadge_green'>Best Answer</span>
				</p>
				
				<div itemprop="commentText" class='post entry-content '>
					<p>Ok i finaly got this to work and it's VERY VERY VERY fast compare to what i was doing previously.</p>
<p>&nbsp;</p>
<p><pre class='prettyprint'>
</p>
<p>// Create the page array</p>
<p>// FROM: http&#58;//www.tommylacroix.com/2008/09/10/php-design-pattern-building-a-tree/</p>
<p>// Thx !<br>
function mapTree($dataset) {<br>
&nbsp;&nbsp; &nbsp;$tree = array();<br>
&nbsp;&nbsp; &nbsp;foreach ($dataset as $id=&gt;&amp;$node) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if ($node['parent'] === null) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$tree[$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;} else {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;if (!isset($dataset[$node['parent']]['children'])) $dataset[$node['parent']]['children'] = array();<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;$dataset[$node['parent']]['children'][$id] = &amp;$node;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;}<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;return $tree;<br>
}<br><br>
// Start the page tree view<br>
function page_treeview(){<br><br>
&nbsp;&nbsp;&nbsp; // Retreive all pages of the DB and formating it for mapTree()<br>
&nbsp;&nbsp;&nbsp; $pages = mysql_query("SELECT id, parent, titre FROM pages"); $t=0;<br>
&nbsp;&nbsp;&nbsp; while($page = mysql_fetch_array($pages)){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][name] = $page[titre];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][parent] = $page[parent];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $tree[$page[id]][id] = $page[id];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $t++;<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp; // Creating the recursive page array<br>
&nbsp;&nbsp;&nbsp; $pages = mapTree($tree,"0");<br><br>
&nbsp;&nbsp;&nbsp; // Looping the first level<br>
&nbsp;&nbsp;&nbsp; if($pages[0][children]){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;ul class="menu-tree accordion dark strips"&gt;'; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach($pages[0][children] as $page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($page[parent]=='0'){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;li&gt;'.$page[name];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($page[children]){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($page[children]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo '&lt;/ul&gt;';<br>
&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp; &nbsp;<br>
}<br><br>
// Recursive function<br>
function page_enfant($sub_page){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp; echo "\n".'&lt;ul&gt;';<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach ($sub_page as $child){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "\n".'&lt;li&gt;'.$child[name];<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ($child[children]){<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; page_enfant($child[children]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo'&lt;/li&gt;'."\n";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br>
&nbsp; echo '&lt;/ul&gt;'."\n";<br>
}</p>
<p>&nbsp;</p>
<p>// How to use??</p>
<p>echo page_treeview();</p>
<p>
</pre></p>
<p>&nbsp;</p>
<p>This code will generate a &lt;ul&gt;&lt;li&gt; infinite tree structure in only one SQL line</p>
<p>I hope it helps</p>

					
					<br />
					
				</div>
				
				
				<div class='ipsLikeBar right clearfix' id='rep_post_1452471'>
				<ul class='ipsList_inline'>
					<li id="like_post_1452471" class='ipsLikeBar_info' style="display:none">
							
						</li>
					
				</ul>
			</div>
<script type='text/javascript'>
	ipb.global.registerReputation( 'rep_post_1452471', { domLikeStripId: 'like_post_1452471', app: 'forums', type: 'pid', typeid: '1452471' }, parseInt('0') );
</script>
				
								
				
					<div class="signature" data-memberid="58158">
	
	<strong class='bbc'><a href='http://www.VersatileBB.com' class='bbc_url' title='External link' rel='external'>www.VersatileBB.com</a> - Open Source Board</strong><br />
Easy to use and modify board for your website. A very good alt to all those to much&nbsp; popular boards
</div>
				
				
				
			
				<ul id='postControlsNormal_1452471' class='post_controls clear clearfix' >
					<li class='top hide'><a href='#ipboard_body' class='top' title='Back to top'>Back to top</a></li>
					
					
					
					
					
					
				</ul>
				
			</div>
		</div>
	</div>
		
		
		<hr />
		
		
<script type="text/javascript">
var pid = parseInt(1452471);
if ( pid > ipb.topic.topPid ){
	ipb.topic.topPid = pid;
}

	// Show multiquote for JS browsers
	if ( $('multiq_1452471') )
	{
		$('multiq_1452471').show();
	}
	
	if( $('toggle_post_1452471') )
	{
		$('toggle_post_1452471').show();
	}
	
	// Add perm data
	ipb.topic.deletePerms[1452471] = { 'canDelete' : 0, 'canSoftDelete' : 0 };

</script>
			
		</div>
	</div>

<hr />
<div class='topic_controls clear ipsPad_top_bottom_half'>
	
	<div class='ipsPad_top_slimmer right'>
		
		<a href='http://forums.phpfreaks.com/forum/13-php-coding-help/' class="ipsType_small desc">Back to PHP Coding Help</a>
		
			&middot; <a href='http://forums.phpfreaks.com/topic/282648-fast-tree/?view=getnextunread' rel="nofollow" class="ipsType_small desc">Next Unread Topic &rarr;</a>
		
	</div>
</div>

<!-- Close topic -->
</div>
<!-- BOTTOM BUTTONS -->

	<br />
	<div class='clear clearfix left'>
		

	<ul class='topic_share left shareButtons ipsList_inline'>
	
		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=twitter;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MjY0OC1mYXN0LXRyZWUv;RmFzdCB0cmVl" rel="nofollow" target="_blank" title="Share this link via Twitter" class='_slink' id='slink_twitter'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/twitter.png" /></a></li>
	

		
				<li class='fbLike'><div class="fb-like" data-href="http://forums.phpfreaks.com/topic/282648-fast-tree/" data-send="false" data-layout="button_count" data-width="150" data-show-faces="false" data-action="like"></div><div id="fb-root"></div></li>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=224092164386333";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
			
	

		
				<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
	
		{lang: 'en-GB'}
	
</script>
<li><div class='googlePlusOne'><g:plusone count="false" size="small"></g:plusone></div></li>
			
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=digg;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MjY0OC1mYXN0LXRyZWUv;RmFzdCB0cmVl" rel="nofollow" target="_blank" title="Share this link via Digg" class='_slink' id='slink_digg'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/digg.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=delicious;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MjY0OC1mYXN0LXRyZWUv;RmFzdCB0cmVl" rel="nofollow" target="_blank" title="Share this link via Del.icio.us" class='_slink' id='slink_delicious'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/delicious.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=reddit;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MjY0OC1mYXN0LXRyZWUv;RmFzdCB0cmVl" rel="nofollow" target="_blank" title="Share this link via Reddit" class='_slink' id='slink_reddit'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/reddit.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=stumble;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MjY0OC1mYXN0LXRyZWUv;RmFzdCB0cmVl" rel="nofollow" target="_blank" title="Share this link via StumbleUpon" class='_slink' id='slink_stumble'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/stumble.png" /></a></li>
	

		
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=print;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MjY0OC1mYXN0LXRyZWUv;RmFzdCB0cmVl" rel="nofollow" target="_blank" title="Print" class='_slink' id='slink_print'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/print.png" /></a></li>
	

		<li><a href="http://forums.phpfreaks.com/index.php?sharelink=download;aHR0cDovL2ZvcnVtcy5waHBmcmVha3MuY29tL3RvcGljLzI4MjY0OC1mYXN0LXRyZWUv;RmFzdCB0cmVl" rel="nofollow" target="_blank" title="Download" class='_slink' id='slink_download'><img src="http://forums.phpfreaks.com/public/style_extra/sharelinks/download.png" /></a></li>
	
	</ul>
	<script type="text/javascript">
		ipb.sharelinks.url   = "http://forums.phpfreaks.com/topic/282648-fast-tree/";
		ipb.sharelinks.title = "Fast tree";
		ipb.sharelinks.bname = "PHP Freaks";
	</script>

	</div>
	<br />

<!-- SAME TAGGED -->

<!-- ACTIVE USERS -->
<div id='topic_stats' class='statistics clear clearfix'>
		<div id='topic_active_users' class='active_users'>
			<h4 class='statistics_head'>0 user(s) are reading this topic</h4>
			<p class='statistics_brief desc'>0 members, 0 guests, 0 anonymous users</p>
			
		</div>
	</div>


	<script type="text/javascript" src="http://forums.phpfreaks.com/public/js/3rd_party/prettify/prettify.js"></script>
	<script type='text/javascript' src='http://forums.phpfreaks.com/public/js/3rd_party/prettify/lang-sql.js'></script>
	<!-- By default we load generic code, php, css, sql and xml/html; load others here if desired -->
	<script type="text/javascript">
	//<![CDATA[
		Event.observe( window, 'load', function(e){ prettyPrint() });
	//]]>
	</script>
<div id='multiQuoteInsert' style='display: none;' class='ipsFloatingAction'>
	<span class='ipsButton no_width' id='mqbutton'>Reply to quoted posts</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#' id='multiQuoteClear' class='ipsType_smaller desc' title='Clear the posts you have selected with MultiQuote'>Clear</a> &nbsp;&nbsp;&nbsp;
</div>
<form id="modform" method="post" action="http://forums.phpfreaks.com/index.php?">
	<input type="hidden" name="app" value="forums" />
	<input type="hidden" name="module" value="moderate" />
	<input type="hidden" name="section" value="moderate" />
	<input type="hidden" name="do" value="postchoice" />
	<input type="hidden" name="f" value="13" />
	<input type="hidden" name="t" value="282648" />
	<input type="hidden" name="auth_key" value="880ea6a14ea49e853634fbdc5015a024" />
	<input type="hidden" name="st" value="" />
	<input type="hidden" name="page" value="" />
	<input type="hidden" value="" name="selectedpidsJS" id='selectedpidsJS' />
	<input type="hidden" name="tact" id="tact" value="" />
</form>
				
					<div class='ipsAd'><div style="float:left;clear:both;padding:16px;">

    <a href="http://alphabit.com" title="Cheap Linux VPS from $5">Cheap Linux VPS from $5</a><br />
    <span style="color:black"> SSD Storage, 30 day Guarantee<br />
   1 TB of BW, 100% Network Uptime</span><br />
    <a href="http://alphabit.com"  title="Cheap Linux VPS from $5"><span style="color:green">AlphaBit.com</span></a>

</div>
<br /><br />


<script type="text/javascript"><!--
google_ad_client = "ca-pub-8794381281316343";
/* PHP Freaks forums */
google_ad_slot = "9136654976";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
				
				<ol class='breadcrumb bottom ipsList_inline left clearfix clear'>
											<li><a href='http://forums.phpfreaks.com/'>PHP Freaks</a></li>
							
						
							<li><span class='nav_sep'>&rarr;</span> <a href='http://forums.phpfreaks.com/forum/3-php-coding/' title='Return to PHP Coding'><span>PHP Coding</span></a></li>
							
						

							<li><span class='nav_sep'>&rarr;</span> <a href='http://forums.phpfreaks.com/forum/13-php-coding-help/' title='Return to PHP Coding Help'><span>PHP Coding Help</span></a></li>
							
						

					
					<li class='right ipsType_smaller'>
						<a rel="nofollow" href='http://forums.phpfreaks.com/privacypolicy/'>Privacy Policy</a>
					</li>
					
					<li class='right ipsType_smaller'>
							<a href='http://www.phpfreaks.com/page/rules-and-terms-of-service'>Forum Rules &amp; Terms of Service</a> &middot; 
						</li>	
				</ol>
			</div>
			<!-- ::: FOOTER (Change skin, language, mark as read, etc) ::: -->
			<div id='footer_utilities' class='main_width clearfix clear'>
				<a rel="nofollow" href='#top' id='backtotop' title='Go to top'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/top.png' alt='' /></a>
				<ul class='ipsList_inline left'>
					<li>
						<img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/feed.png' alt='RSS Feed' id='rss_feed' class='clickable' />
					</li>
					
							
								<li>
									<a rel="nofollow" id='new_skin' href='#'>Change Theme</a>			
									<ul id='new_skin_menucontent' class='ipbmenu_content with_checks' style='display: none'>
										
											<li >
												<a href='#' data-clicklaunch='changeSkin' data-skinid='2'>IP.Board Mobile</a>
											</li>
										

											<li class='selected'>
												<a href='#' data-clicklaunch='changeSkin' data-skinid='5'>PHP Freaks</a>
											</li>
										
									</ul>
								</li>
							
					
						<li>
							<a rel="nofollow" href='#' id='new_language'>PHP Freaks - English (USA)</a>							
							<ul id='new_language_menucontent' class='ipbmenu_content with_checks' style='display: none'>
								
									<li >
										<a href="?k=880ea6a14ea49e853634fbdc5015a024&amp;setlanguage=1&amp;cal_id=&amp;langid=1">English (USA)</a>
									</li>
								

									<li class='selected'>
										<a href="?k=880ea6a14ea49e853634fbdc5015a024&amp;setlanguage=1&amp;cal_id=&amp;langid=2">PHP Freaks - English (USA)</a>
									</li>
								
							</ul>
						</li>
					
					
						<li>
							<a rel="nofollow" id='mark_all_read' href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=all&amp;k=880ea6a14ea49e853634fbdc5015a024" title='Mark all as read'>Mark Community Read</a>
							<ul id='mark_all_read_menucontent' class='ipbmenu_content' style='display: none'>
								
									<li>
										
									</li>
								

									<li>
										<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=app&amp;markApp=forums&amp;k=880ea6a14ea49e853634fbdc5015a024">Forums</a>
									</li>
								

									<li>
										<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=app&amp;markApp=members&amp;k=880ea6a14ea49e853634fbdc5015a024">Members</a>
									</li>
								

									<li>
										<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=app&amp;markApp=ccs&amp;k=880ea6a14ea49e853634fbdc5015a024">Pages</a>
									</li>
								
								<li>
									<a href="http://forums.phpfreaks.com/index.php?app=forums&amp;module=forums&amp;section=markasread&amp;marktype=all&amp;k=880ea6a14ea49e853634fbdc5015a024"><strong>Mark all as read</strong></a>
								</li>
							</ul>
						</li>
					
					<li>
						<a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=help" title='View help' rel="help" accesskey='6'>Help</a>
					</li>				
				</ul>
				<!-- Copyright Information -->
        				  <p id='copyright'>
        				  	<a href='http://www.invisionpower.com/apps/board/' title='Community Forum Software by Invision Power Services'>Community Forum Software by IP.Board</a><br />Licensed to: Philip Lawrence, PHP Freaks</p>
		<!-- / Copyright -->
			</div>
			
			
			
				<script type='text/javascript' src='http://forums.phpfreaks.com/public/js/3rd_party/lightbox.js'></script>
<script type='text/javascript'>
//<![CDATA[
	// Lightbox Configuration
	LightboxOptions = Object.extend({
	    fileLoadingImage:        'http://forums.phpfreaks.com/public/style_images/phpfreaks/lightbox/loading.gif',
	    fileBottomNavCloseImage: 'http://forums.phpfreaks.com/public/style_images/phpfreaks/lightbox/closelabel.gif',
	    overlayOpacity: 0.8,   // controls transparency of shadow overlay
	    animate: true,         // toggles resizing animations
	    resizeSpeed: 10,        // controls the speed of the image resizing animations (1=slowest and 10=fastest)
	    borderSize: 10,         //if you adjust the padding in the CSS, you will need to update this variable
		// When grouping images this is used to write: Image # of #.
		// Change it for non-english localization
		labelImage: "Image",
		labelOf: "of"
	}, window.LightboxOptions || {});
/* Watch for a lightbox image and set up our downloadbutton watcher */
document.observe('click', (function(event){
    var target = event.findElement('a[rel*="lightbox"]') || event.findElement('area[rel*="lightbox"]') || event.findElement('span[rel*="lightbox"]');
    if (target) {
        event.stop();
        gbl_addDownloadButton();
    }
}).bind(this));
var _to    = '';
var _last  = '';
function gbl_addDownloadButton()
{
	if ( typeof( ipsLightbox.lightboxImage ) != 'undefined' && ipsLightbox.lightboxImage.src )
	{
		if ( _last != ipsLightbox.lightboxImage.src )
		{
			if ( ! $('gbl_d') )
			{
				$('bottomNav').insert( { top: "<div id='gbl_d' style='text-align:right;padding-bottom:4px;'></div>" } );
			}
			
			$('gbl_d').update( "<a href='"+ ipsLightbox.lightboxImage.src + "' target='_blank'><img src='http://forums.phpfreaks.com/public/style_images/phpfreaks/lightbox/download-icon.png' /></a>" );
			
			_last = ipsLightbox.lightboxImage.src;
		}
	}
	
	/* Check for init and then keep checking for new image */
	_to = setTimeout( "gbl_addDownloadButton()", 1000 );
}
//]]>
</script>
			
			<div id='inline_login_form' style="display:none">
		<form action="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;do=process" method="post" id='login'>
				<input type='hidden' name='auth_key' value='880ea6a14ea49e853634fbdc5015a024' />
				<input type="hidden" name="referer" value="http://forums.phpfreaks.com/topic/282648-fast-tree/" />
				<h3>Sign In</h3>
				<div class='ipsBox_notice'>
						<ul class='ipsList_inline'>
							
								<li><a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=facebook" class='ipsButton_secondary'><img src="http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/facebook.png" alt="Facebook" /> &nbsp; Use Facebook</a></li>
							
							
								<li><a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=login&amp;serviceClick=twitter" class='ipsButton_secondary'><img src="http://forums.phpfreaks.com/public/style_images/phpfreaks/loginmethods/twitter.png" alt="Twitter" /> &nbsp; Use Twitter</a></li>
							
							
							
						</ul>
					</div>
				<br />
				<div class='ipsForm ipsForm_horizontal'>
					<fieldset>
						<ul>
							<li class='ipsField'>
								<div class='ipsField_content'>
									Need an account? <a href="http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=register" title='Register now!'>Register now!</a>
								</div>
							</li>
							<li class='ipsField ipsField_primary'>
								<label for='ips_username' class='ipsField_title'>Username</label>
								<div class='ipsField_content'>
									<input id='ips_username' type='text' class='input_text' name='ips_username' size='30' tabindex='0' />
								</div>
							</li>
							<li class='ipsField ipsField_primary'>
								<label for='ips_password' class='ipsField_title'>Password</label>
								<div class='ipsField_content'>
									<input id='ips_password' type='password' class='input_text' name='ips_password' size='30' tabindex='0' /><br />
									<a href='http://forums.phpfreaks.com/index.php?app=core&amp;module=global&amp;section=lostpass' title='Retrieve password'>I've forgotten my password</a>
								</div>
							</li>
							<li class='ipsField ipsField_checkbox'>
								<input type='checkbox' id='inline_remember' checked='checked' name='rememberMe' value='1' class='input_check' tabindex='0' />
								<div class='ipsField_content'>
									<label for='inline_remember'>
										<strong>Remember me</strong><br />
										<span class='desc lighter'>This is not recommended for shared computers</span>
									</label>
								</div>
							</li>
							
								<li class='ipsField ipsField_checkbox'>
									<input type='checkbox' id='inline_invisible' name='anonymous' value='1' class='input_check' tabindex='0' />
									<div class='ipsField_content'>
										<label for='inline_invisible'>
											<strong>Sign in anonymously</strong><br />
											<span class='desc lighter'>Don't add me to the active users list</span>
										</label>
									</div>
								</li>
							
							
							<li class='ipsPad_top ipsForm_center desc ipsType_smaller'>
								<a rel="nofollow" href='http://forums.phpfreaks.com/privacypolicy/'>Privacy Policy</a>
							</li>
							
						</ul>
					</fieldset>
					
					<div class='ipsForm_submit ipsForm_center'>
						<input type='submit' class='ipsButton' value='Sign In' tabindex='0' />
					</div>
				</div>
			</form>
	</div>
		</div>
		
		
		<script type='text/javascript'>
			if( $('primary_nav') ){	ipb.global.activateMainMenu(); }
		</script>
			
<script>
$$('#copyright > a')[0].setAttribute('href', 'https://www.invisionpower.com/clients/index.php?app=nexus&module=promotion&section=referral&id=61219&direct=aHR0cHM6Ly93d3cuaW52aXNpb25wb3dlci5jb20vY2xpZW50cy9pbmRleC5waHA%2F');
</script>
</body>
</html>
