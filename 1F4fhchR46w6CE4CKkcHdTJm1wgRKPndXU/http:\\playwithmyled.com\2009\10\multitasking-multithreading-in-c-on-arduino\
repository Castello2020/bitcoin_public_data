http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/
HTTP/1.1 200 OK
Server: nginx/1.6.0
Date: Wed, 23 Jul 2014 11:58:49 GMT
Content-Type: text/html; charset=UTF-8
Connection: close
X-Pingback: http://playwithmyled.com/xmlrpc.php
Link: <http://playwithmyled.com/?p=3>; rel=shortlink

<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US" xmlns:fb="http://ogp.me/ns/fb#" xmlns:addthis="http://www.addthis.com/help/api-spec" >
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US" xmlns:fb="http://ogp.me/ns/fb#" xmlns:addthis="http://www.addthis.com/help/api-spec" >
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US" xmlns:fb="http://ogp.me/ns/fb#" xmlns:addthis="http://www.addthis.com/help/api-spec" >
<!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Multitasking/multithreading in C on Arduino | Playwithmyled.com</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://playwithmyled.com/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://playwithmyled.com/wp-content/themes/twentythirteen/js/html5.js"></script>
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="Playwithmyled.com &raquo; Feed" href="http://playwithmyled.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Playwithmyled.com &raquo; Comments Feed" href="http://playwithmyled.com/comments/feed/" />

            <script type="text/javascript">//<![CDATA[
            // Google Analytics for WordPress by Yoast v4.3.3 | http://yoast.com/wordpress/google-analytics/
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-159522-10']);
				            _gaq.push(['_trackPageview']);
            (function () {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(ga, s);
            })();
            //]]></script>
			<link rel="alternate" type="application/rss+xml" title="Playwithmyled.com &raquo; Multitasking/multithreading in C on Arduino Comments Feed" href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/feed/" />
<link rel='stylesheet' id='output-css'  href='http://playwithmyled.com/wp-content/plugins/addthis/css/output.css?ver=3.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='http://playwithmyled.com/wp-includes/css/dashicons.min.css?ver=3.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='thickbox-css'  href='http://playwithmyled.com/wp-includes/js/thickbox/thickbox.css?ver=20131201' type='text/css' media='all' />
<link rel='stylesheet' id='wpdm-front-css'  href='http://playwithmyled.com/wp-content/plugins/download-manager/css/front.css?ver=3.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='YoutubeShortcodeMargenn-css'  href='http://playwithmyled.com/wp-content/plugins/youtube-shortcode/youtube-shortcode.css?ver=3.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='twentythirteen-fonts-css'  href='//fonts.googleapis.com/css?family=Source+Sans+Pro%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic%7CBitter%3A400%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='http://playwithmyled.com/wp-content/themes/twentythirteen/fonts/genericons.css?ver=2.09' type='text/css' media='all' />
<link rel='stylesheet' id='twentythirteen-style-css'  href='http://playwithmyled.com/wp-content/themes/led13/style.css?ver=2013-07-18' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentythirteen-ie-css'  href='http://playwithmyled.com/wp-content/themes/twentythirteen/css/ie.css?ver=2013-07-18' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='http://playwithmyled.com/wp-includes/js/jquery/jquery.js?ver=1.10.2'></script>
<script type='text/javascript' src='http://playwithmyled.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://playwithmyled.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://playwithmyled.com/wp-includes/wlwmanifest.xml" /> 
<link rel='next' title='Parallel programming' href='http://playwithmyled.com/2010/02/29/' />
<meta name="generator" content="WordPress 3.8.3" />
<link rel='canonical' href='http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/' />
<link rel='shortlink' href='http://playwithmyled.com/?p=3' />
    <script language="JavaScript">
    <!--
      jQuery(function(){
          
          jQuery('.wpdm-popup').click(function(){
              tb_show(jQuery(this).html(),this.href+'&modal=1&width=600&height=400');
              return false;
          });
          
          jQuery('.haspass').click(function(){
              var url = jQuery(this).attr('href');
              var id = jQuery(this).attr('rel');
              var password = jQuery('#pass_'+id).val();
              jQuery.post('http://playwithmyled.com/',{download:id,password:password},function(res){
                  
                  if(res=='error') {
                    
                      jQuery('#wpdm_file_'+id+' .perror').html('Wrong Password');
                      setTimeout("jQuery('#wpdm_file_"+id+" .perror').html('');",3000);
                      return false;
                  } else {
                      location.href = 'http://playwithmyled.com/?wpdmact=process&did='+res;
                  }
                  //if(res.url!='undefined') location.href=res.url;
                                           
              });
               
              return false;
          });
      })
    //-->
    </script>
    	<style type="text/css" id="twentythirteen-header-css">
			.site-header {
			background: url(http://playwithmyled.com/wp-content/uploads/2013/12/background-lines1.jpg) no-repeat scroll top;
			background-size: 1600px auto;
		}
		</style>
		<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300' rel='stylesheet' type='text/css'>
</head>

<body class="single single-post postid-3 single-format-standard single-author sidebar">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header" role="banner">
			<a class="home-link" href="http://playwithmyled.com/" title="Playwithmyled.com" rel="home">
				<h1 class="site-title"><span>Playwithmyled.com</span></h1>
				<h2 class="site-description"></h2>
			</a>

			<div id="navbar" class="navbar">
				<nav id="site-navigation" class="navigation main-navigation" role="navigation">
					<h3 class="menu-toggle">Menu</h3>
					<a class="screen-reader-text skip-link" href="#content" title="Skip to content">Skip to content</a>
					<div class="menu-main-container"><ul id="menu-main" class="nav-menu"><li id="menu-item-615" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-615"><a href="/">Blog</a></li>
<li id="menu-item-650" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-650"><a href="http://playwithmyled.com/projects/">Projects</a>
<ul class="sub-menu">
	<li id="menu-item-656" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-656"><a href="http://playwithmyled.com/category/projects/smart-garden/">Smart Garden</a></li>
	<li id="menu-item-655" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-655"><a href="http://playwithmyled.com/category/projects/marvin/">Marvin</a></li>
	<li id="menu-item-654" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-654"><a href="http://playwithmyled.com/category/projects/lila/">LILA</a></li>
	<li id="menu-item-653" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-653"><a href="http://playwithmyled.com/category/projects/kids-buttons-box/">Kid&#8217;s Buttons Box</a></li>
</ul>
</li>
<li id="menu-item-618" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-618"><a href="http://playwithmyled.com/internet-to-serial-proxy/">Internet to Serial Proxy</a></li>
</ul></div>					<form role="search" method="get" class="search-form" action="http://playwithmyled.com/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form>				</nav><!-- #site-navigation -->
			</div><!-- #navbar -->
		</header><!-- #masthead -->

		<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

						
				
<article id="post-3" class="post-3 post type-post status-publish format-standard hentry category-arduino category-programming">
	<header class="entry-header">
		
				<h1 class="entry-title">Multitasking/multithreading in C on Arduino</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/" title="Permalink to Multitasking/multithreading in C on Arduino" rel="bookmark"><time class="entry-date" datetime="2009-10-17T14:58:08+00:00">October 17, 2009</time></a></span><span class="categories-links"><a href="http://playwithmyled.com/category/arduino/" title="View all posts in Arduino" rel="category tag">Arduino</a>, <a href="http://playwithmyled.com/category/programming/" title="View all posts in Programming" rel="category tag">Programming</a></span><span class="author vcard"><a class="url fn n" href="http://playwithmyled.com/author/Kevin/" title="View all posts by Kevin Filteau" rel="author">Kevin Filteau</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>Doing multitasking/multithreading on Arduino has an advantage, it&#8217;s give the possibility to read multiple captors, blink led and start a motor at virtually the same time. This is done by cycling rapidly (faster as the Arduino can) witting all the functions. I made up this code to execute many functions in the default cycling loop function on the Arduino. <del datetime="2010-05-11T06:57:44+00:00">In the sample, the starting functions are hard coded, but</del> The program offer the advantage of starting and stopping functions at run time. In a more complex program I&#8217;m doing it by adding a serial communication ability to the code, so I can call only the functions I need.</p>
<pre>// By kevin@playwithmyled.com - 2009-10-17.
// 2010-05-11: Better and lighter.

// Define a function pointer and initialize to NULL.
typedef void (*FunctionPointer) ();

// Declare looping actions function names, declared lower.
FunctionPointer xActions[] = {loopActionA,loopActionB,loopActionC};
// Define actions status flags. Set to 1 to auto execute a start.
int xActionsFlags[] = {0,0,0}; 

int xActionsCount = sizeof(xActions);

void xActionTrigger(int id=0, int action=0) {
  // The id represent it's position in the flags array.
  // Action 1 = executed, 0 not.
  xActionsFlags[id] = action;
}

// LOOPING FUNCTIONS

void loopActionA() {
        // Do something...
}

void loopActionB() {
	// Do something...
}

void loopActionC() {
	// Do something...
}

// Exectute all loop functions.
void xDoActions() {
	// Execute all looped function.
	for(unsigned int j=0; j &lt; xActionsCount; j++) {
		if( xActionsFlags[j] == 1 ) { // Execute the action if.
			xActions[j](); // Call the related loop action.
		}
	}
}

void setup() {
        xActionTrigger(0,1); // First action.
        xActionTrigger(2,1); // Third action.
}

void loop() {
	xDoActions();
}</pre>
<div class="addthis_toolbox addthis_default_style " addthis:url='http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/' addthis:title='Multitasking/multithreading in C on Arduino '  ><a class="addthis_button_facebook_like" fb:like:layout="button_count"></a><a class="addthis_button_tweet"></a><a class="addthis_button_pinterest_pinit"></a><a class="addthis_counter addthis_pill_style"></a></div>			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
					<nav class="navigation post-navigation" role="navigation">
		<h1 class="screen-reader-text">Post navigation</h1>
		<div class="nav-links">

						<a href="http://playwithmyled.com/2010/02/29/" rel="next">Parallel programming <span class="meta-nav">&rarr;</span></a>
		</div><!-- .nav-links -->
	</nav><!-- .navigation -->
					
<div id="comments" class="comments-area">

			<h2 class="comments-title">
			14 thoughts on &ldquo;<span>Multitasking/multithreading in C on Arduino</span>&rdquo;		</h2>

		<ol class="comment-list">
					<li id="comment-2" class="comment byuser comment-author-Kevin bypostauthor even thread-even depth-1">
			<article id="div-comment-2" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/a1de5b975dca22e15fb390c009db7d78?s=74&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Kevin</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-2">
							<time datetime="2009-10-23T04:54:27+00:00">
								October 23, 2009 at 04:54							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Look at his second source code for the <a href="http://www.adafruit.com/blog/2009/10/20/example-code-for-multi-button-checker-with-debouncing/" rel="nofollow">timer interrupt</a> method.</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-1253" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-1253" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://1.gravatar.com/avatar/f9db44c55170fbe822bd5ece5f288a4b?s=74&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Brewal Renault</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-1253">
							<time datetime="2011-05-13T09:27:36+00:00">
								May 13, 2011 at 09:27							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>I don&#8217;t get the point of your piece of code. This is actually not a multithreading program is it ?</p>
<p>Specificly here : xActions[xActionsFlags[j]]();<br />
if xActionsFlags[j] can be 1 or 0, how can you call your loopActionC function ? Did you mean xActions[j](); ?</p>
<p>Considering you wait the task to finish (because you just call it but don&#8217;t abort it), this has nothing to do with realtime or multithreading software !</p>
<p>Can you explain what did you try to do when you wrote this code ?</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-1355" class="comment byuser comment-author-Kevin bypostauthor even thread-even depth-1">
			<article id="div-comment-1355" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/a1de5b975dca22e15fb390c009db7d78?s=74&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Kevin</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-1355">
							<time datetime="2011-06-02T11:26:35+00:00">
								June 2, 2011 at 11:26							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>@Brewal Renault. I have made some improvement to this code, but the principle is about the same. What I wanted there, is a program that can flag ON or OFF a function to be called. So a button can activate the flag of a function and when it&#8217;s ON, the function is automatically called in the main loop. Maybe it&#8217;s not true multitasking, but the objective of running multiple tasks at virtually the same time is met. I wanted a program that can make a stepper run (each step at a time) while the program continue to check other stuff like buttons. I know I can do some of that with interrupt too. Indeed, called functions must not take the loop and too much time to execute their task. So like for spinning a stepper, I use timer and static variable in the function and I don&#8217;t loop in the function. Each time the function is called from the main loop, I check if the motor is ready to move a step, if yes I do it and return. I hope I make me understandable. If you have betters idea, I am really open to it!</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-1479" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-1479" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://1.gravatar.com/avatar/f9db44c55170fbe822bd5ece5f288a4b?s=74&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Brewal Renault</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-1479">
							<time datetime="2011-06-27T05:56:18+00:00">
								June 27, 2011 at 05:56							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Ok, I see what you are doing ! This script is indeed quite interesting. But, if you want your system to operate so, you can use an RTOS. You can use DuinOS, an RTOS based on FreeRTOS. This OS is easy to use, but you should take a look at the FreeRTOS website in order to understand how it runs.<br />
I used it for a project, and it works like a charm !</p>
<p>But your script has the advantage of being robust and convenient for small specific applications.</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-2136" class="comment even thread-even depth-1">
			<article id="div-comment-2136" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/6ff8d7f7bb07ffc70db015b5c69b15bd?s=74&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Ralph Layden</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-2136">
							<time datetime="2011-08-16T10:06:05+00:00">
								August 16, 2011 at 10:06							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>You look like an expert on Arduino multi-tasking, i&#8217;m struggling with Serial communication and multitasking. I programmed a piece of code that read serial commands and executes it, such as &#8220;Turn LED ON&#8221;, &#8220;Turn LED off&#8221;, etc&#8230; but i&#8217;m not sure how to do something like &#8220;BLINK LED ON&#8221;, &#8220;BLINK LED OFF&#8221;&#8230;. the minute i get into the blink led loop, i&#8217;m unable to send a serial command&#8230; Any ideas?</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-2157" class="comment byuser comment-author-Kevin bypostauthor odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-2157" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/a1de5b975dca22e15fb390c009db7d78?s=74&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Kevin</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-2157">
							<time datetime="2011-08-18T00:54:52+00:00">
								August 18, 2011 at 00:54							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thank you, but I am no expert. I&#8217;m just doing my best. You can&#8217;t use the delay function in your program. This function makes everything else, like the serial connection, hang until the delay is past. You must use the time in your loop. When the right time is reach, you tell your function to do what you need. Else you let the program continue. Take a look at the <strong>motorSpin</strong> function in my <a href="http://playwithmyled.com/2010/05/stepper-motor-controller-circuit-and-code/" rel="nofollow">stepper motor controller program</a> for an example.</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-4631" class="comment even thread-even depth-1">
			<article id="div-comment-4631" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/8f9ca1110ee9fea22466910c461495a5?s=74&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Roberto</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-4631">
							<time datetime="2012-05-01T10:09:50+00:00">
								May 1, 2012 at 10:09							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Thank you for the sample.<br />
I have found a little error in xDoActions() :</p>
<p>change row<br />
     xActions[xActionsFlags[j]](); </p>
<p>in<br />
     xActions[j]();</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-4634" class="comment byuser comment-author-Kevin bypostauthor odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-4634" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/a1de5b975dca22e15fb390c009db7d78?s=74&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Kevin</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-4634">
							<time datetime="2012-05-02T01:10:30+00:00">
								May 2, 2012 at 01:10							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>You&#8217;r right! Fixed. Thanks.</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-8427" class="comment even thread-even depth-1">
			<article id="div-comment-8427" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://1.gravatar.com/avatar/1cff6d9a82ed06fbf0108b92bae65ab7?s=74&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Jefri Setifanus</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-8427">
							<time datetime="2014-06-28T01:42:33+00:00">
								June 28, 2014 at 01:42							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello sir, I got the same project with the example program above, I copied the code but error</p>
<p>this error :<br />
jun25c.cpp: In function &#8216;void xDoActions()&#8217;:<br />
jun25c.cpp:32:16: error: &#8216;xActionsFlags&#8217; was not declared in this scope</p>
<p>can you help me ? thanks</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-8428" class="comment odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-8428" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://1.gravatar.com/avatar/1cff6d9a82ed06fbf0108b92bae65ab7?s=74&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Jefri Setifanus</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-8428">
							<time datetime="2014-06-28T01:45:08+00:00">
								June 28, 2014 at 01:45							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>sorry, my code is done. thanks</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-8440" class="comment even thread-even depth-1">
			<article id="div-comment-8440" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://1.gravatar.com/avatar/1cff6d9a82ed06fbf0108b92bae65ab7?s=74&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Jefri setifanus</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-8440">
							<time datetime="2014-06-30T00:22:25+00:00">
								June 30, 2014 at 00:22							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hello sir, i have copied your code. But nothing happen on my led. In void loopactionA i give task blink led. But the led just on not blink. Why ? Can you help me.</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-8472" class="comment byuser comment-author-Kevin bypostauthor odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-8472" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/a1de5b975dca22e15fb390c009db7d78?s=74&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Kevin Filteau</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-8472">
							<time datetime="2014-07-03T08:23:50+00:00">
								July 3, 2014 at 08:23							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Please, can you show my your code?</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-8546" class="comment even thread-even depth-1">
			<article id="div-comment-8546" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/29549345316c224388bed204aee6b0b4?s=74&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Fred</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-8546">
							<time datetime="2014-07-11T05:02:29+00:00">
								July 11, 2014 at 05:02							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>Hi Kevin,</p>
<p>I test your code to light up/down 2 LEDs at the same time but it doesn&#8217;t work. It still waiting for the other loop to finished before continue its own loop.</p>
<p>void loopActionA() {<br />
        // Do something&#8230;<br />
        digitalWrite(12, HIGH);<br />
        delay(1000);<br />
        digitalWrite(12, LOW);<br />
        delay(1000);<br />
}</p>
<p>void loopActionB() {<br />
	// Do something&#8230;<br />
        digitalWrite(13, HIGH);<br />
        delay(1000);<br />
        digitalWrite(13, LOW);<br />
        delay(1000);<br />
}</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		<li id="comment-8547" class="comment byuser comment-author-Kevin bypostauthor odd alt thread-odd thread-alt depth-1">
			<article id="div-comment-8547" class="comment-body">
				<footer class="comment-meta">
					<div class="comment-author vcard">
						<img alt='' src='http://0.gravatar.com/avatar/a1de5b975dca22e15fb390c009db7d78?s=74&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D74&amp;r=G' class='avatar avatar-74 photo' height='74' width='74' />						<b class="fn">Kevin Filteau</b> <span class="says">says:</span>					</div><!-- .comment-author -->

					<div class="comment-metadata">
						<a href="http://playwithmyled.com/2009/10/multitasking-multithreading-in-c-on-arduino/comment-page-1/#comment-8547">
							<time datetime="2014-07-11T07:06:45+00:00">
								July 11, 2014 at 07:06							</time>
						</a>
											</div><!-- .comment-metadata -->

									</footer><!-- .comment-meta -->

				<div class="comment-content">
					<p>You can&#8217;t use delay function within your loops. This function freezes de program.</p>
				</div><!-- .comment-content -->

				<div class="reply">
									</div><!-- .reply -->
			</article><!-- .comment-body -->
</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		
		
	
									<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2009/10/multitasking-multithreading-in-c-on-arduino/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://playwithmyled.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='3' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="cd3c1b844e" /></p>					</form>
							</div><!-- #respond -->
			        <script type="text/javascript">
            jQuery(document).ready(function () {
                jQuery('#commentform').submit(function () {
                    _gaq.push(
                            ['_setAccount', 'UA-159522-10'],
                            ['_trackEvent', 'comment', 'submit']
                    );
                });
            });
        </script>
		
</div><!-- #comments -->
			
		</div><!-- #content -->
	</div><!-- #primary -->

	<div id="tertiary" class="sidebar-container" role="complementary">
		<div class="sidebar-inner">
			<div class="widget-area">
				<aside id="text-4" class="widget widget_text">			<div class="textwidget"><div id="twitter"><a class="twitter-timeline" href="https://twitter.com/playwithmyled" data-widget-id="260910644767899648">Tweets by @playwithmyled</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div></div>
		</aside><aside id="text-6" class="widget widget_text"><h3 class="widget-title">Projects</h3>			<div class="textwidget"><p><a href="/category/projects/smart-garden/"><img src="/wp-content/uploads/2013/12/smart-garden.jpg" alt="Smart Garden" /></a></p>

<p><a href="/category/projects/marvin/"><img src="/wp-content/uploads/2013/12/marvin.jpg" alt="Marvin Robot" /></a></p>

<p><a href="/category/projects/lila/"><img src="/wp-content/uploads/2013/12/lila.jpg" alt="Lila Robot Lamp" /></a></p>

<p><a href="/category/projects/kids-buttons-box/"><img src="/wp-content/uploads/2013/12/the-amazing-button-box.jpg" alt="The Amazing Button Box" /></a></p>



</div>
		</aside><aside id="text-5" class="widget widget_text">			<div class="textwidget"><div id="youtube-playlist">
<iframe width="342" height="192" src="//www.youtube-nocookie.com/embed/videoseries?list=PL8A7BE4002BD21BF7" frameborder="0" allowfullscreen></iframe>
</div></div>
		</aside>			</div><!-- .widget-area -->
		</div><!-- .sidebar-inner -->
	</div><!-- #tertiary -->

		</div><!-- #main -->
		<footer id="colophon" class="site-footer" role="contentinfo">
				<div id="secondary" class="sidebar-container" role="complementary">
		<div class="widget-area">
			<aside id="categories-3" class="widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-4"><a href="http://playwithmyled.com/category/arduino/" title="View all posts filed under Arduino">Arduino</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://playwithmyled.com/category/projects/edgar/" title="View all posts filed under Edgar">Edgar</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://playwithmyled.com/category/projects/glowing-marquee/" title="View all posts filed under Glowing Marquee">Glowing Marquee</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://playwithmyled.com/category/insek/" title="View all posts filed under Internet to Serial Proxy">Internet to Serial Proxy</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://playwithmyled.com/category/projects/kids-buttons-box/" title="View all posts filed under Kid&#039;s Buttons Box">Kid&#039;s Buttons Box</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://playwithmyled.com/category/projects/lila/" title="View all posts filed under LILA">LILA</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://playwithmyled.com/category/projects/marvin/" title="View all posts filed under Marvin">Marvin</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://playwithmyled.com/category/mixed/" title="View all posts filed under Mixed">Mixed</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://playwithmyled.com/category/news/" title="View all posts filed under News">News</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://playwithmyled.com/category/programming/" title="View all posts filed under Programming">Programming</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://playwithmyled.com/category/projects/" title="View all posts filed under Projects">Projects</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://playwithmyled.com/category/raspberry-pi/" title="View all posts filed under Raspberry Pi">Raspberry Pi</a>
</li>
	<li class="cat-item cat-item-18"><a href="http://playwithmyled.com/category/projects/smart-garden/" title="View all posts filed under Smart Garden">Smart Garden</a>
</li>
		</ul>
</aside><aside id="linkcat-4" class="widget widget_links"><h3 class="widget-title">Arduino</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://arduino.cc/" title="The Arduino Duemilanove microcontroller board official website">Arduino</a></li>
<li><a href="http://www.freeduino.org/" title="Index of practical subjects for the Arduinotm and Freeduino microcontrollers">Arduino Knowledge</a></li>

	</ul>
</aside>
<aside id="linkcat-3" class="widget widget_links"><h3 class="widget-title">Inspiring</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://designyoutrust.com/" title="Design You Trust is a daily design magazine, blog and community, full of new design trends, news and events, great design portfolios, young design bloods, design articles, photographies, fashion, creative advertisements, architectural inspirations, video ">Design You Trust</a></li>
<li><a href="http://blog.makezine.com/" title="Make technologie on your time">Makezine Blog</a></li>

	</ul>
</aside>
<aside id="archives-3" class="widget widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://playwithmyled.com/2013/12/'>December 2013</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2013/11/'>November 2013</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2013/09/'>September 2013</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2013/04/'>April 2013</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2013/03/'>March 2013</a>&nbsp;(4)</li>
	<li><a href='http://playwithmyled.com/2013/02/'>February 2013</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2012/10/'>October 2012</a>&nbsp;(3)</li>
	<li><a href='http://playwithmyled.com/2012/03/'>March 2012</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2011/11/'>November 2011</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2011/09/'>September 2011</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2010/12/'>December 2010</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2010/11/'>November 2010</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2010/10/'>October 2010</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2010/09/'>September 2010</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2010/06/'>June 2010</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2010/05/'>May 2010</a>&nbsp;(3)</li>
	<li><a href='http://playwithmyled.com/2010/04/'>April 2010</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2010/03/'>March 2010</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2010/02/'>February 2010</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2009/10/'>October 2009</a>&nbsp;(1)</li>
		</ul>
</aside><aside id="text-3" class="widget widget_text">			<div class="textwidget"><p style="line-height:8px;"><div style="width:45px;height:45px;float:left; margin:0 10px 0 0;"><object type="image/svg+xml" data="/media/bitcoin-logo.svg">BITCOIN</object></div>I love bitcoin, please send me some if you wish.
1F4fhchR46w6CE4CKkcHdTJm1wgRKPndXU
</p>

<p>Or you can send me some stuff in my wish list :</p>

<ul style="margin-left:10px;">
<li>8ohm shelf speakers</li>
<li>Raspberry Pi</li>
<li>Arduino</li>
<li>Any electronic parts</li>
</ul>

<p>Thank you so much</p></div>
		</aside>		</div><!-- .widget-area -->
	</div><!-- #secondary -->

			<div class="site-info">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

	<script type="text/javascript">if (typeof(addthis_share) == "undefined"){ addthis_share = {"url_transforms":{"shorten":{"twitter":"bitly"}},"shorteners":{"bitly":""}};}

var addthis_config = {"data_track_clickback":false,"data_track_addressbar":false,"data_track_textcopy":false,"ui_atversion":"300"};
var addthis_product = 'wpp';
</script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4ff655a271761b8e"></script><script type='text/javascript'>
/* <![CDATA[ */
var thickboxL10n = {"next":"Next >","prev":"< Prev","image":"Image","of":"of","close":"Close","noiframes":"This feature requires inline frames. You have iframes disabled or your browser does not support them.","loadingAnimation":"http:\/\/playwithmyled.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif"};
/* ]]> */
</script>
<script type='text/javascript' src='http://playwithmyled.com/wp-includes/js/thickbox/thickbox.js?ver=3.1-20121105'></script>
<script type='text/javascript' src='http://playwithmyled.com/wp-includes/js/jquery/jquery.masonry.min.js?ver=2.1.05'></script>
<script type='text/javascript' src='http://playwithmyled.com/wp-content/themes/twentythirteen/js/functions.js?ver=2013-07-18'></script>
<!--wp_footer--></body>
</html>
