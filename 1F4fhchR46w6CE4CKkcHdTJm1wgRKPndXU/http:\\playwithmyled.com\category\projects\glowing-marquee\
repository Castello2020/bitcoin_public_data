http://playwithmyled.com/category/projects/glowing-marquee/
HTTP/1.1 200 OK
Server: nginx/1.6.0
Date: Thu, 24 Jul 2014 10:39:50 GMT
Content-Type: text/html; charset=UTF-8
Connection: close
X-Pingback: http://playwithmyled.com/xmlrpc.php

<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US" xmlns:fb="http://ogp.me/ns/fb#" xmlns:addthis="http://www.addthis.com/help/api-spec" >
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US" xmlns:fb="http://ogp.me/ns/fb#" xmlns:addthis="http://www.addthis.com/help/api-spec" >
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US" xmlns:fb="http://ogp.me/ns/fb#" xmlns:addthis="http://www.addthis.com/help/api-spec" >
<!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Glowing Marquee | Playwithmyled.com</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://playwithmyled.com/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://playwithmyled.com/wp-content/themes/twentythirteen/js/html5.js"></script>
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="Playwithmyled.com &raquo; Feed" href="http://playwithmyled.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Playwithmyled.com &raquo; Comments Feed" href="http://playwithmyled.com/comments/feed/" />

            <script type="text/javascript">//<![CDATA[
            // Google Analytics for WordPress by Yoast v4.3.3 | http://yoast.com/wordpress/google-analytics/
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-159522-10']);
				            _gaq.push(['_trackPageview']);
            (function () {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(ga, s);
            })();
            //]]></script>
			<link rel="alternate" type="application/rss+xml" title="Playwithmyled.com &raquo; Glowing Marquee Category Feed" href="http://playwithmyled.com/category/projects/glowing-marquee/feed/" />
<link rel='stylesheet' id='output-css'  href='http://playwithmyled.com/wp-content/plugins/addthis/css/output.css?ver=3.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='http://playwithmyled.com/wp-includes/css/dashicons.min.css?ver=3.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='thickbox-css'  href='http://playwithmyled.com/wp-includes/js/thickbox/thickbox.css?ver=20131201' type='text/css' media='all' />
<link rel='stylesheet' id='wpdm-front-css'  href='http://playwithmyled.com/wp-content/plugins/download-manager/css/front.css?ver=3.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='YoutubeShortcodeMargenn-css'  href='http://playwithmyled.com/wp-content/plugins/youtube-shortcode/youtube-shortcode.css?ver=3.8.3' type='text/css' media='all' />
<link rel='stylesheet' id='twentythirteen-fonts-css'  href='//fonts.googleapis.com/css?family=Source+Sans+Pro%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic%7CBitter%3A400%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='http://playwithmyled.com/wp-content/themes/twentythirteen/fonts/genericons.css?ver=2.09' type='text/css' media='all' />
<link rel='stylesheet' id='twentythirteen-style-css'  href='http://playwithmyled.com/wp-content/themes/led13/style.css?ver=2013-07-18' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentythirteen-ie-css'  href='http://playwithmyled.com/wp-content/themes/twentythirteen/css/ie.css?ver=2013-07-18' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='http://playwithmyled.com/wp-includes/js/jquery/jquery.js?ver=1.10.2'></script>
<script type='text/javascript' src='http://playwithmyled.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://playwithmyled.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://playwithmyled.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.8.3" />
    <script language="JavaScript">
    <!--
      jQuery(function(){
          
          jQuery('.wpdm-popup').click(function(){
              tb_show(jQuery(this).html(),this.href+'&modal=1&width=600&height=400');
              return false;
          });
          
          jQuery('.haspass').click(function(){
              var url = jQuery(this).attr('href');
              var id = jQuery(this).attr('rel');
              var password = jQuery('#pass_'+id).val();
              jQuery.post('http://playwithmyled.com/',{download:id,password:password},function(res){
                  
                  if(res=='error') {
                    
                      jQuery('#wpdm_file_'+id+' .perror').html('Wrong Password');
                      setTimeout("jQuery('#wpdm_file_"+id+" .perror').html('');",3000);
                      return false;
                  } else {
                      location.href = 'http://playwithmyled.com/?wpdmact=process&did='+res;
                  }
                  //if(res.url!='undefined') location.href=res.url;
                                           
              });
               
              return false;
          });
      })
    //-->
    </script>
    	<style type="text/css" id="twentythirteen-header-css">
			.site-header {
			background: url(http://playwithmyled.com/wp-content/uploads/2013/12/background-lines1.jpg) no-repeat scroll top;
			background-size: 1600px auto;
		}
		</style>
		<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300' rel='stylesheet' type='text/css'>
</head>

<body class="archive category category-glowing-marquee category-8 single-author sidebar">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header" role="banner">
			<a class="home-link" href="http://playwithmyled.com/" title="Playwithmyled.com" rel="home">
				<h1 class="site-title"><span>Playwithmyled.com</span></h1>
				<h2 class="site-description"></h2>
			</a>

			<div id="navbar" class="navbar">
				<nav id="site-navigation" class="navigation main-navigation" role="navigation">
					<h3 class="menu-toggle">Menu</h3>
					<a class="screen-reader-text skip-link" href="#content" title="Skip to content">Skip to content</a>
					<div class="menu-main-container"><ul id="menu-main" class="nav-menu"><li id="menu-item-615" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-615"><a href="/">Blog</a></li>
<li id="menu-item-650" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-650"><a href="http://playwithmyled.com/projects/">Projects</a>
<ul class="sub-menu">
	<li id="menu-item-656" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-656"><a href="http://playwithmyled.com/category/projects/smart-garden/">Smart Garden</a></li>
	<li id="menu-item-655" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-655"><a href="http://playwithmyled.com/category/projects/marvin/">Marvin</a></li>
	<li id="menu-item-654" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-654"><a href="http://playwithmyled.com/category/projects/lila/">LILA</a></li>
	<li id="menu-item-653" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-653"><a href="http://playwithmyled.com/category/projects/kids-buttons-box/">Kid&#8217;s Buttons Box</a></li>
</ul>
</li>
<li id="menu-item-618" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-618"><a href="http://playwithmyled.com/internet-to-serial-proxy/">Internet to Serial Proxy</a></li>
</ul></div>					<form role="search" method="get" class="search-form" action="http://playwithmyled.com/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" title="Search for:" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form>				</nav><!-- #site-navigation -->
			</div><!-- #navbar -->
		</header><!-- #masthead -->

		<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

					<header class="archive-header">
				<h1 class="archive-title">Category Archives: Glowing Marquee</h1>

							</header><!-- .archive-header -->

										
<article id="post-292" class="post-292 post type-post status-publish format-standard hentry category-arduino category-glowing-marquee category-insek category-programming">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://playwithmyled.com/2010/11/please-follow-the-protocol/" rel="bookmark">Please follow the protocol</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://playwithmyled.com/2010/11/please-follow-the-protocol/" title="Permalink to Please follow the protocol" rel="bookmark"><time class="entry-date" datetime="2010-11-06T20:49:50+00:00">November 6, 2010</time></a></span><span class="categories-links"><a href="http://playwithmyled.com/category/arduino/" title="View all posts in Arduino" rel="category tag">Arduino</a>, <a href="http://playwithmyled.com/category/projects/glowing-marquee/" title="View all posts in Glowing Marquee" rel="category tag">Glowing Marquee</a>, <a href="http://playwithmyled.com/category/insek/" title="View all posts in Internet to Serial Proxy" rel="category tag">Internet to Serial Proxy</a>, <a href="http://playwithmyled.com/category/programming/" title="View all posts in Programming" rel="category tag">Programming</a></span><span class="author vcard"><a class="url fn n" href="http://playwithmyled.com/author/Kevin/" title="View all posts by Kevin Filteau" rel="author">Kevin Filteau</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>As you have seen, the hardware part of the Glowing Marque prototype, build from an old scanner, is functioning. The last step I did is the programming of a protocol to communicate with the Arduino by the <del>Insek Proxy</del> Internet to Serial Proxy app.</p>
<p>The first issue is that I want to send a string of hexadecimal values and then convert it to real hex in the Arduino for displaying this data. The second problem to solve is to send a longer string that the serial buffer and the buffer of the Messenger library.</p>
<p>There is the piece of code I did for the protocol:</p>
<pre>#include &lt;Messenger.h&gt;

#define DATASIZE 70
unsigned char data[DATASIZE+1]; // + 1 space for the closing \0 char.

Messenger message = Messenger();

/*
	2010-11-03: Append data.
	Args: source, target, position to start from zero to DATASIZE.
*/
void appendData(char * s, unsigned char * dp, int pos) {

	// Create and reset the pointer to display data.
	dp = dp + pos; // Move to starting position.

	char monkey[3];
	long chimp;
	for (int i=0; i&lt;strlen(s); i=i+2) {
		monkey[0] = s[i];
		monkey[1] = s[i+1];
		monkey[2] = '\0';

		// Convert the monkey string to long int.
		chimp = strtol(monkey, NULL, 16);

		// Append chimp to displayData;
		*dp++ = (unsigned char)chimp; // Cast the long to an unsigned char.

		//Serial.print(chimp, BYTE);
	}

	*dp = '\0'; // Close the string.

}

void messageCompleted() {

	//Serial.println("Message completed.");

	while ( message.available() ) {
		//Serial.print(".");
		if ( message.checkString("data") ) { // Show text.

			if( message.checkString("flush")) {
				flushData();
				Serial.println("\nData flushed.");

			} else {
				// 1st get position
				int pos = message.readInt();

				// 2nd get length
				int length = message.readInt();

				// 3rd get data
				char tmp_data[128];

				// Move data to the temps string.
				message.copyString(tmp_data, 128);

				// Check if data length
				// Find the first position of the \0.
				int data_length = strlen(tmp_data);

				// Data are always 2 char to build one hex value.
				if( length*2 == data_length) {

						if( pos + data_length - 1 &gt; DATASIZE) {
							Serial.println("\nData overflow.");
						} else {

						//Serial.println(strlen(tmp_data));

						//Serial.println(tmp_data);

						appendData(tmp_data, &amp;data[0], pos);

						Serial.println("");
						Serial.println("Data:");

						for(int a=0; a &lt; DATASIZE; a++) {
							if( data[a] == '\0' ) {
								Serial.print("-");
							} else {
								Serial.print(data[a], BYTE);
							}
						}
					}
				} else {
					Serial.println("Bad checksum.");
				}

			} // End append data.

		} else {
			message.readChar(); // Flush the rest of the message buffer.
		}

	}
}

void flushData() {
	for(int i=0; i&lt;DATASIZE+1; i++) {
		data[i] = '\0';
	}
}

void setup() {

	Serial.begin(9600);
	message.attach(messageCompleted);

}
void loop() {
	while ( Serial.available( ) ) message.process(Serial.read( ) );
}</pre>
<p>The protocol is relatively simple, there is the structure:</p>
<pre>header position length data</pre>
<ul>
<li>The &#8216;header&#8217; is the command, what the Arduino have to do with that string. I use &#8216;data&#8217; as the header to send data.</li>
<li>The &#8216;position&#8217; is the position in the array the data will be copied.</li>
<li>The &#8216;length&#8217; is the quantity of numbers to send. It&#8217;s used to check if the Arduino received the right length of data and to verify if the data will not overflow the data array.</li>
</ul>
<p>There is an example to send a first packet of data:</p>
<pre>data 0 4 ff00ff00</pre>
<p>Here I send four numbers build with two hexadecimal characters (from 00 to ff). They will be placed at the beginning of the array.</p>
<p>If I want to append &#8216;ddee33&#8242; to this value in the array, I shall use this call:</p>
<pre>data 4 3 ddee</pre>
<p>So this way I can send many blocks of data and built an array longer than the serial buffer.</p>
<p>After that I can implement other calls to work with this data. A sample call can be (not built in this sample code): show data. I did that in code of the Glowing Marquee project, so I send packets of hex data, and ask the Arduino to show it. I will be back with more on this project in my next posts.</p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
					<div class="comments-link">
				<a href="http://playwithmyled.com/2010/11/please-follow-the-protocol/#comments" title="Comment on Please follow the protocol">View all 5 comments</a>			</div><!-- .comments-link -->
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-219" class="post-219 post type-post status-publish format-standard hentry category-glowing-marquee category-news">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://playwithmyled.com/2010/06/a-teaser-of-the-glowing-marquee/" rel="bookmark">A teaser of the Glowing Marquee</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://playwithmyled.com/2010/06/a-teaser-of-the-glowing-marquee/" title="Permalink to A teaser of the Glowing Marquee" rel="bookmark"><time class="entry-date" datetime="2010-06-10T01:29:08+00:00">June 10, 2010</time></a></span><span class="categories-links"><a href="http://playwithmyled.com/category/projects/glowing-marquee/" title="View all posts in Glowing Marquee" rel="category tag">Glowing Marquee</a>, <a href="http://playwithmyled.com/category/news/" title="View all posts in News" rel="category tag">News</a></span><span class="author vcard"><a class="url fn n" href="http://playwithmyled.com/author/Kevin/" title="View all posts by Kevin Filteau" rel="author">Kevin Filteau</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p><object width="530" height="425"><param name="movie" value="http://www.youtube.com/v/FmZBUPVNsL8&#038;hl=en_US&#038;fs=1&#038;"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/FmZBUPVNsL8&#038;hl=en_US&#038;fs=1&#038;" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="530" height="425"></embed></object></p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
					<div class="comments-link">
				<a href="http://playwithmyled.com/2010/06/a-teaser-of-the-glowing-marquee/#respond" title="Comment on A teaser of the Glowing Marquee"><span class="leave-reply">Leave a comment</span></a>			</div><!-- .comments-link -->
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-99" class="post-99 post type-post status-publish format-standard hentry category-arduino category-glowing-marquee category-programming">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://playwithmyled.com/2010/05/stepper-motor-controller-circuit-and-code/" rel="bookmark">Stepper motor controller circuit and code</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://playwithmyled.com/2010/05/stepper-motor-controller-circuit-and-code/" title="Permalink to Stepper motor controller circuit and code" rel="bookmark"><time class="entry-date" datetime="2010-05-30T02:04:28+00:00">May 30, 2010</time></a></span><span class="categories-links"><a href="http://playwithmyled.com/category/arduino/" title="View all posts in Arduino" rel="category tag">Arduino</a>, <a href="http://playwithmyled.com/category/projects/glowing-marquee/" title="View all posts in Glowing Marquee" rel="category tag">Glowing Marquee</a>, <a href="http://playwithmyled.com/category/programming/" title="View all posts in Programming" rel="category tag">Programming</a></span><span class="author vcard"><a class="url fn n" href="http://playwithmyled.com/author/Kevin/" title="View all posts by Kevin Filteau" rel="author">Kevin Filteau</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>I build a step motor controller based on the <a href="http://arduino.cc/en/Reference/StepperBipolarCircuit">schematics</a> found on the Arduino Web site. First I try the 2 pins one for bipolar stepper motor. I wont be able to make it work, even less with the library available on the site. Maybe I&#8217;m dumb and I really dont understand something, but this circuit keeps both coils active at the same time.</p>
<p>So I tried the second circuit, the 4 pins one. With the same library I wasn&#8217;t able to make it work either. So I create a piece of code of my own and I finally managed to make the motor run correctly.</p>
<p>After that, I realize that I can merge the to circuits to possibly create a PWM abled bipolar motor controller with the L297D. A somewhat bizzare idea, but I think it&#8217;s possible if we can program the Arduino to send 4 synced PWM signals. I&#8217;ll come back later (maybe never) with this thought. After some research I found that the TI DRV8811 and the Allegro A3977 are much more appropriate chips to do microstepping.</p>
<p>But for now, there is my circuit. It&#8217;s advantage is that it can release the coils. <a href="http://playwithmyled.com/2010/05/stepper-motor-controller-circuit-and-code/steppercontroller-fz/">Download the schematics</a> (Fritzing format).</p>
<p><a rel="attachment wp-att-108" href="http://playwithmyled.com/2010/05/stepper-motor-controller-circuit-and-code/stepper-controller-2/"><img class="alignnone size-medium wp-image-108" title="Stepper motor controller" src="http://playwithmyled.com/wp-content/uploads/2010/05/Stepper-Controller-530x397.jpg" alt="" width="530" height="397" /></a></p>
<p>The two PNP transistors are connected like the circuit proposed on the Arduino Web site. Plus, I use the enable pins. So my circuit needs four pins, and I don&#8217;t found a way to use less.</p>
<h3>Parts list</h3>
<p><!-- p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 17.0px Helvetica} --></p>
<ul>
<li>1 x Arduino</li>
<li>1 x L293 Quadruple Half H-Bridge</li>
<li>2 x 1K Ohm Resistors</li>
<li>2 x 10K Ohm Resistors</li>
<li>2 x 2N2222 NPN Transistors</li>
<li>1 x Bipolar Step Motor</li>
</ul>
<p>There is the sequence to make the motor turn one direction, invert it to make it turn the other.</p>
<table class="table-wh control">
<caption> Control sequence<br />
</caption>
<tbody>
<tr>
<th scope="col">CTRL A</th>
<th scope="col">EN A</th>
<th scope="col">CTRL B</th>
<th scope="col">EN B</th>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>There is my code to control the stepper motor. Like you see in my code I use direct port command to take less processor time. And I create a function called in the main loop for each steps. This way the code can do something else when the motor is running.</p>
<pre>/*
	Stepper Motor Controller
	by Kevin Filteau 2010-05-29
	Playwithmyled.com
*/

// Motor controller pins.
#define pinMotorCtrlA 4
#define pinMotorCtrlB 7
#define pinMotorEnA 5
#define pinMotorEnB 6

// Direction constants.
#define GOLEFT 0
#define GORIGHT 1

// Motor states and position.
boolean motorRunning = false;
int motorMax = 700;
int motorPos = 0;

/**********************************************
	MOTOR
**********************************************/

// Setup the motor.
void motorSetup() {
  pinMode(pinMotorCtrlA, OUTPUT);
  pinMode(pinMotorCtrlB, OUTPUT);
  pinMode(pinMotorEnA, OUTPUT);
  pinMode(pinMotorEnB, OUTPUT);
  // Everybody to LOW.
  digitalWrite(pinMotorCtrlA, LOW);
  digitalWrite(pinMotorCtrlB, LOW);
  digitalWrite(pinMotorEnA, LOW);
  digitalWrite(pinMotorEnB, LOW);
}

// Free the motor.
void motorFree() {
  digitalWrite(pinMotorEnA, LOW);
  digitalWrite(pinMotorEnB, LOW);
}

// Make the motor spin one step in the direction specified.
// Pins    7654 ----
// Binary 0000 0000
void motorSpin(boolean dir) {

	static int pos = 0; // Starting step pos.

	int stepsSeq[] = {0xC0,0x30,0x40,0x20}; // Registry value.
	int st;

  // Timing
  static unsigned long previousMillis;
  long interval = 3;

	if(millis() - previousMillis &gt; interval) {
		previousMillis = millis();

		st = stepsSeq[pos];
		if( dir == GOLEFT ) {
			pos++; if(pos&gt;3) pos=0;
			motorPos++;
		} else {
			pos--; if(pos&lt;0) pos=3;
			motorPos--;
		}
		PORTD &amp;= 0xF;
		PORTD |= st;
	}

}

/**********************************************
	MAIN FUNCTIONS.
**********************************************/
void setup() {
	motorSetup();

}

void loop() {
	motorSpin(GOLEFT);
	// motorSpin(GORIGHT);
}</pre>
<p>And to close this post. Some pictures of the prototype, the finalized circuit board (useful for the pinout) and a video taken while testing the circuit.</p>
<p><a rel="attachment wp-att-131" href="http://playwithmyled.com/2010/05/stepper-motor-controller-circuit-and-code/l293d-motor-controller-proto-1/"><img class="alignnone size-medium wp-image-131" title="L293D stepper motor controller proto" src="http://playwithmyled.com/wp-content/uploads/2010/05/l293d-motor-controller-proto-1-530x397.jpg" alt="" width="530" height="397" /></a></p>
<p><a rel="attachment wp-att-132" href="http://playwithmyled.com/2010/05/stepper-motor-controller-circuit-and-code/l293d-motor-controller-proto-2/"><img class="alignnone size-medium wp-image-132" title="L293D stepper motor controller proto 2" src="http://playwithmyled.com/wp-content/uploads/2010/05/l293d-motor-controller-proto-2-530x397.jpg" alt="" width="530" height="397" /></a></p>
<p><a rel="attachment wp-att-135" href="http://playwithmyled.com/2010/05/stepper-motor-controller-circuit-and-code/l293d-motor-controller-circuit-board/"><img class="alignnone size-medium wp-image-135" title="L293D stepper motor controller circuit board and pinout" src="http://playwithmyled.com/wp-content/uploads/2010/05/l293d-motor-controller-circuit-board-530x397.jpg" alt="" width="530" height="397" /></a></p>
<p><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="530" height="425" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube-nocookie.com/v/euxCAeJZmCE&amp;hl=en_US&amp;fs=1&amp;rel=0" /><param name="allowfullscreen" value="true" /><embed type="application/x-shockwave-flash" width="530" height="425" src="http://www.youtube-nocookie.com/v/euxCAeJZmCE&amp;hl=en_US&amp;fs=1&amp;rel=0" allowfullscreen="true" allowscriptaccess="always"></embed></object></p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
					<div class="comments-link">
				<a href="http://playwithmyled.com/2010/05/stepper-motor-controller-circuit-and-code/#comments" title="Comment on Stepper motor controller circuit and code">View all 34 comments</a>			</div><!-- .comments-link -->
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-73" class="post-73 post type-post status-publish format-standard hentry category-glowing-marquee category-news">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://playwithmyled.com/2010/05/all-parts-are-assembled-and-its-to-be-programmed/" rel="bookmark">All parts are assembled and it&#8217;s ready to be programmed</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://playwithmyled.com/2010/05/all-parts-are-assembled-and-its-to-be-programmed/" title="Permalink to All parts are assembled and it&#8217;s ready to be programmed" rel="bookmark"><time class="entry-date" datetime="2010-05-10T04:24:55+00:00">May 10, 2010</time></a></span><span class="categories-links"><a href="http://playwithmyled.com/category/projects/glowing-marquee/" title="View all posts in Glowing Marquee" rel="category tag">Glowing Marquee</a>, <a href="http://playwithmyled.com/category/news/" title="View all posts in News" rel="category tag">News</a></span><span class="author vcard"><a class="url fn n" href="http://playwithmyled.com/author/Kevin/" title="View all posts by Kevin Filteau" rel="author">Kevin Filteau</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>All the mechanicals parts and the control boards are now assembled and wired up together. All functions have been tested separately. Now come the time to do some programming. But before I will show you what I&#8217;ve already done in my next posts.</p>
<p>Because some pins of the Arduino have a special function, like interrupt, the connections on the proto will be useful to connect thinks to the right pins when I will start programming. I&#8217;ll probably use my previous (modified yesterday) multitasking script to be able to control all things at virtually the same time.</p>
<p><img class="alignnone size-medium wp-image-81" title="Glowing Marquee prototype assembled and wired up" src="http://playwithmyled.com/wp-content/uploads/2010/05/prototype-one-assembled-and-wired-up-530x397.jpg" alt="Glowing Marquee prototype assembled and wired up" width="530" height="397" /></p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
					<div class="comments-link">
				<a href="http://playwithmyled.com/2010/05/all-parts-are-assembled-and-its-to-be-programmed/#respond" title="Comment on All parts are assembled and it&#8217;s ready to be programmed"><span class="leave-reply">Leave a comment</span></a>			</div><!-- .comments-link -->
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-47" class="post-47 post type-post status-publish format-standard hentry category-glowing-marquee category-programming category-projects">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://playwithmyled.com/2010/04/put-your-image-up-in-the-air/" rel="bookmark">Put your image up in the air</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://playwithmyled.com/2010/04/put-your-image-up-in-the-air/" title="Permalink to Put your image up in the air" rel="bookmark"><time class="entry-date" datetime="2010-04-11T04:51:57+00:00">April 11, 2010</time></a></span><span class="categories-links"><a href="http://playwithmyled.com/category/projects/glowing-marquee/" title="View all posts in Glowing Marquee" rel="category tag">Glowing Marquee</a>, <a href="http://playwithmyled.com/category/programming/" title="View all posts in Programming" rel="category tag">Programming</a>, <a href="http://playwithmyled.com/category/projects/" title="View all posts in Projects" rel="category tag">Projects</a></span><span class="author vcard"><a class="url fn n" href="http://playwithmyled.com/author/Kevin/" title="View all posts by Kevin Filteau" rel="author">Kevin Filteau</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>My goal is to use an image and output it to the marquee. I really don&#8217;t want to build matrix characters one by one. I mostly want to create anti-aliased characters or graphics. How? By making the leds blink more or less time. That will make the glow-in-the-dark stripe illuminate more when the led lit more longer. So, for now, I code a test program in PHP, a familiar language for me, to read the image and output the result data I need to give to the Arduino microcontroler.</p>
<p>There is the idea of code :</p>
<pre>
&lt;?php
/*
	This script display a black and white graphic
	constructed in a html table
	based on the readed jpg image.

*/
// Declare the image file to read.
$file = &quot;test.jpg&quot;;
// Read the jpg file and create an image in memory.
$image = imagecreatefromjpeg($file);
// Get the size of the image.
$width = imagesx($image);
$height = imagesy($image);

print &quot;&lt;table&gt;&lt;tr&gt;&quot;;
// Read one row of the image at a time.
for ($y=0; $y &lt; $height; $y++) {
	// Read one column of the image at a time.
	for ($x=0; $x &lt; $width; $x++) {
		// Get the index of a pixel.
		$pix_index = imagecolorat($image,$x,$y);
		// Get the decimal RGB color of this pixel.
		$A = imagecolorsforindex($image,$pix_index);
		// Convert this color to gray scale.
		$col = ($A['red'] + $A['green'] + $A['blue'] ) / 3;
		// Convert this color to hex.
		$col = dechex($col);
		
		print &quot;&lt;td style=\&quot;width:10px;height:10px;background-color:#{$col}{$col}{$col}\&quot;&gt;&amp;nbsp;&lt;/td&gt;&quot;;
	}
	print&quot;&lt;/tr&gt;&lt;tr&gt;&quot;;
}
print &quot;&lt;/tr&gt;&lt;/table&gt;&quot;;
?&gt;

</pre>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
					<div class="comments-link">
				<a href="http://playwithmyled.com/2010/04/put-your-image-up-in-the-air/#respond" title="Comment on Put your image up in the air"><span class="leave-reply">Leave a comment</span></a>			</div><!-- .comments-link -->
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-43" class="post-43 post type-post status-publish format-standard hentry category-glowing-marquee category-news">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://playwithmyled.com/2010/04/glowing-marquee/" rel="bookmark">Glowing marquee</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://playwithmyled.com/2010/04/glowing-marquee/" title="Permalink to Glowing marquee" rel="bookmark"><time class="entry-date" datetime="2010-04-10T22:36:07+00:00">April 10, 2010</time></a></span><span class="categories-links"><a href="http://playwithmyled.com/category/projects/glowing-marquee/" title="View all posts in Glowing Marquee" rel="category tag">Glowing Marquee</a>, <a href="http://playwithmyled.com/category/news/" title="View all posts in News" rel="category tag">News</a></span><span class="author vcard"><a class="url fn n" href="http://playwithmyled.com/author/Kevin/" title="View all posts by Kevin Filteau" rel="author">Kevin Filteau</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>Inspired by the <a href="http://blog.makezine.com/archive/2010/01/glow-in-the-dark_record_player_disp.html">Record Player Display</a> projet, I start doing one of my own. A glowing stripe marquee, using an old scanner ripped off. The objective is to learn how stepper motors works, optic switch and resume my experience with logic chips like the 74HC595 shift register. Globally, everything is relatively simple and it&#8217;s just a matter of seeking the right information over the internet, and a bit of thinking. The current video is presenting my first test, without the mechanical part. Just the leds and the glowing vinyl stripe moved manually. The last week, I solder the leds and the shift register on an permanent circuit board. It will be fixed on the scanner soon. The optic limit switch works and it will be used to know the reset position of the scanner. The next step will be to assemble the circuit board for the step motor driver. I use a L293D. So happy viewing. You will understand why I certainly make some mistake in my writing.</p>
<p><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="530" height="425" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="src" value="http://www.youtube.com/v/fML5sO3fV54&amp;hl=en_US&amp;fs=1&amp;" /><param name="allowfullscreen" value="true" /><embed type="application/x-shockwave-flash" width="530" height="425" src="http://www.youtube.com/v/fML5sO3fV54&amp;hl=en_US&amp;fs=1&amp;" allowscriptaccess="always" allowfullscreen="true"></embed></object></p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
					<div class="comments-link">
				<a href="http://playwithmyled.com/2010/04/glowing-marquee/#respond" title="Comment on Glowing marquee"><span class="leave-reply">Leave a comment</span></a>			</div><!-- .comments-link -->
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
							
<article id="post-37" class="post-37 post type-post status-publish format-standard hentry category-glowing-marquee category-news">
	<header class="entry-header">
		
				<h1 class="entry-title">
			<a href="http://playwithmyled.com/2010/03/step-one-step-tow-motor-on/" rel="bookmark">Step one, step two, motor on!</a>
		</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://playwithmyled.com/2010/03/step-one-step-tow-motor-on/" title="Permalink to Step one, step two, motor on!" rel="bookmark"><time class="entry-date" datetime="2010-03-28T03:14:03+00:00">March 28, 2010</time></a></span><span class="categories-links"><a href="http://playwithmyled.com/category/projects/glowing-marquee/" title="View all posts in Glowing Marquee" rel="category tag">Glowing Marquee</a>, <a href="http://playwithmyled.com/category/news/" title="View all posts in News" rel="category tag">News</a></span><span class="author vcard"><a class="url fn n" href="http://playwithmyled.com/author/Kevin/" title="View all posts by Kevin Filteau" rel="author">Kevin Filteau</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>When I was young, I had two unipolar (don&#8217;t know that detail since this week) stepper motors. My pleasure was to connect them together and when I spinned one, the other performed nearly the same rotation. It was a great pleasure to play with. But I finally make one (bipolar) really work today. Yeah! I work hard to understand the motor I got, the MITSUMI M42SP-4. When I look over the Net to find some specs, it&#8217;s never what my motor look like. So I guest a four wires bipolar, and I tried it on 5v, safely. Something append, but not correctly. Any bad connections with the L293D? I think not. I found, after a while, that my problem was the Arduino stepper library. I don&#8217;t know if I was doing something wrong but it&#8217;s look like the stepper function always stimulate both coils at the same time. So I coded an ugly function to recreate the four steps needed, and Bingo! This will make my projet go further.</p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
					<div class="comments-link">
				<a href="http://playwithmyled.com/2010/03/step-one-step-tow-motor-on/#respond" title="Comment on Step one, step two, motor on!"><span class="leave-reply">Leave a comment</span></a>			</div><!-- .comments-link -->
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
			
			
		
		</div><!-- #content -->
	</div><!-- #primary -->

	<div id="tertiary" class="sidebar-container" role="complementary">
		<div class="sidebar-inner">
			<div class="widget-area">
				<aside id="text-4" class="widget widget_text">			<div class="textwidget"><div id="twitter"><a class="twitter-timeline" href="https://twitter.com/playwithmyled" data-widget-id="260910644767899648">Tweets by @playwithmyled</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div></div>
		</aside><aside id="text-6" class="widget widget_text"><h3 class="widget-title">Projects</h3>			<div class="textwidget"><p><a href="/category/projects/smart-garden/"><img src="/wp-content/uploads/2013/12/smart-garden.jpg" alt="Smart Garden" /></a></p>

<p><a href="/category/projects/marvin/"><img src="/wp-content/uploads/2013/12/marvin.jpg" alt="Marvin Robot" /></a></p>

<p><a href="/category/projects/lila/"><img src="/wp-content/uploads/2013/12/lila.jpg" alt="Lila Robot Lamp" /></a></p>

<p><a href="/category/projects/kids-buttons-box/"><img src="/wp-content/uploads/2013/12/the-amazing-button-box.jpg" alt="The Amazing Button Box" /></a></p>



</div>
		</aside><aside id="text-5" class="widget widget_text">			<div class="textwidget"><div id="youtube-playlist">
<iframe width="342" height="192" src="//www.youtube-nocookie.com/embed/videoseries?list=PL8A7BE4002BD21BF7" frameborder="0" allowfullscreen></iframe>
</div></div>
		</aside>			</div><!-- .widget-area -->
		</div><!-- .sidebar-inner -->
	</div><!-- #tertiary -->

		</div><!-- #main -->
		<footer id="colophon" class="site-footer" role="contentinfo">
				<div id="secondary" class="sidebar-container" role="complementary">
		<div class="widget-area">
			<aside id="categories-3" class="widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-4"><a href="http://playwithmyled.com/category/arduino/" title="View all posts filed under Arduino">Arduino</a>
</li>
	<li class="cat-item cat-item-14"><a href="http://playwithmyled.com/category/projects/edgar/" title="View all posts filed under Edgar">Edgar</a>
</li>
	<li class="cat-item cat-item-8 current-cat"><a href="http://playwithmyled.com/category/projects/glowing-marquee/" title="View all posts filed under Glowing Marquee">Glowing Marquee</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://playwithmyled.com/category/insek/" title="View all posts filed under Internet to Serial Proxy">Internet to Serial Proxy</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://playwithmyled.com/category/projects/kids-buttons-box/" title="View all posts filed under Kid&#039;s Buttons Box">Kid&#039;s Buttons Box</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://playwithmyled.com/category/projects/lila/" title="View all posts filed under LILA">LILA</a>
</li>
	<li class="cat-item cat-item-15"><a href="http://playwithmyled.com/category/projects/marvin/" title="View all posts filed under Marvin">Marvin</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://playwithmyled.com/category/mixed/" title="View all posts filed under Mixed">Mixed</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://playwithmyled.com/category/news/" title="View all posts filed under News">News</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://playwithmyled.com/category/programming/" title="View all posts filed under Programming">Programming</a>
</li>
	<li class="cat-item cat-item-7 current-cat-parent"><a href="http://playwithmyled.com/category/projects/" title="View all posts filed under Projects">Projects</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://playwithmyled.com/category/raspberry-pi/" title="View all posts filed under Raspberry Pi">Raspberry Pi</a>
</li>
	<li class="cat-item cat-item-18"><a href="http://playwithmyled.com/category/projects/smart-garden/" title="View all posts filed under Smart Garden">Smart Garden</a>
</li>
		</ul>
</aside><aside id="linkcat-4" class="widget widget_links"><h3 class="widget-title">Arduino</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://arduino.cc/" title="The Arduino Duemilanove microcontroller board official website">Arduino</a></li>
<li><a href="http://www.freeduino.org/" title="Index of practical subjects for the Arduinotm and Freeduino microcontrollers">Arduino Knowledge</a></li>

	</ul>
</aside>
<aside id="linkcat-3" class="widget widget_links"><h3 class="widget-title">Inspiring</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://designyoutrust.com/" title="Design You Trust is a daily design magazine, blog and community, full of new design trends, news and events, great design portfolios, young design bloods, design articles, photographies, fashion, creative advertisements, architectural inspirations, video ">Design You Trust</a></li>
<li><a href="http://blog.makezine.com/" title="Make technologie on your time">Makezine Blog</a></li>

	</ul>
</aside>
<aside id="archives-3" class="widget widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://playwithmyled.com/2013/12/'>December 2013</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2013/11/'>November 2013</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2013/09/'>September 2013</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2013/04/'>April 2013</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2013/03/'>March 2013</a>&nbsp;(4)</li>
	<li><a href='http://playwithmyled.com/2013/02/'>February 2013</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2012/10/'>October 2012</a>&nbsp;(3)</li>
	<li><a href='http://playwithmyled.com/2012/03/'>March 2012</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2011/11/'>November 2011</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2011/09/'>September 2011</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2010/12/'>December 2010</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2010/11/'>November 2010</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2010/10/'>October 2010</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2010/09/'>September 2010</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2010/06/'>June 2010</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2010/05/'>May 2010</a>&nbsp;(3)</li>
	<li><a href='http://playwithmyled.com/2010/04/'>April 2010</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2010/03/'>March 2010</a>&nbsp;(2)</li>
	<li><a href='http://playwithmyled.com/2010/02/'>February 2010</a>&nbsp;(1)</li>
	<li><a href='http://playwithmyled.com/2009/10/'>October 2009</a>&nbsp;(1)</li>
		</ul>
</aside><aside id="text-3" class="widget widget_text">			<div class="textwidget"><p style="line-height:8px;"><div style="width:45px;height:45px;float:left; margin:0 10px 0 0;"><object type="image/svg+xml" data="/media/bitcoin-logo.svg">BITCOIN</object></div>I love bitcoin, please send me some if you wish.
1F4fhchR46w6CE4CKkcHdTJm1wgRKPndXU
</p>

<p>Or you can send me some stuff in my wish list :</p>

<ul style="margin-left:10px;">
<li>8ohm shelf speakers</li>
<li>Raspberry Pi</li>
<li>Arduino</li>
<li>Any electronic parts</li>
</ul>

<p>Thank you so much</p></div>
		</aside>		</div><!-- .widget-area -->
	</div><!-- #secondary -->

			<div class="site-info">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

	<script type="text/javascript">if (typeof(addthis_share) == "undefined"){ addthis_share = {"url_transforms":{"shorten":{"twitter":"bitly"}},"shorteners":{"bitly":""}};}

var addthis_config = {"data_track_clickback":false,"data_track_addressbar":false,"data_track_textcopy":false,"ui_atversion":"300"};
var addthis_product = 'wpp';
</script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4ff655a271761b8e"></script><script type='text/javascript'>
/* <![CDATA[ */
var thickboxL10n = {"next":"Next >","prev":"< Prev","image":"Image","of":"of","close":"Close","noiframes":"This feature requires inline frames. You have iframes disabled or your browser does not support them.","loadingAnimation":"http:\/\/playwithmyled.com\/wp-includes\/js\/thickbox\/loadingAnimation.gif"};
/* ]]> */
</script>
<script type='text/javascript' src='http://playwithmyled.com/wp-includes/js/thickbox/thickbox.js?ver=3.1-20121105'></script>
<script type='text/javascript' src='http://playwithmyled.com/wp-includes/js/jquery/jquery.masonry.min.js?ver=2.1.05'></script>
<script type='text/javascript' src='http://playwithmyled.com/wp-content/themes/twentythirteen/js/functions.js?ver=2013-07-18'></script>
<!--wp_footer--></body>
</html>
