http://forum.arduino.cc/index.php?topic=142659.0;prev_next=next
HTTP/1.1 200 OK
Accept-Ranges: bytes
Age: 0
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Content-Encoding: gzip
Content-Type: text/html; charset=UTF-8
Date: Thu, 24 Jul 2014 15:41:57 GMT
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Last-Modified: Thu, 24 Jul 2014 15:43:25 GMT
Pragma: no-cache
Server: nginx/1.2.8
Set-Cookie: PHPSESSID=rapbme0afl7js17ldrrc6huum6; path=/
Vary: Accept-Encoding
Via: 1.1 varnish
X-Cache: MISS
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Powered-By: PHP/5.3.27-1~dotdeb.0
X-URL: /index.php?topic=142659.0;prev_next=next
X-Varnish: 489256513
X-XSS-Protection: 1; mode=block
Content-Length: 16496
Connection: Close

<!DOCTYPE html>
	<!--html5-->
	<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
	<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	  	<meta charset="utf-8" />

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="description" content="Can not connect to the server and send a SMS" />
	<meta name="robots" content="noindex" />
	<meta name="keywords" content="PHP, MySQL, bulletin, board, free, open, source, smf, simple, machines, forum" />
	<script language="JavaScript" type="text/javascript" src="http://forum.arduino.cc/Themes/default/script.js?fin11"></script>
	<script language="JavaScript" type="text/javascript"><!-- // --><![CDATA[
		var smf_theme_url = "http://forum.arduino.cc/Themes/arduinoWide";
		var smf_images_url = "http://forum.arduino.cc/Themes/arduinoWide/images";
		var smf_scripturl = "http://forum.arduino.cc/index.php";
		var smf_iso_case_folding = false;
		var smf_charset = "UTF-8";
	// ]]>
</script>

	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-22581631-3']);
	  _gaq.push(['_setDomainName', 'arduino.cc']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	</script>

	<title>Can not connect to the server and send a SMS - Arduino Forum</title>
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.png">
	<link rel="stylesheet" type="text/css" href="http://forum.arduino.cc/Themes/default/print.css?fin11" media="print" />
	<link rel="help" href="http://forum.arduino.cc/index.php?action=help" target="_blank" />
	<link rel="search" href="http://forum.arduino.cc/index.php?action=search" />
	<link rel="contents" href="http://forum.arduino.cc/index.php" />
	<link rel="alternate" type="application/rss+xml" title="Arduino Forum - RSS" href="http://forum.arduino.cc/index.php?type=rss;action=.xml" />
	<link rel="prev" href="http://forum.arduino.cc/index.php?topic=142354.0;prev_next=prev" />
	<link rel="next" href="http://forum.arduino.cc/index.php?topic=142354.0;prev_next=next" />
	<link rel="stylesheet" href="http://arduino.cc/fonts/fonts.css" type="text/css" />
	<link rel="stylesheet" href="http://arduino.cc/css/arduino-icons.css">
	<link rel="stylesheet" href="http://arduino.cc/css/animation.css"><!--[if IE 7]>
	<link rel="stylesheet" href="http://arduino.cc/css/arduino-icons-ie7.css"><![endif]-->
	<!--[if gte IE 9]><!-->
	<link rel='stylesheet' href='http://arduino.cc/css/foundation2.css' type='text/css' />
	<![endif]-->
	<!--[if IE 8]>
		<link rel='stylesheet' href='http://arduino.cccss/foundation_ie8.css' type='text/css' />
	<![endif]-->
	<link rel="stylesheet" href="http://arduino.cc/css/typeplate.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="http://arduino.cc/css/common.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="http://arduino.cc/css/forum-style.css" type="text/css" media="screen" />

	<script src="http://arduino.cc/js/vendor/custom.modernizr.js"></script>

	
	<link rel="index" href="http://forum.arduino.cc/index.php?board=4.0" /><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
	<script language="JavaScript" type="text/javascript"><!-- // --><![CDATA[
		var current_header = false;

		function shrinkHeader(mode)
		{
			document.cookie = "upshrink=" + (mode ? 1 : 0);
			document.getElementById("upshrink").src = smf_images_url + (mode ? "/upshrink2.gif" : "/upshrink.gif");

			document.getElementById("upshrinkHeader").style.display = mode ? "none" : "";
			document.getElementById("upshrinkHeader2").style.display = mode ? "none" : "";

			current_header = mode;
		}
	// ]]></script>
		<script language="JavaScript" type="text/javascript"><!-- // --><![CDATA[
			var current_header_ic = false;

			function shrinkHeaderIC(mode)
			{
				document.cookie = "upshrinkIC=" + (mode ? 1 : 0);
				document.getElementById("upshrink_ic").src = smf_images_url + (mode ? "/expand.gif" : "/collapse.gif");

				document.getElementById("upshrinkHeaderIC").style.display = mode ? "none" : "";

				current_header_ic = mode;
			}
		// ]]></script>
                  <script language="JavaScript" type="text/javascript" src="http://forum.arduino.cc/Themes/arduinoWide/mootools.js"></script>
                  <script language="JavaScript" type="text/javascript" src="http://forum.arduino.cc/Themes/arduinoWide/menu.js"></script><link href="http://arduino.cc/resources/jquery/plugins/bubblepopup/css/jquery.bubblepopup.v2.3.1.css?fin11" rel="stylesheet" type="text/css" /><script src="http://code.jquery.com/jquery-1.10.2.min.js"></script><script language="JavaScript" type="text/javascript" src="http://forum.arduino.cc/Themes/arduinoWide/t.js"></script></head>
 <body>


<div id="menuWings" class="fixed"></div>
  <div id="wrapper"/>

  
<script>
	var userAgent = (navigator.userAgent || navigator.vendor || window.opera).toLowerCase();
	if(userAgent.indexOf('mac')>0){
		$("head").append('<style type="text/css">@-moz-document url-prefix() {h1 a, h2 a, h3 a, h4 a, h5 a, h1 a:hover, h2 a:hover, th a, th a:hover, h3 a:hover, h4 a:hover, h5 a:hover, #wikitext h2 a:hover, #wikitext h3 a:hover, #wikitext h4 a:hover {padding-bottom: 0.5em!important;} #pageheader .search input{font-family: "TyponineSans Regular 18";} #pagefooter .monospace{margin-top: -4px;} #navWrapper ul.left &gt; li{margin-top: -2px; padding-bottom: 2px;}#navWrapper ul.right &gt; li{margin-top: -5px; padding-bottom: 5px;}#navWrapper ul.right &gt; li ul{margin-top: 4px;} .slider-container .fixed-caption p{padding:8px 0 14px 0}}</style>');
	}
</script>

<!--[if IE]>
<link rel='stylesheet' href='https://id.arduino.cc//css/ie-monospace.css' type='text/css' />
<![endif]-->

<div id="menuWings" class="fixed"></div>

<!--[if IE 8]>
<div class="alert-box panel ie8alert">
  <p><strong>Arduino.cc offers limited compatibility for Internet Explorer 8. Get a modern browser as Chrome, Firefox or Safari.</strong></p>
  <a href="" class="close">&times;</a>
</div>
<![endif]-->

<div id="pageheader">
	<div class="row" class="contain-to-grid">
		<div class="small-6 large-8 eight columns">
			<div class="title"><a href="http://arduino.cc">Arduino</a></div>
		</div>
		<div class="small-6 large-4 four columns search">
			<div class="row collapse">
				<form method="POST" action="index.php?action=search2" accept-charset="UTF-8" name="searchform"> 
	<div class="small-12 twelve columns">
		<i class="icon-search-2"></i>
		<input type="text" name="search" placeholder="Search the Arduino Forum">
		<input type="submit" name="btnG" value="search">
	</div>
</form>			</div>
		</div>
	</div>

	<!--[if gte IE 9]><!-->
	<div id="navWrapper"  class="sticky">
	<![endif]-->
	<!--[if IE 8]>
		<div id="navWrapper">
	<![endif]-->
		<nav class="top-bar"  data-options="is_hover:true" >
			<ul class="title-area">
				<li class="name"></li>
			</ul>

			<section class="top-bar-section">
				<ul class="left">
					<li id="navLogo">
						<a href="http://arduino.cc">
							<img src="https://id.arduino.cc//img/logo_46.png" alt="userpicture" />
						</a>
					</li>
					<li id="navHome"><a href="http://arduino.cc">Home</a></li>
					<li><a href="http://store.arduino.cc">Buy</a></li>
					<li><a href="http://arduino.cc/en/Main/Software">Download</a></li>
					<li class="has-dropdown"><a href="http://arduino.cc/en/Main/Products">Products</a>
						<ul class="dropdown">
							<li><a href="http://arduino.cc/en/Main/Products">Arduino</a></li>
							<li><a href="http://arduino.cc/en/ArduinoAtHeart/Products">AtHeart</a></li>
							<li><a href="http://arduino.cc/en/ArduinoCertified/Products">Certified</a></li>
						</ul>
					</li>
					<li class="has-dropdown"><a href="#">Learning</a>
						<ul class="dropdown">
							<li><a href="http://arduino.cc/en/Guide/HomePage">Getting started</a></li>
							<li><a href="http://arduino.cc/en/Tutorial/HomePage">Examples</a></li>
							<li><a href="http://playground.arduino.cc">Playground</a></li>
						</ul>
					</li>
					<li><a href="http://arduino.cc/en/Reference/HomePage">Reference</a></li>
					<li class="has-dropdown active"><a href="#">Support</a>
						<ul class="dropdown">
							<li><a href="http://arduino.cc/en/Main/FAQ">FAQ</a></li>
							<li><a href="http://forum.arduino.cc">Forum</a></li>
							<li><a href="http://arduino.cc/en/ContactUs">Contact Us</a></li>
						</ul>
					</li>
					<li><a href="http://blog.arduino.cc">Blog</a></li>
				</ul>

								<ul class="right">
					<li><a href="https://id.arduino.cc/auth/login/?returnurl=http%3A%2F%2Fforum.arduino.cc%2Findex.php%3Ftopic%3D142659.0%3Bprev_next%3Dnext" class="cart">LOG IN</a></li>
					<li><a href="https://id.arduino.cc/auth/signup" class="cart">SIGN UP</a></li>
				</ul>
							</section>
		</nav>
	</div>
</div>



<div id="mainarea">

	<div id="userPosts">
		<ul class="inline-list right" >
						<li><a href="http://forum.arduino.cc/index.php?action=search;advanced">Advanced Search</a></li>
		</ul>
	</div>

	
<a name="top"></a>
<a name="msg1069061"></a>
<div><div id="navBreadCrumb"><span class="homeIcon"><a href="http://forum.arduino.cc/index.php"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/home_icon.gif" alt="home icon" title=" home icon " width="9" height="11"></a></span> | <a href="http://forum.arduino.cc/index.php" class="nav">Arduino Forum</a>&nbsp;::&nbsp;<a href="http://forum.arduino.cc/index.php#2" class="nav">Using Arduino</a>&nbsp;::&nbsp;<a href="http://forum.arduino.cc/index.php?board=4.0" class="nav">Programming Questions</a>&nbsp;::&nbsp;Can not connect to the server and send a SMS</div></div>
      <div class="msgMenu">
			  <div class="nav" style="margin-bottom: 2px;"> <a href="http://forum.arduino.cc/index.php?topic=142354.0;prev_next=prev#new">&laquo; previous topic&nbsp;</a> <a href="http://forum.arduino.cc/index.php?topic=142354.0;prev_next=next#new">&nbsp;next topic &raquo;</a></div>
      </div>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
	<tr>
		<td class="middletext" valign="bottom" style="padding-bottom: 4px;">Pages: [<b>1</b>]   &nbsp;&nbsp;<a href="#lastPost"><b>Go Down</b></a></td>
		<td>
      <div class="msgMenu">
			  <div style="margin-bottom: -1px;">
			  <table cellpadding="0" cellspacing="0">
				  <tr><td>
					  
	<div class="right" id="forumActions">
		<ul class="button-group">

		<li><a class="small button" href="http://forum.arduino.cc/index.php?action=printpage;topic=142354.0" target="_blank">Print</a></li>
		</ul>
	</div>

	
				  </td></tr>
			  </table>
			  </div>
      </div>
		</td>
	</tr>
</table>
						<div class="catbgf">
						</div>
<table width="100%" cellpadding="3" cellspacing="0" border="0" class="tborder" style="border-bottom: 0;">
		<tr class="titlebg">
				<td valign="middle" width="2%" style="padding-left: 6px;">
						<img src="http://forum.arduino.cc/Themes/arduinoWide/images/topic/hot_post.gif" align="bottom" alt="" />
				</td>
				<td width="13%"> Author</td>
				<td valign="middle" width="85%" style="padding-left: 6px;" id="top_subject">
						Topic: Can not connect to the server and send a SMS &nbsp;(Read 1163 times)
				</td>
		</tr>
		<tr>
				<td colspan="3" class="smalltext">0 Members and 1 Guest are viewing this topic.
				</td>
		</tr>
</table>
<form action="http://forum.arduino.cc/index.php?action=quickmod2;topic=142354.0" method="post" accept-charset="UTF-8" name="quickModForm" id="quickModForm" style="margin: 0;" onsubmit="return in_edit_mode == 1 ? modify_save('c49df4f8cb4e9e88c8caad0872a89add') : confirm('Are you sure you want to do this?');">
<table cellpadding="0" cellspacing="0" border="0" width="100%" class="bordercolor">
	<tr><td style="padding: 1px 1px 0 1px;">
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583" title="View the profile of pierrot10">pierrot10</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Sr. Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 0</div>
								<div class="memberPosts">Posts: 368</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1069061#msg1069061"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1069061">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1069061#msg1069061">Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b> on:</b> January 12, 2013, 03:39:05 pm &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post">Dear All,<br /><br />I ma very frustreted because I spent so many time to understand why my server does not answer. The script can not connect.<br />In the pasted it worked.<br /><br />Some can tell me how I can debug it?<br />Do you see something wrong?<br />(My fire wall is open to the port81)<br /><br />Many thank fro your help<br /><br />My bauds are like this:<br />&nbsp;Serial.begin(4800);<br />&nbsp; &nbsp; cell.begin(9600);<br /><br /><div class="quoteheader">Quote</div><div class="quote">void loop() {<br />&nbsp; /* If called for the first time, loop until GPRS and AT is ready */<br />&nbsp; if(firstTimeInLoop) {<br />&nbsp; &nbsp; firstTimeInLoop = 0;<br />&nbsp; &nbsp; while (GPRS_registered == 0 || GPRS_AT_ready == 0) {<br />&nbsp; &nbsp; &nbsp; readATString();<br />&nbsp; &nbsp; &nbsp; ProcessATString();<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; if(POWERPIN) {<br />&nbsp; &nbsp; &nbsp; pinMode(POWERPIN, OUTPUT);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; pinMode(13, OUTPUT);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Serial.println(&quot;GPS Parser Initialized&quot;);<br />&nbsp; &nbsp; digitalWrite(POWERPIN, LOW);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; //Serial.println(&quot;Setting Band for 1800 frenquency&quot;);<br />&nbsp; &nbsp; //cell.println(&quot;AT+SBAND=4&quot;);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; delay(1500);<br /><br />&nbsp; &nbsp; Serial.println(&quot;Setting up APN Context&quot;);<br />&nbsp; &nbsp; cell.println(&quot;AT+CGDCONT=1,\&quot;IP\&quot;,\&quot;internet\&quot;&quot;);<br /><br />&nbsp; &nbsp; delay(1500);<br />&nbsp; &nbsp; Serial.println(&quot;Activating PDP Context&quot;);<br />&nbsp; &nbsp; cell.println(&quot;AT+CGACT=1,1&quot;);<br /><br />&nbsp; &nbsp; delay(1500);<br /><br />&nbsp; &nbsp; Serial.println(&quot;Configuring TCP connection to TCP Server&quot;);<br />&nbsp; &nbsp; cell.println(&quot;AT+SDATACONF=1,\&quot;TCP\&quot;,\&quot;xx.xxx.xx.xxx\&quot;,81&quot;);<br /><br />&nbsp; &nbsp; delay(1500);<br /><br />&nbsp; &nbsp; Serial.println(&quot;Starting TCP Connection\n&quot;);<br />&nbsp; &nbsp; cell.println(&quot;AT+SDATASTART=1,1&quot;);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; delay(2000);<br />&nbsp; &nbsp;<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; //Send SMS<br />&nbsp; &nbsp; cell.println(&quot;AT+SBAND=4&quot;); // for 900&amp;1800<br />&nbsp; &nbsp; cell.println(&quot;AT+CMGF=1&quot;); // set SMS mode to text<br />&nbsp; &nbsp; cell.println(&quot;AT+CMGS=&quot;);&nbsp; // now send message...<br />&nbsp; &nbsp; cell.write(34); // ASCII equivalent of &quot;<br />&nbsp; &nbsp; cell.println(&quot;0041762233440&quot;); // wrong number to not publish it (0041=Country code, 76=areacode)<br />&nbsp; &nbsp; cell.write(34);&nbsp; // ASCII equivalent of &quot;<br />&nbsp; &nbsp; delay(500); // give the module some thinking time<br />&nbsp; &nbsp; cell.println(&quot;Bipme Alarm&quot;);&nbsp; &nbsp;// our message to send<br />&nbsp; &nbsp; cell.write(26);&nbsp; // ASCII equivalent of Ctrl-Z<br />&nbsp; &nbsp; delay(15000); // the SMS module needs time to return to OK status<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Serial.println(&quot;SMS sent&quot;);<br /><br />&nbsp; &nbsp; onLed(redLedPin);<br /><br /></div></div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1069061">
									&#171; <i>Last Edit: January 12, 2013, 03:51:56 pm by pierrot10</i> &#187;
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">Il ne suffit pas de tout savoir, la persévérance, c'est déjà presque tout!</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1069090"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg2">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=39400" title="View the profile of johnwasser">johnwasser</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberLocation">Massachusetts, USA</div>
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Tesla Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 201</div>
								<div class="memberPosts">Posts: 8665</div>
								
								<div class="memberAvatar" style="overflow: auto; width: 100%;"><img src="http://static.arduino.cc/avatars/johnwasser.jpg" width="65" height="65" alt="" class="avatar" border="0" /></div><div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=39400"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1069090#msg1069090"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1069090">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1069090#msg1069090">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #1 on:</b> January 12, 2013, 04:13:28 pm &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post">Your sketch never checks the response from the cellphone (Serial.write(cell.read())) so there is no way to know which commands are working and which are failing.&nbsp; Add a function like this:<br /><div class="codeheader">Code:</div><div class="code">void check_result() {<br />&nbsp; &nbsp; int character;<br />&nbsp; &nbsp; while (character = cell.read()) {<br />&nbsp; &nbsp; &nbsp; &nbsp;if (character == &#039;\n&#039;) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Serial.write(character);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return;&nbsp; // Response complete<br />&nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; &nbsp; if (character != -1)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.write(character);<br />&nbsp; &nbsp; &nbsp;}<br />}<br /></div><br />Call after each AT command is sent.&nbsp; You may also want to print the AT commands being sent so you can associate the reply with the request.</div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1069090">
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">Send Bitcoin tips to: 1L3CTDoTgrXNA5WyF77uWqt4gUdye9mezN<br />Send Litecoin tips to : LVtpaq6JgJAZwvnVq3ftVeHafWkcpmuR1e</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1069696"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583" title="View the profile of pierrot10">pierrot10</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Sr. Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 0</div>
								<div class="memberPosts">Posts: 368</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1069696#msg1069696"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1069696">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1069696#msg1069696">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #2 on:</b> January 13, 2013, 06:12:04 am &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post">Dear John<br /><br />Before trying, I thank for this proposition. <br />How many delay should I considere between the command and the answer?<br />I was thinking about 1sec<br /><br />Cheers</div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1069696">
									&#171; <i>Last Edit: January 13, 2013, 06:14:32 am by pierrot10</i> &#187;
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">Il ne suffit pas de tout savoir, la persévérance, c'est déjà presque tout!</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1069706"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg2">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583" title="View the profile of pierrot10">pierrot10</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Sr. Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 0</div>
								<div class="memberPosts">Posts: 368</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1069706#msg1069706"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1069706">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1069706#msg1069706">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #3 on:</b> January 13, 2013, 06:25:59 am &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post">Ok then I tried,<br /><br />Between the command and the answer, I delayed it with 1sed, then 2sec, then 5sec and lastely 10sec. In order to make sure that the command have time to sent.<br /><br />In all case, I only got an &quot;OK&quot; for the other commande, it return a empty line like \n\r.<br />&nbsp;I just would like to mentionned, I put the SIM card to my smartphone, and I could go the the web, send message.<br /><br /><div class="quoteheader">Quote</div><div class="quote">Setting up APN Context<br /><br />Activating PDP Context<br /><br />Configuring TCP connection to TCP Server<br />OK<br />Starting TCP Connection<br /><br /><br /></div><br />I supposed an empty line is not good?<br /><br />Cheers</div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1069706">
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">Il ne suffit pas de tout savoir, la persévérance, c'est déjà presque tout!</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1069739"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583" title="View the profile of pierrot10">pierrot10</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Sr. Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 0</div>
								<div class="memberPosts">Posts: 368</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1069739#msg1069739"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1069739">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1069739#msg1069739">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #4 on:</b> January 13, 2013, 07:01:17 am &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post">It&#039;s really creasy. If you can help me I will really appreciate.<br /><br />Yesterday evening, my code was working, excepted the TCP connection. But the GPS part, was working very well. The loop() return me the gps position very well.<br /><br />Now, this morning I past your code and nothing is working. I can compile well, I have no message error. Then I remove your code to have my code bask as yesterday. But it still not working.<br /><br />It already happen once in the same situation. Working the previous evening and not the next day !!!!!!!<br /><br />And as the last time it that part wich make trouble. This condition return now false<br />&nbsp; if (gps.encode(c)) {<br /><br /><div class="codeheader">Code:</div><div class="code"> while(Serial.available()) {<br />&nbsp; &nbsp; &nbsp; int c = Serial.read();<br />&nbsp; &nbsp; &nbsp; Serial.println(&quot;1&quot;);<br />&nbsp; &nbsp; &nbsp; if (gps.encode(c)) {<br />&nbsp; &nbsp; &nbsp; &nbsp; Serial.println(&quot;2&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; onLed(blueLedPin);<br />&nbsp; &nbsp; &nbsp; &nbsp; float flat, flon, fspeed, falt;<br />&nbsp; &nbsp; &nbsp; &nbsp; unsigned long fix_age;<br />&nbsp; &nbsp; &nbsp; &nbsp; gps.f_get_position(&amp;flat,&amp;flon,&amp;fix_age);<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; fspeed = gps.f_speed_kmph();<br />&nbsp; &nbsp; &nbsp; &nbsp; falt = gps.f_altitude();<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; //fcourse = gps.f_course();<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; if(fix_age == TinyGPS::GPS_INVALID_AGE)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(F(&quot;No fix detected&quot;));<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; else if (fix_age &gt; 5000)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(F(&quot;WARNING: Possible Stale Data!&quot;));<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; else {<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;AT+SSTRSEND=1,\&quot;&quot;);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(flat,DEC);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;,&quot;);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(flon,DEC);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;,&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(fspeed,2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;,&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(falt,2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //myString.print(&quot;,&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //myString.print(fcourse,DEC);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;,&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(String(count));<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;\&quot;&quot;);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(myString);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cell.println(myString);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.begin();<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; offLed(blueLedPin);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br /></div><br />I could not understand what happen during the night&nbsp; <img src="http://forum.arduino.cc/Smileys/arduinoWide/smiley-mr-green.png" alt="smiley-mr-green" border="0" /><br /><br />Do you have any idea? It will really help</div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1069739">
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">Il ne suffit pas de tout savoir, la persévérance, c'est déjà presque tout!</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1069791"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg2">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=16084" title="View the profile of PaulS">PaulS</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberLocation">Seattle, WA USA</div>
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Brattain Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 601</div>
								<div class="memberPosts">Posts: 48543</div>
								
								<div class="memberAvatar" style="overflow: auto; width: 100%;"><img src="http://forum.arduino.cc/avatars/tigger.gif" alt="" class="avatar" border="0" /></div>
								<div class="memberPersonalMsg">Seattle, WA USA</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=16084"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1069791#msg1069791"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1069791">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1069791#msg1069791">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #5 on:</b> January 13, 2013, 07:55:50 am &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post"><div class="quoteheader">Quote</div><div class="quote">I could not understand what happen during the night</div>Code rot, probably. Nasty stuff. Your whole computer might be infected.<br /><br />Of course, since you have not posted all your code, that might be complete nonsense.<br /><br />You have two choices, the way I see it. One is to post ALL of your code. The other is to head down the internet to <a href="http://snippets-r-us.com" target="_blank" rel="nofollow">http://snippets-r-us.com</a> to see if they can help you based only on incomplete snippets.</div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1069791">
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1070011"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=56163" title="View the profile of PeterH">PeterH</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberLocation">UK</div>
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Shannon Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 222</div>
								<div class="memberPosts">Posts: 12524</div>
								
								<div class="memberPersonalMsg">-</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=56163"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1070011#msg1070011"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1070011">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1070011#msg1070011">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #6 on:</b> January 13, 2013, 11:20:51 am &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post"><div class="quoteheader"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1069696#msg1069696">Quote from: pierrot10 on January 13, 2013, 06:12:04 am</a></div><div class="quote">How many delay should I considere between the command and the answer?<br /></div><br />The sample code given did not use a fixed delay - it waited (printing out any response it received) until it received an end-of-line character. If the modem always sends back a one line response every time you give it a command, this this approach will wait for the response to be received and show it to you which is what you want to debug the commands.<br /><br />In an ideal world your sketch would also validate the response to each command to check whether the command succeeded. To do that, rather than just print the response to the serial port the code would need to buffer it until a complete response had been received and then process the response to find what the command status was.<br /></div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1070011">
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">I only provide help via the forum - please do <b>not</b> contact me for private consultancy.</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1070282"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg2">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583" title="View the profile of pierrot10">pierrot10</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Sr. Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 0</div>
								<div class="memberPosts">Posts: 368</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1070282#msg1070282"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1070282">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1070282#msg1070282">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #7 on:</b> January 13, 2013, 02:25:48 pm &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post">Dear PeterH and PaulS<br /><br />Thank again for helping. Below you will find my full code.<br />I really thank you for your help because I am really lost in my understanding&nbsp; <img src="http://forum.arduino.cc/Smileys/arduinoWide/smiley.png" alt="smiley" border="0" /><br /><br />Just a couple of Question. <br />PeterH, I do not undertand well your answer<br /><div class="quoteheader">Quote</div><div class="quote">If the modem always sends back a one line response every time you give it a command</div>Then we are agree that is not normal to have an empty line? We should have an ok or a message?<br /><br />Initialy, it use the library NewSoftSerial.h but I use SoftwareSerial.h<br />Ma libraries are in Document/Arduiano/libraries/. I am on Mac<br /><div class="codeheader">Code:</div><div class="code">//Include the NewSoftSerial library to send serial commands to the cellular module.<br /><br />#include &lt;SoftwareSerial.h&gt; <br />#include &lt;TinyGPS.h&gt;<br />#include &lt;PString.h&gt;<br /><br />#define POWERPIN 4<br />#define GPSRATE 4800<br />#define BUFFSIZ 90<br /><br />char at_buffer[BUFFSIZ];<br />char buffidx;<br /><br />int firstTimeInLoop = 1;<br /><br />int GPRS_registered;<br />int GPRS_AT_ready;<br />int count = 0;<br /><br />//Will hold the incoming character from the Serial Port.<br /><br />char incoming_char=0;&nbsp; &nbsp; &nbsp; <br />char buffer[60];<br /><br />PString myString(buffer,sizeof(buffer));<br /><br />//Create a &#039;fake&#039; serial port. Pin 2 is the Rx pin, pin 3 is the Tx pin.<br /><br />SoftwareSerial cell(2,3);&nbsp; <br /><br />TinyGPS gps;<br /><br />int redLedPin&nbsp; = 11;<br />int blueLedPin = 12;<br /><br />// Function to Blink a LED<br />// Parameters: lPin&nbsp; &nbsp;- Pin of the LED<br />//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;nBlink - Number of Times to Blink<br />//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;msec&nbsp; &nbsp;- Time in milliseconds between each blink<br /><br />void blinkLed(int lPin, int nBlink, int msec) {<br />&nbsp; if (nBlink) {<br />&nbsp; &nbsp; for (int i = 0; i &lt; nBlink; i++) {<br />&nbsp; &nbsp; &nbsp; digitalWrite(lPin, HIGH);<br />&nbsp; &nbsp; &nbsp; delay(msec);<br />&nbsp; &nbsp; &nbsp; digitalWrite(lPin, LOW);<br />&nbsp; &nbsp; &nbsp; delay(msec);<br />&nbsp; &nbsp; }<br />&nbsp; }<br />}<br /><br />// Function to Switch on a LED <br />// Parameters: lPin - Pin of the LED<br /><br />void onLed (int lPin) {<br />&nbsp; digitalWrite(lPin, HIGH);<br />}<br /><br />// Function to Switch off a LED<br />// Parameters: lPin - Pin of the LED<br /><br />void offLed (int lPin) {<br />&nbsp; digitalWrite(lPin, LOW);<br />}<br /><br />void check_result() {<br />&nbsp; &nbsp; int character;<br />&nbsp; &nbsp; while (character = cell.read()) {<br />&nbsp; &nbsp; &nbsp; &nbsp;if (character == &#039;\n&#039;) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Serial.write(character);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return;&nbsp; // Response complete<br />&nbsp; &nbsp; &nbsp; &nbsp;}<br />&nbsp; &nbsp; &nbsp; if (character != -1)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.write(character);<br />&nbsp; &nbsp; &nbsp;}<br />}<br /><br />void freeRam (){<br />&nbsp; extern int __heap_start, *__brkval;<br />&nbsp; int v;<br />&nbsp; int free = (int) &amp;v - (__brkval == 0 ? (int) &amp;__heap_start : (int) __brkval);<br />&nbsp; Serial.println(free);<br />}<br /><br />// Do system wide initialization here in this function<br />void setup(){<br /><br />// LED Pin are outputs. Switch the mode <br />&nbsp; pinMode(redLedPin, OUTPUT);<br />&nbsp; pinMode(blueLedPin, OUTPUT);<br /><br />&nbsp; /* Blink the Power LED */<br /><br />&nbsp; blinkLed(redLedPin,3,500);<br />&nbsp; <br />&nbsp; //Initialize serial ports for communication.<br /><br />&nbsp; &nbsp; Serial.begin(4800);<br />&nbsp; &nbsp; cell.begin(9600);<br />&nbsp; <br />&nbsp; //Let&#039;s get started!<br /><br />&nbsp; Serial.println(F(&quot;Starting SM5100B Communication...&quot;));<br /><br />&nbsp; delay(5000);<br /><br />&nbsp; /* Currently GPRS is not registered and AT is not ready */<br /><br />&nbsp; GPRS_registered = 0;<br />&nbsp; GPRS_AT_ready = 0;<br />}<br /><br />/* Reads AT String from the SM5100B GSM/GPRS Module */<br /><br />void readATString(void) {<br />&nbsp; char c;<br />&nbsp; buffidx= 0; // start at begninning<br />&nbsp; while (1) {<br />&nbsp; &nbsp; if(cell.available() &gt; 0) {<br />&nbsp; &nbsp; &nbsp; c=cell.read();<br />&nbsp; &nbsp; &nbsp; if (c == -1) {<br />&nbsp; &nbsp; &nbsp; &nbsp; at_buffer[buffidx] = &#039;\0&#039;;<br />&nbsp; &nbsp; &nbsp; &nbsp; return;<br />&nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; if (c == &#039;\n&#039;) {<br />&nbsp; &nbsp; &nbsp; &nbsp; continue; <br />&nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; if ((buffidx == BUFFSIZ - 1) || (c == &#039;\r&#039;)){<br />&nbsp; &nbsp; &nbsp; &nbsp; at_buffer[buffidx] = &#039;\0&#039;;<br />&nbsp; &nbsp; &nbsp; &nbsp; return;<br />&nbsp; &nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; &nbsp; at_buffer[buffidx++]= c;<br />&nbsp; &nbsp; }<br />&nbsp; }<br />}<br /><br />/* Processes the AT String to determine if GPRS is registered and AT is ready */<br /><br />void ProcessATString() {<br />&nbsp; if( strstr(at_buffer, &quot;+SIND: 8&quot;) != 0 ) {<br />&nbsp; &nbsp; GPRS_registered = 0;<br />&nbsp; &nbsp; Serial.println(F(&quot;GPRS Network Not Available (0)&quot;));<br />&nbsp; }<br />&nbsp; <br />&nbsp; if (strstr(at_buffer, &quot;+SIND: 10,\&quot;SM\&quot;,0,\&quot;FD\&quot;,0,\&quot;LD\&quot;,0,\&quot;MC\&quot;,0,\&quot;RC\&quot;,0,\&quot;ME\&quot;,0&quot;) != 0 <br />&nbsp; &nbsp; || strstr(at_buffer, &quot;+SIND: 0&quot;) != 0) {<br />&nbsp; &nbsp; &nbsp;Serial.println(F(&quot;SIM removed +SIND: 10+0&quot;));<br />&nbsp; }<br />&nbsp; <br />&nbsp; if (strstr(at_buffer, &quot;+SIND: 10,\&quot;SM\&quot;,1,\&quot;FD\&quot;,1,\&quot;LD\&quot;,1,\&quot;MC\&quot;,1,\&quot;RC\&quot;,1,\&quot;ME\&quot;,1&quot;) != 0) {<br />&nbsp; &nbsp; Serial.println(F(&quot;SIM inserted +SIND:10+1&quot;));<br />&nbsp; &nbsp; //successLED();<br />&nbsp; }<br />&nbsp; <br />&nbsp; if (strstr(at_buffer, &quot;+CME ERROR: 29&quot;) != 0) {<br />&nbsp; &nbsp; Serial.println(F(&quot;+CME ERROR: 2&quot;));<br />&nbsp; &nbsp; return;<br />&nbsp; }<br /><br />&nbsp; if( strstr(at_buffer, &quot;+SIND: 11&quot;) != 0 ) {<br />&nbsp; &nbsp; GPRS_registered=1;<br />&nbsp; &nbsp; Serial.println(F(&quot;GPRS Registered (11)&quot;));<br />&nbsp; &nbsp; //blinkLed(redLedPin,5,100);<br />&nbsp; }<br />&nbsp; <br />&nbsp; if( strstr(at_buffer, &quot;+SIND: 7&quot;) != 0 ) {<br />&nbsp; &nbsp; Serial.println(F(&quot;Emergency call only (7)&quot;));<br />&nbsp; }<br />&nbsp; <br />&nbsp; if( strstr(at_buffer, &quot;+SIND: 3&quot;) != 0 ) {<br />&nbsp; &nbsp; GPRS_AT_ready=1;<br />&nbsp; &nbsp; Serial.println(F(&quot;GPRS AT almost Ready (3)&quot;));<br />&nbsp; }<br />&nbsp; <br />&nbsp; if( strstr(at_buffer, &quot;+SIND: 4&quot;) != 0 ) {<br />&nbsp; &nbsp; GPRS_AT_ready=1;<br />&nbsp; &nbsp; Serial.println(F(&quot;GPRS AT Ready (4)&quot;));<br />&nbsp; }<br />&nbsp; <br />&nbsp; if( strstr(at_buffer, &quot;+SIND: 15&quot;) != 0 ) {<br />&nbsp; &nbsp; GPRS_AT_ready=1;<br />&nbsp; &nbsp; Serial.println(F(&quot;Host error (15)&quot;));<br />&nbsp; }<br />&nbsp; <br />&nbsp; if( strstr(at_buffer, &quot;+SIND: 16&quot;) != 0 ) {<br />&nbsp; &nbsp; GPRS_AT_ready=1;<br />&nbsp; &nbsp; Serial.println(F(&quot;Unknow error (16)&quot;));<br />&nbsp; }<br />&nbsp; <br />&nbsp; if( strstr(at_buffer, &quot;+SIND: 17&quot;) != 0 ) {<br />&nbsp; &nbsp; GPRS_AT_ready=1;<br />&nbsp; &nbsp; Serial.println(F(&quot;GSM Fail (17)&quot;));<br />&nbsp; }<br />}<br /><br />void loop() {<br />&nbsp; /* If called for the first time, loop until GPRS and AT is ready */<br />&nbsp; if(firstTimeInLoop) {<br />&nbsp; &nbsp; firstTimeInLoop = 0;<br />&nbsp; &nbsp; while (GPRS_registered == 0 || GPRS_AT_ready == 0) {<br />&nbsp; &nbsp; &nbsp; readATString();<br />&nbsp; &nbsp; &nbsp; ProcessATString();<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; if(POWERPIN) {<br />&nbsp; &nbsp; &nbsp; pinMode(POWERPIN, OUTPUT);<br />&nbsp; &nbsp; }<br /><br />&nbsp; &nbsp; pinMode(13, OUTPUT);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Serial.println(&quot;GPS Parser Initialized&quot;);<br />&nbsp; &nbsp; digitalWrite(POWERPIN, LOW);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; //Serial.println(&quot;Setting Band for 1800 frenquency&quot;);<br />&nbsp; &nbsp; //cell.println(&quot;AT+SBAND=4&quot;);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; delay(1000);<br /><br />&nbsp; &nbsp; Serial.println(&quot;Setting up APN Context&quot;);<br />&nbsp; &nbsp; cell.println(&quot;AT+CGDCONT=1,\&quot;IP\&quot;,\&quot;internet\&quot;&quot;);<br />&nbsp; &nbsp; check_result();<br />&nbsp; &nbsp; delay(1000);<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Serial.println(&quot;Activating PDP Context&quot;);<br />&nbsp; &nbsp; cell.println(&quot;AT+CGACT=1,1&quot;);<br />check_result();<br />&nbsp; &nbsp; delay(1000);<br /><br />&nbsp; &nbsp; Serial.println(&quot;Configuring TCP connection to TCP Server&quot;);<br />&nbsp; &nbsp; cell.println(&quot;AT+SDATACONF=1,\&quot;TCP\&quot;,\&quot;xxx.xxx.xx.xxx\&quot;,81&quot;);<br />check_result();<br />&nbsp; &nbsp; delay(1000);<br /><br />&nbsp; &nbsp; Serial.println(&quot;Starting TCP Connection\n&quot;);<br />&nbsp; &nbsp; cell.println(&quot;AT+SDATASTART=1,1&quot;);<br />check_result();<br /><br />&nbsp; &nbsp; //Send SMS<br />&nbsp; &nbsp; cell.println(&quot;AT+SBAND=4&quot;);<br />&nbsp; &nbsp; cell.println(&quot;AT+CMGF=1&quot;); // set SMS mode to text<br />&nbsp; &nbsp; cell.println(&quot;AT+CMGS=&quot;);&nbsp; // now send message...<br />&nbsp; &nbsp; cell.write(34); // ASCII equivalent of &quot;<br />&nbsp; &nbsp; cell.println(&quot;0041761235465&quot;); //0041=Country code, 76=Area code<br />&nbsp; &nbsp; cell.write(34);&nbsp; // ASCII equivalent of &quot;<br />&nbsp; &nbsp; delay(500); // give the module some thinking time<br />&nbsp; &nbsp; cell.println(&quot;Bipme Alarm&quot;);&nbsp; &nbsp;// our message to send<br />&nbsp; &nbsp; cell.write(26);&nbsp; // ASCII equivalent of Ctrl-Z<br />&nbsp; &nbsp; delay(15000); // the SMS module needs time to return to OK status<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Serial.println(&quot;SMS sent&quot;);<br /><br />&nbsp; &nbsp; onLed(redLedPin);<br /><br />&nbsp; } else {<br />&nbsp; &nbsp; while(Serial.available()) {<br />&nbsp; &nbsp; &nbsp; int c = Serial.read();<br />&nbsp; &nbsp; &nbsp; if (gps.encode(c)) {<br />&nbsp; &nbsp; &nbsp; &nbsp; onLed(blueLedPin);<br />&nbsp; &nbsp; &nbsp; &nbsp; float flat, flon, fspeed, falt;<br />&nbsp; &nbsp; &nbsp; &nbsp; unsigned long fix_age;<br />&nbsp; &nbsp; &nbsp; &nbsp; gps.f_get_position(&amp;flat,&amp;flon,&amp;fix_age);<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; fspeed = gps.f_speed_kmph();<br />&nbsp; &nbsp; &nbsp; &nbsp; falt = gps.f_altitude();<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; //fcourse = gps.f_course();<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; if(fix_age == TinyGPS::GPS_INVALID_AGE)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(&quot;No fix detected&quot;);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; else if (fix_age &gt; 5000)<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(&quot;WARNING: Possible Stale Data!&quot;);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; else {<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;AT+SSTRSEND=1,\&quot;&quot;);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(flat,DEC);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;,&quot;);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(flon,DEC);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;,&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(fspeed,2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;,&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(falt,2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //myString.print(&quot;,&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //myString.print(fcourse,DEC);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;,&quot;);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(String(count));<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.print(&quot;\&quot;&quot;);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Serial.println(myString);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cell.println(myString);<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; myString.begin();<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; offLed(blueLedPin);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; }<br />}<br /></div></div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1070282">
									&#171; <i>Last Edit: January 13, 2013, 02:28:29 pm by pierrot10</i> &#187;
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">Il ne suffit pas de tout savoir, la persévérance, c'est déjà presque tout!</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1070301"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=16084" title="View the profile of PaulS">PaulS</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberLocation">Seattle, WA USA</div>
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Brattain Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/stargold.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 601</div>
								<div class="memberPosts">Posts: 48543</div>
								
								<div class="memberAvatar" style="overflow: auto; width: 100%;"><img src="http://forum.arduino.cc/avatars/tigger.gif" alt="" class="avatar" border="0" /></div>
								<div class="memberPersonalMsg">Seattle, WA USA</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=16084"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1070301#msg1070301"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1070301">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1070301#msg1070301">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #8 on:</b> January 13, 2013, 02:37:15 pm &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post"><div class="codeheader">Code:</div><div class="code">//Create a &#039;fake&#039; serial port. Pin 2 is the Rx pin, pin 3 is the Tx pin.</div>There is nothing fake about a software serial port.<br /><br /><div class="codeheader">Code:</div><div class="code">PString myString(buffer,sizeof(buffer));</div>Stupid. Get rid of the PString class. Use the buffer you are wrapping here.<br /><br />Your readATString() doesn&#039;t. It reads whatever has arrived so far. If that is nothing, it returns. You need to make it wait until a complete response has been received, or until some amount of time with no response has elapsed. The return code needs to reflect that timeout.<br /><br /></div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1070301">
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1070379"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg2">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583" title="View the profile of pierrot10">pierrot10</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Sr. Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 0</div>
								<div class="memberPosts">Posts: 368</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1070379#msg1070379"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1070379">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1070379#msg1070379">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #9 on:</b> January 13, 2013, 03:41:58 pm &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post">Dear PaulS,<br /><br />Thank for helping.<br />Really it really creasy. Now it work. I got the GPS position. I am totaly confused,&nbsp; it&#039;s like if it only works on evening&nbsp; &nbsp;<img src="http://forum.arduino.cc/Smileys/arduinoWide/smiley.png" alt="smiley" border="0" /><br /><div class="quoteheader">Quote</div><div class="quote">//Create a &#039;fake&#039; serial port. Pin 2 is the Rx pin, pin 3 is the Tx pin.<br /></div>Ok I removed that comment<br /><div class="quoteheader">Quote</div><div class="quote">PString myString(buffer,sizeof(buffer));<br /></div>For this, I am a bit confused. To resume, I should remove that line and replace all ma myString...<br /><div class="codeheader">Code:</div><div class="code"> myString.print(&quot;AT+SSTRSEND=1,\&quot;&quot;);<br /></div>by something like this?<br /><div class="codeheader">Code:</div><div class="code">char index;<br />char gps_buffer[BUFFSIZ];<br />gps_buffer[index++] = &#039;AT+SSTRSEND=1,&quot;&#039;;<br />gps_buffer[index++] = flat;<br />//myString.print(flat,DEC);<br />gps_buffer[index++] = &#039;,&#039;;<br />gps_buffer[index++] = flon;<br /><br /></div>I am sorry if my question seams to be stupid, but I am not used to program with Sketch. I spend a lot of time to understand that code, specialy the readATString()<br /><br />For the last point, I do not undertand what I should do. <br /><div class="quoteheader">Quote</div><div class="quote">You need to make it wait until a complete response has been received</div>OK, I understand that but Is not the case? The while loop run until to read a \r caracter. Is not?<br /><div class="quoteheader">Quote</div><div class="quote">The return code needs to reflect that timeout</div>Ok but where to definy the the timeout and how the know the amount of delay regarding the return code<br /><br />Thank thank<br /><br /></div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1070379">
									&#171; <i>Last Edit: January 13, 2013, 04:02:50 pm by pierrot10</i> &#187;
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">Il ne suffit pas de tout savoir, la persévérance, c'est déjà presque tout!</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1070972"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583" title="View the profile of pierrot10">pierrot10</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Sr. Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 0</div>
								<div class="memberPosts">Posts: 368</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1070972#msg1070972"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1070972">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1070972#msg1070972">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #10 on:</b> January 14, 2013, 02:19:05 am &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post">Definitively, it creasy. Yesterday evening, it was working, I switched all off, go to sleep, and this morning, the position are not display.</div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1070972">
									&#171; <i>Last Edit: January 14, 2013, 10:56:42 am by pierrot10</i> &#187;
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">Il ne suffit pas de tout savoir, la persévérance, c'est déjà presque tout!</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 1px 1px 0 1px;">
		<a name="msg1071448"></a><a name="new"></a>
		<table width="100%" cellpadding="3" cellspacing="0" border="0">
			<tr><td class="windowbg2">
				<table width="100%" cellpadding="5" cellspacing="0" style="table-layout: fixed;">
					<tr>
						<td valign="top" width="16%" rowspan="2" style="overflow: hidden;">
						<div class="profile">

							<div class="memberName"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583" title="View the profile of pierrot10">pierrot10</a> <div class="genderIcon"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/male.png"/>
                </div>
              </div>
							<div class="profileText">
								<div class="memberOnline"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/useroff.gif" alt="Offline" border="0" style="margin-top: 2px;" /><span class="smalltext"> Offline</span></div>
								<div class="memberPostGroup">Sr. Member</div>
								<div class="memberGroupStars"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /><img src="http://forum.arduino.cc/Themes/arduinoWide/images/star.gif" alt="*" border="0" /></div><div class="memberKarma">Karma: 0</div>
								<div class="memberPosts">Posts: 368</div>
								<div class="memberIcons">
								<div class="memberIM">
								
								
								</div>
								<div class="memberViewProfile"><a href="http://forum.arduino.cc/index.php?action=profile;u=161583"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/icons/user.png" alt="View Profile" title="View Profile" border="0" /></a></div></div>
							</div></div>

						</td>
						<td valign="top" width="85%" height="100%">
							<table width="100%" border="0"><tr>
								<td valign="middle"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1071448#msg1071448"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/post/xx.gif" alt="" border="0" /></a></td>
								<td valign="middle">
									<div class="postSubject" id="subject_1071448">
										<a href="http://forum.arduino.cc/index.php?topic=142354.msg1071448#msg1071448">Re: Can not connect to the server and send a SMS</a>
									</div>
									<div class="postDate">&#171; <b>Reply #11 on:</b> January 14, 2013, 11:04:40 am &#187;</div></td>
								<td align="right" valign="bottom" height="20" class="postIconMenu">	
			<a href="#" class="increaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Bigger" align="middle" /><b> Bigger</b></a>
			<a href="#" class="decreaseFont"> <img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Smaller" align="middle" /><b> Smaller</b></a>
			<a href="#" class="resetFont"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/buttons/edit-size-up.png" alt=" Reset" align="middle" /><b> Reset</b></a>
		
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="post">I am still around my problem and I look around the web.<br />Until now, I only powered my module with USB cable. May it be a cause? Should I power with 7-9V?<br /><br />@johnwasser<br />Could you let me know a bit more about your function. I think I did not fully understand what you state, May be my english is not good enouhg ?<br /><br />I supposed that an empty line is not good, but I did not understand where I should add code to consider the timeout?<br /><br /><div class="quoteheader"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1070011#msg1070011">Quote from: PeterH on January 13, 2013, 11:20:51 am</a></div><div class="quote"><div class="quoteheader"><a href="http://forum.arduino.cc/index.php?topic=142354.msg1069696#msg1069696">Quote from: pierrot10 on January 13, 2013, 06:12:04 am</a></div><div class="quote">How many delay should I considere between the command and the answer?<br /></div><br />The sample code given did not use a fixed delay - it waited (printing out any response it received) until it received an end-of-line character. If the modem always sends back a one line response every time you give it a command, this this approach will wait for the response to be received and show it to you which is what you want to debug the commands.<br /><br />In an ideal world your sketch would also validate the response to each command to check whether the command succeeded. To do that, rather than just print the response to the serial port the code would need to buffer it until a complete response had been received and then process the response to find what the command status was.<br /><br /></div><br />Concerning my GPS podition display, when it does not display, the error come from that condition&nbsp; &quot;if (gps.encode(c)) {&quot; which return false.<br /><div class="codeheader">Code:</div><div class="code">while(Serial.available()) { //or cell.available? I think it&#039;s the same?<br />&nbsp; &nbsp; &nbsp; int c = Serial.read(); //or cell.available? I think it&#039;s the same?<br />&nbsp; &nbsp; [b]&nbsp; if (gps.encode(c)) {[/b]<br />&nbsp; &nbsp; &nbsp; &nbsp; onLed(blueLedPin);<br />&nbsp; &nbsp; &nbsp; &nbsp; float flat, flon, fspeed, falt;<br />&nbsp; &nbsp; &nbsp; &nbsp; unsigned long fix_age;<br />&nbsp; &nbsp; &nbsp; &nbsp; gps.f_get_position(&amp;flat,&amp;flon,&amp;fix_age);<br /><br />...<br /></div><br />Thaousand thanks</div>
						</td>
					</tr>
					<tr>
						<td valign="bottom" width="85%">
							<table width="100%" border="0" style="table-layout: fixed;"><tr>
								<td colspan="2" width="100%">
								</td>
							</tr><tr>
								<td valign="bottom" class="postLastModified" id="modified_1071448">
								</td>
								<td align="right" valign="bottom" class="postReportIp">
									<img src="http://forum.arduino.cc/Themes/arduinoWide/images/ip.gif" alt="" border="0" />
									Logged
								</td>
							</tr></table>
							<hr width="100%" size="1" class="hrcolor" />
							<div class="signature">Il ne suffit pas de tout savoir, la persévérance, c'est déjà presque tout!</div>
						</td>
					</tr>
				</table>
			</td></tr>
<tr>
<td class="windowbg3"><br />
</td>
</tr>
		</table>
	</td></tr>
	<tr><td style="padding: 0 0 1px 0;"></td></tr>
</table>
<a name="lastPost"></a>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
	<tr>
		<td class="middletext">Pages: [<b>1</b>]   &nbsp;&nbsp;<a href="#top"><b>Go Up</b></a></td>
		<td  class="msgMenu">
			<table cellpadding="0" cellspacing="0">
				<tr><td>
					
	<div class="right" id="forumActions">
		<ul class="button-group">

		<li><a class="small button" href="http://forum.arduino.cc/index.php?action=printpage;topic=142354.0" target="_blank">Print</a></li>
		</ul>
	</div>

	
				</td></tr>
			</table>
		</td>
	</tr>
</table>
<script language="JavaScript" type="text/javascript" src="http://forum.arduino.cc/Themes/default/xml_topic.js"></script>
<script language="JavaScript" type="text/javascript"><!-- // --><![CDATA[
	quickReplyCollapsed = true;

	smf_topic = 142354;
	smf_start = 0;
	smf_show_modify = 1;

	// On quick modify, this is what the body will look like.
	var smf_template_body_edit = '<div id="error_box" style="padding: 4px; color: red;"></div><textarea class="editor" name="message" rows="12" style="width: 94%; margin-bottom: 10px;">%body%</textarea><br /><input type="hidden" name="sc" value="c49df4f8cb4e9e88c8caad0872a89add" /><input type="hidden" name="topic" value="142354" /><input type="hidden" name="msg" value="%msg_id%" /><div style="text-align: center;"><input type="submit" name="post" value="Save" onclick="return modify_save(\'c49df4f8cb4e9e88c8caad0872a89add\');" accesskey="s" />&nbsp;&nbsp;<input type="submit" name="cancel" value="Cancel" onclick="return modify_cancel();" /></div>';

	// And this is the replacement for the subject.
	var smf_template_subject_edit = '<input type="text" name="subject" value="%subject%" size="60" style="width: 99%;"  maxlength="80" />';

	// Restore the message to this after editing.
	var smf_template_body_normal = '%body%';
	var smf_template_subject_normal = '<a href="http://forum.arduino.cc/index.php?topic=142354.msg%msg_id%#msg%msg_id%">%subject%</a>';
	var smf_template_top_subject = "Topic: %subject% &nbsp;(Read 1163 times)"

	if (window.XMLHttpRequest)
		showModifyButtons();
// ]]></script>
<table border="0" width="100%" cellpadding="0" cellspacing="0" style="margin-bottom: 1ex;">
		<tr>
		</tr>
</table>
      <div class="msgMenu">
			  <div class="nav" style="margin-bottom: 2px;"> <a href="http://forum.arduino.cc/index.php?topic=142354.0;prev_next=prev#new">&laquo; previous topic&nbsp;</a> <a href="http://forum.arduino.cc/index.php?topic=142354.0;prev_next=next#new">&nbsp;next topic &raquo;</a></div>
      </div><div><div id="navBreadCrumb"><span class="homeIcon"><a href="http://forum.arduino.cc/index.php"><img src="http://forum.arduino.cc/Themes/arduinoWide/images/home_icon.gif" alt="home icon" title=" home icon " width="9" height="11"></a></span> | <a href="http://forum.arduino.cc/index.php" class="nav">Arduino Forum</a>&nbsp;::&nbsp;<a href="http://forum.arduino.cc/index.php#2" class="nav">Using Arduino</a>&nbsp;::&nbsp;<a href="http://forum.arduino.cc/index.php?board=4.0" class="nav">Programming Questions</a>&nbsp;::&nbsp;Can not connect to the server and send a SMS</div></div>
	<table cellpadding="0" cellspacing="0" border="0" class="topicMenu">
		<tr><td>
			
	<div class="right" id="forumActions">
		<ul class="button-group">

		
		</ul>
	</div>

	
		</td></tr>
	</table>
</form>
<div class="tborder"><div class="titlebg2" style="padding: 4px;" align="right">
	<form action="http://forum.arduino.cc/index.php" method="get" accept-charset="UTF-8" style="padding:0; margin: 0;">
		<span class="smalltext">Jump to:</span>
		<select name="jumpto" id="jumpto" onchange="if (this.selectedIndex > 0 &amp;&amp; this.options[this.selectedIndex].value) window.location.href = smf_scripturl + this.options[this.selectedIndex].value.substr(smf_scripturl.indexOf('?') == -1 || this.options[this.selectedIndex].value.substr(0, 1) != '?' ? 0 : 1);">
			<option value="">Please select a destination:</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#1">General Category</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=1.0"> => General Discussion</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#2">Using Arduino</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=2.0"> => Installation &amp; Troubleshooting</option>
			<option value="?board=3.0"> => Project Guidance</option>
			<option value="?board=4.0" selected="selected"> => Programming Questions</option>
			<option value="?board=5.0"> => General Electronics</option>
			<option value="?board=6.0"> => LEDs and Multiplexing</option>
			<option value="?board=7.0"> => Displays</option>
			<option value="?board=8.0"> => Audio</option>
			<option value="?board=9.0"> => Motors, Mechanics, and Power</option>
			<option value="?board=10.0"> => Sensors</option>
			<option value="?board=11.0"> => Networking, Protocols, and Devices</option>
			<option value="?board=12.0"> => Interfacing w/ Software on the Computer </option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#3">Topics</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=13.0"> => E-Textiles and Craft</option>
			<option value="?board=14.0"> => Robotics</option>
			<option value="?board=15.0"> => Science and Measurement</option>
			<option value="?board=16.0"> => Home Automation and Networked Objects</option>
			<option value="?board=17.0"> => Device Hacking</option>
			<option value="?board=18.0"> => Education and Teaching</option>
			<option value="?board=19.0"> => Interactive Art</option>
			<option value="?board=20.0"> => Product Design</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#4">Development</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=21.0"> => Suggestions for the Arduino Project</option>
			<option value="?board=22.0"> => Other Hardware Development</option>
			<option value="?board=23.0"> => Other Software Development</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#5">Community</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=24.0"> => Website and Forum</option>
			<option value="?board=25.0"> => Products and Services</option>
			<option value="?board=26.0"> => Gigs and Collaborations</option>
			<option value="?board=27.0"> => Workshops and Events</option>
			<option value="?board=28.0"> => Local Groups</option>
			<option value="?board=29.0"> => Exhibition / Gallery</option>
			<option value="?board=30.0"> => Bar Sport</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#6">International</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=31.0"> => Deutsch</option>
			<option value="?board=32.0"> => Español</option>
			<option value="?board=33.0"> => Français</option>
			<option value="?board=34.0"> => Italiano</option>
			<option value="?board=35.0"> => Portugues</option>
			<option value="?board=36.0"> => Scandinavia</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#12">Forum 2005-2010 (read only)</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=37.0"> ===> Uno Punto Zero</option>
			<option value="?board=38.0"> ===> Bar Sport</option>
			<option value="?board=39.0"> ===> Frequently-Asked Questions</option>
			<option value="?board=40.0"> ===> News</option>
			<option value="?board=41.0"> ===> Exhibition</option>
			<option value="?board=42.0"> ===> Workshops</option>
			<option value="?board=43.0"> ===> Interfacing</option>
			<option value="?board=44.0"> ===> Bugs & Suggestions</option>
			<option value="?board=45.0"> ===> Development</option>
			<option value="?board=46.0"> ===> Troubleshooting</option>
			<option value="?board=47.0"> ===> Portugues</option>
			<option value="?board=48.0"> ===> Deutsch</option>
			<option value="?board=49.0"> ===> Español</option>
			<option value="?board=50.0"> ===> Français</option>
			<option value="?board=51.0"> ===> Italiano</option>
			<option value="?board=52.0"> ===> Scandinavia</option>
			<option value="?board=53.0"> ===> Development</option>
			<option value="?board=54.0"> ===> Interfacing</option>
			<option value="?board=55.0"> ===> Syntax & Programs</option>
			<option value="?board=56.0"> ===> Bugs & Suggestions</option>
			<option value="?board=57.0"> ===> Troubleshooting</option>
			<option value="?board=58.0"> ===> Report Spam at Arduino.cc</option>
			<option value="?board=59.0"> ===> Forum</option>
			<option value="?board=60.0"> ===> Playground Wiki</option>
			<option value="?board=61.0"> => General</option>
			<option value="?board=62.0"> => Hardware</option>
			<option value="?board=63.0"> => Software</option>
			<option value="?board=64.0"> => International</option>
			<option value="?board=65.0"> => Web/Forum/Email/Spam</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#2">Using Arduino</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=66.0"> => Storage</option>
			<option value="?board=67.0"> => Microcontrollers</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#6">International</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=72.0"> ===> Humor y Debate</option>
			<option value="?board=73.0"> ===> Talleres, Encuentros, ...</option>
			<option value="?board=74.0"> ===> Tutoriels et cours</option>
			<option value="?board=75.0"> ===> Réalisations et Projets Finis</option>
			<option value="?board=76.0"> ===> Le bar</option>
			<option value="?board=77.0"> => Nederlands</option>
			<option value="?board=78.0"> ===> Software</option>
			<option value="?board=79.0"> ===> Hardware</option>
			<option value="?board=80.0"> ===> Proyectos</option>
			<option value="?board=81.0"> ===> Documentación</option>
			<option value="?board=82.0"> => India</option>
			<option value="?board=83.0"> ===> Hardware</option>
			<option value="?board=84.0"> ===> Software</option>
			<option value="?board=85.0"> ===> Megatopic</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#14">Products</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=86.0"> => The Arduino Starter Kit</option>
			<option value="?board=87.0"> => Arduino Due</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#6">International</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=88.0"> ===> Generale</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#14">Products</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=89.0"> => Arduino Esplora</option>
			<option value="?board=90.0"> => Arduino GSM Shield</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#15">Maker Faire Rome - The European Edition</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=91.0"> => Makers</option>
			<option value="?board=92.0"> => Events and Tour</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="#14">Products</option>
			<option value="" disabled="disabled">-----------------------------</option>
			<option value="?board=93.0"> => Arduino Yún</option>
		</select>&nbsp;
		<input type="button" value="go" onclick="if (this.form.jumpto.options[this.form.jumpto.selectedIndex].value) window.location.href = 'http://forum.arduino.cc/index.php' + this.form.jumpto.options[this.form.jumpto.selectedIndex].value;" />
	</form>
</div></div><br />
			<div id="footerarea">
		<span class="smalltext" style="display: inline; visibility: visible; font-family: Verdana, Arial, sans-serif;"><a href="http://www.simplemachines.org/" title="Simple Machines Forum" target="_blank">Powered by SMF 1.1.19</a> |
<a href="http://www.simplemachines.org/about/copyright.php" title="Free Forum Software" target="_blank">SMF &copy; 2013, Simple Machines</a>
		</span>
	  </div>
    </div>
    </div>
           <br /><style>.pagefooter a { color: white !important; }</style><div id="pagefooter" class="pagefooter">
  <div class="row">
    <div class="large-8 eight columns">
      <div class="large-4 four columns newsletter-box">
        <!-- Begin MailChimp Signup Form -->
        <h6>Newsletter</h6>
        <form action="http://arduino.us5.list-manage.com/subscribe/post?u=0140d17584d1c002bcd94d0e8&amp;id=69a7d1abe4" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
          <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="Enter your email to sign up" required>
          <i class="icon-right-small"></i>
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="newsletter-button">
        </form>
        <!--End mc_embed_signup-->
      </div>
      <div class="clearfix"></div>
      <ul class="inline-list">
        <li class="monospace">&copy;2014 Arduino</li>
        <li><a href="http://arduino.cc/en/Main/CopyrightNotice">Copyright Notice</a></li>
        <li><a href='http://arduino.cc/en/Main/ContactUs'>Contact us</a></li>
      </ul>
    </div>
    <div class="large-4 four columns">
      <ul id="arduinoSocialLinks" class="arduino-social-links">
        <li>
          <a href="https://twitter.com/arduino">
            <img src="http://arduino.cc/img/twitter.png" />
          </a>
        </li>
        <li>
          <a href="http://www.facebook.com/official.arduino">
            <img src="http://arduino.cc/img/facebook.png" />
          </a>
        </li>
        <li>
          <a href="https://plus.google.com/+Arduino">
            <img src="http://arduino.cc/img/gplus.png" />
          </a>
        </li>
        <li>
          <a href="http://www.flickr.com/photos/arduino_cc">
            <img src="http://arduino.cc/img/flickr.png" />
          </a>
        </li>
        <li>
          <a href="http://youtube.com/arduinoteam">
            <img src="http://arduino.cc/img/youtube.png" />
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

	<div id="ajax_in_progress" style="display: none;">Loading...</div>
	<!--[if gte IE 9]><!-->
	<script src="http://arduino.cc/js/foundation.min.js"></script>
	<script src="http://arduino.cc/js/foundation.topbar.custom.js"></script>
	<script>
	  $(document).foundation();
	</script>
	<!--<![endif]-->
	<!--[if IE 8]>
	<script src="http://arduino.cc/js/foundation_ie8.min.js"></script>
	<script src="http://arduino.cc/js/ie8/jquery.foundation.alerts.js"></script>
	<script src="http://arduino.cc/js/app.js"></script>
	<![endif]-->

 </body>
</html>


