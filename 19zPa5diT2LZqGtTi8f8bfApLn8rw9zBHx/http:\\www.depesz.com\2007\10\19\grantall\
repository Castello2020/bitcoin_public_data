http://www.depesz.com/2007/10/19/grantall/
HTTP/1.1 200 OK
Server: nginx
Date: Thu, 24 Jul 2014 04:20:49 GMT
Content-Type: text/html; charset=UTF-8
Connection: close
X-Powered-By: PHP/5.5.12-1
X-Pingback: http://www.depesz.com/xmlrpc.php
Link: <http://www.depesz.com/?p=1120>; rel=shortlink

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="coder" content="MHweb.pl" />
<title>select * from depesz;  &raquo; Blog Archive   &raquo; grant XXX on * ?</title>
<meta name="generator" content="WordPress 3.9.1" /> <!-- leave this for stats -->
<link rel="stylesheet" href="http://www.depesz.com/wp-content/themes/depesz/style.css" type="text/css" media="screen" />
<!-- <link rel="stylesheet" href="http://mhweb.pl/work/wp/wp-content/themes/blue-box/style1.css" type="text/css" media="screen" /> -->

<link rel="alternate" type="application/rss+xml" title="select * from depesz; RSS Feed" href="http://www.depesz.com/feed/" />
<link rel="pingback" href="http://www.depesz.com/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="select * from depesz; &raquo; grant XXX on * ? Comments Feed" href="http://www.depesz.com/2007/10/19/grantall/feed/" />
<link rel='stylesheet' id='cookie-style-css'  href='http://www.depesz.com/wp-content/plugins/cookie-warning/cookiewarning.css?ver=3.9.1' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://www.depesz.com/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='wordpress-popular-posts-css'  href='http://www.depesz.com/wp-content/plugins/wordpress-popular-posts/style/wpp.css?ver=3.0.3' type='text/css' media='all' />
<script type='text/javascript' src='http://www.depesz.com/wp-includes/js/jquery/jquery.js?ver=1.11.0'></script>
<script type='text/javascript' src='http://www.depesz.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var user_options = {"messageContent":"In order for this site to work properly, and in order to evaluate and improve the site we need to store small files (called cookies) on your computer.<br\/> Over 90% of all websites do this, however, since the 25th of May 2011 we are required by EU regulations to obtain your consent first. What do you say?","redirectLink":"http:\/\/google.com","okText":"That's fine","notOkText":"I don't agree","cookieName":"jsCookiewarning29Check","ajaxUrl":"http:\/\/www.depesz.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.depesz.com/wp-content/plugins/cookie-warning/cookiewarning.js?ver=3.9.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.depesz.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.depesz.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.9.1" />
<link rel='canonical' href='http://www.depesz.com/2007/10/19/grantall/' />
<link rel='shortlink' href='http://www.depesz.com/?p=1120' />

<link rel="stylesheet" href="http://www.depesz.com/wp-content/plugins/dd-formmailer/dd-formmailer.css" type="text/css" media="screen" />
<style type="text/css">

</style>
<!--[if lte IE 7]><link href="http://mhweb.pl/work/wp/wp-content/themes/blue-box/ie.css" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lte IE 6]><link href="http://mhweb.pl/work/wp/wp-content/themes/blue-box/ie6.css" rel="stylesheet" type="text/css" /><![endif]-->
</head>
<body>
<div id="box">
	<div id="up">
		<div id="logo"></div>
		<div id="menu">

			<div class="lc"></div>
			
			<div class="main">
				<div id="nav">
					<ul class="nav">
					<li class="first"><a href="http://www.depesz.com">Blog</a></li>
					<li class="page_item page-item-1947"><a href="http://www.depesz.com/projects/">Projects</a></li>
<li class="page_item page-item-1618"><a href="http://www.depesz.com/contact/">Contact</a></li>
					</ul>
				</div>
			</div>

			<div class="rc"></div>

		</div>
	</div>

	<div id="top_cont"></div>
	<div id="mainbck">



	<div id="content">

	
		<div class="entry">
			<div class="post" id="post-1120">
				<div class="topek">
					<div class="name">
						<a href="http://www.depesz.com/2007/10/19/grantall/" rel="bookmark" title="Permanent Link to grant XXX on * ?">grant XXX on * ?</a><div class="rss-img"><a href="http://www.depesz.com/feed/">&nbsp;&nbsp;</a></div>
					</div>

					<small>October 19th, 2007 by depesz | Tags: <a href="http://www.depesz.com/tag/grantall/" rel="tag">grantall</a>, <a href="http://www.depesz.com/tag/postgresql/" rel="tag">postgresql</a> |  <a href="http://www.depesz.com/2007/10/19/grantall/#comments" title="Comment on grant XXX on * ?">15 comments &#187;</a></small>
<br><small><big>Did it help? If yes - maybe you can help me? Donate BTC to <a href="https://blockchain.info/address/19zPa5diT2LZqGtTi8f8bfApLn8rw9zBHx">19zPa5diT2LZqGtTi8f8bfApLn8rw9zBHx</a></big></small>
				</div>
				
				<div class="the">
					<p>one of the more common problems new users have with postgresql (especially those that came from mysql background), is the lack of easy way to grant/revoke/do-something with many objects (tables/sequences/views) at once.</p>
<p>there are number of pages that deal with the problem, let's just name some from #postgresql infobots:</p>
<ul>
<li><a href="http://pgedit.com/public/sql/acl_admin/index.html">http://pgedit.com/public/sql/acl_admin/index.html</a></li>
<li>http://www.archonet.com/pgdocs/grant-all.html</li>
</ul>
<p>now, both of these pages have their benefits, but i'd like to show something simpler, yet (perhaps) more powerful.</p>
<p>instead of giving you the fish (figuratively speaking) i will give you the net and the skills so you'll be able to do the magic yourself.</p>
<p><span id="more-1120"></span></p>
<p>first let me state one thing: i don't think it's good that we (postgresql) don't have the ability to do it with simple grant/revoke command.</p>
<p>it would be really cool to have it. but i'll not code it ( for various of reasons, including lack of c-coding skills <img src="http://www.depesz.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" />  ). and i dont know anyone willing to.</p>
<p>why nobody wants to code it? because it is not really that much of a problem. and there are more important things to do.</p>
<p>now, how to do the job?</p>
<p>we'll hack the problem with simple (not necessarily nice) solution.</p>
<p>first &#8211; let's assume we want to grant select/insert/update/delete rights on all tables in current database to user depesz.</p>
<p>so, we want equivalent of:</p>
<p><code>grant select, insert, update, delete on * to depesz;</code></p>
<p>first of all &#8211; you have to understand that this is not exactly what you want to do. you want to grant on all <b>user</b> tables. system tables should (generally) be left alone.</p>
<p>so, let's get the list of tables that we want to act on:</p>
<p><code>select tablename from pg_tables where schemaname = 'public';</code></p>
<p>now, if we would need to do it one-by-one, we would have to write:</p>
<p><code>grant select, insert, update, delete on table_a to depesz;<br />
grant select, insert, update, delete on table_b to depesz;<br />
...<br />
grant select, insert, update, delete on table_n to depesz;</code></p>
<p>hmm &#8230; so, let's modify our tablename-fetching query to generate appropriate sqls:</p>
<p><code>select 'grant select, insert, update, delete on ' || tablename || ' to depesz;' from pg_tables where schemaname = 'public';</code></p>
<p>now, we just need a way to make postgres run the queries. there are 2 basic approaches, shell-based, or (simple) function based.</p>
<p>first, let's check the shell based:</p>
<p><code>psql -qAt -c "select 'grant select, insert, update, delete on ' || tablename || ' to depesz;' from pg_tables where schemaname = 'public'" | psql</code></p>
<p>so, what does it do?</p>
<p>it runs our query and outputs it's result to stdout (usually screen). -qAt means that only generated grants will be returned, no &#8220;frames", no comments, just the real, important code.                                                                                                                                 then, output of first psql is &#8220;piped" to second psql, which effectively runs the sqls.</p>
<p>i think it's simple. it's definitely not elegant, but it is in harmony with general unix way of doing things by connecting many commands by piping data (think: sed, awk, cut, cat, grep, perl, &#8230;).</p>
<p>but, can it be done without using shell tricks?</p>
<p>yes. but we will need one (very simple) plpgsql function:</p>
<p><code>create function execute(text) returns void as $BODY$BEGIN execute $1; END;$BODY$ language plpgsql;</code></p>
<p>this functions gets text parameter, and executes it as if it was sql query. something like eval() in another languages.</p>
<p>so, now i can:</p>
<p><code>select execute('grant select, insert, update, delete on ' || tablename || ' to depesz;') from pg_tables where schemaname = 'public';</code></p>
<p>that's all. everything done.</p>
<p>now &#8211; this approach (based on simplistic function or shell &#8220;double-psql-piping") has one very big benefit &#8211; it's extremely flexible.</p>
<p>if you want to do something on only some of the tables &#8211; add where to the query.</p>
<p>if you want something different than grant/revoke &#8211; fine, do it.</p>
<p>simple example:</p>
<p><code>select execute('create table backup.' || tablename || ' as select * from ' || tablename || ';') from pg_tables where schemaname = 'public';</code></p>
<p>will make copy of all tables in public schema to backup schema.</p>
<p>ever need to add field to all tables named tmp* ? simple:</p>
<p><code>select execute('alter table ' || tablename || ' add column id int8;') from pg_tables where schemaname = 'public' and tablename like 'tmp%';</code></p>
<p>possibilities are endless. you'll just have to fight that instinct saying &#8220;oh my god, it's so ugly". <img src="http://www.depesz.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley" /> </p>

									</div>
			</div>
		</div>
			
		<div class="comm">
			
<!-- You can start editing here. -->

<div class="bobcomments">




	<ol class="commentlist">

	<li class="commenthead"><h3 id="comments">15 comments <a href='http://www.depesz.com/2007/10/19/grantall/feed/'><div class="rss-img"></div></a></h3></li>
	
			
<li class="odd" id="comment-24094" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-24094" title="">#</a></span> <a href='http://www.bostongis.com/blog' rel='external nofollow' class='url'>Regina Obe</a></div>  <div class="date">Oct 19, 2007</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/418e296d6b20bbd722dc3b2c8ad42906?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>Nice suggestions.  I use similar tricks myself. </p>
<p>I guess the only thing I would say is that I prefer using the information_schema views instead of pg_tables because it makes the trick more portable.  I can use the same trick in other databases that support information_schema like in SQL Server and Oracle to add fields, update fields etc as you said.</p>
<p>So instead of<br />
SELECT tablename from pg_tables WHERE schemaname = &#8216;public&#8217;;</p>
<p>I would do</p>
<p>SELECT table_name from information_schema.tables WHERE table_schema = &#8216;public&#8217;;</p>
	</li>
		
		
			
<li class="odd" id="comment-24096" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-24096" title="">#</a></span> Rodrigo De León</div>  <div class="date">Oct 20, 2007</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/c8c453249490cb5ead2ca1c7fdf3395d?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>Regina Obe:<br />
&#8220;I can use the same trick in other databases that support information_schema like in SQL Server and Oracle&#8230;&#8221;</p>
<p>Oracle 10gR2 does not have the INFORMATION_SCHEMA.</p>
<p>Does 11g have it?</p>
	</li>
		
		
			
<li class="odd" id="comment-24102" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-24102" title="">#</a></span> Jim</div>  <div class="date">Oct 20, 2007</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/769084f2da2ebbc1e483af3f0e72adaa?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>FYI: I found this article unreadable and the links on the right hand side to be almost invisible until I switched off your stylesheet.  Please consider using 1em/100% for your font size and a colour scheme other than grey on black.</p>
	</li>
		
		
			
<li class="odd" id="comment-24108" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-24108" title="">#</a></span> <a href='http://www.bostongis.com/blog' rel='external nofollow' class='url'>Regina</a></div>  <div class="date">Oct 21, 2007</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/418e296d6b20bbd722dc3b2c8ad42906?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>Rodrigo,</p>
<p>I think you are right about Oracle.  I stand corrected. Sorry for the misinformation.  </p>
<p>I don&#8217;t know what made me think that just because SQL Server 2005, MySQL 5,IBM DB2, and PostgreSQL support information_schema that Oracle would even consider supporting such a thing.</p>
	</li>
		
		
			
<li class="odd" id="comment-24109" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-24109" title="">#</a></span> <a href='http://www.bostongis.com/blog' rel='external nofollow' class='url'>Regina</a></div>  <div class="date">Oct 21, 2007</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/418e296d6b20bbd722dc3b2c8ad42906?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>Slight correction &#8211; I&#8217;m not sure about DB2.  Db2 may not support information_schema.  But I&#8217;ve used information_schema in MySQL 5, SQL Server 2005, and even SQL Server 2000 and those all support the information_schema. </p>
<p>For SQL Server &#8211; its the recommended way to go since the underlying system tables may change.  </p>
<p>For PostgreSQL I think its much easier to for things like select  ing columns and data types since the joins you&#8217;d have to do against the pg_catalog to get the same basic info you get from querying information_schema.columns table is a lot more.</p>
	</li>
		
		
			
<li class="odd" id="comment-24128" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-24128" title="">#</a></span> Erik</div>  <div class="date">Oct 24, 2007</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/729e1010e2e631dc7967399b0f5526a4?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>Nice post on the scripting technique.  One thing to consider, though, is that, with Postgres, you really should use pg_class and pg_namespace so that you can include views and sequences in your grants.  For example, if all you use is pg_tables or information_schema.tables then you&#8217;ll get bitten when you try to insert on a table that uses a sequence for id generation.  I use a one liner shell script (one each for grant and revoke).</p>
<p>grant.sh:<br />
#!/bin/sh<br />
# $1 -&gt; privilege(s)<br />
# $2 -&gt; rolename<br />
# $3 -&gt; dbname</p>
<p>psql -t -c &#8220;SELECT &#8216;GRANT $1 ON public.&#8217; || t.relname || &#8216; TO $2;&#8217; from pg_class t, pg_namespace s WHERE t.relkind IN (&#8216;r&#8217;, &#8216;v&#8217;, &#8216;S&#8217;) AND t.relnamespace=s.oid AND s.nspname=&#8217;public&#8217;;&#8221; $3 | psql $3</p>
	</li>
		
		
				
<li class="mycomment" id="comment-25126" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-25126" title="">#</a></span> <a href='http://www.depesz.com/' rel='external nofollow' class='url'>depesz</a></div>  <div class="date">Feb 19, 2008</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/d5ecebb85919589a7cbf7f90eb34eacf?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>from irc:</p>
<p><code>19:44 &lt; jjore-w&gt; depesz: if that's your blog, don't you want to be using quote_ident() on the identifiers you're accepting?<br />
19:48 &lt; depesz&gt; jjore-w: what identifiers?<br />
19:50 &lt; jjore-w&gt; depesz: select execute('alter_table '||quote_ident(tablename)|| ...?<br />
19:50 &lt; jjore-w&gt; Those identifiers?<br />
19:50 &lt; depesz&gt; jjore-w: technically - sure. on the other hand - how often do you have table names with ' or space in its name?<br />
19:51 &lt; jjore-w&gt; depesz: Uh... it happens.<br />
19:52 &lt; jjore-w&gt; I figure it's better not to be sorry.<br />
19:52 &lt; PJMODOS&gt; depesz: what about mixed case ?<br />
19:52 &lt; PJMODOS&gt; not that I am using it<br />
19:52 &lt; depesz&gt; jjore-w: never happened to me.<br />
19:53 &lt; depesz&gt; PJMODOS: point taken.</code></p>
<p>so. if you can have &#8220;strange&#8221; characters in your table names &#8211; always use quote_ident.</p>
<p>like in:</p>
<p><code>select execute('create table backup.' || quote_ident(tablename) || ' as select * from ' || quote_ident(tablename) || ';') from pg_tables where schemaname = 'public';</code></p>
	</li>
		
		
			
<li class="odd" id="comment-25641" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-25641" title="">#</a></span> Tom Davis</div>  <div class="date">Mar 31, 2008</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/69806522647113a3245e6bd3f7597560?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>An aside:<br />
Don&#8217;t GRANT/REVOKE to actual USERs (ROLEs with login). Instead GRANT/REVOKE to GROUPs (ROLEs without login) and make users members of groups with the needed privileges.</p>
<p>If you do this even when you don&#8217;t think it&#8217;s necessary, you will save yourself untold headaches down the road.</p>
<p>Also, superusers (ROLEs with the SUPERUSER attribute) don&#8217;t need any explicit GRANTs to access database objects, as pg never checks permissions for SUPERUSERs.</p>
	</li>
		
		
			
<li class="odd" id="comment-26488" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-26488" title="">#</a></span> <a href='http://iddqd.eu' rel='external nofollow' class='url'>iddqd</a></div>  <div class="date">Aug 5, 2008</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/204f626b663d697fb97c4c65c46fd59c?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>In oracle.<br />
SELECT &#8216;GRANT SELECT,INSERT,UPDATE ON &#8216;|| table_name ||&#8217; FOR user_test;&#8217; FROM user_tables;<br />
or</p>
<p>SELECT &#8216;GRANT SELECT,INSERT,UPDATE ON &#8216;|| table_name ||&#8217; FOR user_test;&#8217; FROM dba_tables WHERE owner=&#8217;user_test_123333&#8242;;</p>
	</li>
		
		
			
<li class="odd" id="comment-30583" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-30583" title="">#</a></span> <a href='http://www.fastwindowcleaning.co.uk' rel='external nofollow' class='url'>Window Cleaning London</a></div>  <div class="date">Nov 12, 2010</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/0fc9e5931d0fc0a84bb16b10fff4bb10?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>i was migrating a database and I had to alter all tables owner to xxx :). </p>
<p>Nice workaround,<br />
Tom</p>
	</li>
		
		
			
<li class="odd" id="comment-33377" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-33377" title="">#</a></span> Daniel</div>  <div class="date">Apr 28, 2011</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/380030a0b674fa9546c6062a25aef05b?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>Thanks for this great tutorial.</p>
<p>Im migrating from mysql to postgresql; the postgres string concatenation you used (SELECT func(&#8216;&#8230;&#8217; || tablename || &#8216;&#8230;&#8217;)) to execute a function looks to me very likely a sql inection <img src="http://www.depesz.com/wp-includes/images/smilies/icon_wink.gif" alt=";)" class="wp-smiley" /> </p>
	</li>
		
		
			
<li class="mycomment" id="comment-33378" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-33378" title="">#</a></span> <a href='http://www.depesz.com/' rel='external nofollow' class='url'>depesz</a></div>  <div class="date">Apr 28, 2011</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/d5ecebb85919589a7cbf7f90eb34eacf?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>@Daniel:<br />
sure. If the tablename can contain something bad, you should use quote_ident function.<br />
But do you really have table names that are valid, and malicious, sql statements?</p>
	</li>
		
		
			
<li class="odd" id="comment-33832" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-33832" title="">#</a></span> Tim Holahan</div>  <div class="date">Jun 26, 2011</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/c1485c1a359aa60c5cdb64e6aec71d5f?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>I thought it might be helpful to mention that, as of 9.0, postgres does have the syntax to grant privileges on all tables (as well as other objects) in a schema:</p>
<p>GRANT SELECT ON ALL TABLES IN SCHEMA public TO user;<br />
GRANT EXECUTE ON ALL FUNCTIONS IN SCHEMA public TO user;</p>
<p>Here&#8217;s the link:</p>
<p><a href="http://www.postgresql.org/docs/current/interactive/sql-grant.html" rel="nofollow">http://www.postgresql.org/docs/current/interactive/sql-grant.html</a></p>
	</li>
		
		
			
<li class="mycomment" id="comment-33833" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-33833" title="">#</a></span> <a href='http://depesz.com/' rel='external nofollow' class='url'>depesz</a></div>  <div class="date">Jun 26, 2011</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/d5ecebb85919589a7cbf7f90eb34eacf?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>@Tim:<br />
and here is link to blogpost about it, available for example by clicking on &#8220;grantall&#8221; tag at the beginning.</p>
<p><a href="http://www.depesz.com/index.php/2009/11/07/waiting-for-8-5-grant-all/" rel="nofollow">http://www.depesz.com/index.php/2009/11/07/waiting-for-8-5-grant-all/</a></p>
	</li>
		
		
		
	</ol>
	
	

	<ol class="bob">

	<li style="background:transparent;padding-left:0;"><h2>1 Trackback(s)</h2></li>
	

	<li id="comment-24147">
		Oct 28, 2007: <a href='http://www.bostongis.com/blog/' rel='external nofollow' class='url'>BostonGIS Blog</a>			</li>
	
		

	</ol>

	

	
	
	<form action="http://www.depesz.com/wp-comments-post.php" method="post" id="commentform">

	<h2 id="respond">Leave a comment</h2>

		
	
		<label for="author">Name</label>
		<input type="text" name="author" id="author" value="" size="22" tabindex="2" />
				
		<label for="email">E-mail</label>
		<input type="text" name="email" id="email" value="" tabindex="3" size="22" />		
		
		<label for="url">Website</label>
		<input type="text" name="url" id="url" value="" size="22" tabindex="4" />
	
	
		<label for="text">Your text</label>
		<textarea name="comment" id="comment" cols="5" rows="10" tabindex="5"></textarea>

		<input name="submit" type="submit" id="submit" tabindex="6" value="Submit comment" />
		<input type="hidden" name="comment_post_ID" value="1120" />
	
	<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="723e05ea98" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="249"/></p>
	</form>


</div>
		</div>
	
	
	</div>
<div id="sidebar">
<div class="rsidebar">
		<ul>
			<li id="search-3" class="widget widget_search"><h2 class="widgettitle">Search</h2>
<form method="get" id="searchform" action="http://www.depesz.com/">
<input name="s" id="s" type="text" value="Write your text. Press the button!" onfocus="if (this.value == 'Write your text. Press the button!') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Write your text. Press the button!';}" tabindex="1"/>
<input type="submit" id="searchsubmit" value="" />
</form>
<br /><br />
<div id="podzialka"></div></li>
<li id="linkcat-659" class="widget widget_links"><h2 class="widgettitle">Follow me</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://www.depesz.com/comments/feed/">Comments RSS</a></li>
<li><a href="http://depesz.com/feed/">Posts RSS</a></li>

	</ul>
</li>


<!-- Wordpress Popular Posts Plugin v3.0.3 [W] [weekly] [views] [regular] -->
<li id="wpp-3" class="widget popular-posts">
<h2 class="widgettitle">Popular Posts</h2>

<ul class="wpp-list">
<li><a href="http://www.depesz.com/2014/07/14/waiting-for-9-5-implement-import-foreign-schema/" title="Waiting for 9.5 &#8211; Implement IMPORT FOREIGN SCHEMA." class="wpp-post-title" target="_self">Waiting for 9.5 &#8211; Implement IMPORT FOREIGN SCHEMA.</a>  <span class="post-stats"><span class="wpp-comments">1 comment</span> | <span class="wpp-views">332 views</span></span> </li>
<li><a href="http://www.depesz.com/2014/07/15/waiting-for-9-5-psql-show-tablespace-size-in-db/" title="Waiting for 9.5 &#8211; psql: Show tablespace size in \db+" class="wpp-post-title" target="_self">Waiting for 9.5 &#8211; psql: Show tablespace size in \db+</a>  <span class="post-stats"><span class="wpp-comments">1 comment</span> | <span class="wpp-views">307 views</span></span> </li>
<li><a href="http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/" title="Why is UPSERT so complicated?" class="wpp-post-title" target="_self">Why is UPSERT so complicated?</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">249 views</span></span> </li>
<li><a href="http://www.depesz.com/2010/03/02/charx-vs-varcharx-vs-varchar-vs-text/" title="CHAR(x) vs. VARCHAR(x) vs. VARCHAR vs. TEXT &#8211; UPDATED 2010-03-03" class="wpp-post-title" target="_self">CHAR(x) vs. VARCHAR(x) vs. VARCHAR vs. TEXT &#8211; UPDATED 2010-03-03</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">195 views</span></span> </li>
<li><a href="http://www.depesz.com/2011/05/06/understanding-postgresql-conf-log/" title="Understanding postgresql.conf : log*" class="wpp-post-title" target="_self">Understanding postgresql.conf : log*</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">150 views</span></span> </li>
<li><a href="http://www.depesz.com/2008/05/05/error-operator-does-not-exist-integer-text-how-to-fix-it/" title="&#8220;ERROR:  operator does not exist: integer = text&#8221; how to fix it?" class="wpp-post-title" target="_self">&#8220;ERROR:  operator does not exist: integer = text&#8221; how to fix it?</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">139 views</span></span> </li>
<li><a href="http://www.depesz.com/2014/01/29/getting-count-of-distinct-elements-per-group-in-postgresql/" title="Getting count of distinct elements, per group, in PostgreSQL." class="wpp-post-title" target="_self">Getting count of distinct elements, per group, in PostgreSQL.</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">124 views</span></span> </li>
<li><a href="http://www.depesz.com/2012/06/09/how-much-ram-is-postgresql-using/" title="How much RAM is PostgreSQL using?" class="wpp-post-title" target="_self">How much RAM is PostgreSQL using?</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">123 views</span></span> </li>
<li><a href="http://www.depesz.com/2011/07/14/write-ahead-log-understanding-postgresql-conf-checkpoint_segments-checkpoint_timeout-checkpoint_warning/" title="Write Ahead Log + Understanding postgresql.conf: checkpoint_segments, checkpoint_timeout, checkpoint_warning" class="wpp-post-title" target="_self">Write Ahead Log + Understanding postgresql.conf: checkpoint_segments, checkpoint_timeout, checkpoint_warning</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">123 views</span></span> </li>
<li><a href="http://www.depesz.com/2012/11/14/how-i-learned-to-stop-worrying-and-love-the-triggers/" title="How I Learned to Stop Worrying and Love the Triggers" class="wpp-post-title" target="_self">How I Learned to Stop Worrying and Love the Triggers</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">95 views</span></span> </li>

</ul>
</li>

<!-- End Wordpress Popular Posts Plugin v3.0.3 -->
<li id="linkcat-4" class="widget widget_links"><h2 class="widgettitle">postgresql</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://www.postgresql.org/docs/current/interactive/index.html">Documentation</a></li>
<li><a href="http://explain.depesz.com/">Explain Analyze analyzer</a></li>
<li><a href="irc://irc.freenode.net/#postgresql">IRC help channel</a></li>
<li><a href="http://archives.postgresql.org/">Mailing Lists search</a></li>
<li><a href="http://planet.postgresql.org/">PG Planet</a></li>
<li><a href="http://www.postgresql.org/" title="strona domowa postgresqla">PostgreSQL Home Page</a></li>

	</ul>
</li>

<li id="linkcat-376" class="widget widget_links"><h2 class="widgettitle">About me</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://search.cpan.org/~depesz/">CPAN</a></li>
<li><a href="https://github.com/depesz/">GitHub</a></li>
<li><a href="http://linkedin.com/in/depesz">Linked In</a></li>
<li><a href="http://www.depesz.com/toyota-gt86/">Samochód</a></li>

	</ul>
</li>

<li id="theme-switcher" class="widget widget_themeswitcher"><h2 class="widgettitle">Theme</h2>
<ul id="themeswitcher">
<li>
       <select style="width:140px" name="themeswitcher" onchange="location.href='http://www.depesz.com/index.php?wptheme=' + this.options[this.selectedIndex].value;">
               <option value="AS 400">AS 400</option>
               <option value="GrayGA">GrayGA</option>
               <option value="Twenty Eleven">Twenty Eleven</option>
               <option value="Twenty Fourteen">Twenty Fourteen</option>
               <option value="Twenty Ten">Twenty Ten</option>
               <option value="Twenty Thirteen">Twenty Thirteen</option>
               <option value="Twenty Twelve">Twenty Twelve</option>
               <option value="WordPress Classic">WordPress Classic</option>
               <option value="WordPress Default">WordPress Default</option>
               <option value="Wordpress Depesz" selected="selected">Wordpress Depesz</option>
       </select>
</li>
</ul></li>
		</ul>
</div>
		
</div>



<div id="space"></div>
</div>
<div id="bottom">
	<div class="navigation">			
					</div>
</div>

<!-- Powered by WPtouch: 3.4.4 --><script type='text/javascript' src='http://www.depesz.com/wp-content/plugins/akismet/_inc/form.js?ver=3.0.1'></script>
</div>

</body>
</html>

