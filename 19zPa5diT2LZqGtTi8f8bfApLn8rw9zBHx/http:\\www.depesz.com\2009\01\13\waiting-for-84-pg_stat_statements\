http://www.depesz.com/2009/01/13/waiting-for-84-pg_stat_statements/
HTTP/1.1 200 OK
Server: nginx
Date: Tue, 22 Jul 2014 07:18:42 GMT
Content-Type: text/html; charset=UTF-8
Connection: close
X-Powered-By: PHP/5.5.12-1
X-Pingback: http://www.depesz.com/xmlrpc.php
Link: <http://www.depesz.com/?p=1366>; rel=shortlink

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="coder" content="MHweb.pl" />
<title>select * from depesz;  &raquo; Blog Archive   &raquo; Waiting for 8.4 &#8211; pg_stat_statements</title>
<meta name="generator" content="WordPress 3.9.1" /> <!-- leave this for stats -->
<link rel="stylesheet" href="http://www.depesz.com/wp-content/themes/depesz/style.css" type="text/css" media="screen" />
<!-- <link rel="stylesheet" href="http://mhweb.pl/work/wp/wp-content/themes/blue-box/style1.css" type="text/css" media="screen" /> -->

<link rel="alternate" type="application/rss+xml" title="select * from depesz; RSS Feed" href="http://www.depesz.com/feed/" />
<link rel="pingback" href="http://www.depesz.com/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="select * from depesz; &raquo; Waiting for 8.4 &#8211; pg_stat_statements Comments Feed" href="http://www.depesz.com/2009/01/13/waiting-for-84-pg_stat_statements/feed/" />
<link rel='stylesheet' id='cookie-style-css'  href='http://www.depesz.com/wp-content/plugins/cookie-warning/cookiewarning.css?ver=3.9.1' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://www.depesz.com/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='wordpress-popular-posts-css'  href='http://www.depesz.com/wp-content/plugins/wordpress-popular-posts/style/wpp.css?ver=3.0.3' type='text/css' media='all' />
<script type='text/javascript' src='http://www.depesz.com/wp-includes/js/jquery/jquery.js?ver=1.11.0'></script>
<script type='text/javascript' src='http://www.depesz.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var user_options = {"messageContent":"In order for this site to work properly, and in order to evaluate and improve the site we need to store small files (called cookies) on your computer.<br\/> Over 90% of all websites do this, however, since the 25th of May 2011 we are required by EU regulations to obtain your consent first. What do you say?","redirectLink":"http:\/\/google.com","okText":"That's fine","notOkText":"I don't agree","cookieName":"jsCookiewarning29Check","ajaxUrl":"http:\/\/www.depesz.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.depesz.com/wp-content/plugins/cookie-warning/cookiewarning.js?ver=3.9.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.depesz.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.depesz.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.9.1" />
<link rel='canonical' href='http://www.depesz.com/2009/01/13/waiting-for-84-pg_stat_statements/' />
<link rel='shortlink' href='http://www.depesz.com/?p=1366' />

<link rel="stylesheet" href="http://www.depesz.com/wp-content/plugins/dd-formmailer/dd-formmailer.css" type="text/css" media="screen" />
<style type="text/css">

</style>
<!--[if lte IE 7]><link href="http://mhweb.pl/work/wp/wp-content/themes/blue-box/ie.css" rel="stylesheet" type="text/css" /><![endif]-->
<!--[if lte IE 6]><link href="http://mhweb.pl/work/wp/wp-content/themes/blue-box/ie6.css" rel="stylesheet" type="text/css" /><![endif]-->
</head>
<body>
<div id="box">
	<div id="up">
		<div id="logo"></div>
		<div id="menu">

			<div class="lc"></div>
			
			<div class="main">
				<div id="nav">
					<ul class="nav">
					<li class="first"><a href="http://www.depesz.com">Blog</a></li>
					<li class="page_item page-item-1947"><a href="http://www.depesz.com/projects/">Projects</a></li>
<li class="page_item page-item-1618"><a href="http://www.depesz.com/contact/">Contact</a></li>
					</ul>
				</div>
			</div>

			<div class="rc"></div>

		</div>
	</div>

	<div id="top_cont"></div>
	<div id="mainbck">



	<div id="content">

	
		<div class="entry">
			<div class="post" id="post-1366">
				<div class="topek">
					<div class="name">
						<a href="http://www.depesz.com/2009/01/13/waiting-for-84-pg_stat_statements/" rel="bookmark" title="Permanent Link to Waiting for 8.4 &#8211; pg_stat_statements">Waiting for 8.4 &#8211; pg_stat_statements</a><div class="rss-img"><a href="http://www.depesz.com/feed/">&nbsp;&nbsp;</a></div>
					</div>

					<small>January 13th, 2009 by depesz | Tags: <a href="http://www.depesz.com/tag/analysis/" rel="tag">analysis</a>, <a href="http://www.depesz.com/tag/pg84/" rel="tag">pg84</a>, <a href="http://www.depesz.com/tag/pgfouine/" rel="tag">pgfouine</a>, <a href="http://www.depesz.com/tag/pg_stat_statements/" rel="tag">pg_stat_statements</a>, <a href="http://www.depesz.com/tag/postgresql/" rel="tag">postgresql</a>, <a href="http://www.depesz.com/tag/stats/" rel="tag">stats</a> |  <a href="http://www.depesz.com/2009/01/13/waiting-for-84-pg_stat_statements/#comments" title="Comment on Waiting for 8.4 &#8211; pg_stat_statements">13 comments &#187;</a></small>
<br><small><big>Did it help? If yes - maybe you can help me? Donate BTC to <a href="https://blockchain.info/address/19zPa5diT2LZqGtTi8f8bfApLn8rw9zBHx">19zPa5diT2LZqGtTi8f8bfApLn8rw9zBHx</a></big></small>
				</div>
				
				<div class="the">
					<p>On 4th of January, Tom Lane committed patch by Takahiro Itagaki, which adds new contrib module &#8211; pg_stat_statements:</p>
<p><code>Log Message:<br />
-----------<br />
Add contrib/pg_stat_statements for server-wide tracking of statement execution<br />
statistics.<br />
&nbsp;<br />
Takahiro Itagaki</code></p>
<p><span id="more-1366"></span></p>
<p>What is it for? Well, actually, it takes some work away from projects like <a href="http://pgfouine.projects.postgresql.org/">pgFouine</a> or my own <a href="http://svn.depesz.com/svn/pgsql-tools/trunk/analyze.pgsql.logs.pl">analyze.pgsql.logs.pl</a>.</p>
<p>To this day, when you want/need to see some query statistics you have to log all queries, and then run some software that will parse it, normalize queries, and run some kind of statistics on it.</p>
<p>Now, the log-parse part is no longer neccessary.</p>
<p>This is how it works.</p>
<p>First, you have to modify your postgresql.conf. Open it, and find line with shared_preload_libraries parameter. Add there pg_stat_statements, like this:</p>
<p><code>shared_preload_libraries = 'pg_stat_statements'     # (change requires restart)</code></p>
<p>As you can see in the comment, change here requires server restart. Before we will do it, let's add some more options to .conf file:</p>
<p><code>pg_stat_statements.max = 100<br />
pg_stat_statements.track = top<br />
pg_stat_statements.save = off</code></p>
<p>To make it work, we will also need to add &#8220;pg_stat_statements" to &#8220;custom_variable_classes" option, which is usually empty, but if you have one already defined, just add new one like this:</p>
<p><code>custom_variable_classes = 'depesz,pg_stat_statements'       # list of custom variable class names</code></p>
<p>Afterwards, we can restart PostgreSQL.</p>
<p>Now, tracking is enabled, but to view stats, we have to create appropriate functions and view, by loading pg_stat_statements.sql to any database:</p>
<p><code># \i work/share/postgresql/contrib/pg_stat_statements.sql<br />
SET<br />
CREATE FUNCTION<br />
CREATE FUNCTION<br />
CREATE VIEW<br />
GRANT<br />
REVOKE</code></p>
<p>( of course your path might be different ).</p>
<p>So, let's see how it works. First, let's check if (just after connection) the stats are empty:</p>
<p><code># select * from pg_stat_statements;<br />
 userid | dbid | query | calls | total_time | rows<br />
--------+------+-------+-------+------------+------<br />
(0 rows)</code></p>
<p>So, now let's repeat last query:</p>
<p><code># select * from pg_stat_statements;<br />
 userid | dbid  |               query               | calls | total_time | rows<br />
--------+-------+-----------------------------------+-------+------------+------<br />
     10 | 16389 | select * from pg_stat_statements; |     1 |   0.000131 |    0<br />
(1 row)</code></p>
<p>Wow! It works.</p>
<p>Now, let's reset stats (select pg_stat_statements_reset();) and do some more tests:</p>
<p><code>(pgdba@[local]:5840) 15:42:41 [pgdba]<br />
# select 1 + 2;<br />
 ?column?<br />
----------<br />
        3<br />
(1 row)<br />
&nbsp;<br />
(depesz@[local]:5840) 15:40:39 [depesz]<br />
# select 2 + 3;<br />
 ?column?<br />
----------<br />
        5<br />
(1 row)<br />
&nbsp;<br />
(depesz@[local]:5840) 15:43:13 [depesz]<br />
# select count(*) from pg_class where relkind = 'r';<br />
 count<br />
-------<br />
    50<br />
(1 row)</code></p>
<p>And, how do stats look like now?</p>
<p><code># select * from pg_stat_statements;<br />
 userid | dbid  |                       query                        | calls | total_time | rows<br />
--------+-------+----------------------------------------------------+-------+------------+------<br />
  16384 | 16388 | select count(*) from pg_class where relkind = 'r'; |     1 |   0.000271 |    1<br />
     10 | 16389 | select 1 + 2;                                      |     1 |    1.9e-05 |    1<br />
  16384 | 16388 | select 2 + 3;                                      |     1 |    2.2e-05 |    1<br />
     10 | 16389 | select pg_stat_statements_reset();                 |     1 |    3.3e-05 |    1<br />
(4 rows)</code></p>
<p>Nice. And how does it work with prepared statements?</p>
<p><code># select pg_stat_statements_reset();<br />
 pg_stat_statements_reset<br />
--------------------------<br />
&nbsp;<br />
(1 row)<br />
&nbsp;<br />
# prepare x(int4, int4) as select $1 + $2;<br />
PREPARE<br />
# execute x(1,2);<br />
 ?column?<br />
----------<br />
        3<br />
(1 row)<br />
&nbsp;<br />
# execute x(2,3);<br />
 ?column?<br />
----------<br />
        5<br />
(1 row)<br />
&nbsp;<br />
(pgdba@[local]:5840) 15:45:54 [pgdba]<br />
# prepare y(int4, int4) as select $1 + $2;<br />
PREPARE<br />
(pgdba@[local]:5840) 15:46:00 [pgdba]<br />
# execute y(3,4);<br />
 ?column?<br />
----------<br />
        7<br />
(1 row)<br />
&nbsp;<br />
(pgdba@[local]:5840) 15:46:05 [pgdba]<br />
# select * from pg_stat_statements;<br />
 userid | dbid  |                  query                   | calls | total_time | rows<br />
--------+-------+------------------------------------------+-------+------------+------<br />
     10 | 16389 | prepare y(int4, int4) as select $1 + $2; |     1 |    1.7e-05 |    1<br />
     10 | 16389 | select pg_stat_statements_reset();       |     1 |    3.4e-05 |    1<br />
     10 | 16389 | prepare x(int4, int4) as select $1 + $2; |     2 |    3.3e-05 |    2<br />
(3 rows)</code></p>
<p>Interesting. It looks like &#8220;prepare" is shown to be called as many times, as it was executed. Besides this little point &#8211; it looks great.</p>
<p>Now. I configured pg_stat_statements to keep tabs on 100 different queries. What will happen after 100th query? Which one will be removed?</p>
<p>This simple one-liner will add 100 different queries:</p>
<p><code>( echo "SELECT pg_stat_statements_reset();"; for a in $( seq 1 99 ); do echo "select $a;"; done ) | psql</code></p>
<p><code># select count(*) from pg_stat_statements;<br />
 count<br />
-------<br />
   100<br />
(1 row)</code></p>
<p><b>BUT</b> the query: &#8220;select count(*) from pg_stat_statements" was also added. So some query had to be removed from pg_stat_statements. Or perhaps count(*) was not added to stats? Let's find out:</p>
<p><code># select * from pg_stat_statements order by query;<br />
...</code></p>
<p>Apparently, pg_stat_statements will remove <i>random</i> record, with lowest number of calls. I.e. if there are 100 records, each with calls = 1 &#8211; you can't find out which row will be removed from stats when new query will arrive. But, generally it's not a big issue.</p>
<p>To sum it up. I think that functionality of the module would be greatly enhanced if it would store queries without parameters (instead of &#8220;select 2 + 3&#8243; -&gt; &#8220;select $1 + $2&#8243;, or something like this) &#8211; otherwise, with real-world databases, the buffer for queries will fill up too soon, and it will not &#8220;catch" the fact that &#8220;select * from table where id = 3&#8243; and &#8220;select * from table where id = 23&#8243; is practically the same.</p>
<p>But, since there are already tools for doing this kind of analysis, this new addition (pg_stat_statements) is welcome, as it can be used with smaller systems.</p>

									</div>
			</div>
		</div>
			
		<div class="comm">
			
<!-- You can start editing here. -->

<div class="bobcomments">




	<ol class="commentlist">

	<li class="commenthead"><h3 id="comments">13 comments <a href='http://www.depesz.com/2009/01/13/waiting-for-84-pg_stat_statements/feed/'><div class="rss-img"></div></a></h3></li>
	
			
<li class="odd" id="comment-27430" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-27430" title="">#</a></span> vcardenas</div>  <div class="date">Jan 13, 2009</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/953e9b626a22d73746184fbf74946594?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>Thanks for explaining this, is very helpful&#8230; any hints about the impact in performance?</p>
	</li>
		
		
			
<li class="mycomment" id="comment-27432" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-27432" title="">#</a></span> <a href='http://www.depesz.com/' rel='external nofollow' class='url'>depesz</a></div>  <div class="date">Jan 14, 2009</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/d5ecebb85919589a7cbf7f90eb34eacf?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>@vcardenas:<br />
Well, I tested it for only couple of runs of pgbench, but it looks like there is practically none overhead. I.e. technically there has to be one, but the difference of speed of pgbench was bigger because of random fluctuations of load on the machine (my laptop) than from turning on pg_stat_statements.</p>
	</li>
		
		
			
<li class="odd" id="comment-27434" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-27434" title="">#</a></span> Thomas</div>  <div class="date">Jan 14, 2009</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/e74de2943e3f4505ab3d07acb083f428?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>Hi,</p>
<p>I really love your site, but the black backround is extremely hard to read.<br />
Why don&#8217;t you use a white background and black font as everybody else does?</p>
<p>I&#8217;m glad I can turn off CSS using Firefox so I can at least read the full article without getting a headache</p>
	</li>
		
		
			
<li class="mycomment" id="comment-27435" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-27435" title="">#</a></span> <a href='http://www.depesz.com/' rel='external nofollow' class='url'>depesz</a></div>  <div class="date">Jan 14, 2009</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/d5ecebb85919589a7cbf7f90eb34eacf?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>@Thomas:<br />
hi,<br />
well, the most important reason is that I personally *hate* white backgrounds.</p>
<p>Also &#8211; did you notice theme switcher in sidebar?</p>
	</li>
		
		
			
<li class="odd" id="comment-27441" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-27441" title="">#</a></span> <a href='http://filip.rembialkowski.net' rel='external nofollow' class='url'>Filip</a></div>  <div class="date">Jan 15, 2009</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/37de3b43d1e4ef3abdc8ccb60b528abf?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>depesz,<br />
theme switcher switches the theme but takes you back to the main page.<br />
and when you click article title, it takes you to the article but switches the theme back to the default.<br />
(debian/firefox3)</p>
	</li>
		
		
			
<li class="odd" id="comment-27446" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-27446" title="">#</a></span> Ptomaine</div>  <div class="date">Jan 16, 2009</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/903376db5138a3a3e78f5e76a2619a0f?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>I think you should add an extra timestamp column to your stats table so that you can remove the oldest records first instead of random ones. Moreover, this column could be very useful for stats info (e.g. how much time did elapse between the first and last statement of a block of statements?).</p>
	</li>
		
		
			
<li class="mycomment" id="comment-27447" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-27447" title="">#</a></span> <a href='http://www.depesz.com/' rel='external nofollow' class='url'>depesz</a></div>  <div class="date">Jan 16, 2009</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/d5ecebb85919589a7cbf7f90eb34eacf?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>@Ptomaine:<br />
sorry, but what &#8220;my&#8221; stats table?</p>
<p>if you mean pg_stat_statements &#8211; it&#8217;s not mine &#8211; it&#8217;s postgresql, and the suggestion might be sensible to send to pg-general, or even pg-bugs mailing list.</p>
	</li>
		
		
			
<li class="odd" id="comment-27643" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-27643" title="">#</a></span> <a href='http://gray-hemp.blogspot.com' rel='external nofollow' class='url'>Sergey Konoplev</a></div>  <div class="date">Mar 15, 2009</div></div>
				<img alt='' src='http://0.gravatar.com/avatar/0b91c4ac6ec84ebc4d49e5eb08961736?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>Hello, Hubert. Seems like there&#8217;s a misunderstanding. It will &#8220;catch&#8221; the fact that “select * from table where id = 3″ and “select * from table where id = 23″ is practically the same. Look at the end of the document<br />
<a href="http://developer.postgresql.org/pgdocs/postgres/pgstatstatements.html" rel="nofollow">http://developer.postgresql.org/pgdocs/postgres/pgstatstatements.html</a></p>
	</li>
		
		
			
<li class="mycomment" id="comment-27646" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-27646" title="">#</a></span> <a href='http://www.depesz.com/' rel='external nofollow' class='url'>depesz</a></div>  <div class="date">Mar 15, 2009</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/d5ecebb85919589a7cbf7f90eb34eacf?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>@Sergey Konoplev:<br />
Unfortunately it&#8217;s not the case. Please check this:</p>
<p>create table x (i int4);</p>
<p>insert into x (i) select generate_series(1,10);</p>
<p>select * from x where i = 1;</p>
<p>select * from x where i = 2;</p>
<p><code># select * from pg_stat_statements;<br />
 userid | dbid  |                      query                      | calls | total_time | rows<br />
--------+-------+-------------------------------------------------+-------+------------+------<br />
  16384 | 16390 | select * from x where i = 1;                    |     1 |    5.6e-05 |    1<br />
  16384 | 16390 | insert into x (i) select generate_series(1,10); |     1 |   0.000294 |   10<br />
  16384 | 16390 | select * from x where i = 2;                    |     1 |    4.4e-05 |    1<br />
(3 rows)</code></p>
<p>it works in this was with prepared statements, but not with typed-in queries.</p>
	</li>
		
		
			
<li class="odd" id="comment-34225" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-34225" title="">#</a></span> zhle521</div>  <div class="date">Oct 10, 2011</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/f03c4dc763f49b793e0764dbfbc5d354?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>well, i want use this interesting stat tool in 8.3.7, but only support on 8.4. How i can do this?</p>
	</li>
		
		
			
<li class="mycomment" id="comment-34228" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-34228" title="">#</a></span> <a href='http://www.depesz.com/' rel='external nofollow' class='url'>depesz</a></div>  <div class="date">Oct 10, 2011</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/d5ecebb85919589a7cbf7f90eb34eacf?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>@zhle521:<br />
upgrade postgresql to newer version.</p>
<p>or extract the patch from git repository, and try to modify it so it will be possible to apply on 8.3 source tree.</p>
	</li>
		
		
			
<li class="odd" id="comment-34232" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-34232" title="">#</a></span> zhle521</div>  <div class="date">Oct 11, 2011</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/f03c4dc763f49b793e0764dbfbc5d354?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>thks, i try, but too many dependencies on new version source,. So, i gave it up and found another solution to the problem.</p>
	</li>
		
		
			
<li class="odd" id="comment-34756" onMouseOver="this.style.background='#dcdcdc'" onMouseOut="this.style.background='#e9e9e9'">

		<div class="name"><div class="title"><span class="bu"><a href="#comment-34756" title="">#</a></span> Andrew Hammond</div>  <div class="date">Jan 4, 2012</div></div>
				<img alt='' src='http://1.gravatar.com/avatar/54f32549c0d02110b1b53567fabaa18d?s=64&amp;d=identicon&amp;r=X' class='avatar avatar-64 photo' height='64' width='64' />		<p>If you&#8217;re using a newer version of PostgreSQL, rather than the old-fashioned way of loading this extension: </p>
<pre>
\i work/share/postgresql/contrib/pg_stat_statements.sql
</pre>
<p>Use instead the new CREATE EXTENSION feature.</p>
<pre>
CREATE EXTENSION pg_stat_statements
</pre>
<p>This has tab-completion support and is a quick way to see what extensions are included in your build / package.</p>
	</li>
		
		
		
	</ol>
	
	
	

	
	
	<form action="http://www.depesz.com/wp-comments-post.php" method="post" id="commentform">

	<h2 id="respond">Leave a comment</h2>

		
	
		<label for="author">Name</label>
		<input type="text" name="author" id="author" value="" size="22" tabindex="2" />
				
		<label for="email">E-mail</label>
		<input type="text" name="email" id="email" value="" tabindex="3" size="22" />		
		
		<label for="url">Website</label>
		<input type="text" name="url" id="url" value="" size="22" tabindex="4" />
	
	
		<label for="text">Your text</label>
		<textarea name="comment" id="comment" cols="5" rows="10" tabindex="5"></textarea>

		<input name="submit" type="submit" id="submit" tabindex="6" value="Submit comment" />
		<input type="hidden" name="comment_post_ID" value="1366" />
	
	<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="6f7012c079" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="172"/></p>
	</form>


</div>
		</div>
	
	
	</div>
<div id="sidebar">
<div class="rsidebar">
		<ul>
			<li id="search-3" class="widget widget_search"><h2 class="widgettitle">Search</h2>
<form method="get" id="searchform" action="http://www.depesz.com/">
<input name="s" id="s" type="text" value="Write your text. Press the button!" onfocus="if (this.value == 'Write your text. Press the button!') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Write your text. Press the button!';}" tabindex="1"/>
<input type="submit" id="searchsubmit" value="" />
</form>
<br /><br />
<div id="podzialka"></div></li>
<li id="linkcat-659" class="widget widget_links"><h2 class="widgettitle">Follow me</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://www.depesz.com/comments/feed/">Comments RSS</a></li>
<li><a href="http://depesz.com/feed/">Posts RSS</a></li>

	</ul>
</li>


<!-- Wordpress Popular Posts Plugin v3.0.3 [W] [weekly] [views] [regular] -->
<li id="wpp-3" class="widget popular-posts">
<h2 class="widgettitle">Popular Posts</h2>

<ul class="wpp-list">
<li><a href="http://www.depesz.com/2014/07/14/waiting-for-9-5-implement-import-foreign-schema/" title="Waiting for 9.5 &#8211; Implement IMPORT FOREIGN SCHEMA." class="wpp-post-title" target="_self">Waiting for 9.5 &#8211; Implement IMPORT FOREIGN SCHEMA.</a>  <span class="post-stats"><span class="wpp-comments">2 comments</span> | <span class="wpp-views">633 views</span></span> </li>
<li><a href="http://www.depesz.com/2014/07/15/waiting-for-9-5-psql-show-tablespace-size-in-db/" title="Waiting for 9.5 &#8211; psql: Show tablespace size in \db+" class="wpp-post-title" target="_self">Waiting for 9.5 &#8211; psql: Show tablespace size in \db+</a>  <span class="post-stats"><span class="wpp-comments">4 comments</span> | <span class="wpp-views">615 views</span></span> </li>
<li><a href="http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/" title="Why is UPSERT so complicated?" class="wpp-post-title" target="_self">Why is UPSERT so complicated?</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">264 views</span></span> </li>
<li><a href="http://www.depesz.com/2010/03/02/charx-vs-varcharx-vs-varchar-vs-text/" title="CHAR(x) vs. VARCHAR(x) vs. VARCHAR vs. TEXT &#8211; UPDATED 2010-03-03" class="wpp-post-title" target="_self">CHAR(x) vs. VARCHAR(x) vs. VARCHAR vs. TEXT &#8211; UPDATED 2010-03-03</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">205 views</span></span> </li>
<li><a href="http://www.depesz.com/2012/06/09/how-much-ram-is-postgresql-using/" title="How much RAM is PostgreSQL using?" class="wpp-post-title" target="_self">How much RAM is PostgreSQL using?</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">144 views</span></span> </li>
<li><a href="http://www.depesz.com/2011/05/06/understanding-postgresql-conf-log/" title="Understanding postgresql.conf : log*" class="wpp-post-title" target="_self">Understanding postgresql.conf : log*</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">142 views</span></span> </li>
<li><a href="http://www.depesz.com/2014/01/29/getting-count-of-distinct-elements-per-group-in-postgresql/" title="Getting count of distinct elements, per group, in PostgreSQL." class="wpp-post-title" target="_self">Getting count of distinct elements, per group, in PostgreSQL.</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">128 views</span></span> </li>
<li><a href="http://www.depesz.com/2008/05/05/error-operator-does-not-exist-integer-text-how-to-fix-it/" title="&#8220;ERROR:  operator does not exist: integer = text&#8221; how to fix it?" class="wpp-post-title" target="_self">&#8220;ERROR:  operator does not exist: integer = text&#8221; how to fix it?</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">126 views</span></span> </li>
<li><a href="http://www.depesz.com/2011/07/14/write-ahead-log-understanding-postgresql-conf-checkpoint_segments-checkpoint_timeout-checkpoint_warning/" title="Write Ahead Log + Understanding postgresql.conf: checkpoint_segments, checkpoint_timeout, checkpoint_warning" class="wpp-post-title" target="_self">Write Ahead Log + Understanding postgresql.conf: checkpoint_segments, checkpoint_timeout, checkpoint_warning</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">113 views</span></span> </li>
<li><a href="http://www.depesz.com/2011/03/07/waiting-for-9-1-foreach-in-array/" title="Waiting for 9.1 &#8211; FOREACH IN ARRAY" class="wpp-post-title" target="_self">Waiting for 9.1 &#8211; FOREACH IN ARRAY</a>  <span class="post-stats"><span class="wpp-comments">0 comments</span> | <span class="wpp-views">100 views</span></span> </li>

</ul>
</li>

<!-- End Wordpress Popular Posts Plugin v3.0.3 -->
<li id="linkcat-4" class="widget widget_links"><h2 class="widgettitle">postgresql</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://www.postgresql.org/docs/current/interactive/index.html">Documentation</a></li>
<li><a href="http://explain.depesz.com/">Explain Analyze analyzer</a></li>
<li><a href="irc://irc.freenode.net/#postgresql">IRC help channel</a></li>
<li><a href="http://archives.postgresql.org/">Mailing Lists search</a></li>
<li><a href="http://planet.postgresql.org/">PG Planet</a></li>
<li><a href="http://www.postgresql.org/" title="strona domowa postgresqla">PostgreSQL Home Page</a></li>

	</ul>
</li>

<li id="linkcat-376" class="widget widget_links"><h2 class="widgettitle">About me</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://search.cpan.org/~depesz/">CPAN</a></li>
<li><a href="https://github.com/depesz/">GitHub</a></li>
<li><a href="http://linkedin.com/in/depesz">Linked In</a></li>
<li><a href="http://www.depesz.com/toyota-gt86/">Samochód</a></li>

	</ul>
</li>

<li id="theme-switcher" class="widget widget_themeswitcher"><h2 class="widgettitle">Theme</h2>
<ul id="themeswitcher">
<li>
       <select style="width:140px" name="themeswitcher" onchange="location.href='http://www.depesz.com/index.php?wptheme=' + this.options[this.selectedIndex].value;">
               <option value="AS 400">AS 400</option>
               <option value="GrayGA">GrayGA</option>
               <option value="Twenty Eleven">Twenty Eleven</option>
               <option value="Twenty Fourteen">Twenty Fourteen</option>
               <option value="Twenty Ten">Twenty Ten</option>
               <option value="Twenty Thirteen">Twenty Thirteen</option>
               <option value="Twenty Twelve">Twenty Twelve</option>
               <option value="WordPress Classic">WordPress Classic</option>
               <option value="WordPress Default">WordPress Default</option>
               <option value="Wordpress Depesz" selected="selected">Wordpress Depesz</option>
       </select>
</li>
</ul></li>
		</ul>
</div>
		
</div>



<div id="space"></div>
</div>
<div id="bottom">
	<div class="navigation">			
					</div>
</div>

<!-- Powered by WPtouch: 3.4.4 --><script type='text/javascript' src='http://www.depesz.com/wp-content/plugins/akismet/_inc/form.js?ver=3.0.1'></script>
</div>

</body>
</html>

