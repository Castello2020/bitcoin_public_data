http://www.organicdesign.co.nz/wiki/index.php?title=MediaWiki_code_snippets&oldid=106685
HTTP/1.1 200 OK
Server: nginx/1.1.19
Date: Sat, 26 Jul 2014 13:09:06 GMT
Content-Type: text/html; charset=UTF-8
Connection: close
X-Powered-By: PHP/5.3.10-1ubuntu3.13
X-Content-Type-Options: nosniff
Content-language: en
Vary: Accept-Encoding, Cookie
Expires: Thu, 01 Jan 1970 00:00:00 GMT
Cache-Control: private, must-revalidate, max-age=0

<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<title>MediaWiki code snippets - Organic Design</title>
<meta charset="UTF-8" />
<meta name="generator" content="MediaWiki 1.21.1" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/wiki/opensearch_desc.php" title="Organic Design (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://www.organicdesign.co.nz/wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Organic Design Atom feed" href="/wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://www.organicdesign.co.nz/wiki/load.php?debug=false&amp;lang=en&amp;modules=ext.rtlcite%7Cmediawiki.legacy.commonPrint%2Cshared%7Cskins.organicdesign&amp;only=styles&amp;skin=organicdesign&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://www.organicdesign.co.nz/wiki/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=organicdesign&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(fa),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: od:resourceloader:filter:minify-css:7:b5c3e325afe8c774a28a4df0e8177d73 */</style>

<script src="http://www.organicdesign.co.nz/wiki/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=organicdesign&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"MediaWiki_code_snippets","wgTitle":"MediaWiki code snippets","wgCurRevisionId":117381,"wgArticleId":9376,"wgIsArticle":true,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Articles that contain computer code","MediaWiki","Examples","Examples/PHP"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"MediaWiki_code_snippets","wgRestrictionEdit":[],"wgRestrictionMove":[],"wgAjaxCommentsPollServer":0,"wgFormMailerAP":"-eac07ff2527063feb7c98138882bad51"});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":0,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":5,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"organicdesign","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs102":false,"searchNs103":false,"searchNs106":false,"searchNs107":false,"searchNs108":false,"searchNs109":false,"searchNs1000":false,"searchNs1001":false,"searchNs1004":false,"searchNs1005":false,"searchNs1010":false,"searchNs1011":false,"searchNs1014":false,"searchNs1015":false,"searchNs1016":false,"searchNs1017":false});;},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});;},{},{});
/* cache key: od:resourceloader:filter:minify-js:7:3380996f633fe2b87b78a9f4b95fac71 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
<script type="text/javascript">window.tamBaseUrl='/wiki/extensions/TreeAndMenu'</script>
<script type="text/javascript" src="/wiki/extensions/TreeAndMenu/dtree.js"></script>
		<link rel="alternate" type="application/rdf+xml" title="MediaWiki code snippets" href="/wiki/index.php?title=Special:ExportRDF/MediaWiki_code_snippets&amp;xmlmime=rdf" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-MediaWiki_code_snippets skin-organicdesign action-view anon notsysop">
	<table class="pageWrapper" cellpadding="0" cellspacing="0" width="100%"><tr><td align="center">
		<div id="languages">
			<a href="http://www.organicdesign.co.nz/wiki/index.php?title=MediaWiki_code_snippets&oldid=106685" title="English"><img src="/wiki/skins/organicdesign/uk.png" /></a>
			<a href="http://pt.organicdesign.co.nz/wiki/index.php?title=MediaWiki_code_snippets&oldid=106685" title="PortuguÃªs brasileiro"><img src="/wiki/skins/organicdesign/br.png" /></a>
		</div>
	<table id="globalWrapper" cellpadding="0" cellspacing="0"><tr><td>
	<table class="pageWrapper" cellpadding="0" cellspacing="0" width="100%"><tr><td id="column-one"><div id="c1-div">
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>

	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/wiki/index.php?title=Special:UserLogin&amp;returnto=MediaWiki+code+snippets&amp;returntoquery=oldid%3D106685" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="donations" >
		<h2 style="white-space:nowrap">Tips are welcome</h2>
		<h5>We accept paypal or credit card</h5>
		<div class="pBody">
			<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
				<input type="hidden" name="cmd" value="_xclick">
				<input type="hidden" name="business" value="SYUYL7GAGKFRY" />
				<input type="hidden" name="item_name" value="Donation to Organic Design">
				<input type="hidden" name="currency_code" value="USD">
				$<input style="width:35px" type="text" name="amount" value="5.00" />&nbsp;<input type="submit" value="Checkout" />
			</form>
		</div>
		<h5 id="btcbest">But <a href="/Bitcoin">Bitcoins</a> are awesome :-)</h5>
		<div class="pBody" style="white-space:nowrap;vertical-align:top;background:url(/files/a/a0/Bitcoin-icon.png) no-repeat 5px 2px;">
			<input style="width:139px;margin-left:23px" readonly="1" value="19BcAkFCok8VRM7kktc4kRhKnr5D51NxJd" onmouseover="this.select()" />
		</div>
		<h5 id="nmccool">So is <a href="/Ripple">XRP</a>, <a href="/Namecoin">NMC</a> & <a href="/Litecoin">LTC</a></h5>
		<div class="pBody" style="white-space:nowrap;vertical-align:top;background:url(/files/2/23/Ripple.png) no-repeat 5px 2px;">
			<input style="width:139px;margin-left:23px" readonly="1" value="rBSVzXKvPiRVKa4aBpr3SNqSem1RBDdhqy" onmouseover="this.select()" />
		</div>
		<div class="pBody" style="white-space:nowrap;vertical-align:top;background:url(/files/c/c6/Namecoin-icon.png) no-repeat 5px 2px;">
			<input style="width:139px;margin-left:23px" readonly="1" value="NB6GUnq7DTPFPyh8Zq6tdFyW4VyRv2HNWD" onmouseover="this.select()" />
		</div>
		<div class="pBody" style="white-space:nowrap;vertical-align:top;background:url(/files/a/a4/Litecoin-icon.png) no-repeat 5px 2px;">
			<input style="width:139px;margin-left:23px" readonly="1" value="LeqKPQyxCvrXkXUf6rSxMkMBUpo1NLKQTY" onmouseover="this.select()" />
		</div>
</div>
<div class="fb-like-box" data-href="http://www.facebook.com/organicdesign.co.nz" data-width="200" data-show-faces="false" data-stream="false" data-header="false"></div>

<!-- search -->
<div id="p-search" class="portlet">
	<h2><label for="searchInput">Search</label></h2>
	<div id="searchBody" class="pBody">
		<form action="/wiki/index.php" id="searchform">
			<input type='hidden' name="title" value="Special:Search"/>
			<input type="search" name="search" title="Search Organic Design [f]" accesskey="f" id="searchInput" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />		</form>
	</div>
</div><div id="recent-activity"><h2> <span class="mw-headline" id="Recent_activity">Recent activity</span></h2>
<ul><li><a rel="nofollow" class="external text" href="http://www.organicdesign.co.nz">Home</a>
</li><li><a href="/News" title="News">News</a>
</li><li><a rel="nofollow" class="external text" href="http://www.organicdesign.co.nz/wiki/index.php?title=Special:Recentchanges&amp;hideminor=1">Latest updates</a>
</li><li><a href="/Special:NewFiles" title="Special:NewFiles">Latest pictures</a>
</li><li><span style="background-color:#f5fd82"><a href="/Moving_from_Curitiba_to_Canela" title="Moving from Curitiba to Canela">1. Moving from Curitiba to Canela</a></span>
</li><li><span style="background-color:#f5fd82"><a href="/Moving_on_to_our_land" title="Moving on to our land">2. Moving on to our land</a></span>
</li><li><span style="background-color:#f5fd82"><a href="/Our_first_year_on_the_land" title="Our first year on the land">3. Our first year on the land</a></span>
</li><li><span style="background-color:#f5fd82"><a href="/Our_second_year_on_the_land" title="Our second year on the land">4. Our second year on the land</a></span>
</li><li><span style="background-color:#f5fd82"><a href="/2014_Holiday_in_Brazil" title="2014 Holiday in Brazil">Mum &amp; Dads holiday</a></span>
</li><li><a href="/File:Ice_in_the_water_buckets.jpg" title="File:Ice in the water buckets.jpg">Ice in the water buckets.jpg</a>
</li><li><a href="/File:Frosted_panels.jpg" title="File:Frosted panels.jpg">Frosted panels.jpg</a>
</li><li><a href="/Ethereum" title="Ethereum">Ethereum</a>
</li><li><a href="/File:Ah_oh,_better_get_a_metal_bin_for_the_ash!.jpg" title="File:Ah oh, better get a metal bin for the ash!.jpg">Ah oh, better get a metal bin for the ash!.jpg</a>
</li><li><a href="/23_July_2014" title="23 July 2014">23 July 2014</a>
</li><li><a href="/Category:Mice" title="Category:Mice">Mice</a>
</li><li><a href="/File:Antenna_installed_on_the_hill_taken_from_the_house.jpg" title="File:Antenna installed on the hill taken from the house.jpg">Antenna installed on the hill taken from the house.jpg</a>
</li><li><a href="/File:Ethereum_Logo.png" title="File:Ethereum Logo.png">Ethereum Logo.png</a>
</li><li><a href="/File:Pinh%C3%A3o_in_fruit_segment.jpg" title="File:PinhÃ£o in fruit segment.jpg">PinhÃ£o in fruit segment.jpg</a>
</li><li><a href="/Pinh%C3%A3o" title="PinhÃ£o">PinhÃ£o</a>
</li></ul>
</div><div class='dtree' id='sidebartree'></div><script type="text/javascript">window.tamOnload_tamsidebartree=[];tree = new dTree('tamsidebartree');
							for (i in tree.icon) tree.icon[i] = '/wiki/extensions/TreeAndMenu/'+tree.icon[i];tree.icon['folder'] = '/files/e/ee/Folder_mist.gif';tree.icon['folderOpen'] = '/files/2/28/Folder_opn_mist.gif';
							tree.config.useLines = true;

							tree.add(0,-1,'<h2> <span class=\"mw-headline\" id=\"Site_map\">Site map</span></h2>');
							tamsidebartree = tree;
							tamsidebartree.add(1, 0, '<a href=\"/OrganicDesign_manifesto\" title=\"OrganicDesign manifesto\" class=\"mw-redirect\">Manifesto</a>');
tamsidebartree.add(2, 0, '<a href=\"/Contact_us\" title=\"Contact us\">Contact us</a>');
tamsidebartree.add(3, 0, '<a href=\"/Category:Help\" title=\"Category:Help\">Help</a> <small><a href=\"/Cheatsheet\" title=\"Cheatsheet\" class=\"mw-redirect\">(cheatsheet)</a></small>');
tamsidebartree.add(4, 0, '<a href=\"/Category:Glossary\" title=\"Category:Glossary\">Glossary</a> ');
tamsidebartree.add(5, 0, '<a href=\"/Category:Extensions\" title=\"Category:Extensions\">MediaWiki extensions</a>');
tamsidebartree.add(6, 0, '<strong class=\"selflink\">MediaWiki code snippets</strong>');
tamsidebartree.add(7, 0, '<a href=\"/Linux_commands\" title=\"Linux commands\">Linux commands</a>');
tamsidebartree.add(8, 0, '<a rel=\"nofollow\" class=\"external text\" href=\"http://svn.organicdesign.co.nz\">Browse our code</a>');
tamsidebartree.add(9, 0, '<a rel=\"nofollow\" class=\"external text\" href=\"https://github.com/OrganicDesign\">OD on GitHub</a>');
tamsidebartree.add(10, 0, '<a href=\"/Special:Categories\" title=\"Special:Categories\">Categories</a>');
tamsidebartree.add(11, 10, '<a href=\"/Category:Diagrams\" title=\"Category:Diagrams\">Diagrams</a>');
tamsidebartree.add(12, 10, '<a href=\"/Category:Examples\" title=\"Category:Examples\">Examples</a>');
tamsidebartree.add(13, 10, '<a href=\"/Category:Glossary\" title=\"Category:Glossary\">Glossary</a>');
tamsidebartree.add(14, 10, '<a href=\"/Category:Help\" title=\"Category:Help\">Help</a>');
tamsidebartree.add(15, 10, '<a href=\"/Category:Images\" title=\"Category:Images\">Images</a>');
tamsidebartree.add(16, 10, '<a href=\"/Category:Maths\" title=\"Category:Maths\">Maths</a>');
tamsidebartree.add(17, 10, '<a href=\"/Category:Nodal_Concepts\" title=\"Category:Nodal Concepts\">Nodal Concepts</a>');
tamsidebartree.add(18, 10, '<a href=\"/Category:Notes\" title=\"Category:Notes\">Notes</a>');
tamsidebartree.add(19, 10, '<a href=\"/Category:Philosophy\" title=\"Category:Philosophy\">Philosophy</a>');
tamsidebartree.add(20, 10, '<a href=\"/Category:Procedures\" title=\"Category:Procedures\">Procedures</a>');
tamsidebartree.add(21, 10, '<a href=\"/Category:Screenshots\" title=\"Category:Screenshots\">Screenshots</a>');
tamsidebartree.add(22, 10, '<a href=\"/Category:Stories\" title=\"Category:Stories\">Stories</a>');
tamsidebartree.add(23, 10, '<a href=\"/Category:Tools\" title=\"Category:Tools\">Tools</a>');
tamsidebartree.add(24, 10, '<a href=\"/Category:Yi\" title=\"Category:Yi\">Yi</a>');
tamsidebartree.add(25, 0, '<a href=\"/RecentActivity\" title=\"RecentActivity\">Recent activity</a>');
tamsidebartree.add(26, 25, '<a href=\"/RecentActivity\" title=\"RecentActivity\">Recently Edited Articles</a>');
tamsidebartree.add(27, 26, '<a href=\"/File:Ice_in_the_water_buckets.jpg\" title=\"File:Ice in the water buckets.jpg\">Ice in the water buckets.jpg</a>');
tamsidebartree.add(28, 26, '<a href=\"/File:Frosted_panels.jpg\" title=\"File:Frosted panels.jpg\">Frosted panels.jpg</a>');
tamsidebartree.add(29, 26, '<a href=\"/Ethereum\" title=\"Ethereum\">Ethereum</a>');
tamsidebartree.add(30, 26, '<a href=\"/File:Ah_oh,_better_get_a_metal_bin_for_the_ash!.jpg\" title=\"File:Ah oh, better get a metal bin for the ash!.jpg\">Ah oh, better get a metal bin for the ash!.jpg</a>');
tamsidebartree.add(31, 26, '<a href=\"/23_July_2014\" title=\"23 July 2014\">23 July 2014</a>');
tamsidebartree.add(32, 26, '<a href=\"/Category:Mice\" title=\"Category:Mice\">Mice</a>');
tamsidebartree.add(33, 26, '<a href=\"/File:Antenna_installed_on_the_hill_taken_from_the_house.jpg\" title=\"File:Antenna installed on the hill taken from the house.jpg\">Antenna installed on the hill taken from the house.jpg</a>');
tamsidebartree.add(34, 26, '<a href=\"/File:Ethereum_Logo.png\" title=\"File:Ethereum Logo.png\">Ethereum Logo.png</a>');
tamsidebartree.add(35, 26, '<a href=\"/File:Pinh%C3%A3o_in_fruit_segment.jpg\" title=\"File:PinhÃ£o in fruit segment.jpg\">PinhÃ£o in fruit segment.jpg</a>');
tamsidebartree.add(36, 26, '<a href=\"/Pinh%C3%A3o\" title=\"PinhÃ£o\">PinhÃ£o</a>');
tamsidebartree.add(37, 25, '<a href=\"/RecentActivity\" title=\"RecentActivity\">Recently Created Articles</a>');
tamsidebartree.add(38, 37, '<a href=\"/File:Ice_in_the_water_buckets.jpg\" title=\"File:Ice in the water buckets.jpg\">Ice in the water buckets.jpg</a>');
tamsidebartree.add(39, 37, '<a href=\"/File:Frosted_panels.jpg\" title=\"File:Frosted panels.jpg\">Frosted panels.jpg</a>');
tamsidebartree.add(40, 37, '<a href=\"/File:Ah_oh,_better_get_a_metal_bin_for_the_ash!.jpg\" title=\"File:Ah oh, better get a metal bin for the ash!.jpg\">Ah oh, better get a metal bin for the ash!.jpg</a>');
tamsidebartree.add(41, 37, '<a href=\"/File:Antenna_installed_on_the_hill_taken_from_the_house.jpg\" title=\"File:Antenna installed on the hill taken from the house.jpg\">Antenna installed on the hill taken from the house.jpg</a>');
tamsidebartree.add(42, 37, '<a href=\"/File:Ethereum_Logo.png\" title=\"File:Ethereum Logo.png\">Ethereum Logo.png</a>');
tamsidebartree.add(43, 37, '<a href=\"/23_July_2014\" title=\"23 July 2014\">23 July 2014</a>');
tamsidebartree.add(44, 37, '<a href=\"/File:Pinh%C3%A3o_in_fruit_segment.jpg\" title=\"File:PinhÃ£o in fruit segment.jpg\">PinhÃ£o in fruit segment.jpg</a>');
tamsidebartree.add(45, 37, '<a href=\"/Mouse_attack!\" title=\"Mouse attack!\">Mouse attack!</a>');
tamsidebartree.add(46, 37, '<a href=\"/File:Concrete_under_capping.jpg\" title=\"File:Concrete under capping.jpg\">Concrete under capping.jpg</a>');
tamsidebartree.add(47, 37, '<a href=\"/Eris\" title=\"Eris\" class=\"mw-redirect\">Eris</a>');
tamsidebartree.add(48, 0, '<a href=\"/Today%27s_most_popular_articles\" title=\"Today\'s most popular articles\">Today\'s Popular Pages</a>');
tamsidebartree.add(49, 48, '234 <a href=\"/File:Antenna_installed_on_the_hill_taken_from_the_house.jpg\" title=\"File:Antenna installed on the hill taken from the house.jpg\">Antenna installed on the hill taken from the house.jpg</a>');
tamsidebartree.add(50, 48, '219 <a href=\"/Home\" title=\"Home\">Home</a>');
tamsidebartree.add(51, 48, '129 <a href=\"/Configure_mail_server\" title=\"Configure mail server\">Configure mail server</a>');
tamsidebartree.add(52, 48, '110 <a href=\"/User:Milan\" title=\"User:Milan\">Milan</a>');
tamsidebartree.add(53, 48, '89 <a href=\"/File:Drinking_from_the_well_hole_the_next_day_2.jpg\" title=\"File:Drinking from the well hole the next day 2.jpg\">Drinking from the well hole the next day 2.jpg</a>');
tamsidebartree.add(54, 48, '69 <strong class=\"selflink\">MediaWiki code snippets</strong>');
tamsidebartree.add(55, 48, '47 <a href=\"/Drupal\" title=\"Drupal\">Drupal</a>');
tamsidebartree.add(56, 48, '45 <a href=\"/Google_Maps_API\" title=\"Google Maps API\">Google Maps API</a>');
tamsidebartree.add(57, 48, '40 <a href=\"/92._Go_Beyond_the_l-am-the-body_Idea\" title=\"92. Go Beyond the l-am-the-body Idea\">92. Go Beyond the l-am-the-body Idea</a>');
tamsidebartree.add(58, 48, '34 <a href=\"/Install_a_new_server\" title=\"Install a new server\">Install a new server</a>');
tamsidebartree.add(59, 48, '<a href=\"/Current_Pages\" title=\"Current Pages\" class=\"mw-redirect\">more...</a>');
tamsidebartree.add(60, 0, '<a rel=\"nofollow\" class=\"external text\" href=\"http://www.organicdesign.co.nz/wiki/index.php?title=Special:Whatlinkshere&amp;target=MediaWiki_code_snippets\">What links here</a> <small><a rel=\"nofollow\" class=\"external text\" href=\"https://siteexplorer.search.yahoo.com/advsearch;_ylt=AiXaB4iQvovsogcWbZZaUFTbl8kF?p=http%3A%2F%2Fwww.organicdesign.co.nz%2FMediaWiki_code_snippets&amp;bwm=i&amp;bwmo=d\">(external)</a></small>');
tamsidebartree.add(61, 0, '<a rel=\"nofollow\" class=\"external text\" href=\"http://www.organicdesign.co.nz/wiki/index.php?title=Special:Upload\">Upload file</a>');
tamsidebartree.add(62, 0, '<a href=\"/Special:SpecialPages\" title=\"Special:SpecialPages\">Special pages</a>');
tamsidebartree.add(63, 0, '<a href=\"/Category:Special_categories\" title=\"Category:Special categories\">Special categories</a>');
tamsidebartree.add(64, 0, '<a href=\"/Special:Version\" title=\"Special:Version\">Version</a>');
tamsidebartree.add(65, 0, '<a rel=\"nofollow\" class=\"external text\" href=\"http://www.organicdesign.co.nz/wiki/index.php?title=MediaWiki_code_snippets&amp;action=info\">Page statistics</a>');
tamsidebartree.add(66, 0, '<a href=\"/Special:Statistics\" title=\"Special:Statistics\">Site statistics</a>');
							document.getElementById('sidebartree').innerHTML = tamsidebartree.toString();
							for(i in window.tamOnload_tamsidebartree) { window.tamOnload_tamsidebartree[i](); }</script>

<br />
<br />
<br />
<div style="margin:-5px 0 0 36px"><a href="/19_June_2013" title="19 June 2013"><img alt="Bad Windows and Ubuntu.svg" src="/files/thumb/8/8b/Bad_Windows_and_Ubuntu.svg/100px-Bad_Windows_and_Ubuntu.svg.png" width="100" height="130" srcset="/files/thumb/8/8b/Bad_Windows_and_Ubuntu.svg/150px-Bad_Windows_and_Ubuntu.svg.png 1.5x, /files/thumb/8/8b/Bad_Windows_and_Ubuntu.svg/200px-Bad_Windows_and_Ubuntu.svg.png 2x" /></a></div>

<!-- 
NewPP limit report
Preprocessor visited node count: 124/1000000
Preprocessor generated node count: 702/1000000
Postâexpand include size: 3759/2097152 bytes
Template argument size: 285/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->
</div></td>

<!-- Main content area -->
	<td id="contentWrapper">
		<table cellpadding="0" cellspacing="0" width="100%"><tr>
		<tr>
			<td><div id="shadow-tl"></div></td>
			<td id="shadow-t" align="right"><div id="logo-t"></div></td>
			<td align="left"><div id="shadow-tr"></div></td>
		</tr>
		<td id="shadow-l">
		<td width="100%" id="content">
			<div id="p-cactions" class="portlet">
				<h5>Views</h5>
				<div class="pBody">
					<ul><li id="ca-nstab-main" class="selected"><a href="/MediaWiki_code_snippets" primary="1" context="subject" title="View the content page [c]" accesskey="c">Page</a></li><li id="ca-talk"><a href="/Talk:MediaWiki_code_snippets" primary="1" context="talk" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li><li id="ca-viewsource"><a href="/wiki/index.php?title=MediaWiki_code_snippets&amp;action=edit&amp;oldid=106685" primary="1" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history"><a href="/wiki/index.php?title=MediaWiki_code_snippets&amp;action=history" rel="archives" title="Past revisions of this page [h]" accesskey="h">History</a></li>
					</ul>
				</div>
			</div>
	<a id="top"></a>
	
	<h1 id="firstHeading" class="firstHeading"><span dir="auto">MediaWiki code snippets</span></h1>
	<div id="bodyContent" class="mw-body">
		<div id="siteSub">From Organic Design</div>
		<div id="contentSub"><div id="mw-revision-info">Revision as of 17:54, 12 January 2012 by <a href="/User:Nad" title="User:Nad" class="mw-userlink">Nad</a>  <span class="mw-usertoollinks">(<a href="/User_talk:Nad" title="User talk:Nad">Talk</a> | <a href="/Special:Contributions/Nad" title="Special:Contributions/Nad">contribs</a>)</span></div><br />
				<div id="mw-revision-nav">(<a href="/wiki/index.php?title=MediaWiki_code_snippets&amp;diff=prev&amp;oldid=106685" title="MediaWiki code snippets">diff</a>) <a href="/wiki/index.php?title=MediaWiki_code_snippets&amp;direction=prev&amp;oldid=106685" title="MediaWiki code snippets">â Older revision</a> | <a href="/MediaWiki_code_snippets" title="MediaWiki code snippets">Latest revision</a> (<a href="/wiki/index.php?title=MediaWiki_code_snippets&amp;diff=cur&amp;oldid=106685" title="MediaWiki code snippets">diff</a>) | <a href="/wiki/index.php?title=MediaWiki_code_snippets&amp;direction=next&amp;oldid=106685" title="MediaWiki code snippets">Newer revision â</a> (<a href="/wiki/index.php?title=MediaWiki_code_snippets&amp;diff=next&amp;oldid=106685" title="MediaWiki code snippets">diff</a>)</div></div>
		<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>
		<!-- start content -->
<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Getting_in_to_MediaWiki_coding"><span class="tocnumber">1</span> <span class="toctext">Getting in to MediaWiki coding</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Articles"><span class="tocnumber">2</span> <span class="toctext">Articles</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Get_article_content"><span class="tocnumber">2.1</span> <span class="toctext">Get article content</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Edit_or_create_an_article"><span class="tocnumber">2.2</span> <span class="toctext">Edit or create an article</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Image_URLs"><span class="tocnumber">2.3</span> <span class="toctext">Image URLs</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Image_links"><span class="tocnumber">2.4</span> <span class="toctext">Image links</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Adding_stub_code_to_newly_created_articles"><span class="tocnumber">2.5</span> <span class="toctext">Adding stub code to newly created articles</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Security"><span class="tocnumber">3</span> <span class="toctext">Security</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Returning_content_to_the_client"><span class="tocnumber">4</span> <span class="toctext">Returning content to the client</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Raw_wikitext_content"><span class="tocnumber">4.1</span> <span class="toctext">Raw wikitext content</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Return_an_HTTP_error_page"><span class="tocnumber">4.2</span> <span class="toctext">Return an HTTP error page</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Domain-based_default_redirect"><span class="tocnumber">4.3</span> <span class="toctext">Domain-based default redirect</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Add_a_meta_tags_to_the_page"><span class="tocnumber">4.4</span> <span class="toctext">Add a meta tags to the page</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Using_the_parser"><span class="tocnumber">5</span> <span class="toctext">Using the parser</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Parse_wikitext"><span class="tocnumber">5.1</span> <span class="toctext">Parse wikitext</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Expand_templates_only"><span class="tocnumber">5.2</span> <span class="toctext">Expand templates only</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Replace_triple-brace_arguments_in_wikitext_content"><span class="tocnumber">5.3</span> <span class="toctext">Replace triple-brace arguments in wikitext content</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Using_named_parameters_from_a_parser-function_callback"><span class="tocnumber">5.4</span> <span class="toctext">Using named parameters from a parser-function callback</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Return_codes_for_parser_functions"><span class="tocnumber">5.5</span> <span class="toctext">Return codes for parser functions</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Protecting_raw_HTML_output_from_modification_by_MediaWiki"><span class="tocnumber">5.6</span> <span class="toctext">Protecting raw HTML output from modification by MediaWiki</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Post_processing_to_remove_unwanted_breaks_and_entities_from_output"><span class="tocnumber">5.7</span> <span class="toctext">Post processing to remove unwanted breaks and entities from output</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#JavaScript"><span class="tocnumber">6</span> <span class="toctext">JavaScript</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Make_sortable_table_states_persistent_with_cookies"><span class="tocnumber">6.1</span> <span class="toctext">Make sortable table states persistent with cookies</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#MediaWiki_Environment"><span class="tocnumber">7</span> <span class="toctext">MediaWiki Environment</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Article_title"><span class="tocnumber">7.1</span> <span class="toctext">Article title</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#Article_queries"><span class="tocnumber">8</span> <span class="toctext">Article queries</span></a>
<ul>
<li class="toclevel-2 tocsection-27"><a href="#List_article_titles_from_a_category"><span class="tocnumber">8.1</span> <span class="toctext">List article titles from a category</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#List_categories_an_article_belongs_to"><span class="tocnumber">8.2</span> <span class="toctext">List categories an article belongs to</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Check_if_a_title_is_in_a_category"><span class="tocnumber">8.3</span> <span class="toctext">Check if a title is in a category</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Get_a_list_of_articles_in_a_namespace_.28number.29"><span class="tocnumber">8.4</span> <span class="toctext">Get a list of articles in a namespace (number)</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Get_a_list_of_articles_using_a_template"><span class="tocnumber">8.5</span> <span class="toctext">Get a list of articles using a template</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Remove_category_pages_for_empty_categories"><span class="tocnumber">8.6</span> <span class="toctext">Remove category pages for empty categories</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Article_queries_using_DPL"><span class="tocnumber">8.7</span> <span class="toctext">Article queries using DPL</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-34"><a href="#Misc"><span class="tocnumber">9</span> <span class="toctext">Misc</span></a>
<ul>
<li class="toclevel-2 tocsection-35"><a href="#examineBraces"><span class="tocnumber">9.1</span> <span class="toctext">examineBraces</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Google_Analytics"><span class="tocnumber">9.2</span> <span class="toctext">Google Analytics</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#Force_all_headings_to_use_outline_numbering"><span class="tocnumber">9.3</span> <span class="toctext">Force all headings to use outline numbering</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-38"><a href="#Integrating_with_the_Skin"><span class="tocnumber">10</span> <span class="toctext">Integrating with the Skin</span></a>
<ul>
<li class="toclevel-2 tocsection-39"><a href="#Adding_a_new_action_tab"><span class="tocnumber">10.1</span> <span class="toctext">Adding a new action tab</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Wikitext_in_Sidebar"><span class="tocnumber">10.2</span> <span class="toctext">Wikitext in Sidebar</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Development_server_identification"><span class="tocnumber">10.3</span> <span class="toctext">Development server identification</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-42"><a href="#Importing_and_Exporting_articles"><span class="tocnumber">11</span> <span class="toctext">Importing and Exporting articles</span></a></li>
<li class="toclevel-1 tocsection-43"><a href="#See_also"><span class="tocnumber">12</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Getting_in_to_MediaWiki_coding"> Getting in to MediaWiki coding </span></h2>
<p>Here's a useful checklist of things to have set up before starting with MediaWiki development; see also <a href="http://www.mediawiki.org/wiki/How_to_debug" class="extiw" title="mw:How to debug">MW:How to debug</a> and <a href="http://www.mediawiki.org/wiki/Developer_hub" class="extiw" title="mw:Developer hub">MW:Developer hub</a>.
</p>
<ul><li>Full browser and shell access to a running instance of every major version
</li><li>Local access to the source code for all those versions
</li><li>Use <i>wfDebugDieBacktrace()</i> to stop code and report the call stack
</li><li>A good text editor with regular expression support file search capability (we use <a rel="nofollow" class="external text" href="http://geany.uvena.de/">Geany</a> which runs on most platforms)
</li><li>A <a href="/OD/Wikia" title="OD/Wikia">wikia</a> setup so that extension code changes can be quickly tested in all versions and different extension versions can be quickly swapped
</li><li>Tools or code for being able to stop the php code and output the necessary items in the scope
</li><li>Tools for debugging the JS and CSS environment (eg. <a rel="nofollow" class="external text" href="http://getfirebug.com/docs.html">firebug</a>)
</li><li>Bookmarks for all the documentation you've found useful
</li><li>Bookmarks to code snippets and examples (within your own wiki, <a rel="nofollow" class="external free" href="http://mediawiki.org">http://mediawiki.org</a>, other sites and in the mediawiki code)
</li><li>Your own repository of snippets for achieving common objectives in the mediawiki runtime environment
</li></ul>
<h2> <span class="mw-headline" id="Articles"> Articles </span></h2>
<h3> <span class="mw-headline" id="Get_article_content"> Get article content </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$title</span>    = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$titleText</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$article</span>  = <span style="color:#3311cc;">new</span> Article<span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$title</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$wikitext</span> = <span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">getContent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Edit_or_create_an_article"> Edit or create an article </span></h3>
<p>Editing or creating an article are both achieved using the <i>Article::doEdit</i> method which takes three parameters (the third is optional). The first two are the text content and edit summary. The third optional parameter is for flags which adjust the operation. The available flags and their meaning are listed below followed by example usage.
</p>
<ul><li><b>EDIT_NEW:</b> Article is known or assumed to be non-existent, create a new one
</li><li><b>EDIT_UPDATE:</b> Article is known or assumed to be pre-existing, update it
</li><li><b>EDIT_MINOR:</b> Mark this edit minor, if the user is allowed to do so
</li><li><b>EDIT_SUPPRESS_RC:</b> Do not log the change in recentchanges
</li><li><b>EDIT_FORCE_BOT:</b> Mark the edit a "bot" edit regardless of user rights
</li><li><b>EDIT_DEFER_UPDATES:</b> Defer some of the updates until the end of index.php
</li><li><b>EDIT_AUTOSUMMARY:</b> Fill in blank summaries with generated text where possible
</li></ul>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$title</span>    = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$titleText</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$article</span>  = <span style="color:#3311cc;">new</span> Article<span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$title</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">doEdit</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$text</span>, <span style="color: #0000ff;">$summary</span>, EDIT_UPDATE|EDIT_MINOR<span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<ul><li><b>Note:</b> <i>$wgUser</i> must be set before calling this function.
</li></ul>
<h3> <span class="mw-headline" id="Image_URLs"> Image URLs </span></h3>
<p>Given the name of an image page, obtain the full URL of the image.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$v</span>, NS_IMAGE<span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$image</span> = Image::<span style="color: #006600;">newFromTitle</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$title</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$image</span> &amp;&amp; <span style="color: #0000ff;">$image</span>-&gt;<span style="color: #006600;">exists</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$url</span>      = <span style="color: #0000ff;">$image</span>-&gt;<span style="color: #006600;">getURL</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;                      <span style="font-style:italic;color:#d00000;"># Gets the URL for the image at its normal size</span>
	<span style="color: #0000ff;">$url_50px</span> = <span style="color: #0000ff;">$image</span>-&gt;<span style="color: #006600;">getThumbnail</span><span style="color:#008000;">&#40;</span><span style="color:#000000;">50</span>,<span style="color:#000000;">50</span><span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getUrl</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>; <span style="font-style:italic;color:#d00000;"># Gets the URL for the image at a specified size</span>
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Image_links"> Image links </span></h3>
<p>Sometimes you might want to prevent images from linking to the image page. This extension function removes the link.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'OutputPageBeforeHTML'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'removeImageLinks'</span>;
<span style="color:#3311cc;">function</span> removeImageLinks<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$out</span>, &amp;<span style="color: #0000ff;">$text</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$text</span> = <span style="color:#3311cc;">preg_replace</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'|&lt;a.+?class=.image.+?&gt;.*?(&lt;img.+?&gt;).*?&lt;/a&gt;|i'</span>, <span style="color:#0080aa;">'$1'</span>, <span style="color: #0000ff;">$text</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Adding_stub_code_to_newly_created_articles"> Adding stub code to newly created articles </span></h3>
<p>This will add <tt>{{stub}}</tt> to the beginning of article content when it is first created. It can then be removed on a subsequent edit if desired.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'ArticleSave'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wgAddStub'</span>;
<span style="color:#3311cc;">function</span> wgAddStub<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$article</span>, &amp;<span style="color: #0000ff;">$user</span>, &amp;<span style="color: #0000ff;">$text</span>, &amp;<span style="color: #0000ff;">$summary</span>, <span style="color: #0000ff;">$minor</span>, <span style="color: #0000ff;">$watchthis</span>, <span style="color: #0000ff;">$sectionanchor</span>, &amp;<span style="color: #0000ff;">$flags</span>, &amp;<span style="color: #0000ff;">$status</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$text</span> = <span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">exists</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>&#160;? <span style="color:#0080aa;">&quot;&quot;</span>&#160;: <span style="color:#0080aa;">&quot;{{stub}}<span style="color:#ff0000;">\n</span>&quot;</span> <span style="color:#008000;">&#41;</span> . <span style="color: #0000ff;">$text</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Security"> Security </span></h2>
<p>Probably the most common security-related LocalSettings hack is to allow pages in locked down wikis to be publicly viewable if they're in a particular category. This following example adds articles in <i>Category:Public</i> to the <i>$wgWhitelistRead</i> array.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'UserGetRights'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfPublicCat'</span>;
<span style="color:#3311cc;">function</span> wfPublicCat<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgWhitelistRead</span>;
	<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color: #0000ff;">$id</span>   = <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getArticleID</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$dbr</span>  = wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$cat</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'Public'</span> <span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
		<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">selectRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'0'</span>, <span style="color:#0080aa;">&quot;cl_from = $id AND cl_to = $cat&quot;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$wgWhitelistRead</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getPrefixedText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color:#008000;">&#125;</span>
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
From MediaWiki 1.17 onwards, the <a href="http://www.mediawiki.org/wiki/Manual:Hooks/OutputPageBodyAttributes" class="extiw" title="mw:Manual:Hooks/OutputPageBodyAttributes">OutputPageBodyAttributes hook</a> can be used to modify the classes and other attributed of the body tag. In the following example the hook is being used to add classes to the body tag depending on whether the user is anonymous, logged-in or a sysop.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'OutputPageBodyAttributes'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfAddBodyClasses'</span>;
<span style="color:#3311cc;">function</span> wfAddBodyClasses<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$out</span>, <span style="color: #0000ff;">$sk</span>, <span style="color: #0000ff;">$bodyAttrs</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">isAnon</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$bodyAttrs</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'class'</span><span style="color:#008000;">&#93;</span> .= <span style="color:#0080aa;">' anon'</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">isLoggedIn</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$bodyAttrs</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'class'</span><span style="color:#008000;">&#93;</span> .= <span style="color:#0080aa;">' user'</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">in_array</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'sysop'</span>, <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">getEffectiveGroups</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$bodyAttrs</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'class'</span><span style="color:#008000;">&#93;</span> .= <span style="color:#0080aa;">' sysop'</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
Here's an example which was created in response to a support-desk question. It prevents users from editing other users user-pages:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfProtectUserPages'</span>;
<span style="color:#3311cc;">function</span> wfProtectUserPages<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>,<span style="color: #0000ff;">$wgGroupPermissions</span>;
	<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getNamespace</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> == NS_USER &amp;&amp; <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">getName</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>&#160;!= <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>
		<span style="color: #0000ff;">$wgGroupPermissions</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'user'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'edit'</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">false</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
Here is a similar example which restricts all namespaces except MAIN from anonymous users:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfProtectNamespaces'</span>;
<span style="color: #0000ff;">$wgWhitelistRead</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'Special:Userlogin'</span>, <span style="color:#0080aa;">'-'</span>, <span style="color:#0080aa;">'MediaWiki:Monobook.css'</span><span style="color:#008000;">&#41;</span>;
<span style="color:#3311cc;">function</span> wfProtectNamespaces<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>,<span style="color: #0000ff;">$wgGroupPermissions</span>;
	<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$title</span><span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getNamespace</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>&#160;!= <span style="color:#000000;">0</span> &amp;&amp; <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">isAnon</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span>
		<span style="color: #0000ff;">$wgGroupPermissions</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'*'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'read'</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">false</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The following snippet causes all requests to be redirected to HTTPS if the user is a sysop. It also bounces users to non-HTTPS if not a sysop which can be useful if you don't want HTTPS links showing up in search engines for example if you have a self-signed certificate (it doesn't do this if the user is on the login page though since that confuses our <a href="/Wikid" title="Wikid" class="mw-redirect">bots</a> that use HTTPS connections):
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="font-style:italic;color:#d00000;"># Force HTTPS for sysops (and non-HTTPS for non-sysops)</span>
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfSecureSysops'</span>;
<span style="color:#3311cc;">function</span> wfSecureSysops<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>;
		<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">in_array</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'sysop'</span>, <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">getEffectiveGroups</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
				<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span>&#160;!<span style="color:#3311cc;">isset</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'HTTPS'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
						<span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;Location: https://&quot;</span> . <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'HTTP_HOST'</span><span style="color:#008000;">&#93;</span> . <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'REQUEST_URI'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
						<span style="color:#3311cc;">exit</span>;
				<span style="color:#008000;">&#125;</span>
		<span style="color:#008000;">&#125;</span> <span style="font-weight:bold;color:#0022aa;">else</span> <span style="color:#008000;">&#123;</span>
				<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">isset</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'HTTPS'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color:#008000;">&#40;</span>&#160;!<span style="color:#3311cc;">array_key_exists</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'title'</span>, <span style="color: #0000ff;">$_REQUEST</span> <span style="color:#008000;">&#41;</span> || <span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span>&#160;!= <span style="color:#0080aa;">'Special:UserLogin'</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
						<span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;Location: http://&quot;</span> . <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'HTTP_HOST'</span><span style="color:#008000;">&#93;</span> . <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'REQUEST_URI'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
						<span style="color:#3311cc;">exit</span>;
				<span style="color:#008000;">&#125;</span>
		<span style="color:#008000;">&#125;</span>
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The following code checks if a request is local, and works regardless of the IP address or whether it's IPv4 or IPv6.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> isLocal<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">preg_match_all</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;|inet6? addr:<span style="color:#ff0000;">\s</span>*([0-9a-f.:]+)|&quot;</span>, `/sbin/ifconfig`, <span style="color: #0000ff;">$matches</span> <span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color:#3311cc;">in_array</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'REMOTE_ADDR'</span><span style="color:#008000;">&#93;</span>, <span style="color: #0000ff;">$matches</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Returning_content_to_the_client"> Returning content to the client </span></h2>
<h3> <span class="mw-headline" id="Raw_wikitext_content"> Raw wikitext content </span></h3>
<p>This function returns the raw content specified in <i>$text</i>, it can be called any time from extension-setup or after. If the <i>$save</i> parameter is supplied it will bring up a download dialog with the default name set to <i>$save</i>, otherwise it will download and open unprompted. If <i>$expand</i> is set to true, then any templates, parser-functions or variables in the content will be expanded.
</p><p><br />
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> raw<span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$text</span>, <span style="color: #0000ff;">$expand</span> = <span style="color:#3311cc;">false</span>, <span style="color: #0000ff;">$save</span> = <span style="color:#3311cc;">false</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgOut</span>, <span style="color: #0000ff;">$wgParser</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$expand</span><span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$text</span> = <span style="color: #0000ff;">$wgParser</span>-&gt;<span style="color: #006600;">preprocess</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$text</span>, <span style="color:#3311cc;">new</span> Title<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>, <span style="color:#3311cc;">new</span> ParserOptions<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">disable</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	wfResetOutputBuffers<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'Content-Type: application/octet-stream'</span><span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$save</span><span style="color:#008000;">&#41;</span> <span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">&quot;Content-Disposition: attachment; filename=<span style="color:#ff0000;">\&quot;</span>$save<span style="color:#ff0000;">\&quot;</span>&quot;</span><span style="color:#008000;">&#41;</span>;
	<span style="color:#3311cc;">echo</span> <span style="color: #0000ff;">$text</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Return_an_HTTP_error_page"> Return an HTTP error page </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgOut</span>, <span style="color: #0000ff;">$wgParser</span>;
<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">disable</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
wfResetOutputBuffers<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'HTTP/1.0 404 Not Found'</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$err</span> = <span style="color:#0080aa;">'&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;
	&lt;body&gt;&lt;h1&gt;Not Found&lt;/h1&gt;&lt;p&gt;The requested URL was not found on this server.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;'</span>;
<span style="color:#3311cc;">echo</span> <span style="color: #0000ff;">$err</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Domain-based_default_redirect"> Domain-based default redirect </span></h3>
<p>If no page title is specified, redirect to a default depending on the domain name in the requested URL. In this example requests to <i>abc.org</i> or any of it's subdomains with no title specified will redirect to the <i>Welcome to ABC</i> article, and any requests to the exact domain of <i>www.xyz.org</i> without a title end up at the <i>XYZ Home</i> article. Titleless requests to any other domain which resolves to this example wiki will be unaffected and left to the rest of the configuration to deal with. This code should be executed early in the <i>LocalSettings</i> before any extensions are included, but after <i>$wgServer</i> is defined.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$d</span> = <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'SERVER_NAME'</span><span style="color:#008000;">&#93;</span>;
<span style="color: #0000ff;">$t</span> = <span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">empty</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$t</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$t</span> = <span style="color:#3311cc;">ereg_replace</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'^/'</span>, <span style="color:#0080aa;">''</span>, <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'PATH_INFO'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">empty</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$t</span><span style="color:#008000;">&#41;</span> || <span style="color: #0000ff;">$t</span> == <span style="color:#0080aa;">'Main_Page'</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">ereg</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'abc.org$'</span>, <span style="color: #0000ff;">$d</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span> <span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">&quot;Location: $wgServer/Welcome_to_ABC&quot;</span><span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color:#3311cc;">die</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$d</span> == <span style="color:#0080aa;">'www.xyz.com'</span><span style="color:#008000;">&#41;</span>  <span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">&quot;Location: $wgServer/XYZ_Home&quot;</span><span style="color:#008000;">&#41;</span>       &amp;&amp; <span style="color:#3311cc;">die</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Add_a_meta_tags_to_the_page"> Add a meta tags to the page </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfAddMetaTag'</span>;
<span style="color:#3311cc;">function</span> wfAddMetaTag<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgOut</span>;
	<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">addMeta</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'name1'</span>, <span style="color:#0080aa;">'value1'</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">addMeta</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'name2'</span>, <span style="color:#0080aa;">'value2'</span><span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Using_the_parser"> Using the parser </span></h2>
<h3> <span class="mw-headline" id="Parse_wikitext"> Parse wikitext </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$html</span> = <span style="color: #0000ff;">$wgParser</span>-&gt;<span style="color: #006600;">parse</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$wikitext</span>, <span style="color: #0000ff;">$title</span>, <span style="color:#3311cc;">new</span> ParserOptions<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>, <span style="color:#3311cc;">true</span>, <span style="color:#3311cc;">true</span><span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Expand_templates_only"> Expand templates only </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wikitext</span> = <span style="color: #0000ff;">$wgParser</span>-&gt;<span style="color: #006600;">preprocess</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$wikitext</span>, <span style="color: #0000ff;">$title</span>, <span style="color:#3311cc;">new</span> ParserOptions<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Replace_triple-brace_arguments_in_wikitext_content"> Replace triple-brace arguments in wikitext content </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$parser</span>-&gt;<span style="color: #006600;">replaceVariables</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$wikitext</span>, <span style="color: #0000ff;">$args</span>, <span style="color:#3311cc;">true</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>If <i>$wikitext</i> is set to &quot;hello {{{you}}} this is {{{me}}}&quot;, then the "you" and "me" keys of the <i>$args</i> array will replace the corresponding triple-brace arguments in the wikitext content. This is a useful method to know because there are actually a number of difficulties involved in implementing it since it must account for both named and ordered parameters and default values (which can also contain brace-expressions).
</p>
<h3> <span class="mw-headline" id="Using_named_parameters_from_a_parser-function_callback"> Using named parameters from a parser-function callback </span></h3>
<p>You can use named parameters in your parser functions, eg <tt>{{#drops:for=Rikkukin the Defender|zone=The Ascent|h=3}}</tt>, but you will need to manually split the args into key/value pairs in your callback function, such as in the following example code:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$args</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">foreach</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$argv</span> <span style="font-weight:bold;color:#0022aa;">as</span> <span style="color: #0000ff;">$arg</span><span style="color:#008000;">&#41;</span>
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span>!<span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$arg</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span>
		<span style="color:#3311cc;">preg_match</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'/^(<span style="color:#ff0000;">\\</span>w+)<span style="color:#ff0000;">\\</span>s*=<span style="color:#ff0000;">\\</span>s*(.+)$/is'</span>, <span style="color: #0000ff;">$arg</span>, <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#41;</span>&#160;? <span style="color: #0000ff;">$args</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">2</span><span style="color:#008000;">&#93;</span>&#160;: <span style="color: #0000ff;">$args</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$arg</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>This snippet will create a hash from the arguments passed to your callback function (ignoring any which are objects such as the first one which is <i>$parser</i>). The resulting hash will contain numeric keys for all the normal non-named parameters in your parser-function, and non-numeric keys matching all the <i>name=value</i> parameters.
</p>
<h3> <span class="mw-headline" id="Return_codes_for_parser_functions"> Return codes for parser functions </span></h3>
<p>Typical example.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
	<span style="color: #0000ff;">$text</span>,
	<span style="color:#0080aa;">'found'</span>   =&gt; <span style="color:#3311cc;">true</span>,
	<span style="color:#0080aa;">'nowiki'</span>  =&gt; <span style="color:#3311cc;">false</span>,
	<span style="color:#0080aa;">'noparse'</span> =&gt; <span style="color:#3311cc;">false</span>,
	<span style="color:#0080aa;">'noargs'</span>  =&gt; <span style="color:#3311cc;">false</span>,
	<span style="color:#0080aa;">'isHTML'</span>  =&gt; <span style="color:#3311cc;">false</span>
<span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>See also: <a rel="nofollow" class="external free" href="http://www.organicdesign.co.nz/Extension:Example">http://www.organicdesign.co.nz/Extension:Example</a>
</p>
<h3> <span class="mw-headline" id="Protecting_raw_HTML_output_from_modification_by_MediaWiki"> Protecting raw HTML output from modification by MediaWiki </span></h3>
<p>See: <a rel="nofollow" class="external text" href="http://www.mediawiki.org/wiki/Manual:Tag_extensions#How_can_I_avoid_modification_of_my_extension.27s_HTML_output.3F">How can I avoid modification of my extension's HTML output</a> on mediawiki.org. Thanks to <a rel="nofollow" class="external text" href="http://www.mediawiki.org/wiki/User:Duesentrieb">Duesentrieb</a> for digging out this info.
</p>
<h3> <span class="mw-headline" id="Post_processing_to_remove_unwanted_breaks_and_entities_from_output"> Post processing to remove unwanted breaks and entities from output </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> efFixEmptyLineBug<span style="color:#008000;">&#40;</span>&amp;<span style="color: #0000ff;">$parser</span>, &amp;<span style="color: #0000ff;">$text</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$text</span> = <span style="color:#3311cc;">preg_replace</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'|&lt;p&gt;<span style="color:#ff0000;">\s</span>*&lt;br<span style="color:#ff0000;">\s</span>*/&gt;<span style="color:#ff0000;">\s</span>*&lt;/p&gt;|s'</span>, <span style="color:#0080aa;">''</span>, <span style="color: #0000ff;">$text</span><span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="JavaScript"> JavaScript </span></h2>
<p>Here's some JavaScript snippets that can be added to <a href="/MediaWiki:Common.js" title="MediaWiki:Common.js">MediaWiki:Common.js</a>
</p>
<h3> <span class="mw-headline" id="Make_sortable_table_states_persistent_with_cookies"> Make sortable table states persistent with cookies </span></h3>
<p>Note that this function requires <i>getCookie</i> and <i>setCookie</i> which are currently in our <a rel="nofollow" class="external text" href="http://svn.organicdesign.co.nz/filedetails.php?repname=extensions&amp;path=%2FJavaScript%2Fnavbar.js">navbar.js</a>. They're just the standard cookie getting and setting <a rel="nofollow" class="external text" href="http://www.w3schools.com/JS/js_cookies.asp">functions recommended by W3C</a>.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="js">&#160;
addOnloadHook<span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">function</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
    $<span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'.sortable'</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">each</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">function</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
        <span style="color:#3311cc;">var</span> id = $<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">attr</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'id'</span><span style="color:#008000;">&#41;</span>;
        document.<span style="color: #006600;">shCookie</span> = getCookie<span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'sortheader-'</span>+id<span style="color:#008000;">&#41;</span>;
        document.<span style="color: #006600;">sortheaderId</span> = <span style="color:#000000;">0</span>;
        $<span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'#'</span>+id+<span style="color:#0080aa;">' a.sortheader'</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">each</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">function</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
            <span style="color:#3311cc;">var</span> id = $<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">parent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">parent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">parent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">parent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">attr</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'id'</span><span style="color:#008000;">&#41;</span>;
            <span style="color:#3311cc;">var</span> sh = document.<span style="color: #006600;">sortheaderId</span>++;
            <span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> sh<span style="color:#000000;">+100</span> == document.<span style="color: #006600;">shCookie</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span> ts_resortTable<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>; ts_resortTable<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>; <span style="color:#008000;">&#125;</span>
            <span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> sh == document.<span style="color: #006600;">shCookie</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span> ts_resortTable<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>; sh += <span style="color:#000000;">100</span>; <span style="color:#008000;">&#125;</span>
            $<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">bind</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'click'</span>, <span style="color:#008000;">&#123;</span>id: id, sh: sh<span style="color:#008000;">&#125;</span>, <span style="color:#3311cc;">function</span><span style="color:#008000;">&#40;</span>e<span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
                setCookie<span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'sortheader-'</span>+e.<span style="color: #006600;">data</span>.<span style="color: #006600;">id</span>, e.<span style="color: #006600;">data</span>.<span style="color: #006600;">sh</span>, <span style="color:#000000;">1</span><span style="color:#008000;">&#41;</span>;
            <span style="color:#008000;">&#125;</span><span style="color:#008000;">&#41;</span>;
        <span style="color:#008000;">&#125;</span><span style="color:#008000;">&#41;</span>;
    <span style="color:#008000;">&#125;</span><span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="MediaWiki_Environment"> MediaWiki Environment </span></h2>
<h3> <span class="mw-headline" id="Article_title"> Article title </span></h3>
<p>This should be called at an appropriate time such as from the <i>OutputPageBeforeHTML</i> hook.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">setPageTitle</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'foo'</span> <span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Article_queries"> Article queries </span></h2>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td><a href="/File:Info.svg" class="image"><img alt="Info.svg" src="/files/thumb/e/e1/Info.svg/50px-Info.svg.png" width="50" height="50" srcset="/files/thumb/e/e1/Info.svg/75px-Info.svg.png 1.5x, /files/thumb/e/e1/Info.svg/100px-Info.svg.png 2x" /></a>
</td>
<td>See <a href="http://www.mediawiki.org/wiki/Manual:Database_access" class="extiw" title="mw:Manual:Database access">MW:Manual:Database access</a> for additional information about database access in MediaWiki.
</td></tr></table>
</td></tr></table>
<p><br />
</p>
<h3> <span class="mw-headline" id="List_article_titles_from_a_category"> List article titles from a category </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$list</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$dbr</span>  = &amp;wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$cat</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getDBkey</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$res</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'cl_from'</span>, <span style="color:#0080aa;">&quot;cl_to = $cat&quot;</span>, <span style="color:#3311cc;">__METHOD__</span>, <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'ORDER BY'</span> =&gt; <span style="color:#0080aa;">'cl_sortkey'</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$list</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = Title::<span style="color: #006600;">newFromID</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getPrefixedText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>Adjust the $list addition to your own needs. This example creates a title object for each and then calls the <i>getPrefixedText</i> method which returns the title as a string including namespace.
</p>
<h3> <span class="mw-headline" id="List_categories_an_article_belongs_to"> List categories an article belongs to </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$list</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$dbr</span>  = &amp;wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$id</span>   = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'article-title'</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getArticleID</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$res</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'cl_to'</span>, <span style="color:#0080aa;">&quot;cl_from = $id&quot;</span>, <span style="color:#3311cc;">__METHOD__</span>, <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'ORDER BY'</span> =&gt; <span style="color:#0080aa;">'cl_sortkey'</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$list</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>;
<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">freeResult</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Check_if_a_title_is_in_a_category"> Check if a title is in a category </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> inCat<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span>, <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span>&#160;!<span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$id</span>   = <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getArticleID</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$dbr</span>  = &amp;wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$cat</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getDBkey</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">selectRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'0'</span>, <span style="color:#0080aa;">&quot;cl_from = $id AND cl_to = $cat&quot;</span>, <span style="color:#3311cc;">__METHOD__</span> <span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Get_a_list_of_articles_in_a_namespace_.28number.29"> Get a list of articles in a namespace (number) </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> getArticlesInNamespace<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$namespace</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$dbr</span>   = &amp;wfGetDB<span style="color:#008000;">&#40;</span>DB_SLAVE<span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$list</span>  = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$table</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'page'</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$res</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$table</span>, <span style="color:#0080aa;">'page_title'</span>, <span style="color:#0080aa;">&quot;page_namespace = $namespace&quot;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$list</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>;
	<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">freeResult</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color: #0000ff;">$list</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Get_a_list_of_articles_using_a_template"> Get a list of articles using a template </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> usesTemplate<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$tmpl</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$dbr</span>   = &amp;wfGetDB<span style="color:#008000;">&#40;</span>DB_SLAVE<span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$list</span>  = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$tmpl</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$tmpl</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getDBkey</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$table</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'templatelinks'</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$res</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$table</span>, <span style="color:#0080aa;">'tl_from'</span>, <span style="color:#0080aa;">&quot;tl_namespace = 10 AND tl_title = $tmpl&quot;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$list</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>;
	<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">freeResult</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color: #0000ff;">$list</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Remove_category_pages_for_empty_categories"> Remove category pages for empty categories </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> removeEmptyCategories<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
&#160;
	<span style="font-style:italic;color:#d00000;">// Get all category pages</span>
	<span style="color: #0000ff;">$dbr</span>   = &amp;wfGetDB<span style="color:#008000;">&#40;</span>DB_SLAVE<span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$cats</span>  = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$table</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'page'</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$res</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$table</span>, <span style="color:#0080aa;">'page_title'</span>, <span style="color:#0080aa;">&quot;page_namespace = &quot;</span> . NS_CATEGORY <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$cats</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>;
	<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">freeResult</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span>;
&#160;
	<span style="font-style:italic;color:#d00000;">// Delete those which are for empty cats</span>
	<span style="font-weight:bold;color:#0022aa;">foreach</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cats</span> <span style="font-weight:bold;color:#0022aa;">as</span> <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color: #0000ff;">$dbr</span>  = &amp;wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$qcat</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getDBkey</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
		<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span>&#160;!<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">selectRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'cl_from'</span>, <span style="color:#0080aa;">&quot;cl_to = $qcat&quot;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
			<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cat</span>, NS_CATEGORY <span style="color:#008000;">&#41;</span>;
			<span style="color: #0000ff;">$article</span> = <span style="color:#3311cc;">new</span> Article<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span>;
			<span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">doDelete</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;Obsolete category page - this category contains no items&quot;</span> <span style="color:#008000;">&#41;</span>;
		<span style="color:#008000;">&#125;</span>
	<span style="color:#008000;">&#125;</span>
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Article_queries_using_DPL">Article queries using DPL</span></h3>
<p>This DPL query example provides a standard list of page links in wikitext bullet list format.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre>
{{#dpl:category=Foo|format=,*[[%PAGE%]],\n,}}
</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Misc"> Misc </span></h2>
<h3> <span class="mw-headline" id="examineBraces"> examineBraces </span></h3>
<p>This function returns an array of the brace structure found in the passed wikitext parameter. This has also been implemented in Perl, see the <i>wikiExamineBraces</i> function in <a href="/Wiki.pl" title="Wiki.pl">wiki.pl</a>.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> examineBraces<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$content</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$braces</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$depths</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$depth</span> = <span style="color:#000000;">1</span>;
	<span style="color: #0000ff;">$index</span> = <span style="color:#000000;">0</span>;
	<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">preg_match</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'/<span style="color:#ff0000;">\\</span>{<span style="color:#ff0000;">\\</span>{<span style="color:#ff0000;">\\</span>s*([#a-z0-9_]*:?)|<span style="color:#ff0000;">\\</span>}<span style="color:#ff0000;">\\</span>}/is'</span>, <span style="color: #0000ff;">$content</span>, <span style="color: #0000ff;">$match</span>, PREG_OFFSET_CAPTURE, <span style="color: #0000ff;">$index</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color: #0000ff;">$index</span> = <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span> + <span style="color:#000000;">2</span>;
		<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span> == <span style="color:#0080aa;">'}}'</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
			<span style="color: #0000ff;">$brace</span> =&amp; <span style="color: #0000ff;">$braces</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$depths</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$depth</span><span style="color:#000000;">-1</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#93;</span>;
			<span style="color: #0000ff;">$brace</span><span style="color:#008000;">&#91;</span>LENGTH<span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span> - <span style="color: #0000ff;">$brace</span><span style="color:#008000;">&#91;</span>OFFSET<span style="color:#008000;">&#93;</span> + <span style="color:#000000;">2</span>;
			<span style="color: #0000ff;">$brace</span><span style="color:#008000;">&#91;</span>DEPTH<span style="color:#008000;">&#93;</span>  = <span style="color: #0000ff;">$depth</span>--;
		<span style="color:#008000;">&#125;</span>
		<span style="font-weight:bold;color:#0022aa;">else</span> <span style="color:#008000;">&#123;</span>
			<span style="color: #0000ff;">$depths</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$depth</span>++<span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">count</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$braces</span> <span style="color:#008000;">&#41;</span>;
			<span style="color: #0000ff;">$braces</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
				NAME   =&gt; <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>,
				OFFSET =&gt; <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span>
			<span style="color:#008000;">&#41;</span>;
		<span style="color:#008000;">&#125;</span>
	<span style="color:#008000;">&#125;</span>
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color: #0000ff;">$braces</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The following input,
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre>
foo{{#bar:baz|biz{{foo|shmoo}}}}{{moo}}baz
</pre>
</td></tr></table>
</td></tr></table>
<p><br />
Gives the following array:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre>
Array(
    [0] =&gt; Array(
        [NAME]   =&gt; #bar
        [OFFSET] =&gt; 3
        [LENGTH] =&gt; 29
        [DEPTH]  =&gt; 1
        )

    [1] =&gt; Array(
        [NAME]   =&gt; foo
        [OFFSET] =&gt; 17
        [LENGTH] =&gt; 13
        [DEPTH]  =&gt; 2
        )

    [2] =&gt; Array(
        [NAME]   =&gt; moo
        [OFFSET] =&gt; 32
        [LENGTH] =&gt; 7
        [DEPTH]  =&gt; 1
        )
    )
</pre>
</td></tr></table>
</td></tr></table>
<p>The array output is designed to integrate with the <a rel="nofollow" class="external text" href="http://nz2.php.net/manual/en/function.substr-replace.php">substr_replace</a> function arguments subject, replace, offset, length. The index 0, 1, 2 order referes to the order functions are found (from left to right).
</p>
<h3> <span class="mw-headline" id="Google_Analytics"> Google Analytics </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfGoogleAnalytics'</span>;
<span style="color:#3311cc;">function</span> wfGoogleAnalytics<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgOut</span>;
	<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">addScript</span><span style="color:#008000;">&#40;</span>
		<span style="color:#0080aa;">'&lt;script type=&quot;text/javascript&quot;&gt;
		var gaJsHost = ((&quot;https:&quot; == document.location.protocol)&#160;? &quot;https://ssl.&quot;&#160;: &quot;http://www.&quot;);
		document.write(unescape(&quot;%3Cscript src=<span style="color:#ff0000;">\'</span>&quot; + gaJsHost + &quot;google-analytics.com/ga.js<span style="color:#ff0000;">\'</span> type=<span style="color:#ff0000;">\'</span>text/javascript<span style="color:#ff0000;">\'</span>%3E%3C/script%3E&quot;));
		&lt;/script&gt;&lt;script type=&quot;text/javascript&quot;&gt;
		var pageTracker = _gat._getTracker(&quot;INSERT YOUR TRACKING CODE HERE&quot;);
		pageTracker._trackPageview();&lt;/script&gt;'</span>
	<span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Force_all_headings_to_use_outline_numbering"> Force all headings to use outline numbering </span></h3>
<p>There is a user-preference to make all headings use outline numbering, but no way to make that a default for all users. Here's a few lines of code which can be added to your LocalSettings.php file which do that.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfNumberHeadings'</span>;
<span style="color:#3311cc;">function</span> wfNumberHeadings<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>;
	<span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">setOption</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'numberheadings'</span>, <span style="color:#3311cc;">true</span><span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Integrating_with_the_Skin"> Integrating with the Skin </span></h2>
<h3> <span class="mw-headline" id="Adding_a_new_action_tab"> Adding a new action tab </span></h3>
<p>The following code adds a new action tab with a corresponding link. To process the new action, add a processing function to the <i>UnknownAction</i> hook.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExampleAction</span> = <span style="color:#0080aa;">'example'</span>;
&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'SkinTemplateTabs'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfAddExampleTab'</span>;
&#160;
<span style="color:#3311cc;">function</span> wfAddExampleTab<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$skin</span>, &amp;<span style="color: #0000ff;">$actions</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgTitle</span>, <span style="color: #0000ff;">$wgRequest</span>, <span style="color: #0000ff;">$wgExampleAction</span>;
	<span style="color: #0000ff;">$selected</span> = <span style="color: #0000ff;">$wgRequest</span>-&gt;<span style="color: #006600;">getText</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'action'</span> <span style="color:#008000;">&#41;</span> == <span style="color: #0000ff;">$wgExampleAction</span>&#160;? <span style="color:#0080aa;">'selected'</span>&#160;: <span style="color:#3311cc;">false</span>;
	<span style="color: #0000ff;">$url</span>      = <span style="color: #0000ff;">$wgTitle</span>-&gt;<span style="color: #006600;">getLocalURL</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;action=$wgExampleAction&quot;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgTitle</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color: #0000ff;">$actions</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$wgExampleAction</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
			<span style="color:#0080aa;">'text'</span>  =&gt; <span style="color: #0000ff;">$wgExampleAction</span>, <span style="font-style:italic;color:#d00000;"># should use wfMsg( $wgExampleAction )</span>
			<span style="color:#0080aa;">'class'</span> =&gt; <span style="color: #0000ff;">$selected</span>,
			<span style="color:#0080aa;">'href'</span>  =&gt; <span style="color: #0000ff;">$url</span>
		<span style="color:#008000;">&#41;</span>;
	<span style="color:#008000;">&#125;</span>
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The Vector skin (optional on 1.16, default on 1.17 onwards) uses a new hook, SkinTemplateNavigation. You can cover both Vector and earlier skins like Monobook or Modern by including code for both hooks. The example below uses the MediaWiki namespace to name the relevant elements of the array. You can put this code in LocalSettings after the inclusion of extensions.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'SkinTemplateTabs'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'onSkinTemplateTabs'</span>;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'SkinTemplateNavigation'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'onSkinTemplateNavigation'</span>;
&#160;
<span style="color:#3311cc;">function</span> onSkinTemplateTabs<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$skin</span>, &amp;<span style="color: #0000ff;">$actions</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$actions</span><span style="color:#008000;">&#91;</span>wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-id'</span> <span style="color:#008000;">&#41;</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
		<span style="color:#0080aa;">'class'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-class'</span> <span style="color:#008000;">&#41;</span>,
		<span style="color:#0080aa;">'text'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-text'</span> <span style="color:#008000;">&#41;</span>,
		<span style="color:#0080aa;">'href'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-href'</span> <span style="color:#008000;">&#41;</span>
	<span style="color:#008000;">&#41;</span>;		
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;
<span style="color:#3311cc;">function</span> onSkinTemplateNavigation<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$skin</span>, &amp;<span style="color: #0000ff;">$contentActions</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$contentActions</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'views'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span>wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-id'</span> <span style="color:#008000;">&#41;</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
		<span style="color:#0080aa;">'class'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-class'</span> <span style="color:#008000;">&#41;</span>,
		<span style="color:#0080aa;">'text'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-text'</span> <span style="color:#008000;">&#41;</span>,
		<span style="color:#0080aa;">'href'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-href'</span> <span style="color:#008000;">&#41;</span>
	<span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Wikitext_in_Sidebar"> Wikitext in Sidebar </span></h3>
<p>By default the <a href="/MediaWiki:Sidebar" title="MediaWiki:Sidebar">MediaWiki:Sidebar</a> article content is not normal wikitext. This snippet fixes that and also ensures that the content can fall back to an i18n message if the article is not present - the normal behaviour for articles in the <i>MediaWiki</i> namespace. Replace a section such as toolbox or navlinks in the <i>skins/MonoBook.php</i> file with the following:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>, <span style="color: #0000ff;">$wgTitle</span>, <span style="color: #0000ff;">$wgParser</span>;
<span style="color: #0000ff;">$title</span> = <span style="color:#0080aa;">'sidebar'</span>; <span style="font-style:italic;color:#d00000;"># note the lcfirst is important here since it's also a msg key</span>
<span style="color: #0000ff;">$article</span> = <span style="color:#3311cc;">new</span> Article<span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span>, NS_MEDIAWIKI <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$text</span> = <span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">fetchContent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">empty</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$text</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$text</span> = wfMsg<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgParser</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span> <span style="color: #0000ff;">$psr</span> = <span style="color: #0000ff;">$wgParser</span>; <span style="color: #0000ff;">$opt</span> = <span style="color: #0000ff;">$wgParser</span>-&gt;<span style="color: #006600;">mOptions</span>; <span style="color:#008000;">&#125;</span>
<span style="font-weight:bold;color:#0022aa;">else</span> <span style="color:#008000;">&#123;</span> <span style="color: #0000ff;">$psr</span> = <span style="color:#3311cc;">new</span> Parser; <span style="color: #0000ff;">$opt</span> = <span style="color:#3311cc;">NULL</span>; <span style="color:#008000;">&#125;</span>
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span>&#160;!<span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$opt</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$opt</span> = ParserOptions::<span style="color: #006600;">newFromUser</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgUser</span> <span style="color:#008000;">&#41;</span>;
<span style="color:#3311cc;">echo</span> <span style="color: #0000ff;">$psr</span>-&gt;<span style="color: #006600;">parse</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$text</span>, <span style="color: #0000ff;">$wgTitle</span>, <span style="color: #0000ff;">$opt</span>, <span style="color:#3311cc;">true</span>, <span style="color:#3311cc;">true</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The procedure is the same with Vector-based skins, the change is you now place the code inside divs of id portal and then id body, as per the other examples in <i>skins/Vector.php</i>. It should replace the following code and/or the toolbox:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">&lt;?php</span> <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">renderPortals</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">data</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'sidebar'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>; <span style="color:#3311cc;">?&gt;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Development_server_identification"> Development server identification </span></h3>
<p>The idea is to have a picture or text that allows a developer to quickly see that they are on the development instance and not the production instance of  MediaWiki.
By adding to the content of $wgSiteNotice in a conditional every article will have the change for that domain map.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgServer</span> == <span style="color:#0080aa;">&quot;http://localhost&quot;</span> <span style="color:#008000;">&#41;</span>  <span style="font-style:italic;color:#d00000;"># or any other domain</span>
  <span style="color: #0000ff;">$wgSiteNotice</span> = <span style="color:#0080aa;">'&lt;span style=&quot;position:absolute;top:0px;left:-140px;z-index:10&quot;&gt;[[Image:Gnome-devel.png|100px]]&lt;/span&gt;'</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>This approach was based on <a href="http://en.wikipedia.org/wiki/User:East718/include" class="extiw" title="w:User:East718/include">W:User:East718/include</a>, and the image source is <a rel="nofollow" class="external text" href="http://commons.wikimedia.org/wiki/Image:Gnome-devel.svg">Image:Gnome-devel.svg </a>
</p>
<h2> <span class="mw-headline" id="Importing_and_Exporting_articles"> Importing and Exporting articles </span></h2>
<p>The following snippet imports articles from the XML export file named in <i>$file</i> into the main namespace. The <i>$resultCount</i> variable holds the number of articles imported on success.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$source</span> = ImportStreamSource::<span style="color: #006600;">newFromFile</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$file</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$importer</span> = <span style="color:#3311cc;">new</span> WikiImporter<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$source</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$importer</span>-&gt;<span style="color: #006600;">setTargetNamespace</span><span style="color:#008000;">&#40;</span> NS_MAIN <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$reporter</span> = <span style="color:#3311cc;">new</span> ImportReporter<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$importer</span>, <span style="color:#3311cc;">false</span>, <span style="color:#3311cc;">false</span>, <span style="color:#3311cc;">false</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$reporter</span>-&gt;<span style="color: #006600;">open</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$importer</span>-&gt;<span style="color: #006600;">doImport</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$resultCount</span> = <span style="color: #0000ff;">$reporter</span>-&gt;<span style="color: #006600;">close</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> WikiError::<span style="color: #006600;">isError</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$result</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#3311cc;">die</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$result</span>-&gt;<span style="color: #006600;">getMessage</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">elseif</span><span style="color:#008000;">&#40;</span> WikiError::<span style="color: #006600;">isError</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$resultCount</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#3311cc;">die</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$resultCount</span>-&gt;<span style="color: #006600;">getMessage</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
This one exports the current revision of all articles whose names are contained in the <i>$pages</i> array to the file named in <i>$file</i>.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$dbr</span> = wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$exporter</span> = <span style="color:#3311cc;">new</span> WikiExporter<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$dbr</span>, WikiExporter::<span style="color:#3311cc;">CURRENT</span>, WikiExporter::<span style="color: #006600;">BUFFER</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">list_authors</span> = <span style="color:#3311cc;">false</span>;
<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">sink</span> = <span style="color:#3311cc;">new</span> DumpFileOutput<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$file</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">openStream</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">foreach</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$pages</span> <span style="font-weight:bold;color:#0022aa;">as</span> <span style="color: #0000ff;">$page</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$page</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">pageByTitle</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">closeStream</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color:#3311cc;">fclose</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">sink</span>-&gt;<span style="color: #006600;">handle</span> <span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="See_also"> See also </span></h2>
<ul><li><a rel="nofollow" class="external text" href="http://svn.wikimedia.org/doc/">Deoxygen documentation</a>
</li><li><a rel="nofollow" class="external text" href="http://svn.wikimedia.org/svnroot/mediawiki/">MediaWiki SVN</a> / <a href="http://www.mediawiki.org/wiki/Subversion" class="extiw" title="mw:Subversion">MW:Subversion</a>
</li><li><a href="http://www.mediawiki.org/wiki/Manual:Coding_conventions" class="extiw" title="mw:Manual:Coding conventions">MW:Manual:Coding conventions</a>
</li><li><a href="http://www.mediawiki.org/wiki/How_to_become_a_MediaWiki_hacker" class="extiw" title="mw:How to become a MediaWiki hacker">MW:How to become a MediaWiki hacker</a>
</li><li><a rel="nofollow" class="external free" href="http://shrubbery.mynetgear.net/wiki/Installing_Mediawiki">http://shrubbery.mynetgear.net/wiki/Installing_Mediawiki</a>
</li></ul>

<!-- 
NewPP limit report
Preprocessor visited node count: 1093/1000000
Preprocessor generated node count: 1917/1000000
Postâexpand include size: 26853/2097152 bytes
Template argument size: 3574/2097152 bytes
Highest expansion depth: 4/40
Expensive parser function count: 0/100
-->
<a id="ajaxcomments-name" name="ajaxcomments"></a></div><div class="printfooter">
Retrieved from "<a href="http://www.organicdesign.co.nz/wiki/index.php?title=MediaWiki_code_snippets&amp;oldid=106685">http://www.organicdesign.co.nz/wiki/index.php?title=MediaWiki_code_snippets&amp;oldid=106685</a>"</div>
		<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/Category:MediaWiki" title="Category:MediaWiki">MediaWiki</a></li><li><a href="/Category:Examples" title="Category:Examples">Examples</a></li><li><a href="/wiki/index.php?title=Category:Examples/PHP&amp;action=edit&amp;redlink=1" class="new" title="Category:Examples/PHP (page does not exist)">Examples/PHP</a></li></ul></div><div id="mw-hidden-catlinks" class="mw-hidden-catlinks mw-hidden-cats-hidden">Hidden category: <ul><li><a href="/Category:Articles_that_contain_computer_code" title="Category:Articles that contain computer code">Articles that contain computer code</a></li></ul></div></div>		<!-- end content -->
				<div class="visualClear"></div>
	</div>
		</td>
			<td valign="top" id="shadow-r"><div id="logo-r"></div></td>
		</tr>
		<tr>
			<td><div id="shadow-bl"></div></td>
			<td><div id="shadow-b"></div></td>
			<td><div id="shadow-br"></div></td>
		</tr>
		<tr><td colspan="3"><table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Getting_in_to_MediaWiki_coding"><span class="tocnumber">1</span> <span class="toctext">Getting in to MediaWiki coding</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Articles"><span class="tocnumber">2</span> <span class="toctext">Articles</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Get_article_content"><span class="tocnumber">2.1</span> <span class="toctext">Get article content</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Edit_or_create_an_article"><span class="tocnumber">2.2</span> <span class="toctext">Edit or create an article</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Image_URLs"><span class="tocnumber">2.3</span> <span class="toctext">Image URLs</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Image_links"><span class="tocnumber">2.4</span> <span class="toctext">Image links</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Adding_stub_code_to_newly_created_articles"><span class="tocnumber">2.5</span> <span class="toctext">Adding stub code to newly created articles</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Security"><span class="tocnumber">3</span> <span class="toctext">Security</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Returning_content_to_the_client"><span class="tocnumber">4</span> <span class="toctext">Returning content to the client</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Raw_wikitext_content"><span class="tocnumber">4.1</span> <span class="toctext">Raw wikitext content</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Return_an_HTTP_error_page"><span class="tocnumber">4.2</span> <span class="toctext">Return an HTTP error page</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Domain-based_default_redirect"><span class="tocnumber">4.3</span> <span class="toctext">Domain-based default redirect</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Add_a_meta_tags_to_the_page"><span class="tocnumber">4.4</span> <span class="toctext">Add a meta tags to the page</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Using_the_parser"><span class="tocnumber">5</span> <span class="toctext">Using the parser</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Parse_wikitext"><span class="tocnumber">5.1</span> <span class="toctext">Parse wikitext</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Expand_templates_only"><span class="tocnumber">5.2</span> <span class="toctext">Expand templates only</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Replace_triple-brace_arguments_in_wikitext_content"><span class="tocnumber">5.3</span> <span class="toctext">Replace triple-brace arguments in wikitext content</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Using_named_parameters_from_a_parser-function_callback"><span class="tocnumber">5.4</span> <span class="toctext">Using named parameters from a parser-function callback</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Return_codes_for_parser_functions"><span class="tocnumber">5.5</span> <span class="toctext">Return codes for parser functions</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Protecting_raw_HTML_output_from_modification_by_MediaWiki"><span class="tocnumber">5.6</span> <span class="toctext">Protecting raw HTML output from modification by MediaWiki</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Post_processing_to_remove_unwanted_breaks_and_entities_from_output"><span class="tocnumber">5.7</span> <span class="toctext">Post processing to remove unwanted breaks and entities from output</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#JavaScript"><span class="tocnumber">6</span> <span class="toctext">JavaScript</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Make_sortable_table_states_persistent_with_cookies"><span class="tocnumber">6.1</span> <span class="toctext">Make sortable table states persistent with cookies</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#MediaWiki_Environment"><span class="tocnumber">7</span> <span class="toctext">MediaWiki Environment</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Article_title"><span class="tocnumber">7.1</span> <span class="toctext">Article title</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-26"><a href="#Article_queries"><span class="tocnumber">8</span> <span class="toctext">Article queries</span></a>
<ul>
<li class="toclevel-2 tocsection-27"><a href="#List_article_titles_from_a_category"><span class="tocnumber">8.1</span> <span class="toctext">List article titles from a category</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#List_categories_an_article_belongs_to"><span class="tocnumber">8.2</span> <span class="toctext">List categories an article belongs to</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Check_if_a_title_is_in_a_category"><span class="tocnumber">8.3</span> <span class="toctext">Check if a title is in a category</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Get_a_list_of_articles_in_a_namespace_.28number.29"><span class="tocnumber">8.4</span> <span class="toctext">Get a list of articles in a namespace (number)</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Get_a_list_of_articles_using_a_template"><span class="tocnumber">8.5</span> <span class="toctext">Get a list of articles using a template</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Remove_category_pages_for_empty_categories"><span class="tocnumber">8.6</span> <span class="toctext">Remove category pages for empty categories</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Article_queries_using_DPL"><span class="tocnumber">8.7</span> <span class="toctext">Article queries using DPL</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-34"><a href="#Misc"><span class="tocnumber">9</span> <span class="toctext">Misc</span></a>
<ul>
<li class="toclevel-2 tocsection-35"><a href="#examineBraces"><span class="tocnumber">9.1</span> <span class="toctext">examineBraces</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Google_Analytics"><span class="tocnumber">9.2</span> <span class="toctext">Google Analytics</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#Force_all_headings_to_use_outline_numbering"><span class="tocnumber">9.3</span> <span class="toctext">Force all headings to use outline numbering</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-38"><a href="#Integrating_with_the_Skin"><span class="tocnumber">10</span> <span class="toctext">Integrating with the Skin</span></a>
<ul>
<li class="toclevel-2 tocsection-39"><a href="#Adding_a_new_action_tab"><span class="tocnumber">10.1</span> <span class="toctext">Adding a new action tab</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="#Wikitext_in_Sidebar"><span class="tocnumber">10.2</span> <span class="toctext">Wikitext in Sidebar</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="#Development_server_identification"><span class="tocnumber">10.3</span> <span class="toctext">Development server identification</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-42"><a href="#Importing_and_Exporting_articles"><span class="tocnumber">11</span> <span class="toctext">Importing and Exporting articles</span></a></li>
<li class="toclevel-1 tocsection-43"><a href="#See_also"><span class="tocnumber">12</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Getting_in_to_MediaWiki_coding"> Getting in to MediaWiki coding </span></h2>
<p>Here's a useful checklist of things to have set up before starting with MediaWiki development; see also <a href="http://www.mediawiki.org/wiki/How_to_debug" class="extiw" title="mw:How to debug">MW:How to debug</a> and <a href="http://www.mediawiki.org/wiki/Developer_hub" class="extiw" title="mw:Developer hub">MW:Developer hub</a>.
</p>
<ul><li>Full browser and shell access to a running instance of every major version
</li><li>Local access to the source code for all those versions
</li><li>Use <i>wfDebugDieBacktrace()</i> to stop code and report the call stack
</li><li>A good text editor with regular expression support file search capability (we use <a rel="nofollow" class="external text" href="http://geany.uvena.de/">Geany</a> which runs on most platforms)
</li><li>A <a href="/OD/Wikia" title="OD/Wikia">wikia</a> setup so that extension code changes can be quickly tested in all versions and different extension versions can be quickly swapped
</li><li>Tools or code for being able to stop the php code and output the necessary items in the scope
</li><li>Tools for debugging the JS and CSS environment (eg. <a rel="nofollow" class="external text" href="http://getfirebug.com/docs.html">firebug</a>)
</li><li>Bookmarks for all the documentation you've found useful
</li><li>Bookmarks to code snippets and examples (within your own wiki, <a rel="nofollow" class="external free" href="http://mediawiki.org">http://mediawiki.org</a>, other sites and in the mediawiki code)
</li><li>Your own repository of snippets for achieving common objectives in the mediawiki runtime environment
</li></ul>
<h2> <span class="mw-headline" id="Articles"> Articles </span></h2>
<h3> <span class="mw-headline" id="Get_article_content"> Get article content </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$title</span>    = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$titleText</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$article</span>  = <span style="color:#3311cc;">new</span> Article<span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$title</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$wikitext</span> = <span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">getContent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Edit_or_create_an_article"> Edit or create an article </span></h3>
<p>Editing or creating an article are both achieved using the <i>Article::doEdit</i> method which takes three parameters (the third is optional). The first two are the text content and edit summary. The third optional parameter is for flags which adjust the operation. The available flags and their meaning are listed below followed by example usage.
</p>
<ul><li><b>EDIT_NEW:</b> Article is known or assumed to be non-existent, create a new one
</li><li><b>EDIT_UPDATE:</b> Article is known or assumed to be pre-existing, update it
</li><li><b>EDIT_MINOR:</b> Mark this edit minor, if the user is allowed to do so
</li><li><b>EDIT_SUPPRESS_RC:</b> Do not log the change in recentchanges
</li><li><b>EDIT_FORCE_BOT:</b> Mark the edit a "bot" edit regardless of user rights
</li><li><b>EDIT_DEFER_UPDATES:</b> Defer some of the updates until the end of index.php
</li><li><b>EDIT_AUTOSUMMARY:</b> Fill in blank summaries with generated text where possible
</li></ul>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$title</span>    = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$titleText</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$article</span>  = <span style="color:#3311cc;">new</span> Article<span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$title</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">doEdit</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$text</span>, <span style="color: #0000ff;">$summary</span>, EDIT_UPDATE|EDIT_MINOR<span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<ul><li><b>Note:</b> <i>$wgUser</i> must be set before calling this function.
</li></ul>
<h3> <span class="mw-headline" id="Image_URLs"> Image URLs </span></h3>
<p>Given the name of an image page, obtain the full URL of the image.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$v</span>, NS_IMAGE<span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$image</span> = Image::<span style="color: #006600;">newFromTitle</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$title</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$image</span> &amp;&amp; <span style="color: #0000ff;">$image</span>-&gt;<span style="color: #006600;">exists</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$url</span>      = <span style="color: #0000ff;">$image</span>-&gt;<span style="color: #006600;">getURL</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;                      <span style="font-style:italic;color:#d00000;"># Gets the URL for the image at its normal size</span>
	<span style="color: #0000ff;">$url_50px</span> = <span style="color: #0000ff;">$image</span>-&gt;<span style="color: #006600;">getThumbnail</span><span style="color:#008000;">&#40;</span><span style="color:#000000;">50</span>,<span style="color:#000000;">50</span><span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getUrl</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>; <span style="font-style:italic;color:#d00000;"># Gets the URL for the image at a specified size</span>
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Image_links"> Image links </span></h3>
<p>Sometimes you might want to prevent images from linking to the image page. This extension function removes the link.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'OutputPageBeforeHTML'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'removeImageLinks'</span>;
<span style="color:#3311cc;">function</span> removeImageLinks<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$out</span>, &amp;<span style="color: #0000ff;">$text</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$text</span> = <span style="color:#3311cc;">preg_replace</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'|&lt;a.+?class=.image.+?&gt;.*?(&lt;img.+?&gt;).*?&lt;/a&gt;|i'</span>, <span style="color:#0080aa;">'$1'</span>, <span style="color: #0000ff;">$text</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Adding_stub_code_to_newly_created_articles"> Adding stub code to newly created articles </span></h3>
<p>This will add <tt>{{stub}}</tt> to the beginning of article content when it is first created. It can then be removed on a subsequent edit if desired.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'ArticleSave'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wgAddStub'</span>;
<span style="color:#3311cc;">function</span> wgAddStub<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$article</span>, &amp;<span style="color: #0000ff;">$user</span>, &amp;<span style="color: #0000ff;">$text</span>, &amp;<span style="color: #0000ff;">$summary</span>, <span style="color: #0000ff;">$minor</span>, <span style="color: #0000ff;">$watchthis</span>, <span style="color: #0000ff;">$sectionanchor</span>, &amp;<span style="color: #0000ff;">$flags</span>, &amp;<span style="color: #0000ff;">$status</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$text</span> = <span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">exists</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>&#160;? <span style="color:#0080aa;">&quot;&quot;</span>&#160;: <span style="color:#0080aa;">&quot;{{stub}}<span style="color:#ff0000;">\n</span>&quot;</span> <span style="color:#008000;">&#41;</span> . <span style="color: #0000ff;">$text</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Security"> Security </span></h2>
<p>Probably the most common security-related LocalSettings hack is to allow pages in locked down wikis to be publicly viewable if they're in a particular category. This following example adds articles in <i>Category:Public</i> to the <i>$wgWhitelistRead</i> array.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'UserGetRights'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfPublicCat'</span>;
<span style="color:#3311cc;">function</span> wfPublicCat<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgWhitelistRead</span>;
	<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color: #0000ff;">$id</span>   = <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getArticleID</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$dbr</span>  = wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$cat</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'Public'</span> <span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
		<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">selectRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'0'</span>, <span style="color:#0080aa;">&quot;cl_from = $id AND cl_to = $cat&quot;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$wgWhitelistRead</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getPrefixedText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color:#008000;">&#125;</span>
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
From MediaWiki 1.17 onwards, the <a href="http://www.mediawiki.org/wiki/Manual:Hooks/OutputPageBodyAttributes" class="extiw" title="mw:Manual:Hooks/OutputPageBodyAttributes">OutputPageBodyAttributes hook</a> can be used to modify the classes and other attributed of the body tag. In the following example the hook is being used to add classes to the body tag depending on whether the user is anonymous, logged-in or a sysop.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'OutputPageBodyAttributes'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfAddBodyClasses'</span>;
<span style="color:#3311cc;">function</span> wfAddBodyClasses<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$out</span>, <span style="color: #0000ff;">$sk</span>, <span style="color: #0000ff;">$bodyAttrs</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">isAnon</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$bodyAttrs</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'class'</span><span style="color:#008000;">&#93;</span> .= <span style="color:#0080aa;">' anon'</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">isLoggedIn</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$bodyAttrs</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'class'</span><span style="color:#008000;">&#93;</span> .= <span style="color:#0080aa;">' user'</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">in_array</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'sysop'</span>, <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">getEffectiveGroups</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$bodyAttrs</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'class'</span><span style="color:#008000;">&#93;</span> .= <span style="color:#0080aa;">' sysop'</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
Here's an example which was created in response to a support-desk question. It prevents users from editing other users user-pages:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfProtectUserPages'</span>;
<span style="color:#3311cc;">function</span> wfProtectUserPages<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>,<span style="color: #0000ff;">$wgGroupPermissions</span>;
	<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getNamespace</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> == NS_USER &amp;&amp; <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">getName</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>&#160;!= <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>
		<span style="color: #0000ff;">$wgGroupPermissions</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'user'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'edit'</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">false</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
Here is a similar example which restricts all namespaces except MAIN from anonymous users:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfProtectNamespaces'</span>;
<span style="color: #0000ff;">$wgWhitelistRead</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'Special:Userlogin'</span>, <span style="color:#0080aa;">'-'</span>, <span style="color:#0080aa;">'MediaWiki:Monobook.css'</span><span style="color:#008000;">&#41;</span>;
<span style="color:#3311cc;">function</span> wfProtectNamespaces<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>,<span style="color: #0000ff;">$wgGroupPermissions</span>;
	<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$title</span><span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getNamespace</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>&#160;!= <span style="color:#000000;">0</span> &amp;&amp; <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">isAnon</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span>
		<span style="color: #0000ff;">$wgGroupPermissions</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'*'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'read'</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">false</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The following snippet causes all requests to be redirected to HTTPS if the user is a sysop. It also bounces users to non-HTTPS if not a sysop which can be useful if you don't want HTTPS links showing up in search engines for example if you have a self-signed certificate (it doesn't do this if the user is on the login page though since that confuses our <a href="/Wikid" title="Wikid" class="mw-redirect">bots</a> that use HTTPS connections):
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="font-style:italic;color:#d00000;"># Force HTTPS for sysops (and non-HTTPS for non-sysops)</span>
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfSecureSysops'</span>;
<span style="color:#3311cc;">function</span> wfSecureSysops<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>;
		<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">in_array</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'sysop'</span>, <span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">getEffectiveGroups</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
				<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span>&#160;!<span style="color:#3311cc;">isset</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'HTTPS'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
						<span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;Location: https://&quot;</span> . <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'HTTP_HOST'</span><span style="color:#008000;">&#93;</span> . <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'REQUEST_URI'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
						<span style="color:#3311cc;">exit</span>;
				<span style="color:#008000;">&#125;</span>
		<span style="color:#008000;">&#125;</span> <span style="font-weight:bold;color:#0022aa;">else</span> <span style="color:#008000;">&#123;</span>
				<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">isset</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'HTTPS'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color:#008000;">&#40;</span>&#160;!<span style="color:#3311cc;">array_key_exists</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'title'</span>, <span style="color: #0000ff;">$_REQUEST</span> <span style="color:#008000;">&#41;</span> || <span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span>&#160;!= <span style="color:#0080aa;">'Special:UserLogin'</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
						<span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;Location: http://&quot;</span> . <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'HTTP_HOST'</span><span style="color:#008000;">&#93;</span> . <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'REQUEST_URI'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
						<span style="color:#3311cc;">exit</span>;
				<span style="color:#008000;">&#125;</span>
		<span style="color:#008000;">&#125;</span>
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The following code checks if a request is local, and works regardless of the IP address or whether it's IPv4 or IPv6.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> isLocal<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">preg_match_all</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;|inet6? addr:<span style="color:#ff0000;">\s</span>*([0-9a-f.:]+)|&quot;</span>, `/sbin/ifconfig`, <span style="color: #0000ff;">$matches</span> <span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color:#3311cc;">in_array</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'REMOTE_ADDR'</span><span style="color:#008000;">&#93;</span>, <span style="color: #0000ff;">$matches</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Returning_content_to_the_client"> Returning content to the client </span></h2>
<h3> <span class="mw-headline" id="Raw_wikitext_content"> Raw wikitext content </span></h3>
<p>This function returns the raw content specified in <i>$text</i>, it can be called any time from extension-setup or after. If the <i>$save</i> parameter is supplied it will bring up a download dialog with the default name set to <i>$save</i>, otherwise it will download and open unprompted. If <i>$expand</i> is set to true, then any templates, parser-functions or variables in the content will be expanded.
</p><p><br />
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> raw<span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$text</span>, <span style="color: #0000ff;">$expand</span> = <span style="color:#3311cc;">false</span>, <span style="color: #0000ff;">$save</span> = <span style="color:#3311cc;">false</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgOut</span>, <span style="color: #0000ff;">$wgParser</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$expand</span><span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$text</span> = <span style="color: #0000ff;">$wgParser</span>-&gt;<span style="color: #006600;">preprocess</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$text</span>, <span style="color:#3311cc;">new</span> Title<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>, <span style="color:#3311cc;">new</span> ParserOptions<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">disable</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	wfResetOutputBuffers<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'Content-Type: application/octet-stream'</span><span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$save</span><span style="color:#008000;">&#41;</span> <span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">&quot;Content-Disposition: attachment; filename=<span style="color:#ff0000;">\&quot;</span>$save<span style="color:#ff0000;">\&quot;</span>&quot;</span><span style="color:#008000;">&#41;</span>;
	<span style="color:#3311cc;">echo</span> <span style="color: #0000ff;">$text</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Return_an_HTTP_error_page"> Return an HTTP error page </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgOut</span>, <span style="color: #0000ff;">$wgParser</span>;
<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">disable</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
wfResetOutputBuffers<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'HTTP/1.0 404 Not Found'</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$err</span> = <span style="color:#0080aa;">'&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;
	&lt;body&gt;&lt;h1&gt;Not Found&lt;/h1&gt;&lt;p&gt;The requested URL was not found on this server.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;'</span>;
<span style="color:#3311cc;">echo</span> <span style="color: #0000ff;">$err</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Domain-based_default_redirect"> Domain-based default redirect </span></h3>
<p>If no page title is specified, redirect to a default depending on the domain name in the requested URL. In this example requests to <i>abc.org</i> or any of it's subdomains with no title specified will redirect to the <i>Welcome to ABC</i> article, and any requests to the exact domain of <i>www.xyz.org</i> without a title end up at the <i>XYZ Home</i> article. Titleless requests to any other domain which resolves to this example wiki will be unaffected and left to the rest of the configuration to deal with. This code should be executed early in the <i>LocalSettings</i> before any extensions are included, but after <i>$wgServer</i> is defined.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$d</span> = <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'SERVER_NAME'</span><span style="color:#008000;">&#93;</span>;
<span style="color: #0000ff;">$t</span> = <span style="color: #0000ff;">$_REQUEST</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'title'</span><span style="color:#008000;">&#93;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">empty</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$t</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$t</span> = <span style="color:#3311cc;">ereg_replace</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'^/'</span>, <span style="color:#0080aa;">''</span>, <span style="color: #0000ff;">$_SERVER</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'PATH_INFO'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">empty</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$t</span><span style="color:#008000;">&#41;</span> || <span style="color: #0000ff;">$t</span> == <span style="color:#0080aa;">'Main_Page'</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">ereg</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'abc.org$'</span>, <span style="color: #0000ff;">$d</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span> <span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">&quot;Location: $wgServer/Welcome_to_ABC&quot;</span><span style="color:#008000;">&#41;</span> &amp;&amp; <span style="color:#3311cc;">die</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$d</span> == <span style="color:#0080aa;">'www.xyz.com'</span><span style="color:#008000;">&#41;</span>  <span style="color:#3311cc;">header</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">&quot;Location: $wgServer/XYZ_Home&quot;</span><span style="color:#008000;">&#41;</span>       &amp;&amp; <span style="color:#3311cc;">die</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Add_a_meta_tags_to_the_page"> Add a meta tags to the page </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfAddMetaTag'</span>;
<span style="color:#3311cc;">function</span> wfAddMetaTag<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgOut</span>;
	<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">addMeta</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'name1'</span>, <span style="color:#0080aa;">'value1'</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">addMeta</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'name2'</span>, <span style="color:#0080aa;">'value2'</span><span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Using_the_parser"> Using the parser </span></h2>
<h3> <span class="mw-headline" id="Parse_wikitext"> Parse wikitext </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$html</span> = <span style="color: #0000ff;">$wgParser</span>-&gt;<span style="color: #006600;">parse</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$wikitext</span>, <span style="color: #0000ff;">$title</span>, <span style="color:#3311cc;">new</span> ParserOptions<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>, <span style="color:#3311cc;">true</span>, <span style="color:#3311cc;">true</span><span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Expand_templates_only"> Expand templates only </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wikitext</span> = <span style="color: #0000ff;">$wgParser</span>-&gt;<span style="color: #006600;">preprocess</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$wikitext</span>, <span style="color: #0000ff;">$title</span>, <span style="color:#3311cc;">new</span> ParserOptions<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Replace_triple-brace_arguments_in_wikitext_content"> Replace triple-brace arguments in wikitext content </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$parser</span>-&gt;<span style="color: #006600;">replaceVariables</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$wikitext</span>, <span style="color: #0000ff;">$args</span>, <span style="color:#3311cc;">true</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>If <i>$wikitext</i> is set to &quot;hello {{{you}}} this is {{{me}}}&quot;, then the "you" and "me" keys of the <i>$args</i> array will replace the corresponding triple-brace arguments in the wikitext content. This is a useful method to know because there are actually a number of difficulties involved in implementing it since it must account for both named and ordered parameters and default values (which can also contain brace-expressions).
</p>
<h3> <span class="mw-headline" id="Using_named_parameters_from_a_parser-function_callback"> Using named parameters from a parser-function callback </span></h3>
<p>You can use named parameters in your parser functions, eg <tt>{{#drops:for=Rikkukin the Defender|zone=The Ascent|h=3}}</tt>, but you will need to manually split the args into key/value pairs in your callback function, such as in the following example code:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$args</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">foreach</span> <span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$argv</span> <span style="font-weight:bold;color:#0022aa;">as</span> <span style="color: #0000ff;">$arg</span><span style="color:#008000;">&#41;</span>
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span>!<span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span><span style="color: #0000ff;">$arg</span><span style="color:#008000;">&#41;</span><span style="color:#008000;">&#41;</span>
		<span style="color:#3311cc;">preg_match</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'/^(<span style="color:#ff0000;">\\</span>w+)<span style="color:#ff0000;">\\</span>s*=<span style="color:#ff0000;">\\</span>s*(.+)$/is'</span>, <span style="color: #0000ff;">$arg</span>, <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#41;</span>&#160;? <span style="color: #0000ff;">$args</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">2</span><span style="color:#008000;">&#93;</span>&#160;: <span style="color: #0000ff;">$args</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$arg</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>This snippet will create a hash from the arguments passed to your callback function (ignoring any which are objects such as the first one which is <i>$parser</i>). The resulting hash will contain numeric keys for all the normal non-named parameters in your parser-function, and non-numeric keys matching all the <i>name=value</i> parameters.
</p>
<h3> <span class="mw-headline" id="Return_codes_for_parser_functions"> Return codes for parser functions </span></h3>
<p>Typical example.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
	<span style="color: #0000ff;">$text</span>,
	<span style="color:#0080aa;">'found'</span>   =&gt; <span style="color:#3311cc;">true</span>,
	<span style="color:#0080aa;">'nowiki'</span>  =&gt; <span style="color:#3311cc;">false</span>,
	<span style="color:#0080aa;">'noparse'</span> =&gt; <span style="color:#3311cc;">false</span>,
	<span style="color:#0080aa;">'noargs'</span>  =&gt; <span style="color:#3311cc;">false</span>,
	<span style="color:#0080aa;">'isHTML'</span>  =&gt; <span style="color:#3311cc;">false</span>
<span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>See also: <a rel="nofollow" class="external free" href="http://www.organicdesign.co.nz/Extension:Example">http://www.organicdesign.co.nz/Extension:Example</a>
</p>
<h3> <span class="mw-headline" id="Protecting_raw_HTML_output_from_modification_by_MediaWiki"> Protecting raw HTML output from modification by MediaWiki </span></h3>
<p>See: <a rel="nofollow" class="external text" href="http://www.mediawiki.org/wiki/Manual:Tag_extensions#How_can_I_avoid_modification_of_my_extension.27s_HTML_output.3F">How can I avoid modification of my extension's HTML output</a> on mediawiki.org. Thanks to <a rel="nofollow" class="external text" href="http://www.mediawiki.org/wiki/User:Duesentrieb">Duesentrieb</a> for digging out this info.
</p>
<h3> <span class="mw-headline" id="Post_processing_to_remove_unwanted_breaks_and_entities_from_output"> Post processing to remove unwanted breaks and entities from output </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> efFixEmptyLineBug<span style="color:#008000;">&#40;</span>&amp;<span style="color: #0000ff;">$parser</span>, &amp;<span style="color: #0000ff;">$text</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$text</span> = <span style="color:#3311cc;">preg_replace</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'|&lt;p&gt;<span style="color:#ff0000;">\s</span>*&lt;br<span style="color:#ff0000;">\s</span>*/&gt;<span style="color:#ff0000;">\s</span>*&lt;/p&gt;|s'</span>, <span style="color:#0080aa;">''</span>, <span style="color: #0000ff;">$text</span><span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="JavaScript"> JavaScript </span></h2>
<p>Here's some JavaScript snippets that can be added to <a href="/MediaWiki:Common.js" title="MediaWiki:Common.js">MediaWiki:Common.js</a>
</p>
<h3> <span class="mw-headline" id="Make_sortable_table_states_persistent_with_cookies"> Make sortable table states persistent with cookies </span></h3>
<p>Note that this function requires <i>getCookie</i> and <i>setCookie</i> which are currently in our <a rel="nofollow" class="external text" href="http://svn.organicdesign.co.nz/filedetails.php?repname=extensions&amp;path=%2FJavaScript%2Fnavbar.js">navbar.js</a>. They're just the standard cookie getting and setting <a rel="nofollow" class="external text" href="http://www.w3schools.com/JS/js_cookies.asp">functions recommended by W3C</a>.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="js">&#160;
addOnloadHook<span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">function</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
    $<span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'.sortable'</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">each</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">function</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
        <span style="color:#3311cc;">var</span> id = $<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">attr</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'id'</span><span style="color:#008000;">&#41;</span>;
        document.<span style="color: #006600;">shCookie</span> = getCookie<span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'sortheader-'</span>+id<span style="color:#008000;">&#41;</span>;
        document.<span style="color: #006600;">sortheaderId</span> = <span style="color:#000000;">0</span>;
        $<span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'#'</span>+id+<span style="color:#0080aa;">' a.sortheader'</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">each</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">function</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
            <span style="color:#3311cc;">var</span> id = $<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">parent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">parent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">parent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">parent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">attr</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'id'</span><span style="color:#008000;">&#41;</span>;
            <span style="color:#3311cc;">var</span> sh = document.<span style="color: #006600;">sortheaderId</span>++;
            <span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> sh<span style="color:#000000;">+100</span> == document.<span style="color: #006600;">shCookie</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span> ts_resortTable<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>; ts_resortTable<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>; <span style="color:#008000;">&#125;</span>
            <span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> sh == document.<span style="color: #006600;">shCookie</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span> ts_resortTable<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>; sh += <span style="color:#000000;">100</span>; <span style="color:#008000;">&#125;</span>
            $<span style="color:#008000;">&#40;</span><span style="font-weight:bold;color:#0022aa;">this</span><span style="color:#008000;">&#41;</span>.<span style="color: #006600;">bind</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'click'</span>, <span style="color:#008000;">&#123;</span>id: id, sh: sh<span style="color:#008000;">&#125;</span>, <span style="color:#3311cc;">function</span><span style="color:#008000;">&#40;</span>e<span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
                setCookie<span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'sortheader-'</span>+e.<span style="color: #006600;">data</span>.<span style="color: #006600;">id</span>, e.<span style="color: #006600;">data</span>.<span style="color: #006600;">sh</span>, <span style="color:#000000;">1</span><span style="color:#008000;">&#41;</span>;
            <span style="color:#008000;">&#125;</span><span style="color:#008000;">&#41;</span>;
        <span style="color:#008000;">&#125;</span><span style="color:#008000;">&#41;</span>;
    <span style="color:#008000;">&#125;</span><span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="MediaWiki_Environment"> MediaWiki Environment </span></h2>
<h3> <span class="mw-headline" id="Article_title"> Article title </span></h3>
<p>This should be called at an appropriate time such as from the <i>OutputPageBeforeHTML</i> hook.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">setPageTitle</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'foo'</span> <span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Article_queries"> Article queries </span></h2>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td><a href="/File:Info.svg" class="image"><img alt="Info.svg" src="/files/thumb/e/e1/Info.svg/50px-Info.svg.png" width="50" height="50" srcset="/files/thumb/e/e1/Info.svg/75px-Info.svg.png 1.5x, /files/thumb/e/e1/Info.svg/100px-Info.svg.png 2x" /></a>
</td>
<td>See <a href="http://www.mediawiki.org/wiki/Manual:Database_access" class="extiw" title="mw:Manual:Database access">MW:Manual:Database access</a> for additional information about database access in MediaWiki.
</td></tr></table>
</td></tr></table>
<p><br />
</p>
<h3> <span class="mw-headline" id="List_article_titles_from_a_category"> List article titles from a category </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$list</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$dbr</span>  = &amp;wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$cat</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getDBkey</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$res</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'cl_from'</span>, <span style="color:#0080aa;">&quot;cl_to = $cat&quot;</span>, <span style="color:#3311cc;">__METHOD__</span>, <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'ORDER BY'</span> =&gt; <span style="color:#0080aa;">'cl_sortkey'</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$list</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = Title::<span style="color: #006600;">newFromID</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getPrefixedText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>Adjust the $list addition to your own needs. This example creates a title object for each and then calls the <i>getPrefixedText</i> method which returns the title as a string including namespace.
</p>
<h3> <span class="mw-headline" id="List_categories_an_article_belongs_to"> List categories an article belongs to </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$list</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$dbr</span>  = &amp;wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$id</span>   = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'article-title'</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getArticleID</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$res</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'cl_to'</span>, <span style="color:#0080aa;">&quot;cl_from = $id&quot;</span>, <span style="color:#3311cc;">__METHOD__</span>, <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'ORDER BY'</span> =&gt; <span style="color:#0080aa;">'cl_sortkey'</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$list</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>;
<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">freeResult</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Check_if_a_title_is_in_a_category"> Check if a title is in a category </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> inCat<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span>, <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span>&#160;!<span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$id</span>   = <span style="color: #0000ff;">$title</span>-&gt;<span style="color: #006600;">getArticleID</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$dbr</span>  = &amp;wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$cat</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getDBkey</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">selectRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'0'</span>, <span style="color:#0080aa;">&quot;cl_from = $id AND cl_to = $cat&quot;</span>, <span style="color:#3311cc;">__METHOD__</span> <span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Get_a_list_of_articles_in_a_namespace_.28number.29"> Get a list of articles in a namespace (number) </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> getArticlesInNamespace<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$namespace</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$dbr</span>   = &amp;wfGetDB<span style="color:#008000;">&#40;</span>DB_SLAVE<span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$list</span>  = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$table</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'page'</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$res</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$table</span>, <span style="color:#0080aa;">'page_title'</span>, <span style="color:#0080aa;">&quot;page_namespace = $namespace&quot;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$list</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>;
	<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">freeResult</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color: #0000ff;">$list</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Get_a_list_of_articles_using_a_template"> Get a list of articles using a template </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> usesTemplate<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$tmpl</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$dbr</span>   = &amp;wfGetDB<span style="color:#008000;">&#40;</span>DB_SLAVE<span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$list</span>  = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$tmpl</span>  = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$tmpl</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getDBkey</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$table</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'templatelinks'</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$res</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$table</span>, <span style="color:#0080aa;">'tl_from'</span>, <span style="color:#0080aa;">&quot;tl_namespace = 10 AND tl_title = $tmpl&quot;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$list</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>;
	<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">freeResult</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color: #0000ff;">$list</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Remove_category_pages_for_empty_categories"> Remove category pages for empty categories </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> removeEmptyCategories<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
&#160;
	<span style="font-style:italic;color:#d00000;">// Get all category pages</span>
	<span style="color: #0000ff;">$dbr</span>   = &amp;wfGetDB<span style="color:#008000;">&#40;</span>DB_SLAVE<span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$cats</span>  = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$table</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'page'</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$res</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">select</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$table</span>, <span style="color:#0080aa;">'page_title'</span>, <span style="color:#0080aa;">&quot;page_namespace = &quot;</span> . NS_CATEGORY <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$row</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">fetchRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$cats</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$row</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>;
	<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">freeResult</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$res</span> <span style="color:#008000;">&#41;</span>;
&#160;
	<span style="font-style:italic;color:#d00000;">// Delete those which are for empty cats</span>
	<span style="font-weight:bold;color:#0022aa;">foreach</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cats</span> <span style="font-weight:bold;color:#0022aa;">as</span> <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color: #0000ff;">$dbr</span>  = &amp;wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$cl</span>   = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">tableName</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'categorylinks'</span> <span style="color:#008000;">&#41;</span>;
		<span style="color: #0000ff;">$qcat</span> = <span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">addQuotes</span><span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cat</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getDBkey</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
		<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span>&#160;!<span style="color: #0000ff;">$dbr</span>-&gt;<span style="color: #006600;">selectRow</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cl</span>, <span style="color:#0080aa;">'cl_from'</span>, <span style="color:#0080aa;">&quot;cl_to = $qcat&quot;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
			<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$cat</span>, NS_CATEGORY <span style="color:#008000;">&#41;</span>;
			<span style="color: #0000ff;">$article</span> = <span style="color:#3311cc;">new</span> Article<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span>;
			<span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">doDelete</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;Obsolete category page - this category contains no items&quot;</span> <span style="color:#008000;">&#41;</span>;
		<span style="color:#008000;">&#125;</span>
	<span style="color:#008000;">&#125;</span>
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Article_queries_using_DPL">Article queries using DPL</span></h3>
<p>This DPL query example provides a standard list of page links in wikitext bullet list format.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre>
{{#dpl:category=Foo|format=,*[[%PAGE%]],\n,}}
</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Misc"> Misc </span></h2>
<h3> <span class="mw-headline" id="examineBraces"> examineBraces </span></h3>
<p>This function returns an array of the brace structure found in the passed wikitext parameter. This has also been implemented in Perl, see the <i>wikiExamineBraces</i> function in <a href="/Wiki.pl" title="Wiki.pl">wiki.pl</a>.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">function</span> examineBraces<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$content</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$braces</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$depths</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$depth</span> = <span style="color:#000000;">1</span>;
	<span style="color: #0000ff;">$index</span> = <span style="color:#000000;">0</span>;
	<span style="font-weight:bold;color:#0022aa;">while</span><span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">preg_match</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'/<span style="color:#ff0000;">\\</span>{<span style="color:#ff0000;">\\</span>{<span style="color:#ff0000;">\\</span>s*([#a-z0-9_]*:?)|<span style="color:#ff0000;">\\</span>}<span style="color:#ff0000;">\\</span>}/is'</span>, <span style="color: #0000ff;">$content</span>, <span style="color: #0000ff;">$match</span>, PREG_OFFSET_CAPTURE, <span style="color: #0000ff;">$index</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color: #0000ff;">$index</span> = <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span> + <span style="color:#000000;">2</span>;
		<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span> == <span style="color:#0080aa;">'}}'</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
			<span style="color: #0000ff;">$brace</span> =&amp; <span style="color: #0000ff;">$braces</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$depths</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$depth</span><span style="color:#000000;">-1</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#93;</span>;
			<span style="color: #0000ff;">$brace</span><span style="color:#008000;">&#91;</span>LENGTH<span style="color:#008000;">&#93;</span> = <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span> - <span style="color: #0000ff;">$brace</span><span style="color:#008000;">&#91;</span>OFFSET<span style="color:#008000;">&#93;</span> + <span style="color:#000000;">2</span>;
			<span style="color: #0000ff;">$brace</span><span style="color:#008000;">&#91;</span>DEPTH<span style="color:#008000;">&#93;</span>  = <span style="color: #0000ff;">$depth</span>--;
		<span style="color:#008000;">&#125;</span>
		<span style="font-weight:bold;color:#0022aa;">else</span> <span style="color:#008000;">&#123;</span>
			<span style="color: #0000ff;">$depths</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$depth</span>++<span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">count</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$braces</span> <span style="color:#008000;">&#41;</span>;
			<span style="color: #0000ff;">$braces</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
				NAME   =&gt; <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span>,
				OFFSET =&gt; <span style="color: #0000ff;">$match</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">0</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#000000;">1</span><span style="color:#008000;">&#93;</span>
			<span style="color:#008000;">&#41;</span>;
		<span style="color:#008000;">&#125;</span>
	<span style="color:#008000;">&#125;</span>
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color: #0000ff;">$braces</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The following input,
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre>
foo{{#bar:baz|biz{{foo|shmoo}}}}{{moo}}baz
</pre>
</td></tr></table>
</td></tr></table>
<p><br />
Gives the following array:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre>
Array(
    [0] =&gt; Array(
        [NAME]   =&gt; #bar
        [OFFSET] =&gt; 3
        [LENGTH] =&gt; 29
        [DEPTH]  =&gt; 1
        )

    [1] =&gt; Array(
        [NAME]   =&gt; foo
        [OFFSET] =&gt; 17
        [LENGTH] =&gt; 13
        [DEPTH]  =&gt; 2
        )

    [2] =&gt; Array(
        [NAME]   =&gt; moo
        [OFFSET] =&gt; 32
        [LENGTH] =&gt; 7
        [DEPTH]  =&gt; 1
        )
    )
</pre>
</td></tr></table>
</td></tr></table>
<p>The array output is designed to integrate with the <a rel="nofollow" class="external text" href="http://nz2.php.net/manual/en/function.substr-replace.php">substr_replace</a> function arguments subject, replace, offset, length. The index 0, 1, 2 order referes to the order functions are found (from left to right).
</p>
<h3> <span class="mw-headline" id="Google_Analytics"> Google Analytics </span></h3>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfGoogleAnalytics'</span>;
<span style="color:#3311cc;">function</span> wfGoogleAnalytics<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgOut</span>;
	<span style="color: #0000ff;">$wgOut</span>-&gt;<span style="color: #006600;">addScript</span><span style="color:#008000;">&#40;</span>
		<span style="color:#0080aa;">'&lt;script type=&quot;text/javascript&quot;&gt;
		var gaJsHost = ((&quot;https:&quot; == document.location.protocol)&#160;? &quot;https://ssl.&quot;&#160;: &quot;http://www.&quot;);
		document.write(unescape(&quot;%3Cscript src=<span style="color:#ff0000;">\'</span>&quot; + gaJsHost + &quot;google-analytics.com/ga.js<span style="color:#ff0000;">\'</span> type=<span style="color:#ff0000;">\'</span>text/javascript<span style="color:#ff0000;">\'</span>%3E%3C/script%3E&quot;));
		&lt;/script&gt;&lt;script type=&quot;text/javascript&quot;&gt;
		var pageTracker = _gat._getTracker(&quot;INSERT YOUR TRACKING CODE HERE&quot;);
		pageTracker._trackPageview();&lt;/script&gt;'</span>
	<span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Force_all_headings_to_use_outline_numbering"> Force all headings to use outline numbering </span></h3>
<p>There is a user-preference to make all headings use outline numbering, but no way to make that a default for all users. Here's a few lines of code which can be added to your LocalSettings.php file which do that.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExtensionFunctions</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfNumberHeadings'</span>;
<span style="color:#3311cc;">function</span> wfNumberHeadings<span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>;
	<span style="color: #0000ff;">$wgUser</span>-&gt;<span style="color: #006600;">setOption</span><span style="color:#008000;">&#40;</span><span style="color:#0080aa;">'numberheadings'</span>, <span style="color:#3311cc;">true</span><span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="Integrating_with_the_Skin"> Integrating with the Skin </span></h2>
<h3> <span class="mw-headline" id="Adding_a_new_action_tab"> Adding a new action tab </span></h3>
<p>The following code adds a new action tab with a corresponding link. To process the new action, add a processing function to the <i>UnknownAction</i> hook.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgExampleAction</span> = <span style="color:#0080aa;">'example'</span>;
&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'SkinTemplateTabs'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'wfAddExampleTab'</span>;
&#160;
<span style="color:#3311cc;">function</span> wfAddExampleTab<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$skin</span>, &amp;<span style="color: #0000ff;">$actions</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgTitle</span>, <span style="color: #0000ff;">$wgRequest</span>, <span style="color: #0000ff;">$wgExampleAction</span>;
	<span style="color: #0000ff;">$selected</span> = <span style="color: #0000ff;">$wgRequest</span>-&gt;<span style="color: #006600;">getText</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'action'</span> <span style="color:#008000;">&#41;</span> == <span style="color: #0000ff;">$wgExampleAction</span>&#160;? <span style="color:#0080aa;">'selected'</span>&#160;: <span style="color:#3311cc;">false</span>;
	<span style="color: #0000ff;">$url</span>      = <span style="color: #0000ff;">$wgTitle</span>-&gt;<span style="color: #006600;">getLocalURL</span><span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">&quot;action=$wgExampleAction&quot;</span> <span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span><span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgTitle</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
		<span style="color: #0000ff;">$actions</span><span style="color:#008000;">&#91;</span><span style="color: #0000ff;">$wgExampleAction</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
			<span style="color:#0080aa;">'text'</span>  =&gt; <span style="color: #0000ff;">$wgExampleAction</span>, <span style="font-style:italic;color:#d00000;"># should use wfMsg( $wgExampleAction )</span>
			<span style="color:#0080aa;">'class'</span> =&gt; <span style="color: #0000ff;">$selected</span>,
			<span style="color:#0080aa;">'href'</span>  =&gt; <span style="color: #0000ff;">$url</span>
		<span style="color:#008000;">&#41;</span>;
	<span style="color:#008000;">&#125;</span>
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The Vector skin (optional on 1.16, default on 1.17 onwards) uses a new hook, SkinTemplateNavigation. You can cover both Vector and earlier skins like Monobook or Modern by including code for both hooks. The example below uses the MediaWiki namespace to name the relevant elements of the array. You can put this code in LocalSettings after the inclusion of extensions.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'SkinTemplateTabs'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'onSkinTemplateTabs'</span>;
<span style="color: #0000ff;">$wgHooks</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'SkinTemplateNavigation'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span><span style="color:#008000;">&#93;</span> = <span style="color:#0080aa;">'onSkinTemplateNavigation'</span>;
&#160;
<span style="color:#3311cc;">function</span> onSkinTemplateTabs<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$skin</span>, &amp;<span style="color: #0000ff;">$actions</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$actions</span><span style="color:#008000;">&#91;</span>wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-id'</span> <span style="color:#008000;">&#41;</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
		<span style="color:#0080aa;">'class'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-class'</span> <span style="color:#008000;">&#41;</span>,
		<span style="color:#0080aa;">'text'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-text'</span> <span style="color:#008000;">&#41;</span>,
		<span style="color:#0080aa;">'href'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-href'</span> <span style="color:#008000;">&#41;</span>
	<span style="color:#008000;">&#41;</span>;		
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;
<span style="color:#3311cc;">function</span> onSkinTemplateNavigation<span style="color:#008000;">&#40;</span> &amp;<span style="color: #0000ff;">$skin</span>, &amp;<span style="color: #0000ff;">$contentActions</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$contentActions</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'views'</span><span style="color:#008000;">&#93;</span><span style="color:#008000;">&#91;</span>wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-id'</span> <span style="color:#008000;">&#41;</span><span style="color:#008000;">&#93;</span> = <span style="color:#3311cc;">array</span><span style="color:#008000;">&#40;</span>
		<span style="color:#0080aa;">'class'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-class'</span> <span style="color:#008000;">&#41;</span>,
		<span style="color:#0080aa;">'text'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-text'</span> <span style="color:#008000;">&#41;</span>,
		<span style="color:#0080aa;">'href'</span> =&gt; wfMsg<span style="color:#008000;">&#40;</span> <span style="color:#0080aa;">'edit-addtab-href'</span> <span style="color:#008000;">&#41;</span>
	<span style="color:#008000;">&#41;</span>;
	<span style="font-weight:bold;color:#0022aa;">return</span> <span style="color:#3311cc;">true</span>;
<span style="color:#008000;">&#125;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Wikitext_in_Sidebar"> Wikitext in Sidebar </span></h3>
<p>By default the <a href="/MediaWiki:Sidebar" title="MediaWiki:Sidebar">MediaWiki:Sidebar</a> article content is not normal wikitext. This snippet fixes that and also ensures that the content can fall back to an i18n message if the article is not present - the normal behaviour for articles in the <i>MediaWiki</i> namespace. Replace a section such as toolbox or navlinks in the <i>skins/MonoBook.php</i> file with the following:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">global</span> <span style="color: #0000ff;">$wgUser</span>, <span style="color: #0000ff;">$wgTitle</span>, <span style="color: #0000ff;">$wgParser</span>;
<span style="color: #0000ff;">$title</span> = <span style="color:#0080aa;">'sidebar'</span>; <span style="font-style:italic;color:#d00000;"># note the lcfirst is important here since it's also a msg key</span>
<span style="color: #0000ff;">$article</span> = <span style="color:#3311cc;">new</span> Article<span style="color:#008000;">&#40;</span> Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span>, NS_MEDIAWIKI <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$text</span> = <span style="color: #0000ff;">$article</span>-&gt;<span style="color: #006600;">fetchContent</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">empty</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$text</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$text</span> = wfMsg<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span> <span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgParser</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span> <span style="color: #0000ff;">$psr</span> = <span style="color: #0000ff;">$wgParser</span>; <span style="color: #0000ff;">$opt</span> = <span style="color: #0000ff;">$wgParser</span>-&gt;<span style="color: #006600;">mOptions</span>; <span style="color:#008000;">&#125;</span>
<span style="font-weight:bold;color:#0022aa;">else</span> <span style="color:#008000;">&#123;</span> <span style="color: #0000ff;">$psr</span> = <span style="color:#3311cc;">new</span> Parser; <span style="color: #0000ff;">$opt</span> = <span style="color:#3311cc;">NULL</span>; <span style="color:#008000;">&#125;</span>
<span style="font-weight:bold;color:#0022aa;">if</span> <span style="color:#008000;">&#40;</span>&#160;!<span style="color:#3311cc;">is_object</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$opt</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color: #0000ff;">$opt</span> = ParserOptions::<span style="color: #006600;">newFromUser</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgUser</span> <span style="color:#008000;">&#41;</span>;
<span style="color:#3311cc;">echo</span> <span style="color: #0000ff;">$psr</span>-&gt;<span style="color: #006600;">parse</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$text</span>, <span style="color: #0000ff;">$wgTitle</span>, <span style="color: #0000ff;">$opt</span>, <span style="color:#3311cc;">true</span>, <span style="color:#3311cc;">true</span> <span style="color:#008000;">&#41;</span>-&gt;<span style="color: #006600;">getText</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
The procedure is the same with Vector-based skins, the change is you now place the code inside divs of id portal and then id body, as per the other examples in <i>skins/Vector.php</i>. It should replace the following code and/or the toolbox:
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color:#3311cc;">&lt;?php</span> <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">renderPortals</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$this</span>-&gt;<span style="color: #006600;">data</span><span style="color:#008000;">&#91;</span><span style="color:#0080aa;">'sidebar'</span><span style="color:#008000;">&#93;</span> <span style="color:#008000;">&#41;</span>; <span style="color:#3311cc;">?&gt;</span>
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h3> <span class="mw-headline" id="Development_server_identification"> Development server identification </span></h3>
<p>The idea is to have a picture or text that allows a developer to quickly see that they are on the development instance and not the production instance of  MediaWiki.
By adding to the content of $wgSiteNotice in a conditional every article will have the change for that domain map.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$wgServer</span> == <span style="color:#0080aa;">&quot;http://localhost&quot;</span> <span style="color:#008000;">&#41;</span>  <span style="font-style:italic;color:#d00000;"># or any other domain</span>
  <span style="color: #0000ff;">$wgSiteNotice</span> = <span style="color:#0080aa;">'&lt;span style=&quot;position:absolute;top:0px;left:-140px;z-index:10&quot;&gt;[[Image:Gnome-devel.png|100px]]&lt;/span&gt;'</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p>This approach was based on <a href="http://en.wikipedia.org/wiki/User:East718/include" class="extiw" title="w:User:East718/include">W:User:East718/include</a>, and the image source is <a rel="nofollow" class="external text" href="http://commons.wikimedia.org/wiki/Image:Gnome-devel.svg">Image:Gnome-devel.svg </a>
</p>
<h2> <span class="mw-headline" id="Importing_and_Exporting_articles"> Importing and Exporting articles </span></h2>
<p>The following snippet imports articles from the XML export file named in <i>$file</i> into the main namespace. The <i>$resultCount</i> variable holds the number of articles imported on success.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$source</span> = ImportStreamSource::<span style="color: #006600;">newFromFile</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$file</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$importer</span> = <span style="color:#3311cc;">new</span> WikiImporter<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$source</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$importer</span>-&gt;<span style="color: #006600;">setTargetNamespace</span><span style="color:#008000;">&#40;</span> NS_MAIN <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$reporter</span> = <span style="color:#3311cc;">new</span> ImportReporter<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$importer</span>, <span style="color:#3311cc;">false</span>, <span style="color:#3311cc;">false</span>, <span style="color:#3311cc;">false</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$reporter</span>-&gt;<span style="color: #006600;">open</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$result</span> = <span style="color: #0000ff;">$importer</span>-&gt;<span style="color: #006600;">doImport</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$resultCount</span> = <span style="color: #0000ff;">$reporter</span>-&gt;<span style="color: #006600;">close</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">if</span><span style="color:#008000;">&#40;</span> WikiError::<span style="color: #006600;">isError</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$result</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#3311cc;">die</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$result</span>-&gt;<span style="color: #006600;">getMessage</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">elseif</span><span style="color:#008000;">&#40;</span> WikiError::<span style="color: #006600;">isError</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$resultCount</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span> <span style="color:#3311cc;">die</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$resultCount</span>-&gt;<span style="color: #006600;">getMessage</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<p><br />
This one exports the current revision of all articles whose names are contained in the <i>$pages</i> array to the file named in <i>$file</i>.
</p>
<table class="od-code" style="width: 100%;margin: 15px 0 0 0;padding: 3px;border: 1px solid #ccc;background: #f4f4f4;text-align: left;vertical-align: top;">

<tr>
<td>
<table style="background:none;border:none;margin:0;padding:0;vertical-align:middle;">
<tr>
<td>
</td>
<td><pre class="php">&#160;
<span style="color: #0000ff;">$dbr</span> = wfGetDB<span style="color:#008000;">&#40;</span> DB_SLAVE <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$exporter</span> = <span style="color:#3311cc;">new</span> WikiExporter<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$dbr</span>, WikiExporter::<span style="color:#3311cc;">CURRENT</span>, WikiExporter::<span style="color: #006600;">BUFFER</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">list_authors</span> = <span style="color:#3311cc;">false</span>;
<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">sink</span> = <span style="color:#3311cc;">new</span> DumpFileOutput<span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$file</span> <span style="color:#008000;">&#41;</span>;
<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">openStream</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="font-weight:bold;color:#0022aa;">foreach</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$pages</span> <span style="font-weight:bold;color:#0022aa;">as</span> <span style="color: #0000ff;">$page</span> <span style="color:#008000;">&#41;</span> <span style="color:#008000;">&#123;</span>
	<span style="color: #0000ff;">$title</span> = Title::<span style="color: #006600;">newFromText</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$page</span> <span style="color:#008000;">&#41;</span>;
	<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">pageByTitle</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$title</span> <span style="color:#008000;">&#41;</span>;
<span style="color:#008000;">&#125;</span>
<span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">closeStream</span><span style="color:#008000;">&#40;</span><span style="color:#008000;">&#41;</span>;
<span style="color:#3311cc;">fclose</span><span style="color:#008000;">&#40;</span> <span style="color: #0000ff;">$exporter</span>-&gt;<span style="color: #006600;">sink</span>-&gt;<span style="color: #006600;">handle</span> <span style="color:#008000;">&#41;</span>;
&#160;</pre>
</td></tr></table>
</td></tr></table>
<h2> <span class="mw-headline" id="See_also"> See also </span></h2>
<ul><li><a rel="nofollow" class="external text" href="http://svn.wikimedia.org/doc/">Deoxygen documentation</a>
</li><li><a rel="nofollow" class="external text" href="http://svn.wikimedia.org/svnroot/mediawiki/">MediaWiki SVN</a> / <a href="http://www.mediawiki.org/wiki/Subversion" class="extiw" title="mw:Subversion">MW:Subversion</a>
</li><li><a href="http://www.mediawiki.org/wiki/Manual:Coding_conventions" class="extiw" title="mw:Manual:Coding conventions">MW:Manual:Coding conventions</a>
</li><li><a href="http://www.mediawiki.org/wiki/How_to_become_a_MediaWiki_hacker" class="extiw" title="mw:How to become a MediaWiki hacker">MW:How to become a MediaWiki hacker</a>
</li><li><a rel="nofollow" class="external free" href="http://shrubbery.mynetgear.net/wiki/Installing_Mediawiki">http://shrubbery.mynetgear.net/wiki/Installing_Mediawiki</a>
</li></ul>

<!-- 
NewPP limit report
Preprocessor visited node count: 1093/1000000
Preprocessor generated node count: 1917/1000000
Postâexpand include size: 26853/2097152 bytes
Template argument size: 3574/2097152 bytes
Highest expansion depth: 4/40
Expensive parser function count: 0/100
-->
</td></tr>
		</table>
	</td></tr>
	</table>
	</td></tr>
</table>
<script>if(window.mw){
mw.loader.state({"site":"loading","user":"missing","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["ext.ajaxcomments","ext.treeandmenu","ext.formmailer","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.page.ready","mediawiki.searchSuggest","mediawiki.hidpi"], null, true);
}</script>
<link rel="stylesheet" type="text/css" href="/wiki/extensions/wikia.css" />
<script src="http://www.organicdesign.co.nz/wiki/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=organicdesign&amp;*"></script>
<!-- Served in 0.669 secs. -->
</body></html>
