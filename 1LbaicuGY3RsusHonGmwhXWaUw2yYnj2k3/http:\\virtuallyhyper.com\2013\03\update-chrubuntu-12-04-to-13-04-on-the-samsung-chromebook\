http://virtuallyhyper.com/2013/03/update-chrubuntu-12-04-to-13-04-on-the-samsung-chromebook/
HTTP/1.1 200 OK
Server: cloudflare-nginx
Date: Tue, 22 Jul 2014 23:36:15 GMT
Content-Type: text/html; charset=utf-8
Connection: close
Set-Cookie: __cfduid=d22b449d9f11d4cab56479b257c50b5a91406072175449; expires=Mon, 23-Dec-2019 23:50:00 GMT; path=/; domain=.virtuallyhyper.com; HttpOnly
Last-Modified: Wed, 16 Jul 2014 15:19:03 GMT
Expires: Tue, 22 Jul 2014 23:46:15 GMT
Cache-Control: max-age=600
Vary: Accept-Encoding
CF-RAY: 14e37598828d0f21-IAD
Content-Encoding: gzip


<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Update ChrUbuntu 12.04 to 13.04 on the Samsung Chromebook</title>
<meta name="author" content="VirtuallyHyper">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
 
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/dokv=88e434a982/"},atok:"6f7196a3a7f387f2a9d98daf8a1c03bd",petok:"6c59b1f1f8b4cadfb394fecbe4642b1a13cb771e-1406072175-1800",zone:"virtuallyhyper.com",rocket:"0",apps:{"ga_key":{"ua":"UA-7265705-7","ga_bs":"2"}}}];!function(a,b){a=document.createElement("script"),b=document.getElementsByTagName("script")[0],a.async=!0,a.src="//ajax.cloudflare.com/cdn-cgi/nexp/dokv=97fb4d042e/cloudflare.min.js",b.parentNode.insertBefore(a,b)}()}}catch(e){};
//]]>
</script>
<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
 
<script type="text/javascript">
//<![CDATA[
  (function() {
    var shr = document.createElement('script');
    shr.setAttribute('data-cfasync', 'false');
    shr.src = '//dsms0mj1bbhn4.cloudfront.net/assets/pub/shareaholic.js';
    shr.type = 'text/javascript'; shr.async = 'true';
    shr.onload = shr.onreadystatechange = function() {
      var rs = this.readyState;
      if (rs && rs != 'complete' && rs != 'loaded') return;
      var site_id = 'a59cdffe14bc028831ad82e874afb210';
      try { Shareaholic.init(site_id); } catch (e) {}
    };
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(shr, s);
  })();
//]]>
</script>
 
<link href="/assets/themes/twitter-2.0/css/bootstrap.min.css" rel="stylesheet">
<style type="text/css" media="screen">body{padding-top:60px; }</style>
<link href="/assets/themes/twitter-2.0/css/bootstrap-responsive.min.css" rel="stylesheet">
<link href="/assets/themes/twitter-2.0/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
<link href="/assets/themes/twitter-2.0/css/syntax.css" rel="stylesheet" type="text/css">
 
<link rel="shortcut icon" href="/assets/themes/twitter-2.0/favicon.ico">
 
<script type="text/javascript">
/* <![CDATA[ */
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-7265705-7']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

(function(b){(function(a){"__CF"in b&&"DJS"in b.__CF?b.__CF.DJS.push(a):"addEventListener"in b?b.addEventListener("load",a,!1):b.attachEvent("onload",a)})(function(){"FB"in b&&"Event"in FB&&"subscribe"in FB.Event&&(FB.Event.subscribe("edge.create",function(a){_gaq.push(["_trackSocial","facebook","like",a])}),FB.Event.subscribe("edge.remove",function(a){_gaq.push(["_trackSocial","facebook","unlike",a])}),FB.Event.subscribe("message.send",function(a){_gaq.push(["_trackSocial","facebook","send",a])}));"twttr"in b&&"events"in twttr&&"bind"in twttr.events&&twttr.events.bind("tweet",function(a){if(a){var b;if(a.target&&a.target.nodeName=="IFRAME")a:{if(a=a.target.src){a=a.split("#")[0].match(/[^?=&]+=([^&]*)?/g);b=0;for(var c;c=a[b];++b)if(c.indexOf("url")===0){b=unescape(c.split("=")[1]);break a}}b=void 0}_gaq.push(["_trackSocial","twitter","tweet",b])}})})})(window);
/* ]]> */
</script>
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner">
<div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</a>
<a class="brand" href="/">VirtuallyHyper</a>
<div class="nav-collapse">
<ul class="nav navbar-nav">
<li><a href="/about.html">About</a></li>
<li><a href="/archive.html">Archive</a></li>
<li><a href="/categories.html">Categories</a></li>
<li><a href="/search.html">Search</a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Certifications <b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="/2012/08/vcap5-dcd/">VCAP_DCD</a></li>
<li><a href="/2012/09/vcap5-dca/">VCAP_DCA</a></li>
<li class="divider"></li>
<li><a href="/2012/12/rhcsa-and-rhce-study-guide/">RHCSA_RCHE</a></li>
</ul>
</li>
</ul>
</div> 
</div>
</div>
</div>
<div class="container-fluid">
<div class="row-fluid">
<div class="span8">
<div class="content">
<div class="page-header">
<h1>Update ChrUbuntu 12.04 to 13.04 on the Samsung Chromebook</h1>
</div>
<i class="fa fa-calendar"></i> 12 March 2013 <i class="fa fa-user"></i> <a href="http://virtuallyhyper.com">Karim Elatov</a> <div style="float: right;"><i class="fa fa-comments"></i> <a href="/2013/03/update-chrubuntu-12-04-to-13-04-on-the-samsung-chromebook/#disqus_thread"></a></div>
<div class="tag_box">
<i class="fa fa-tags"></i>
<a href="/tags.html#ChromeBook-ref">ChromeBook <span>3</span></a>
<a href="/tags.html#ChrUbuntu-ref">ChrUbuntu <span>3</span></a>
</div>
<hr>
<p>The update process is not as smooth as the install process which I blogged about <a href="/2013/03/install-chrubuntu-12-04-on-samsung-chromebook">here</a>. Most of the instructions are laid at the following two sites:</p>
<ul>
<li><a href="http://marcin.juszkiewicz.com.pl/2013/02/16/how-to-update-chrubuntu-12-04-to-ubuntu-13-04/">How to update Chrubuntu 12.04 to Ubuntu 13.04</a></li>
<li><a href="http://floss.zoomquiet.io/data/20130524230746/index.html">Installing Ubuntu 13.04 on the Samsung Chromebook</a></li>
</ul>
<h3 id="update-using-the-aptitude-repositories">1. Update Using the Aptitude Repositories</h3>
<p>Let’s get to it, first let’s point the Aptitude repositories to point to the “Raring” release:</p>
<pre><code>sudo sed -i 's/precise/raring/g' /etc/apt/sources.list
</code></pre>
<p>Then update the repositories cache:</p>
<pre><code>sudo apt-get update
</code></pre>
<p>Then start the upgrade process:</p>
<pre><code>sudo apt-get dist-upgrade
</code></pre>
<p>The process will actually fail at the end of the update, but that is okay we can just force it:</p>
<pre><code>sudo apt-get -f install
</code></pre>
<p>In the process some packages will be removed unintentionally, so re-install them:</p>
<pre><code>sudo apt-get install ubuntu-desktop gnome-control-center nautilus nautilus-share nautilus-sendto eog unity libgnome-desktop-3.4 gnome-settings-daemon
</code></pre>
<h3 id="finishing-touches">2. Finishing Touches</h3>
<p>Let’s enable the Chromebook Hacker PPA and install the Chomebook utilities and updates:</p>
<pre><code>sudo add-apt-repository ppa:chromebook-arm/ppa
sudo apt-get update
sudo apt-get install cgpt vboot-kernel-utils linux-image-chromebook
sudo apt-get autoremove
sudo apt-get remove flash-kernel
</code></pre>
<p>Let’s sign our kernel:</p>
<pre><code>echo "console=tty1 printk.time=1 quiet nosplash rootwait root=/dev/mmcblk1p7 rw rootfstype=ext4" &gt; FILE
</code></pre>
<p>Notice my device is the external SD card (mmcblk1), now for the signature:</p>
<pre><code>sudo vbutilkernel --pack /boot/chronos-kernel-image --keyblock /usr/share/vboot/devkeys/kernel.keyblock --version 1 --signprivate /usr/share/vboot/devkeys/kerneldatakey.vbprivk --config FILE --vmlinuz /boot/vmlinuz-3.4.0.5-chromebook --arch arm
</code></pre>
<p>Also let’s copy our signed kernel to the SD Card:</p>
<pre><code>sudo dd if=/boot/chronos-kernel-image of=/dev/mmcblk1p1 bs=4M
</code></pre>
<p>Now reboot and you will boot into ChrUbuntu 13.04.</p>
<h3 id="fix-the-window-manager">3. Fix the Window Manager</h3>
<p>When the Chromebook reboots, it won’t be able to start it’s window manager and we have to pick a new one. So press <strong>CTRL+ALT+F1</strong> and log in with the <strong>user</strong>/<strong>user</strong> credentials and first install the new video driver:</p>
<pre><code>sudo apt-get install xserver-xorg-video-armsoc
</code></pre>
<p>Then I installed <strong>icewm</strong>:</p>
<pre><code>sudo apt-get install icewm
</code></pre>
<p>I, then, made IceWM the default window manager by editing the <strong>/etc/lightdm/lightdm.conf</strong> file and making it looks like this:</p>
<pre><code>[SeatDefaults]
user-session=IceWM
greeter-session=unity-greeter
#autologin-user=user
</code></pre>
<p>then I updated the rest of the packages:</p>
<pre><code>sudo apt-get update
sudo apt-get upgrade
</code></pre>
<p>I rebooted one more time, and I was then able to login into IceWM without issues.</p>
<h3 id="fix-post-update-issues">4. Fix Post-Update Issues</h3>
<p>After I rebooted, my sound stopped working for some reason. The <strong>alsamixer</strong> settings were correct but it seemed like <strong>pulseaudio</strong> was messing up my sound, so I removed <strong>pulseaudio</strong> and <strong>alsa-base</strong> like so:</p>
<pre><code>sudo apt-get remove --purge pulseaudio alsa-base
</code></pre>
<p>and then I just re-installed the <strong>alsa-base</strong> package:</p>
<pre><code>sudo apt-get install alsa-base
</code></pre>
<p>and then my sound started working without issues. Another issue I ran into was with my touchpad, the double tap and triple tap functionality was reversed (ie tripped tap was right click and double tap was middle click) not sure why. After messing around with <strong>synclient</strong>, I discovered the following settings fixed it:</p>
<pre><code>synclient | grep -i TapBu
TapButton1 = 1
TapButton2 = 3
TapButton3 = 2
</code></pre>
<p>To make those permanent, I added the following :</p>
<pre><code>Option "TapButton1" "1"
Option "TapButton2" "3"
Option "TapButton3" "2"
</code></pre>
<p>to the <strong>/usr/share/X11/xorg.conf.d/10-synaptics.conf</strong> file.</p>
<p>The last issue that I ran into was Chromium stopped playing HTML5 audio for some reason. I ran across <a href="http://www.chromestory.com/2012/07/google-music-html5-audio-not-working-in-chromium-here-is-the-fix/">this</a> post, and I fixed the issue by running the following:</p>
<pre><code>sudo apt-get install chromium-codecs-ffmpeg-extra
</code></pre>
<p>just for reference here is my chromium version:</p>
<pre><code>chromium-browser --version
Chromium 22.0.1229.94 Built on Ubuntu 12.10, running on Ubuntu 13.04
</code></pre>
<h3 id="some-keyboard-tweeks">5. Some keyboard tweeks</h3>
<p>I wanted to use the volume up and volume down keys on the keyboard (they corresponded to F9 and F10), since I was using IceWM it was pretty easy. I just added the following into my <strong>~/.icewm/keys</strong> files and they worked great:</p>
<pre><code>key "F8" amixer -c 0 set Speaker toggle
key "F9" amixer -c 0 set Speaker 1%-
key "F10" amixer -c 0 set Speaker 1%+
key "Ctrl+F8" amixer -c 0 set Headphone toggle
key "Ctrl+F9" amixer -c 0 set Headphone 1%-
key "Ctrl+F10" amixer -c 0 set Headphone 1%+
</code></pre>
<p>This allowed me to modify the HeadPhone and Speakers volume with the keyboard shortcuts that I defined.</p>
<p>I also wanted to have the brightness keys work as well (those corresponded to F6 and F7). I tried the package <strong>xbacklight</strong> but it didn’t work. Later I found that the <strong>/usr/lib/gnome-settings-daemon/gsd-backlight-helper</strong> worked without issues. So I wrote this quick script:</p>
<pre><code>elatov@crbook:~$ cat /usr/local/bin/chbr
#!/bin/bash
cur_bri=$(/usr/bin/pkexec /usr/lib/gnome-settings-daemon/gsd-backlight-helper --get-brightness)

if [ $1 == "up" ] ; then
    /usr/bin/pkexec /usr/lib/gnome-settings-daemon/gsd-backlight-helper --set-brightness $(($cur_bri+100))
fi

if [ $1 == "down" ] ; then
    /usr/bin/pkexec /usr/lib/gnome-settings-daemon/gsd-backlight-helper --set-brightness $(($cur_bri-100))
fi
</code></pre>
<p>and if you pass in <strong>up</strong> or <strong>down</strong> it decreases or increases the brightness by 100. My max brightness was at 2800 so this worked out for me (you can check out the max brightness by running <code>/usr/lib/gnome-settings-daemon/gsd-backlight-helper --get-max-brightness</code>). Then I added the following to my <strong>~/.icewm/keys</strong> file:</p>
<pre><code>key "F6"    /usr/local/bin/chbr down
key "F7"    /usr/local/bin/chbr up
</code></pre>
<p>I also noticed that the keyboard button right below the “<strong>Tab</strong>” key (the Search Key) was functioning as a “<strong>Windows</strong>” Key. That is usually the “<strong>Caps_Lock</strong>” key, so I changed the mapping for it to actually be the “<strong>Caps_Lock</strong>” key. Initially I used <strong>xev</strong> to find out what is the keycode of the keyboard button and then I added the following to my <strong>~/.Xmodmap</strong> file:</p>
<pre><code>elatov@crbook:~$ cat .Xmodmap
keycode 133 = Caps_Lock
</code></pre>
<p>Another thing I noticed was the “Disable Keyboard While Typing” Option wasn’t working. Starting up the <strong>syndaemon</strong> fix the issue for me. Here is what I added to my <strong>~/.icewm/startup</strong> file to start the daemon on startup:</p>
<pre><code>elatov@crbook:~$ grep syn .icewm/startup
syndaemon -t -k -i 1 -d
</code></pre>
<p>Lastly, I didn’t have the “Delete”, “PageDown”, or “Home” keys. In ChromeOS the following keyboard shortcuts existed that helped me.</p>
<pre><code>Page up                Alt and the up arrow
Page down              Alt and the down arrow
Home                   Ctrl+Alt, and the up arrow
End                    Ctrl+Alt, and the down arrow
Delete                 Alt and Backspace
</code></pre>
<p>You can see the full list <a href="http://support.google.com/chromeos/bin/answer.py?hl=en&amp;answer=183101">here</a>: To get this working we first need to install <strong>xbindkeys</strong> and <strong>xvkbd</strong>.</p>
<pre><code>elatov@crbook:~$ sudo apt-get install xbindkeys xvkbd
</code></pre>
<p>then create a <strong>~.xbindkeysrc</strong> file with the following contents:</p>
<pre><code>"xvkbd -xsendevent -text '\[Delete]'"
Alt + BackSpace

"xvkbd -xsendevent -text '\[Home]'"
Alt + Left

"xvkbd -xsendevent -text '\[End]'"
Alt + Right

"xvkbd -xsendevent -text '\[Page_Down]'"
Alt + Down

"xvkbd -xsendevent -text '\[Page_Up]'"
Alt + Up
</code></pre>
<p>then start <strong>xbindkeys</strong> by running:</p>
<pre><code>xbindkeys
</code></pre>
<p>We can add the above command to the <strong>~/.icewm/startup</strong> file, if we want it to auto-start upon login into IceWM. There are other alternatives to the keyboard shortcuts:</p>
<ul>
<li><a href="http://askubuntu.com/questions/249760/remap-shortcut-to-a-single-key-cannot-be-used">xmodtool</a></li>
<li><a href="http://code.google.com/p/autokey/">autokey</a></li>
</ul>
<p>And that’s it. Last note, you can check the status of your battery with the <strong>upower</strong> utility:</p>
<pre><code>elatov@crbook:~$ upower -d | grep -E 'time|percent|state'
    state:               charging
    time to full:        1.4 hours
    percentage:          34.1355%
</code></pre>
<div class='shareaholic-canvas' data-app='share_buttons' data-app-id='6778737' style="float: left"></div>
<div class="pagination" style="float: right">
<ul>
<li class="prev"><a href="/2013/03/monitor-different-systems-with-zenoss/" title="Monitor Different Systems with Zenoss">&larr; Previous</a></li>
<li><a href="/archive.html">Archive</a></li>
<li class="next"><a href="/2013/03/monitor-different-systems-with-zabbix/" title="Monitor Different Systems with Zabbix">Next &rarr;</a></li>
</ul>
</div>
<hr>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
 
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-7439655074445804" data-ad-slot="4448070391"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
<div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_shortname = 'virtuallyhyper'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
</div>
<div class="span4">
<div class="sidebar">
<div class="social sidebar-item">
<a href="https://twitter.com/virtuallyhyper" class="twitter-follow-button" data-show-count="false">Follow @virtuallyhyper</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
</div>
<div class="sidebar-item">
<h2>Want to support us?</h2>
<a href="http://bit.ly/donate-to-virtuallyhyper" target="_blank">
<img src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif"/>
</a>
<a href="http://flattr.com/thing/1101166/VirtuallyHyper" target="_blank">
<img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0"/></a>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="https://blockchain.info//Resources/wallet/pay-now-button.js"></script>
<div style="font-size:8px;margin:0 auto;width:100%" class="blockchain-btn" data-address="1LbaicuGY3RsusHonGmwhXWaUw2yYnj2k3" data-shared="false">
<div class="blockchain stage-begin">
<img src="http://i.imgur.com/zTI9f5u.png"/>
</div>
<div class="blockchain stage-loading" style="text-align:center">
<img src="https://blockchain.info//Resources/loading-large.gif"/>
</div>
<div class="blockchain stage-ready">
<p align="center">Our Bitcoin Address: <b><br><small>[[address]]</small></b></p>
<p align="center" class="qr-code"></p>
</div>
<div class="blockchain stage-paid">
Donation of <b>[[value]] BTC</b> Received. Thank You.
</div>
<div class="blockchain stage-error">
<font color="red">[[error]]</font>
</div>
</div>
<script type='text/javascript'>
              var amzn_wdgt={widget:'MyFavorites'};
              amzn_wdgt.tag='virtuallyhyper-20';
              amzn_wdgt.columns='1';
              amzn_wdgt.rows='3';
              amzn_wdgt.title='Henri-Cartier-Bresson: Photographer Extraordinaire';
              amzn_wdgt.width='250';
              amzn_wdgt.ASIN='0893817449,0500410607,050054199X,0500286426,0893818755,050054333X,0500543178,0945506562';
              amzn_wdgt.showImage='True';
              amzn_wdgt.showPrice='True';
              amzn_wdgt.showRating='True';
              amzn_wdgt.design='2';
              amzn_wdgt.colorTheme='Orange';
              amzn_wdgt.headerTextColor='#FFFFFF';
              amzn_wdgt.marketPlace='US';
            </script>
<script type='text/javascript' src='http://wms-na.amazon-adsystem.com/20070822/US//js/AmazonWidgets.js'>
            </script>
</div> 
</div>
</div> 
</div> 
<footer>
<p>&copy;VirtuallyHyper 2014. Thoughts are our own and may not neccessarily represent the companies we work for.
</p>
</footer>
</div> 
 
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'virtuallyhyper'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
var s = document.createElement('script'); s.async = true;
s.type = 'text/javascript';
s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
 
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/themes/twitter-2.0/js/jquery.min.js"><\/script>')</script>
 
<script src="/assets/themes/twitter-2.0/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-7265705-7', 'virtuallyhyper.com');
  ga('send', 'pageview');

</script>
</body>
</html>

