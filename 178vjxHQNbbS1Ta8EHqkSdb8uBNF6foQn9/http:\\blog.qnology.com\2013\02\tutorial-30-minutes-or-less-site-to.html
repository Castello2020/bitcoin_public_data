http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html
HTTP/1.0 200 OK
Content-Type: text/html; charset=UTF-8
Expires: Thu, 24 Jul 2014 14:37:55 GMT
Date: Thu, 24 Jul 2014 14:37:55 GMT
Cache-Control: private, max-age=0
Last-Modified: Wed, 23 Jul 2014 16:31:38 GMT
ETag: "7db6c5db-d285-42d6-9488-b94b7708ddae"
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Server: GSE
Alternate-Protocol: 80:quic,80:quic

<!DOCTYPE html>
<html class='v2' dir='ltr' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
<meta content='width=1100' name='viewport'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<script type="text/javascript">(function() { var b=window,f="chrome",g="tick",k="jstiming";(function(){function d(a){this.t={};this.tick=function(a,d,c){var e=void 0!=c?c:(new Date).getTime();this.t[a]=[e,d];if(void 0==c)try{b.console.timeStamp("CSI/"+a)}catch(h){}};this[g]("start",null,a)}var a;b.performance&&(a=b.performance.timing);var n=a?new d(a.responseStart):new d;b.jstiming={Timer:d,load:n};if(a){var c=a.navigationStart,h=a.responseStart;0<c&&h>=c&&(b[k].srt=h-c)}if(a){var e=b[k].load;0<c&&h>=c&&(e[g]("_wtsrt",void 0,c),e[g]("wtsrt_","_wtsrt",h),e[g]("tbsd_","wtsrt_"))}try{a=null,
b[f]&&b[f].csi&&(a=Math.floor(b[f].csi().pageT),e&&0<c&&(e[g]("_tbnd",void 0,b[f].csi().startE),e[g]("tbnd_","_tbnd",c))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),null==a&&b.external&&(a=b.external.pageT,e&&0<c&&(e[g]("_tbnd",void 0,b.external.startE),e[g]("tbnd_","_tbnd",c))),a&&(b[k].pt=a)}catch(p){}})();b.tickAboveFold=function(d){var a=0;if(d.offsetParent){do a+=d.offsetTop;while(d=d.offsetParent)}d=a;750>=d&&b[k].load[g]("aft")};var l=!1;function m(){l||(l=!0,b[k].load[g]("firstScrollTime"))}b.addEventListener?b.addEventListener("scroll",m,!1):b.attachEvent("onscroll",m);
 })();</script>
<meta content='blogger' name='generator'/>
<link href='http://blog.qnology.com/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Qui&#39;s techNOLOGY Blog - Atom" href="http://blog.qnology.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Qui&#39;s techNOLOGY Blog - RSS" href="http://blog.qnology.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Qui&#39;s techNOLOGY Blog - Atom" href="http://www.blogger.com/feeds/1622307871085727432/posts/default" />

<link rel="alternate" type="application/atom+xml" title="Qui&#39;s techNOLOGY Blog - Atom" href="http://blog.qnology.com/feeds/379901354419772042/comments/default" />
<!--[if IE]><script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/2616044812-ieretrofit.js"></script>
<![endif]-->
<link href='http://3.bp.blogspot.com/--Q8NhPCY2V0/USO2jMi6yNI/AAAAAAAAAWM/ISxLajz15H4/s320/VPN+Server+Basic+Config.PNG' rel='image_src'/>
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>
Qui's techNOLOGY Blog: [Tutorial - 30 Minutes or Less] Site to Site VPN with TomatoUSB and OpenVPN
</title>
<link type='text/css' rel='stylesheet' href='https://www.blogger.com/static/v1/widgets/1535467126-widget_css_2_bundle.css' />
<link type='text/css' rel='stylesheet' href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=1622307871085727432&zx=7db6c5db-d285-42d6-9488-b94b7708ddae' />
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Simple
Designer: Josh Peterson
URL:      www.noaesthetic.com
----------------------------------------------- */
/* Variable definitions
====================
<Variable name="keycolor" description="Main Color" type="color" default="#66bbdd"/>
<Group description="Page Text" selector="body">
<Variable name="body.font" description="Font" type="font"
default="normal normal 12px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="body.text.color" description="Text Color" type="color" default="#222222"/>
</Group>
<Group description="Backgrounds" selector=".body-fauxcolumns-outer">
<Variable name="body.background.color" description="Outer Background" type="color" default="#66bbdd"/>
<Variable name="content.background.color" description="Main Background" type="color" default="#ffffff"/>
<Variable name="header.background.color" description="Header Background" type="color" default="transparent"/>
</Group>
<Group description="Links" selector=".main-outer">
<Variable name="link.color" description="Link Color" type="color" default="#2288bb"/>
<Variable name="link.visited.color" description="Visited Color" type="color" default="#888888"/>
<Variable name="link.hover.color" description="Hover Color" type="color" default="#33aaff"/>
</Group>
<Group description="Blog Title" selector=".header h1">
<Variable name="header.font" description="Font" type="font"
default="normal normal 60px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="header.text.color" description="Title Color" type="color" default="#3399bb" />
</Group>
<Group description="Blog Description" selector=".header .description">
<Variable name="description.text.color" description="Description Color" type="color"
default="#777777" />
</Group>
<Group description="Tabs Text" selector=".tabs-inner .widget li a">
<Variable name="tabs.font" description="Font" type="font"
default="normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="tabs.text.color" description="Text Color" type="color" default="#999999"/>
<Variable name="tabs.selected.text.color" description="Selected Color" type="color" default="#000000"/>
</Group>
<Group description="Tabs Background" selector=".tabs-outer .PageList">
<Variable name="tabs.background.color" description="Background Color" type="color" default="#f5f5f5"/>
<Variable name="tabs.selected.background.color" description="Selected Color" type="color" default="#eeeeee"/>
</Group>
<Group description="Post Title" selector="h3.post-title, .comments h4">
<Variable name="post.title.font" description="Font" type="font"
default="normal normal 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
</Group>
<Group description="Date Header" selector=".date-header">
<Variable name="date.header.color" description="Text Color" type="color"
default="#666666"/>
<Variable name="date.header.background.color" description="Background Color" type="color"
default="transparent"/>
</Group>
<Group description="Post Footer" selector=".post-footer">
<Variable name="post.footer.text.color" description="Text Color" type="color" default="#666666"/>
<Variable name="post.footer.background.color" description="Background Color" type="color"
default="#f9f9f9"/>
<Variable name="post.footer.border.color" description="Shadow Color" type="color" default="#eeeeee"/>
</Group>
<Group description="Gadgets" selector="h2">
<Variable name="widget.title.font" description="Title Font" type="font"
default="normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="widget.title.text.color" description="Title Color" type="color" default="#000000"/>
<Variable name="widget.alternate.text.color" description="Alternate Color" type="color" default="#999999"/>
</Group>
<Group description="Images" selector=".main-inner">
<Variable name="image.background.color" description="Background Color" type="color" default="#ffffff"/>
<Variable name="image.border.color" description="Border Color" type="color" default="#eeeeee"/>
<Variable name="image.text.color" description="Caption Text Color" type="color" default="#666666"/>
</Group>
<Group description="Accents" selector=".content-inner">
<Variable name="body.rule.color" description="Separator Line Color" type="color" default="#eeeeee"/>
<Variable name="tabs.border.color" description="Tabs Border Color" type="color" default="transparent"/>
</Group>
<Variable name="body.background" description="Body Background" type="background"
color="#ffffff" default="$(color) none repeat scroll top left"/>
<Variable name="body.background.override" description="Body Background Override" type="string" default=""/>
<Variable name="body.background.gradient.cap" description="Body Gradient Cap" type="url"
default="url(//www.blogblog.com/1kt/simple/gradients_light.png)"/>
<Variable name="body.background.gradient.tile" description="Body Gradient Tile" type="url"
default="url(//www.blogblog.com/1kt/simple/body_gradient_tile_light.png)"/>
<Variable name="content.background.color.selector" description="Content Background Color Selector" type="string" default=".content-inner"/>
<Variable name="content.padding" description="Content Padding" type="length" default="10px"/>
<Variable name="content.padding.horizontal" description="Content Horizontal Padding" type="length" default="10px"/>
<Variable name="content.shadow.spread" description="Content Shadow Spread" type="length" default="40px"/>
<Variable name="content.shadow.spread.webkit" description="Content Shadow Spread (WebKit)" type="length" default="5px"/>
<Variable name="content.shadow.spread.ie" description="Content Shadow Spread (IE)" type="length" default="10px"/>
<Variable name="main.border.width" description="Main Border Width" type="length" default="0"/>
<Variable name="header.background.gradient" description="Header Gradient" type="url" default="none"/>
<Variable name="header.shadow.offset.left" description="Header Shadow Offset Left" type="length" default="-1px"/>
<Variable name="header.shadow.offset.top" description="Header Shadow Offset Top" type="length" default="-1px"/>
<Variable name="header.shadow.spread" description="Header Shadow Spread" type="length" default="1px"/>
<Variable name="header.padding" description="Header Padding" type="length" default="30px"/>
<Variable name="header.border.size" description="Header Border Size" type="length" default="1px"/>
<Variable name="header.bottom.border.size" description="Header Bottom Border Size" type="length" default="1px"/>
<Variable name="header.border.horizontalsize" description="Header Horizontal Border Size" type="length" default="0"/>
<Variable name="description.text.size" description="Description Text Size" type="string" default="140%"/>
<Variable name="tabs.margin.top" description="Tabs Margin Top" type="length" default="0" />
<Variable name="tabs.margin.side" description="Tabs Side Margin" type="length" default="30px" />
<Variable name="tabs.background.gradient" description="Tabs Background Gradient" type="url"
default="url(//www.blogblog.com/1kt/simple/gradients_light.png)"/>
<Variable name="tabs.border.width" description="Tabs Border Width" type="length" default="1px"/>
<Variable name="tabs.bevel.border.width" description="Tabs Bevel Border Width" type="length" default="1px"/>
<Variable name="date.header.padding" description="Date Header Padding" type="string" default="inherit"/>
<Variable name="date.header.letterspacing" description="Date Header Letter Spacing" type="string" default="inherit"/>
<Variable name="date.header.margin" description="Date Header Margin" type="string" default="inherit"/>
<Variable name="post.margin.bottom" description="Post Bottom Margin" type="length" default="25px"/>
<Variable name="image.border.small.size" description="Image Border Small Size" type="length" default="2px"/>
<Variable name="image.border.large.size" description="Image Border Large Size" type="length" default="5px"/>
<Variable name="page.width.selector" description="Page Width Selector" type="string" default=".region-inner"/>
<Variable name="page.width" description="Page Width" type="string" default="auto"/>
<Variable name="main.section.margin" description="Main Section Margin" type="length" default="15px"/>
<Variable name="main.padding" description="Main Padding" type="length" default="15px"/>
<Variable name="main.padding.top" description="Main Padding Top" type="length" default="30px"/>
<Variable name="main.padding.bottom" description="Main Padding Bottom" type="length" default="30px"/>
<Variable name="paging.background"
color="#ffffff"
description="Background of blog paging area" type="background"
default="transparent none no-repeat scroll top center"/>
<Variable name="footer.bevel" description="Bevel border length of footer" type="length" default="0"/>
<Variable name="mobile.background.overlay" description="Mobile Background Overlay" type="string"
default="transparent none repeat scroll top left"/>
<Variable name="mobile.background.size" description="Mobile Background Size" type="string" default="auto"/>
<Variable name="mobile.button.color" description="Mobile Button Color" type="color" default="#ffffff" />
<Variable name="startSide" description="Side where text starts in blog language" type="automatic" default="left"/>
<Variable name="endSide" description="Side where text ends in blog language" type="automatic" default="right"/>
*/
/* Content
----------------------------------------------- */
body, .body-fauxcolumn-outer {
font: normal normal 12px 'Trebuchet MS', Trebuchet, Verdana, sans-serif;
color: #666666;
background: #ffffff none repeat scroll top left;
padding: 0 0 0 0;
}
html body .region-inner {
min-width: 0;
max-width: 100%;
width: auto;
}
a:link {
text-decoration:none;
color: #2288bb;
}
a:visited {
text-decoration:none;
color: #888888;
}
a:hover {
text-decoration:underline;
color: #33aaff;
}
.body-fauxcolumn-outer .fauxcolumn-inner {
background: transparent none repeat scroll top left;
_background-image: none;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 400px;
width: 100%;
background: #ffffff none repeat scroll top left;
}
.body-fauxcolumn-outer .cap-top .cap-left {
width: 100%;
background: transparent none repeat-x scroll top left;
_background-image: none;
}
.content-outer {
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .15);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .15);
-goog-ms-box-shadow: 0 0 0 #333333;
box-shadow: 0 0 0 rgba(0, 0, 0, .15);
margin-bottom: 1px;
}
.content-inner {
padding: 10px 40px;
}
.content-inner {
background-color: #ffffff;
}
/* Header
----------------------------------------------- */
.header-outer {
background: transparent none repeat-x scroll 0 -400px;
_background-image: none;
}
.Header h1 {
font: normal normal 40px 'Trebuchet MS',Trebuchet,Verdana,sans-serif;
color: #000000;
text-shadow: 0 0 0 rgba(0, 0, 0, .2);
}
.Header h1 a {
color: #000000;
}
.Header .description {
font-size: 18px;
color: #000000;
}
.header-inner .Header .titlewrapper {
padding: 22px 0;
}
.header-inner .Header .descriptionwrapper {
padding: 0 0;
}
/* Tabs
----------------------------------------------- */
.tabs-inner .section:first-child {
border-top: 0 solid #dddddd;
}
.tabs-inner .section:first-child ul {
margin-top: -1px;
border-top: 1px solid #dddddd;
border-left: 1px solid #dddddd;
border-right: 1px solid #dddddd;
}
.tabs-inner .widget ul {
background: transparent none repeat-x scroll 0 -800px;
_background-image: none;
border-bottom: 1px solid #dddddd;
margin-top: 0;
margin-left: -30px;
margin-right: -30px;
}
.tabs-inner .widget li a {
display: inline-block;
padding: .6em 1em;
font: normal normal 12px 'Trebuchet MS', Trebuchet, Verdana, sans-serif;
color: #000000;
border-left: 1px solid #ffffff;
border-right: 1px solid #dddddd;
}
.tabs-inner .widget li:first-child a {
border-left: none;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
color: #000000;
background-color: #eeeeee;
text-decoration: none;
}
/* Columns
----------------------------------------------- */
.main-outer {
border-top: 0 solid transparent;
}
.fauxcolumn-left-outer .fauxcolumn-inner {
border-right: 1px solid transparent;
}
.fauxcolumn-right-outer .fauxcolumn-inner {
border-left: 1px solid transparent;
}
/* Headings
----------------------------------------------- */
h2 {
margin: 0 0 1em 0;
font: normal bold 11px 'Trebuchet MS',Trebuchet,Verdana,sans-serif;
color: #000000;
}
/* Widgets
----------------------------------------------- */
.widget .zippy {
color: #999999;
text-shadow: 2px 2px 1px rgba(0, 0, 0, .1);
}
.widget .popular-posts ul {
list-style: none;
}
/* Posts
----------------------------------------------- */
.date-header span {
background-color: #bbbbbb;
color: #ffffff;
padding: 0.4em;
letter-spacing: 3px;
margin: inherit;
}
.main-inner {
padding-top: 35px;
padding-bottom: 65px;
}
.main-inner .column-center-inner {
padding: 0 0;
}
.main-inner .column-center-inner .section {
margin: 0 1em;
}
.post {
margin: 0 0 45px 0;
}
h3.post-title, .comments h4 {
font: normal normal 22px 'Trebuchet MS',Trebuchet,Verdana,sans-serif;
margin: .75em 0 0;
}
.post-body {
font-size: 110%;
line-height: 1.4;
position: relative;
}
.post-body img, .post-body .tr-caption-container, .Profile img, .Image img,
.BlogList .item-thumbnail img {
padding: 2px;
background: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
}
.post-body img, .post-body .tr-caption-container {
padding: 5px;
}
.post-body .tr-caption-container {
color: #666666;
}
.post-body .tr-caption-container img {
padding: 0;
background: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
.post-header {
margin: 0 0 1.5em;
line-height: 1.6;
font-size: 90%;
}
.post-footer {
margin: 20px -2px 0;
padding: 5px 10px;
color: #666666;
background-color: #eeeeee;
border-bottom: 1px solid #eeeeee;
line-height: 1.6;
font-size: 90%;
}
#comments .comment-author {
padding-top: 1.5em;
border-top: 1px solid transparent;
background-position: 0 1.5em;
}
#comments .comment-author:first-child {
padding-top: 0;
border-top: none;
}
.avatar-image-container {
margin: .2em 0 0;
}
#comments .avatar-image-container img {
border: 1px solid #eeeeee;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
}
.comments .comment-thread.inline-thread {
background-color: #eeeeee;
}
.comments .continue {
border-top: 2px solid #999999;
}
/* Accents
---------------------------------------------- */
.section-columns td.columns-cell {
border-left: 1px solid transparent;
}
.blog-pager {
background: transparent url(//www.blogblog.com/1kt/simple/paging_dot.png) repeat-x scroll top center;
}
.blog-pager-older-link, .home-link,
.blog-pager-newer-link {
background-color: #ffffff;
padding: 5px;
}
.footer-outer {
border-top: 1px dashed #bbbbbb;
}
/* Mobile
----------------------------------------------- */
body.mobile  {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
.mobile .body-fauxcolumn-outer .cap-top {
background-size: 100% auto;
}
.mobile .content-outer {
-webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .15);
box-shadow: 0 0 3px rgba(0, 0, 0, .15);
}
body.mobile .AdSense {
margin: 0 -0;
}
.mobile .tabs-inner .widget ul {
margin-left: 0;
margin-right: 0;
}
.mobile .post {
margin: 0;
}
.mobile .main-inner .column-center-inner .section {
margin: 0;
}
.mobile .date-header span {
padding: 0.1em 10px;
margin: 0 -10px;
}
.mobile h3.post-title {
margin: 0;
}
.mobile .blog-pager {
background: transparent none no-repeat scroll top center;
}
.mobile .footer-outer {
border-top: none;
}
.mobile .main-inner, .mobile .footer-inner {
background-color: #ffffff;
}
.mobile-index-contents {
color: #666666;
}
.mobile-link-button {
background-color: #2288bb;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .section:first-child {
border-top: none;
}
.mobile .tabs-inner .PageList .widget-content {
background-color: #eeeeee;
color: #000000;
border-top: 1px solid #dddddd;
border-bottom: 1px solid #dddddd;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #dddddd;
}

--></style>
<style id='template-skin-1' type='text/css'><!--
body {
min-width: 1200px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 1200px;
max-width: 1200px;
_width: 1200px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 250px;
}
.main-inner .fauxcolumn-center-outer {
left: 0px;
right: 250px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0px") -
parseInt("250px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0px;
}
.main-inner .fauxcolumn-right-outer {
width: 250px;
}
.main-inner .column-left-outer {
width: 0px;
right: 100%;
margin-left: -0px;
}
.main-inner .column-right-outer {
width: 250px;
margin-right: -250px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
--></style>
<script type='text/javascript'>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-43239879-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = (document.location.protocol == 'https:' ?
                  'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
<script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                              })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-43239879-1', 'qnology.com');
      ga('send', 'pageview');
    </script>
<script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('headEnd');
</script></head>
<body class='loading'>
<div class='navbar section' id='navbar'><div class='widget Navbar' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
        gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
          if (gapi.iframes && gapi.iframes.getContext) {
            gapi.iframes.getContext().openChild({
                url: 'https://www.blogger.com/navbar.g?targetBlogID\0751622307871085727432\46blogName\75Qui\47s+techNOLOGY+Blog\46publishMode\75PUBLISH_MODE_HOSTED\46navbarType\75BLUE\46layoutType\75LAYOUTS\46searchRoot\75http://blog.qnology.com/search\46blogLocale\75en\46v\0752\46homepageUrl\75http://blog.qnology.com/\46targetPostID\075379901354419772042\46blogPostOrPageUrl\75http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html\46vt\0751952556731799879686',
                where: document.getElementById("navbar-iframe-container"),
                id: "navbar-iframe"
            });
          }
        });
      </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div class='body-fauxcolumns'>
<div class='fauxcolumn-outer body-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content'>
<div class='content-fauxcolumns'>
<div class='fauxcolumn-outer content-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content-outer'>
<div class='content-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left content-fauxborder-left'>
<div class='fauxborder-right content-fauxborder-right'></div>
<div class='content-inner'>
<header>
<div class='header-outer'>
<div class='header-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left header-fauxborder-left'>
<div class='fauxborder-right header-fauxborder-right'></div>
<div class='region-inner header-inner'>
<div class='header section' id='header'><div class='widget Header' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://blog.qnology.com/'>
Qui's techNOLOGY Blog
</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'>
<span>
A Blog on Technology - gadgets and gizmos and things like that.
</span>
</p>
</div>
</div>
</div></div>
</div>
</div>
<div class='header-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</header>
<div class='tabs-outer'>
<div class='tabs-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left tabs-fauxborder-left'>
<div class='fauxborder-right tabs-fauxborder-right'></div>
<div class='region-inner tabs-inner'>
<div class='tabs section' id='crosscol'></div>
<div class='tabs section' id='crosscol-overflow'></div>
</div>
</div>
<div class='tabs-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='main-outer'>
<div class='main-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left main-fauxborder-left'>
<div class='fauxborder-right main-fauxborder-right'></div>
<div class='region-inner main-inner'>
<div class='columns fauxcolumns'>
<div class='fauxcolumn-outer fauxcolumn-center-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-left-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-right-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class='columns-inner'>
<div class='column-center-outer'>
<div class='column-center-inner'>
<div class='main section' id='main'><div class='widget Blog' id='Blog1'>
<div class='blog-posts hfeed'>
<!-- google_ad_section_start(name=default) -->

                                        <div class="date-outer">
                                      
<h2 class='date-header'>
<span>
Tuesday, February 19, 2013
</span>
</h2>

                                        <div class="date-posts">
                                      
<div class='post-outer'>
<div class='post hentry' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='http://3.bp.blogspot.com/--Q8NhPCY2V0/USO2jMi6yNI/AAAAAAAAAWM/ISxLajz15H4/s320/VPN+Server+Basic+Config.PNG' itemprop='image_url'/>
<meta content='1622307871085727432' itemprop='blogId'/>
<meta content='379901354419772042' itemprop='postId'/>
<a name='379901354419772042'></a>
<h3 class='post-title entry-title' itemprop='name'>
[Tutorial - 30 Minutes or Less] Site to Site VPN with TomatoUSB and OpenVPN
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-379901354419772042' itemprop='description articleBody'>
<span style="font-family: inherit;">The intent of the tutorial is to provide you with the <u><b>quickest and least painful</b></u>&nbsp;step-by-step process for setting up a secure, yet simple, Site to Site VPN between two locations using TomatoUSB and OpenVPN, allowing resources to be accessed and shared from both locations (<span style="background-color: white; color: #222222; line-height: 18px;">resources behind the routers will be accessible to each other)</span>.</span><br />
<br />
A Site to Site VPN can be setup between your home and business, two office locations, or between family members. Some common use cases would be to share files, printers, provide technical support (RDP/VNC), &nbsp;view webcams (without opening webcam to the internet) and my favorite, as a mean for secure offsite backups.<br />
<br />
By going through this tutorial you'll also learn:<br />
&nbsp; &nbsp; - How to setup a Certificate Authority on your router and generate Certificates and Keys<br />
&nbsp; &nbsp; - Setup (free) Dynamic DNS<br />
&nbsp; &nbsp; - Setup cross site name resolution (static DNS host entries)<br />
&nbsp; &nbsp; - A little bit on expanding the setup to include Client to Site VPN<br />
&nbsp; &nbsp; - How to enable SFTP on your router for secure access to certificates and keys<br />
&nbsp; <br />
Last updated and verified on 3/3/2014<br />
<br />
Here's a video walk-through of the whole process (24 minutes!). Note that this video is a little dated and should only be used as a reference. This blog has the correct instructions:<br />
<iframe allowfullscreen="" frameborder="0" height="315" src="http://www.youtube.com/embed/QsaYzgOIn6w?rel=0" width="560"></iframe>

<b><span style="font-size: large;"><br /></span></b>
<b><span style="font-size: large;"><br /></span></b><br />
<b><span style="font-size: large;"><br /></span></b>
<b><span style="font-size: large;">What you'll need:</span></b><br />
<ol>
<li>Two routers with Tomato already installed.<span style="color: red;">*</span></li>
<ol>
<li>The OpenVPN Server router should be running TomatoUSB (with a USB port)</li>
<li>The OpenVPN Client router can run regular Tomato (no USB port required)</li>
</ol>
<li>USB Flash Drive &gt;=1GB (<b>will be&nbsp;completely&nbsp;wiped</b>)</li>
<li>Publicly accessible IP address for OpenVPN Server router.</li>
</ol>
<span style="color: red;">*&nbsp;</span>If you're looking for a recommendation on which router to use for this project, please check out the Belkin routers I mention in this post,&nbsp;<a href="http://blog.qnology.com/2012/12/tutorial-apple-airplay-on-tomatousb.html" target="_blank">[Tutorial] Apple AirPlay on TomatoUSB Router</a>.<br />
<br />
<b><span style="font-size: large;">Outline of Steps</span></b><br />
<br />
1) Setup OpenVPN Server on Site A Router<br />
<ol>
</ol>
&nbsp; &nbsp; &nbsp; &nbsp; a) Setup Entware (package manager)<br />
&nbsp; &nbsp; &nbsp; &nbsp; b) Generate RSA Certificates and Keys<br />
<div>
&nbsp; &nbsp; &nbsp; &nbsp; c) Configure OpenVPN Server</div>
<div>
</div>
<div>
&nbsp; &nbsp; &nbsp; &nbsp; d) Setup Free Dynamic DNS Service</div>
<div>
&nbsp; &nbsp; &nbsp; &nbsp; e) Start OpenVPN Server</div>
<div>
<ol><ol>
</ol>
</ol>
2) Setup OpenVPN Client on Site B Router<br />
&nbsp; &nbsp; &nbsp; <br />
<div>
&nbsp; &nbsp; &nbsp; &nbsp; a) Configure OpenVPN Client<br />
<ol><ol>
</ol>
</ol>
3) Setup Cross Site Name Resolution [Added 10/19/2013]<br />
4) That's it! Enjoy.<br />
<br />
<b><span style="font-size: large;">Network Info</span></b><br />
<br />
<b>Site A</b><br />
&nbsp; &nbsp; &nbsp;OpenVPN Server<br />
&nbsp; &nbsp; &nbsp;Internal network/subnetmask - 192.168.<b>1</b>.0/255.255.255.0<br />
&nbsp; &nbsp; &nbsp;External Public IP Address<br />
<br />
<b><span style="color: #cc0000;">Site B</span></b><br />
<span style="color: #cc0000;">&nbsp; &nbsp; &nbsp;OpenVPN Client</span><br />
<span style="color: #cc0000;">&nbsp; &nbsp; &nbsp;Internal network/subnetmask - 192.168.<b>2</b>.0/255.255.255.0</span><br />
<span style="color: #cc0000;">&nbsp; &nbsp; &nbsp;External Public IP Address</span><br />
<div>
<br /></div>
-------------------------------------------------------------------------------<br />
<b><span style="font-size: x-large;">LETS GET STARTED!</span></b><br />
<b><span style="font-size: large;"><br /></span></b>
<b><span style="font-size: large;">Setup OpenVPN Server on Site A Router</span></b><br />
<br />
Plug in USB flash drive. Make sure the router has internet access.<br />
Connect via SSH into router. For Windows, I recommend&nbsp;<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">Putty</a>.<br />
Log in with username of <i>root </i>and password of <i>admin</i>.<br />
<br />
Execute the following commands:<br />
<br />
<span style="font-family: Courier New, Courier, monospace;">#Partition your usb flash drive <br />umount /dev/sda1<br />fdisk /dev/sda</span><br />
<br />
<div style="background-color: white; text-align: -webkit-auto;">
<span style="font-family: inherit;">Type in the following commands to create a primary partition on your USB Flash drive</span><br />
<span style="font-family: inherit;"># p &nbsp; &nbsp; &nbsp;&nbsp;# list current partitions</span><br />
<span style="font-family: inherit;"># o &nbsp; &nbsp; &nbsp; # to delete all partitions</span><br />
<span style="font-family: inherit;"># n &nbsp; &nbsp; &nbsp; # new partition</span><br />
<span style="font-family: inherit;"># p &nbsp; &nbsp; &nbsp; # primary partition</span><br />
<span style="font-family: inherit;"># 1 (one) # first partition</span><br />
<span style="font-family: inherit;"># &lt;enter&gt; # default start block</span><br />
<span style="font-family: inherit;"># &lt;enter&gt; # default end block #use the whole flash drive</span><br />
<span style="font-family: inherit;"># w &nbsp; &nbsp; &nbsp; # write new partition to disk</span></div>
<span style="font-family: Courier New, Courier, monospace;"><br />#format newly created partition<br />#label disk as 'optware' case sensitive</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">umount /dev/sda1</span><span style="font-family: Courier New, Courier, monospace;"><br />mke2fs -j -L optware /dev/sda1</span><br />
<br />
<b>Install Entware (</b>a package manager that allows you to install additional software on your router)<br />
<br />
<div>
<span style="font-family: Courier New, Courier, monospace;">#mount the new disk partition<br />mount /dev/sda1 /opt<br />cd /opt<br />wget http://wl500g-repo.googlecode.com/svn/ipkg/entware_install.sh<br />sh ./entware_install.sh</span><br />
<br />
<div style="background-color: white; line-height: 18px;">
<span style="font-family: Courier New, Courier, monospace;">#Make sure /opt is properly mounted on a reboot.</span></div>
<div style="background-color: white; line-height: 18px;">
<span style="font-family: Courier New, Courier, monospace;">echo "LABEL=optware /opt ext3 defaults 1 1" &gt;&gt; /etc/fstab</span></div>
<span style="font-family: Courier New, Courier, monospace;"><span style="background-color: white; line-height: 18px;">nvram setfile2nvram /etc/fstab&nbsp;</span></span><br />
<div style="background-color: white; line-height: 18px;">
<span style="font-family: Courier New, Courier, monospace;">nvram commit</span></div>
<br />
<br />
<b>Install openvpn-easy-rsa</b><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">opkg install openvpn-easy-rsa nano</span><br />
<b><br /></b>
<b>Setup working folder for openvpn-easy-rsa</b><br />
It's recommended that you cut/paste everything up to Setup CA section into your console window to prevent any error/typos<span style="font-family: Courier New, Courier, monospace;"><br /></span><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">#copy files to working directory</span><br />
<span style="font-family: Courier New, Courier, monospace;">cd /opt/etc/easy-rsa</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/sign-req .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/build-req .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/inherit-inter .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/revoke-full .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/clean-all .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/build-ca .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/pkitool .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/build-dh .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/build-key-pass .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/build-key-pkcs12 .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/list-crl .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/whichopensslcnf .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/build-key-server .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/build-key .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/etc/easy-rsa/openssl-1.0.0.cnf .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/build-inter .</span><br />
<span style="font-family: Courier New, Courier, monospace;">cp /opt/sbin/build-req-pass .</span><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">#reduce key_size to 1024 in vars file</span><br />
<span style="font-family: Courier New, Courier, monospace;">cd /opt/etc/easy-rsa</span><br />
<span style="font-family: Courier New, Courier, monospace;">sed -i 's:KEY_SIZE=2048:KEY_SIZE=1024:' ./vars</span><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">#update PATH to pick up correct openssl (save a reboot)</span><br />
<span style="font-family: Courier New, Courier, monospace;">#correct = /opt/bin/openssl</span><br />
<span style="font-family: Courier New, Courier, monospace;">PATH=/opt/bin:$PATH</span></div>
<div>
<b><br /></b>
<b>Setup Certificate Authority (CA)</b><br />
<b><br /></b>
<span style="font-family: Courier New, Courier, monospace;">#Setup and initialize environment</span><br />
<span style="font-family: Courier New, Courier, monospace;">cd /opt/etc/easy-rsa</span></div>
<div>
<span style="font-family: Courier New, Courier, monospace;">source ./vars</span></div>
<div>
<span style="font-family: 'Courier New', Courier, monospace;">./clean-all</span><br />
<span style="font-family: Courier New, Courier, monospace;"><br />#Select Default for All, Keep Hitting &lt;Enter&gt; (8 times)<br />./build-ca</span><br />
<br />
<b>Generate Diffie Hellman parameters (DH file)</b><br />
<br />
<span style="font-family: Courier New, Courier, monospace;"> ./build-dh</span><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<b> Generate Certificate and Key for the OpenVPN Server router at Site A with Common Name [CN] of "OpenVPNServer".</b><br />
<br />
<span style="font-family: Courier New, Courier, monospace;">#Generate Cert/Key for Site2SiteClient</span><br />
<span style="font-family: Courier New, Courier, monospace;">#&lt;Enter&gt; 10 times to take default value</span><br />
<span style="font-family: Courier New, Courier, monospace;">#Followed by two 'y' &lt;Enter&gt; when asked to sign and commit</span><br />
<span style="font-family: Courier New, Courier, monospace;">./build-key-server OpenVPNServer</span><br />
<b><br /></b>
<b>Generate Certificate and Key for the OpenVPN Client router Site B with Common Name [CN] of "Site2SiteClient".&nbsp;</b><b>The "Common Name" isn't really "common". Make sure its unique for all your clients.</b><br />
<span style="font-family: Courier New, Courier, monospace;"><br /></span>
<span style="font-family: Courier New, Courier, monospace;">#Generate Cert/Key for Site2SiteClient</span><br />
<span style="font-family: Courier New, Courier, monospace;">#&lt;Enter&gt; 10 times to take default value</span><br />
<span style="font-family: Courier New, Courier, monospace;">#Followed by two 'y' &lt;Enter&gt; when asked to sign and commit</span><br />
<span style="font-family: Courier New, Courier, monospace;">./build-key Site2SiteClient</span><br />
<b><br />Output Certificate and Key to console - cut/paste into text file for later use.</b><br />
<span style="font-family: 'Courier New', Courier, monospace;"><br /></span>
<span style="font-family: 'Courier New', Courier, monospace;">cat&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">/opt/etc/easy-rsa/keys</span><span style="font-family: 'Courier New', Courier, monospace;">/ca.crt</span><br />
<span style="font-family: Courier New, Courier, monospace;"> cat&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">/opt/etc/easy-rsa/keys</span><span style="font-family: Courier New, Courier, monospace;">/</span><span style="font-family: 'Courier New', Courier, monospace;">Site2SiteClient</span><span style="font-family: Courier New, Courier, monospace;">.crt</span><br />
<span style="font-family: Courier New, Courier, monospace;"> cat&nbsp;</span><span style="font-family: 'Courier New', Courier, monospace;">/opt/etc/easy-rsa/keys</span><span style="font-family: Courier New, Courier, monospace;">/</span><span style="font-family: 'Courier New', Courier, monospace;">Site2SiteClient</span><span style="font-family: Courier New, Courier, monospace;">.key</span><br />
<br />
Create a new text file on your computer and name it "ClientRouterKeys.txt" and cut and paste in the output of the three cat commands above. You'll need this file to setup the OpenVPN Client Router later in the tutorial.<br />
<br />
That's it for the SSH Console. The rest of the configuration will be done via a web browser.<br />
<br />
<b>Configure OpenVPN Server</b></div>
<div>
<b><br /></b></div>
<div>
Open your favorite browser and connect to your router and go to VPN Tunneling -&gt; OpenVPN Server (<a href="http://192.168.1.1/vpn-server.asp" target="_blank">http://192.168.1.1/vpn-server.asp</a>).<br />
<br />
On "Server 1 -&gt; Basic" Tab, check "Start with WAN". Leave everything else as default.<br />
<br />
OpenVPN Server Configuration Server 1-&gt;Basic Screen should look like the following:<br />
<br /></div>
<div class="separator" style="clear: both; text-align: center;">
</div>
<div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/--Q8NhPCY2V0/USO2jMi6yNI/AAAAAAAAAWM/ISxLajz15H4/s1600/VPN+Server+Basic+Config.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/--Q8NhPCY2V0/USO2jMi6yNI/AAAAAAAAAWM/ISxLajz15H4/s320/VPN+Server+Basic+Config.PNG" height="248" width="320" /></a></div>
<br /></div>
<div>
<b><br /></b></div>
<div>
Change to the Advanced Tab</div>
<div>
<br /></div>
<div>
Check "Respond to DNS"</div>
<div>
Check "Manage Client-Specific Options"</div>
<div>
Check "Allow Client&lt;-&gt;Client"</div>
<div>
Check "Enable"</div>
<div>
Type in "Site2SiteClient" under "Common Name"</div>
<div>
Type in "192.168.2.0" under Subnet</div>
<div>
Type in "255.255.255.0" under Netmask</div>
<div>
Check Push</div>
<div>
Click 'Add' button. (pushes routes to the client router and add route to server router. No need for router/iptable commands)</div>
<div>
In the "Custom Configuration" box, paste in the following (saves us from pasting in the certs/key in the Keys Tab and valuable nvram space):</div>
<div>
<br />
<span style="text-align: -webkit-auto;"><span style="font-family: Courier New, Courier, monospace;">ca&nbsp;</span></span><span style="font-family: 'Courier New', Courier, monospace;">/opt/etc/easy-rsa</span><span style="font-family: 'Courier New', Courier, monospace; text-align: -webkit-auto;">/keys/ca.crt</span></div>
<div>
<span style="font-family: Courier New, Courier, monospace;"><span style="text-align: -webkit-auto;">cert&nbsp;</span></span><span style="font-family: 'Courier New', Courier, monospace;">/opt/etc/easy-rsa</span><span style="font-family: 'Courier New', Courier, monospace; text-align: -webkit-auto;">/keys/OpenVPNServer.crt</span><br />
<span style="font-family: Courier New, Courier, monospace;"><span style="text-align: -webkit-auto;">key&nbsp;</span></span><span style="font-family: 'Courier New', Courier, monospace;">/opt/etc/easy-rsa</span><span style="font-family: 'Courier New', Courier, monospace; text-align: -webkit-auto;">/keys/OpenVPNServer.key</span></div>
<div>
<span style="text-align: -webkit-auto;"><span style="font-family: Courier New, Courier, monospace;">dh&nbsp;</span></span><span style="font-family: 'Courier New', Courier, monospace;">/opt/etc/easy-rsa</span><span style="font-family: 'Courier New', Courier, monospace; text-align: -webkit-auto;">/keys/dh1024.pem</span></div>
<div>
<br /></div>
<div>
[Save]</div>
<div>
<br /></div>
<div>
OpenVPN Server Configuration Server 1-&gt;Advanced Screen should look like the following:<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-mCAr0Tqu1c0/USO10GXpZ0I/AAAAAAAAAWE/Iaz0fv5Ove8/s1600/OpenVPN+Server+Advance+Config.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-mCAr0Tqu1c0/USO10GXpZ0I/AAAAAAAAAWE/Iaz0fv5Ove8/s640/OpenVPN+Server+Advance+Config.PNG" height="434" width="640" /></a></div>
<br />
<br /></div>
<div>
<br /></div>
<div>
<b>Setup Free Dynamic DNS Service (<a href="http://freedns.afraid.org/" target="_blank">http://freedns.afraid.org/</a>)</b><br />
<br />
If you don't have a public static IP (most don't), you'll need to setup DDNS so your OpenVPN client(s) can find your OpenVPN server.<br />
<br /></div>
<div>
Go to&nbsp;<a href="http://freedns.afraid.org/" target="_blank">http://freedns.afraid.org</a>&nbsp;and setup an account and then setup a subdomain.<br />
<br />
I'm using "OpenVPNServer.mooo.com" (use something else). We'll need this subdomain during the OpenVPN Client setup.<br />
<br /></div>
<div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-LTDNcEFhBCM/USLbFcV74OI/AAAAAAAAAT0/LiYPppPR3cU/s1600/Add+subdomain.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-LTDNcEFhBCM/USLbFcV74OI/AAAAAAAAAT0/LiYPppPR3cU/s400/Add+subdomain.PNG" height="210" width="400" /></a></div>
<br /></div>
<div class="separator" style="clear: both; text-align: center;">
</div>
<div>
<div class="separator" style="clear: both; text-align: left;">
<br /></div>
<div class="separator" style="clear: both; text-align: left;">
<br /></div>
<div class="separator" style="clear: both; text-align: left;">
On the left hand side, select "Dynamic DNS" or go to <a href="http://freedns.afraid.org/dynamic">http://freedns.afraid.org/dynamic</a></div>
<div class="separator" style="clear: both; text-align: left;">
<br /></div>
<div class="separator" style="clear: both; text-align: left;">
Find the subdomain you just created and right click on the "Direct URL" link and select "Copy link address"</div>
<div class="separator" style="clear: both; text-align: left;">
<br /></div>
<div class="separator" style="clear: both; text-align: left;">
<a href="http://1.bp.blogspot.com/-a2lEtnjIlTo/USLbC-Kh-HI/AAAAAAAAATk/GsWQOkEEIa8/s1600/CopyDNSURL.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-a2lEtnjIlTo/USLbC-Kh-HI/AAAAAAAAATk/GsWQOkEEIa8/s640/CopyDNSURL.PNG" height="226" width="640" /></a></div>
<br />
On your router, go to Basic -&gt; DDNS (<a href="http://192.168.1.1/basic-ddns.asp" target="_blank">http://192.168.1.1/basic-ddns.asp</a>)<br />
<br />
For Dynamic DNS 1, select "FreeDNS(afraid.org)" in the "Service" dropdown.<br />
Paste in the URL you copied in the previous step (note that the URL will change to a token)<br />
Check "Force next update"<br />
Change the "Auto refresh every" to 7 or something lower than 30.<br />
[Save]<br />
Last Result should say Update Successfully.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-IX_vUvtVnjk/USLbDBTtEXI/AAAAAAAAATs/TYTyiexbSGc/s1600/DDNS.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-IX_vUvtVnjk/USLbDBTtEXI/AAAAAAAAATs/TYTyiexbSGc/s640/DDNS.PNG" height="394" width="640" /></a></div>
<br />
<b><br /></b>
<b>Start OpenVPN Server</b><br />
<br />
Go to VPN Tunneling -&gt; OpenVPN Server (<a href="http://192.168.1.1/vpn-server.asp" target="_blank">http://192.168.1.1/vpn-server.asp</a>).<br />
<br />
On "Server 1 -&gt; Status" Tab, click the "Start Now" button. Give it a few seconds and click on the "Refresh Status" link.<br />
<br />
If you see the following, then the OpenVPN Server has started successfully.&nbsp;Congratulations we're almost there. Note that the button will change to "Stop Now". If the button remains as "Start Now", we have a problem. Go back and review the instructions.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-_-QcCv-amwU/USLol7LX6TI/AAAAAAAAAUE/s3ZnEsvPtEk/s1600/OpenVPN+Server+Status+-+Before.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-_-QcCv-amwU/USLol7LX6TI/AAAAAAAAAUE/s3ZnEsvPtEk/s640/OpenVPN+Server+Status+-+Before.PNG" height="231" width="640" /></a></div>
<br />
<br /></div>
<div>
Configuration of Site A Router is complete. Go ahead and reboot the router and verify that OpenVPN Server started properly.<br />
<br />
Let's move on to setting up your Site B Router.<br />
<br />
<b><span style="color: #e06666; font-size: large;">Setup OpenVPN Client on Site B Router</span></b><br />
<b><br /></b>
<b>Configure OpenVPN Client</b><br />
<br />
At Site B, open up your browser and go to VPN Tunneling -&gt; OpenVPN Client (<a href="http://192.168.2.1/vpn-client.asp" target="_blank">http://192.168.2.1/vpn-client.asp</a>). Go to Client 1 -&gt; Basic.<br />
<br />
Type in the Dynamic DNS address (subdomain) you setup for your Site A router in the "Server Address"<span style="font-family: inherit;"> field. In my example,&nbsp;</span><span style="background-color: white; font-family: inherit; line-height: 18px;">&nbsp;</span><span style="background-color: white; line-height: 18px;"><span style="font-family: inherit;">"</span><i><span style="font-family: Courier New, Courier, monospace;">OpenVPNServer.mooo.com</span></i><span style="font-family: inherit;">"</span></span><br />
Uncheck the "Connect NAT on tunnel"<br />
Check "Start with WAN"<br />
[Save]<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/--PsGkBbnorM/USMNnenM_fI/AAAAAAAAAV0/nn-oOJyA0cc/s1600/VPN+Client+-+Basic2.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/--PsGkBbnorM/USMNnenM_fI/AAAAAAAAAV0/nn-oOJyA0cc/s640/VPN+Client+-+Basic2.PNG" height="468" width="640" /></a></div>
<br />
<div class="separator" style="clear: both; text-align: center;">
</div>
<br />
<br />
Nothing has to be changed on the Client 1 -&gt; Advanced Tab<br />
<br />
Open up the Client 1 -&gt; Keys Tab.<br />
<br />
Open up "ClientRouterKeys.txt" file you created earlier in the tutorial and cut/paste the certificates and key into the appropriate field.<br />
<br />
ca.crt in the Certificate Authority box<br />
Site2SiteClient.crt in the Client Certificate box<br />
Site2SiteClient.key in the Client Key box<br />
<br />
Don't forget to [Save].<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-LUgCQPX39Rs/USPPdo5A1aI/AAAAAAAAAWk/ET21aoYeEKs/s1600/VPN+Client+Keys1.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-LUgCQPX39Rs/USPPdo5A1aI/AAAAAAAAAWk/ET21aoYeEKs/s640/VPN+Client+Keys1.PNG" height="264" width="640" /></a></div>
<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
</div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-TSv2Z2i4BPM/USPPdbIWaHI/AAAAAAAAAWg/xM0vbah8aWk/s1600/VPN+Client+Keys2.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-TSv2Z2i4BPM/USPPdbIWaHI/AAAAAAAAAWg/xM0vbah8aWk/s640/VPN+Client+Keys2.PNG" height="304" width="640" /></a></div>
<br />
<div class="separator" style="clear: both; text-align: center;">
</div>
<br />
<br />
Your done with the configuration. The moment of truth, on the Client 1 -&gt; Status Tab, Click "Start Now"<br />
<br />
Wait a few seconds and click on the "Refresh Status" link. Hopefully you'll see some bytes in the Value column.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-7gstDMFo3QI/USL3oFX0zzI/AAAAAAAAAVE/cvbTONd6pVg/s1600/VPN+Client+-+Status.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-7gstDMFo3QI/USL3oFX0zzI/AAAAAAAAAVE/cvbTONd6pVg/s640/VPN+Client+-+Status.PNG" height="388" width="640" /></a></div>
<br />
<br />
From Site B, you should now be able to access Site A network resources and vice-versa.<br />
<br />
Lets give the VPN a quick test. Still connected to Site B, open up the OpenVPN Server Configuration page on your Site A router @&nbsp;<a href="http://192.168.1.1/vpn-server.asp">http://192.168.1.1/vpn-server.asp</a>. Hopefully you can see a successfully status page like the one below:</div>
<div>
<br /></div>
<div class="separator" style="clear: both; text-align: center;">
</div>
<div>
<div class="separator" style="clear: both; text-align: center;">
</div>
<div class="separator" style="clear: both; text-align: center;">
<a href="http://1.bp.blogspot.com/-FfOyLqzCHXE/USPqfyToTkI/AAAAAAAAAXE/uJa3TlAq4_0/s1600/OpenVPN+Server+Status+-+Successfully+connection.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://1.bp.blogspot.com/-FfOyLqzCHXE/USPqfyToTkI/AAAAAAAAAXE/uJa3TlAq4_0/s640/OpenVPN+Server+Status+-+Successfully+connection.PNG" height="422" width="640" /></a></div>
<br />
<br />
<b>Cross Site Name Resolution</b><br />
<b><br /></b>
At this point your Site to Site VPN is setup, but you'll only able to access network resources via IP Addresses.<br />
<br />
To access network resources via a friendly name, you'll need to do two things:<br />
<br />
1) Setup static DHCP lease reservation for the network device (you don't want the IP address changing)<br />
&nbsp; &nbsp; &nbsp; - Go to Basic-&gt;Static DHCP/ARP/IPT<br />
2) On the opposite router, setup a static WINS/DNS entry for the same network device<br />
<br />
Go to Basic-&gt;Static DHCP/ARP/IPT. Typically the Static DHCP/ARP/IPT screen is for configuring static DHCP lease reservation, however you can use for static WINS/DNS entries also. The secret is to leave the MAC Address blank or with all zeros, "00:00:00:00:00".<br />
<br />
In the screenshot below, on SiteB, I've setup a static hostname of "SiteARouter" so that I can access it via the friendly name versus the IP Address (192.168.1.1). From SiteB, I'm now able to access SiteARouter via name. Configure static hostname entries for all network resources you want to access on both your VPN sites.<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-IYGz1n7aC3w/UmLLFa1dXmI/AAAAAAAAK-Q/lx8gzSo7Cj8/s1600/Name+Resolution.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-IYGz1n7aC3w/UmLLFa1dXmI/AAAAAAAAK-Q/lx8gzSo7Cj8/s640/Name+Resolution.PNG" height="411" width="640" /></a></div>
<br />
<br />
<b>That's it!! Enjoy.</b><br />
<b><br /></b>
<b>Client to Site VPN</b><br />
<b><br /></b>
You should easily be able to add additional OpenVPN Clients (for Client to Site VPN) by generating additional RSA Certs/Key on your OpenVPN Server Router.</div>
<div>
<br /></div>
<div>
<div>
<span style="font-family: Courier New, Courier, monospace;">#Setup and initialize environment</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">PATH=/opt/bin:$PATH</span><span style="font-family: Courier New, Courier, monospace;"><br /></span><br />
<span style="font-family: Courier New, Courier, monospace;">cd /opt/etc/easy-rsa</span></div>
<div>
<span style="font-family: Courier New, Courier, monospace;">source ./vars</span><br />
<span style="font-family: 'Courier New', Courier, monospace;"><br /></span>
<span style="font-family: 'Courier New', Courier, monospace;">./build-key Zoe-Laptop</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">./build-key Landon-Laptop</span><br />
<span style="font-family: 'Courier New', Courier, monospace;"><br /></span>
<span style="font-family: 'Courier New', Courier, monospace;">#Install SFTP</span><span style="font-family: 'Courier New', Courier, monospace;">&nbsp;so you can securely access your keys</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">#Location of keys =&nbsp;</span><span style="font-family: Courier New, Courier, monospace;">/opt/etc/easy-rsa/keys</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">#Connect as root</span><br />
<span style="font-family: 'Courier New', Courier, monospace;">opkg install openssh-sftp-server</span><br />
<span style="font-family: 'Courier New', Courier, monospace;"><br /></span>
<span style="font-family: 'Courier New', Courier, monospace;">#scp is another alternative method to access your keys</span><br />
<div>
<br /></div>
<a href="http://blog.qnology.com/2013/03/tutorial-centos-6-openvpn-client.html" target="_blank">[Tutorial] CentOS 6 OpenVPN Client - Connecting to Existing Site to Site VPN</a><br />
<br />
<b><span style="font-family: inherit;">Troubleshooting and FAQ:</span></b><br />
<br />
- <a href="http://www.youtube.com/watch?v=sDdtnOiYdCU" target="_blank">Watch my walk-through video</a><br />
- Make sure the time is correct on both routers (NTP is setup, watch video)<br />
- Check the logs<br />
- Restore Default Configuration and start fresh (backup your current config, just in case).<br />
&nbsp; &nbsp; &nbsp; &nbsp; Erase all data in NVRAM memory (thorough) @ http://192.168.1.1/admin-config.asp<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-9pwmeMbav6I/USMI00oausI/AAAAAAAAAVk/phaY3EOn-aI/s1600/Restore+Default+Configuration.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-9pwmeMbav6I/USMI00oausI/AAAAAAAAAVk/phaY3EOn-aI/s200/Restore+Default+Configuration.PNG" height="193" width="200" /></a></div>
&nbsp; &nbsp; &nbsp; <br />
<br />
<br />
<span style="font-family: inherit;">Special Thanks to Shibby for the excellent firmware, the Entware Team, and Wasaga Computer's for their <a href="http://www.wasagacomputers.com/home/2010/8/10/tutorial-site-to-site-vpn-using-tomato-firmware-and-openvpn.html" target="_blank">excellent blog</a>&nbsp;(which is the original tutorial I used to successfully setup my first Site to Site VPN using TomatoUSB).</span><br />
<span style="font-family: inherit;"><br /></span>
<span style="font-family: inherit;">If you have any issues, have any questions or notice any mistakes, please don't&nbsp;</span>hesitate<span style="font-family: inherit;">&nbsp;to leave a comment. Your feedback will help me improve the tutorial and keep it up to date. Thank you.</span></div>
</div>
</div>
</div>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
Posted by
<span class='fn' itemprop='author' itemscope='itemscope' itemtype='http://schema.org/Person'>
<meta content='http://www.blogger.com/profile/04077661669160293260' itemprop='url'/>
<a class='g-profile' href='http://www.blogger.com/profile/04077661669160293260' rel='author' title='author profile'>
<span itemprop='name'>
Qui Hong
</span>
</a>
</span>
</span>
<span class='post-timestamp'>
at
<meta content='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html' itemprop='url'/>
<a class='timestamp-link' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html' rel='bookmark' title='permanent link'>
<abbr class='published' itemprop='datePublished' title='2013-02-19T11:38:00-08:00'>
11:38 AM
</abbr>
</a>
</span>
<span class='post-comment-link'>
</span>
<span class='post-icons'>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='http://www.blogger.com/share-post.g?blogID=1622307871085727432&postID=379901354419772042&target=email' target='_blank' title='Email This'>
<span class='share-button-link-text'>
Email This
</span>
</a>
<a class='goog-inline-block share-button sb-blog' href='http://www.blogger.com/share-post.g?blogID=1622307871085727432&postID=379901354419772042&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'>
<span class='share-button-link-text'>
BlogThis!
</span>
</a>
<a class='goog-inline-block share-button sb-twitter' href='http://www.blogger.com/share-post.g?blogID=1622307871085727432&postID=379901354419772042&target=twitter' target='_blank' title='Share to Twitter'>
<span class='share-button-link-text'>
Share to Twitter
</span>
</a>
<a class='goog-inline-block share-button sb-facebook' href='http://www.blogger.com/share-post.g?blogID=1622307871085727432&postID=379901354419772042&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'>
<span class='share-button-link-text'>
Share to Facebook
</span>
</a>
<div class='goog-inline-block dummy-container'>
<g:plusone source='blogger:blog:plusone' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html' size='medium' width='300' annotation='inline'/>
</div>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
Labels:
<a href='http://blog.qnology.com/search/label/DD-WRT' rel='tag'>
DD-WRT
</a>

                                              ,
                                            
<a href='http://blog.qnology.com/search/label/OpenVPN' rel='tag'>
OpenVPN
</a>

                                              ,
                                            
<a href='http://blog.qnology.com/search/label/Router' rel='tag'>
Router
</a>

                                              ,
                                            
<a href='http://blog.qnology.com/search/label/Site%20to%20Site' rel='tag'>
Site to Site
</a>

                                              ,
                                            
<a href='http://blog.qnology.com/search/label/TomatoUSB' rel='tag'>
TomatoUSB
</a>

                                              ,
                                            
<a href='http://blog.qnology.com/search/label/VPN' rel='tag'>
VPN
</a>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>
29 comments
                                    :
                                  </h4>
<div class='comments-content'>
<script async='async' src='//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js' type='text/javascript'></script>
<script type='text/javascript'>
                                  (function() {
                                    var items = [{'id': '9116251969910913519', 'body': 'Followed this to the letter.  Having an issue with the client router crashing when I start the service.  No log entries to see what the problem is.  Any ideas where to look?   \74br /\76\74br /\76I have tried other tutorials with the same result of having the client router crash.  Tried several builds of shibby and even bought a new Asus n66 and tried merlin\46#39;s firmware.  ', 'timestamp': '1361974105780', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751361974105780#c9116251969910913519', 'author': {'name': 'Chris Schlichting', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13866767034367669629'}, 'displayTime': 'February 27, 2013 at 6:08 AM', 'deleteclass': 'item-control blog-admin pid-1369232046'}, {'id': '6917212151355499208', 'parentId': '9116251969910913519', 'body': 'FYI - Chris managed to resolve this issue himself. We\46#39;re not clear on the root cause, so if you experience this problem please let me know.\74br /\76\74br /\76The OpenVPN client router configuration is trivial. My suspicion is it has to do with the copy/pasting of the cert/keys. Maybe a illegal character somehow got added, or you\46#39;re missing a required line feed. ', 'timestamp': '1362597046792', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751362597046792#c6917212151355499208', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/04077661669160293260'}, 'displayTime': 'March 6, 2013 at 11:10 AM', 'deleteclass': 'item-control blog-admin pid-41862287'}, {'id': '287261197607392158', 'body': 'You have any recommendations for a script that can be used to monitor that status of the line and when marked as down to retry to reconnect?\74br /\76\74br /\76This would be useful if the OpenVPN server\46#39;s connection would to go down. The script would trigger OpenVPN to retry to reconnect after x amount of time.', 'timestamp': '1368811601850', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751368811601850#c287261197607392158', 'author': {'name': 'Nick Mancuso', 'avatarUrl': '//lh5.googleusercontent.com/-_5fiExCiSZw/AAAAAAAAAAI/AAAAAAAAACs/b8_eN6UxkOg/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/02726383493790770367'}, 'displayTime': 'May 17, 2013 at 10:26 AM', 'deleteclass': 'item-control blog-admin pid-1138062605'}, {'id': '8886091200622537047', 'parentId': '287261197607392158', 'body': 'Hi Nick,\74br /\76\74br /\76I believe this is built into the OpenVPN client. The OpenVPN client will automatically reconnect once the OpenVPN server is available again. I just rebooted my OpenVPN Server router yesterday and all my clients reconnected back just fine.\74br /\76\74br /\76Qui', 'timestamp': '1368812435492', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751368812435492#c8886091200622537047', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/01067911447249645259'}, 'displayTime': 'May 17, 2013 at 10:40 AM', 'deleteclass': 'item-control blog-admin pid-1132605431'}, {'id': '1336590934401147538', 'body': 'I don\46#39;t think port forwarding on server is necessary.\74br /\76\74br /\76My client and server setup is almost same as yours, except the port forwarding part. Anyway, I can ping server lan from a host on client lan, but not from server to a host on client lan. Any idea how to fix that?', 'timestamp': '1369779004905', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751369779004905#c1336590934401147538', 'author': {'name': 'Kevin7890', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13081124759582400553'}, 'displayTime': 'May 28, 2013 at 3:10 PM', 'deleteclass': 'item-control blog-admin pid-1390317679'}, {'id': '8772666798421732805', 'parentId': '1336590934401147538', 'body': 'Hi Kevin,\74br /\76\74br /\76Thanks for your question. \74br /\76\74br /\76The only port forwarding I have is \46quot;Forward UDP Port 1194 to your router internal IP @192.168.1.1\46quot; which is definitly required.\74br /\76\74br /\76Server LAN to Client LAN routing is handled in the Advanced Tab of the OpenVPN Server configuration - the screenshot and section right before the Port Forwarding Section. Specifically the  \46quot;Allow Client\46lt;-\46gt;Client\46quot; and the \46quot;Push\46quot; based on Common Name, Subnet, Netmask.\74br /\76\74br /\76Please let me know if that help resolve your issue.\74br /\076', 'timestamp': '1369780959172', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751369780959172#c8772666798421732805', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/01067911447249645259'}, 'displayTime': 'May 28, 2013 at 3:42 PM', 'deleteclass': 'item-control blog-admin pid-1132605431'}, {'id': '4999481017570470467', 'body': 'I have this setup and can ping ip addresses from the either side.\74br /\76\74br /\76I have server using domain family1.lan and client router using family2.lan. How can I ping host.family2.lan from the server lan? I tried using server\75/family2.lan/192.168.1.1 in the dnsmasq settings of server gateway, but it doesn\46#39;t seem to work.', 'timestamp': '1369803060065', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751369803060065#c4999481017570470467', 'author': {'name': 'Eddie Seelke', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/10610543712752834212'}, 'displayTime': 'May 28, 2013 at 9:51 PM', 'deleteclass': 'item-control blog-admin pid-1795729913'}, {'id': '896919995388997193', 'parentId': '4999481017570470467', 'body': 'Eddie,\74br /\76\74br /\76Great question on name resolution. Sorry, I don\46#39;t have an ideal solution for you.\74br /\76\74br /\76- you can always use a host file\74br /\76- assuming you\46#39;re on a windows network, on the OpenVPN Client network router, I set \46quot;WINS (for DHCP)\46quot; to point to the OpenVPN Server router IP Address.\74br /\76\74br /\76I believe you\46#39;re on the path to the correct/ideal solution with the dnsmasq settings. If you manage to get it to work, please share. Thanks', 'timestamp': '1369848940990', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751369848940990#c896919995388997193', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/01067911447249645259'}, 'displayTime': 'May 29, 2013 at 10:35 AM', 'deleteclass': 'item-control blog-admin pid-1132605431'}, {'id': '7042614786090035567', 'parentId': '1336590934401147538', 'body': 'I fixed my own problem. The problem was the windows firewall on Win7 host. Once disabled, it can be pinged.\74br /\76\74br /\76I summarize things I did differently than yours:\74br /\76* I used windows version of openvpn to generate the certificates/keys. It is much easier than installing optware/entware. Besides, it reduces the need for USB drive.\74br /\76* I used jffs to store the ca/key files. Again, this relieves the need for usb drive. I used winscp to transfer ca/key files into /jffs/etc/openvpn\74br /\76* USB drive is not needed. Although Tomato with USB provides many benefits, it is not a prerequisite for running openvpn. \74br /\76* server firewall port forwarding of 1194 to server router itself is NOT necessary. I don\46#39;t have it and mine worked flawlessly.\74br /\76* even on the client router, do NOT use web GUI to paste the ca/key. Use winscp to transfer to /jffs/etc/openvpn/. Entering ca/key in web GUI will use up the tiny 32kb nvram. It may be OK if you only configure one openvpn client or server. But if you ever configure/enter them for another client or server, you are bound to exceed the 32k nvram limit, and your router will behave strangely, even restoring to default setup. It is better never use web GUI to store any ca/key files for openvpn, just to be safe.\74br /\076', 'timestamp': '1369874471613', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751369874471613#c7042614786090035567', 'author': {'name': 'Kevin7890', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13081124759582400553'}, 'displayTime': 'May 29, 2013 at 5:41 PM', 'deleteclass': 'item-control blog-admin pid-1390317679'}, {'id': '4945262158782111474', 'parentId': '1336590934401147538', 'body': 'Thanks Kevin for your feedback. The USB drive isn\46#39;t required for the OpenVPN setup, however I find it more elegant to generate the keys on the router and it makes for a more easy to follow tutorial (cut/paste, minimal steps). \74br /\76\74br /\76I understand some people, like yourself, prefer to generate the keys on their computer.\74br /\76\74br /\76Using /jffs to store the keys to save nvram is a great solution.\74br /\76\74br /\76I\46#39;ll have to double check on the port forwarding. I\46#39;m confused how it would work without it. Did you start from scratch with a wipe of NVRAM? Any chance you might have some pre-existing IPTABLES entries?', 'timestamp': '1369875779779', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751369875779779#c4945262158782111474', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/01067911447249645259'}, 'displayTime': 'May 29, 2013 at 6:02 PM', 'deleteclass': 'item-control blog-admin pid-1132605431'}, {'id': '4657168760437020671', 'parentId': '1336590934401147538', 'body': 'Port forwarding is not needed to reach a server running on the router itself and listening on the WAN interface. Just like you don\46#39;t need to forward port 22 for ssh into the router from WAN, or you don\46#39;t need to forward port 8080(or 443) to reach the router web GUI from WAN. Openvpn client does not need the forwarded port 1194 to reach the openvpn server on the router from WAN.\74br /\76\74br /\76I agree optware is really powerful and I am still learning it. But to use it properly, you need proper setup, like partitioning the USB harddrive with a swap partition and a ext3 partition (for optware and data). It is overkill if all you need is openvpn. Removing this setup opens up the possibility for all non-USB Tomato routers.\74br /\76\74br /\76I want to stress the importance of my last point of it is better NOT to paste the ca/key contents directly into the web gui. Since it it very possible to exceed the nvram 32k limit. None of the Openvpn tutorials I found on the web mentions this, and I learned this the hard way. I turned on two openvpn servers and did not know it exceeded the nvram limit. The router ran OK for a couple of days, but one day, it restarted and some of my router configurations were lost. I took me a full week to troubleshoot, trying to restore the config, until I read online about this nvram limit problem.', 'timestamp': '1369882637435', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751369882637435#c4657168760437020671', 'author': {'name': 'Kevin7890', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13081124759582400553'}, 'displayTime': 'May 29, 2013 at 7:57 PM', 'deleteclass': 'item-control blog-admin pid-1390317679'}, {'id': '3051035314950771764', 'parentId': '9116251969910913519', 'body': 'Or could it be over nvram limit? Did you configure more than one client?', 'timestamp': '1369886529080', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751369886529080#c3051035314950771764', 'author': {'name': 'Kevin7890', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13081124759582400553'}, 'displayTime': 'May 29, 2013 at 9:02 PM', 'deleteclass': 'item-control blog-admin pid-1390317679'}, {'id': '2623589754094622847', 'body': 'Thank you so much for the awesome tutorial. Is there a way to route all the internet traffic through the vpn server? If I check my external IP it is still the one from the ISP ', 'timestamp': '1378297182010', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751378297182010#c2623589754094622847', 'author': {'name': 'Andreas Hiebsch', 'avatarUrl': '//lh6.googleusercontent.com/-ZQXe-rnVU_c/AAAAAAAAAAI/AAAAAAAAIvA/wzhN4te5otg/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/08271244900999485616'}, 'displayTime': 'September 4, 2013 at 5:19 AM', 'deleteclass': 'item-control blog-admin pid-1389654558'}, {'id': '521277852890477021', 'parentId': '2623589754094622847', 'body': 'The \46quot;Direct clients to redirect internet traffic\46quot; checkbox on the OpenVPN Server Configuration Server 1-\46gt;Advanced Screen looks promising.\74br /\76\74br /\76You might want to look here also -\74br /\76http://openvpn.net/index.php/open-source/documentation/howto.html#redirect\74br /\76\74br /\76I assume the checkout will add the \46quot;redirect-gateway\46quot; directive to the OpenVPN Server configuration.\74br /\76\74br /\76If you get it working please report back on how. Thanks', 'timestamp': '1378311425321', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751378311425321#c521277852890477021', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/04077661669160293260'}, 'displayTime': 'September 4, 2013 at 9:17 AM', 'deleteclass': 'item-control blog-admin pid-41862287'}, {'id': '2429537564508387070', 'body': 'I have everything setup correctly, but I am unable to reach any host on the OpenVPN server LAN from the client side, apart from the server itself. Any idea what may be going on here?', 'timestamp': '1379008630507', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751379008630507#c2429537564508387070', 'author': {'name': 'Ethan Shold', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/05295417441313498217'}, 'displayTime': 'September 12, 2013 at 10:57 AM', 'deleteclass': 'item-control blog-admin pid-714807755'}, {'id': '3242815042766611833', 'parentId': '2429537564508387070', 'body': 'Perhaps I should also mention that the OpenVPN server router is not the gateway for this network, but sits behind another router which is forwarding the VPN traffic to it.', 'timestamp': '1379008942888', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751379008942888#c3242815042766611833', 'author': {'name': 'Ethan Shold', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/05295417441313498217'}, 'displayTime': 'September 12, 2013 at 11:02 AM', 'deleteclass': 'item-control blog-admin pid-714807755'}, {'id': '4603789313411251460', 'parentId': '2429537564508387070', 'body': 'Sorry Ethan I can not help. Your configuration is out side the scope of the tutorial.', 'timestamp': '1379026993691', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751379026993691#c4603789313411251460', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/04077661669160293260'}, 'displayTime': 'September 12, 2013 at 4:03 PM', 'deleteclass': 'item-control blog-admin pid-41862287'}, {'id': '2109190060136393706', 'parentId': '2429537564508387070', 'body': 'I\46#39;ve made that configuration work sometime ago by adding a new route to your gateway, that routes the OpenVPN subnet back to your OpenVPN server. If I remember correctly the problem is that the hosts on your LAN tries to respond back on requests from the OpenVPN tunnel, but sends the responses to your gateway which doesn\46#39;t know how to properly route them onward. How to add this route to your gateway is device specific, but I hope you can find that information somewhere :-)', 'timestamp': '1380878531640', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751380878531640#c2109190060136393706', 'author': {'name': 'Niclas Berglind', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/01351966361905423650'}, 'displayTime': 'October 4, 2013 at 2:22 AM', 'deleteclass': 'item-control blog-admin pid-2033534361'}, {'id': '7642598537552725006', 'parentId': '2623589754094622847', 'body': 'One way of accomplishing this is by adding the \46quot;redirect-gateway\46quot; option to the client configuration file. I usually have two configuration files on each client machine where one config uses that option and one doesn\46#39;t.', 'timestamp': '1380878676795', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751380878676795#c7642598537552725006', 'author': {'name': 'Niclas Berglind', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/01351966361905423650'}, 'displayTime': 'October 4, 2013 at 2:24 AM', 'deleteclass': 'item-control blog-admin pid-2033534361'}, {'id': '3420744628404111633', 'parentId': '4999481017570470467', 'body': 'FYI - I just added a section on name resolution.', 'timestamp': '1382207132535', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751382207132535#c3420744628404111633', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/01067911447249645259'}, 'displayTime': 'October 19, 2013 at 11:25 AM', 'deleteclass': 'item-control blog-admin pid-1132605431'}, {'id': '3523303787033464223', 'body': 'It\46#39;s me again...  Wanted to set up a new site-to-site...  Having troubles.\74br /\76\74br /\76I noticed a couple of differences in the text from the video and whats posted on the blog.  Not sure if that stuff matters.  Anyway I have been cutting and pasting directly from this page.  Here is what I have noticed.\74br /\76\74br /\76The key sizes are being created at 2048 instead of 1024... Not sure if this matters.\74br /\76\74br /\76After creating all of the certificates, outputting the the counsel does not work... Throws out an error.   After a bit of poking around I discovered that the   /opt/openvpn-easy-rsa/keys (keys folder) folder does not exist.\74br /\76\74br /\76Any insight.  Where would the keys be located?', 'timestamp': '1393785052942', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751393785052942#c3523303787033464223', 'author': {'name': 'Chris Schlichting', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13866767034367669629'}, 'displayTime': 'March 2, 2014 at 10:30 AM', 'deleteclass': 'item-control blog-admin pid-1369232046'}, {'id': '4546947598942341986', 'parentId': '3523303787033464223', 'body': 'Follow the blog. I would recommend that you start over from scratch.\74br /\76\74br /\76There are specific commands in the tutorial for changing the key size and creating the necessary folders which weren\46#39;t properly executed.', 'timestamp': '1393785889712', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751393785889712#c4546947598942341986', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/04077661669160293260'}, 'displayTime': 'March 2, 2014 at 10:44 AM', 'deleteclass': 'item-control blog-admin pid-41862287'}, {'id': '1057746504406984679', 'parentId': '3523303787033464223', 'body': '#Set working directory and reduce key_size to 1024 in vars file\74br /\76cd /opt/openvpn-easy-rsa\74br /\76sed -i \46#39;s:`pwd`:/opt/openvpn-easy-rsa:\46#39; ./vars\74br /\76sed -i \46#39;s:KEY_SIZE\0752048:KEY_SIZE\0751024:\46#39; ./vars\74br /\076', 'timestamp': '1393785996771', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751393785996771#c1057746504406984679', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/04077661669160293260'}, 'displayTime': 'March 2, 2014 at 10:46 AM', 'deleteclass': 'item-control blog-admin pid-41862287'}, {'id': '1139333751817375405', 'parentId': '3523303787033464223', 'body': 'Thanks for your quick response... Ran through this three more times today, exactly as shown in the guide.  \74br /\76\74br /\76Still doing the 2048 key size and the keys directory does not exist....  Here is what I see after I paste the final code into putty.\74br /\76\74br /\76root@SiteARouter:/opt/openvpn-easy-rsa# cd /opt/openvpn-easy-rsa/keys\74br /\76-sh: cd: can\46#39;t cd to /opt/openvpn-easy-rsa/keys\74br /\76root@SiteARouter:/opt/openvpn-easy-rsa# cat ./ca.crt\74br /\76cat: can\46#39;t open \46#39;./ca.crt\46#39;: No such file or directory\74br /\76root@SiteARouter:/opt/openvpn-easy-rsa# cat ./Site2SiteClient.crt\74br /\76cat: can\46#39;t open \46#39;./Site2SiteClient.crt\46#39;: No such file or directory\74br /\76root@SiteARouter:/opt/openvpn-easy-rsa# cat ./Site2SiteClient.key\74br /\76cat: can\46#39;t open \46#39;./Site2SiteClient.key\46#39;: No such file or directory\74br /\76root@SiteARouter:/opt/openvpn-easy-rsa#\74br /\076', 'timestamp': '1393859172883', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751393859172883#c1139333751817375405', 'author': {'name': 'Chris Schlichting', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13866767034367669629'}, 'displayTime': 'March 3, 2014 at 7:06 AM', 'deleteclass': 'item-control blog-admin pid-1369232046'}, {'id': '3121931957777751482', 'parentId': '3523303787033464223', 'body': 'Hey Chris,\74br /\76\74br /\76Looks like the openvpn-easy-rsa entware packaged changed a little bit which broke the tutorial. \74br /\76\74br /\76I\46#39;ve updated it and just re-verified it. \74br /\76\74br /\76Note that I removed the Port Forwarding Section as @Kevin7890 pointed out that it\46#39;s not needed (I\46#39;ve verified this).\74br /\76\74br /\76I really appreciate your persistence and letting me know that the tutorial is broken.\74br /\76\74br /\76Give it a try again and let me know if you\46#39;re still having any issues.\74br /\76\74br /\76Qui', 'timestamp': '1393871768867', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751393871768867#c3121931957777751482', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/04077661669160293260'}, 'displayTime': 'March 3, 2014 at 10:36 AM', 'deleteclass': 'item-control blog-admin pid-41862287'}, {'id': '8883850612732554165', 'parentId': '1336590934401147538', 'body': '@Kevin7890, just wanted to thank you for pointing out that the Port Forwarding section wasn\46#39;t required. I\46#39;ve verified it and removed it from the tutorial.', 'timestamp': '1393871839860', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751393871839860#c8883850612732554165', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/04077661669160293260'}, 'displayTime': 'March 3, 2014 at 10:37 AM', 'deleteclass': 'item-control blog-admin pid-41862287'}, {'id': '6576474081627067051', 'parentId': '3523303787033464223', 'body': 'Golden!  All is well... Gonna buy you some coffee..  \74br /\76\74br /\76I appreciate your attention to my posts.  \74br /\76\74br /\76Take Care!\74br /\76\74br /\76Chris', 'timestamp': '1393976255673', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751393976255673#c6576474081627067051', 'author': {'name': 'Chris Schlichting', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13866767034367669629'}, 'displayTime': 'March 4, 2014 at 3:37 PM', 'deleteclass': 'item-control blog-admin pid-1369232046'}, {'id': '4096760606547073559', 'parentId': '3523303787033464223', 'body': 'Hey Chris, thank you for the generous donation! Glad to hear you got it working.', 'timestamp': '1393982890252', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751393982890252#c4096760606547073559', 'author': {'name': 'Qui Hong', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/04077661669160293260'}, 'displayTime': 'March 4, 2014 at 5:28 PM', 'deleteclass': 'item-control blog-admin pid-41862287'}, {'id': '3844041582197670919', 'body': 'Qui Hong:\74br /\76\74br /\76I\46#39;ve taken the steps above exactly as shown -- with the exception of running \46quot;opkg update\46quot; in order to get the updated package list including OpenVPN ..\74br /\76\74br /\76Everything works perfect.  I can ping from SiteA to SiteB perfectly and vice-versa.\74br /\76\74br /\76I\46#39;m having problems adding a SiteC ..  We have 5 locations in our company and I\46#39;d like to add the additional sites to this VPN.  Would you mind telling me which steps to replicate for each site?  I created the additional Site2SiteClient keys (named after their client sites of course) and pasted them into the client router, along with the CA.crt.  I\46#39;ve also added the client sites in the list with it\46#39;s client subnet in the Advanced Tab on the Server router.  When I enable it and save settings, it knocks down SiteB, even though SiteC\46#39;s OpenVPN client never starts successfully.\74br /\76\74br /\76Any clues on what I\46#39;m doing wrong?  Thanks in advance ..\74br /\76\74br /\76PS.  Your instructions for Site2Site were spot-on.  For TWO sites, this tutorial is golden.', 'timestamp': '1398501112919', 'permalink': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment\0751398501112919#c3844041582197670919', 'author': {'name': 'Digim0d', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/15216437844458509787'}, 'displayTime': 'April 26, 2014 at 1:31 AM', 'deleteclass': 'item-control blog-admin pid-858667141'}];
                                    var msgs = {'loadMore': 'Load more...', 'loading': 'Loading...', 'loaded': 'No more!', 'addComment': 'Add comment', 'reply': 'Reply', 'delete': 'Delete'};
                                    var config = {'blogId': '1622307871085727432', 'postId': '379901354419772042', 'feed': 'http://blog.qnology.com/feeds/379901354419772042/comments/default', 'authorName': 'Qui Hong', 'authorUrl': 'http://www.blogger.com/profile/04077661669160293260', 'baseUri': 'http://www.blogger.com', 'maxThreadDepth': 2};
                                    // <![CDATA[
                                    var cursor = null;
                                    if (items && items.length > 0) {
                                      cursor = parseInt(items[items.length - 1].timestamp) + 1;
                                    }
                                    var bodyFromEntry = function(entry) {
                                      if (entry.gd$extendedProperty) {
                                        for (var k in entry.gd$extendedProperty) {
                                          if (entry.gd$extendedProperty[k].name == 'blogger.contentRemoved') {
                                            return '<span class="deleted-comment">' + entry.content.$t + '</span>';
                                          }
                                        }
                                      }
                                      return entry.content.$t;
                                    }
                                    var parse = function(data) {
                                      cursor = null;
                                      var comments = [];
                                      if (data && data.feed && data.feed.entry) {
                                        for (var i = 0, entry; entry = data.feed.entry[i]; i++) {
                                          var comment = {};
                                          // comment ID, parsed out of the original id format
                                          var id = /blog-(\d+).post-(\d+)/.exec(entry.id.$t);
                                          comment.id = id ? id[2] : null;
                                          comment.body = bodyFromEntry(entry);
                                          comment.timestamp = Date.parse(entry.published.$t) + '';
                                          if (entry.author && entry.author.constructor === Array) {
                                            var auth = entry.author[0];
                                            if (auth) {
                                              comment.author = {
                                                name: (auth.name ? auth.name.$t : undefined),
                                                profileUrl: (auth.uri ? auth.uri.$t : undefined),
                                                avatarUrl: (auth.gd$image ? auth.gd$image.src : undefined)
                                              };
                                            }
                                          }
                                          if (entry.link) {
                                            if (entry.link[2]) {
                                              comment.link = comment.permalink = entry.link[2].href;
                                            }
                                            if (entry.link[3]) {
                                              var pid = /.*comments\/default\/(\d+)\?.*/.exec(entry.link[3].href);
                                              if (pid && pid[1]) {
                                                comment.parentId = pid[1];
                                              }
                                            }
                                          }
                                          comment.deleteclass = 'item-control blog-admin';
                                          if (entry.gd$extendedProperty) {
                                            for (var k in entry.gd$extendedProperty) {
                                              if (entry.gd$extendedProperty[k].name == 'blogger.itemClass') {
                                                comment.deleteclass += ' ' + entry.gd$extendedProperty[k].value;
                                              } else if (entry.gd$extendedProperty[k].name == 'blogger.displayTime') {
                                                comment.displayTime = entry.gd$extendedProperty[k].value;
                                              }
                                            }
                                          }
                                          comments.push(comment);
                                        }
                                      }
                                      return comments;
                                    };
                                    var paginator = function(callback) {
                                      if (hasMore()) {
                                        var url = config.feed + '?alt=json&v=2&orderby=published&reverse=false&max-results=50';
                                        if (cursor) {
                                          url += '&published-min=' + new Date(cursor).toISOString();
                                        }
                                        window.bloggercomments = function(data) {
                                          var parsed = parse(data);
                                          cursor = parsed.length < 50 ? null
                                          : parseInt(parsed[parsed.length - 1].timestamp) + 1
                                          callback(parsed);
                                          window.bloggercomments = null;
                                        }
                                        url += '&callback=bloggercomments';
                                        var script = document.createElement('script');
                                        script.type = 'text/javascript';
                                        script.src = url;
                                        document.getElementsByTagName('head')[0].appendChild(script);
                                      }
                                    };
                                    var hasMore = function() {
                                      return !!cursor;
                                    };
                                    var getMeta = function(key, comment) {
                                      if ('iswriter' == key) {
                                        var matches = !!comment.author
                                        && comment.author.name == config.authorName
                                        && comment.author.profileUrl == config.authorUrl;
                                        return matches ? 'true' : '';
                                      } else if ('deletelink' == key) {
                                        return config.baseUri + '/delete-comment.g?blogID='
                                        + config.blogId + '&postID=' + comment.id;
                                      } else if ('deleteclass' == key) {
                                        return comment.deleteclass;
                                      }
                                      return '';
                                    };
                                    var replybox = null;
                                    var replyUrlParts = null;
                                    var replyParent = undefined;
                                    var onReply = function(commentId, domId) {
                                      if (replybox == null) {
                                        // lazily cache replybox, and adjust to suit this style:
                                        replybox = document.getElementById('comment-editor');
                                        if (replybox != null) {
                                          replybox.height = '250px';
                                          replybox.style.display = 'block';
                                          replyUrlParts = replybox.src.split('#');
                                        }
                                      }
                                      if (replybox && (commentId !== replyParent)) {
                                        document.getElementById(domId).insertBefore(replybox, null);
                                        replybox.src = replyUrlParts[0]
                                        + (commentId ? '&parentID=' + commentId : '')
                                        + '#' + replyUrlParts[1];
                                        replyParent = commentId;
                                      }
                                    };
                                    var hash = (window.location.hash || '#').substring(1);
                                    var startThread, targetComment;
                                    if (/^comment-form_/.test(hash)) {
                                      startThread = hash.substring('comment-form_'.length);
                                    } else if (/^c[0-9]+$/.test(hash)) {
                                      targetComment = hash.substring(1);
                                    }
                                    // Configure commenting API:
                                    var configJso = {
                                      'maxDepth': config.maxThreadDepth
                                    };
                                    var provider = {
                                      'id': config.postId,
                                      'data': items,
                                      'loadNext': paginator,
                                      'hasMore': hasMore,
                                      'getMeta': getMeta,
                                      'onReply': onReply,
                                      'rendered': true,
                                      'initComment': targetComment,
                                      'initReplyThread': startThread,
                                      'config': configJso,
                                      'messages': msgs
                                    };
                                    var render = function() {
                                      if (window.goog && window.goog.comments) {
                                        var holder = document.getElementById('comment-holder');
                                        window.goog.comments.render(holder, provider);
                                      }
                                    };
                                    // render now, or queue to render when library loads:
                                    if (window.goog && window.goog.comments) {
                                      render();
                                    } else {
                                      window.goog = window.goog || {};
                                      window.goog.comments = window.goog.comments || {};
                                      window.goog.comments.loadQueue = window.goog.comments.loadQueue || [];
                                      window.goog.comments.loadQueue.push(render);
                                    }
                                  })();
                                  // ]]>
</script>
<div id='comment-holder'>
<div id='bc_0_30C' kind='c'><div id='bc_0_30CT'><div id='bc_0_29T' class='comment-thread' kind='r'  t='0' u='0'><ol id='bc_0_29TB'><li id='bc_0_2B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c9116251969910913519' class='comment-block'><div id='bc_0_2M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13866767034367669629'>Chris Schlichting</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1361974105780#c9116251969910913519'>February 27, 2013 at 6:08 AM</a></span></div><p id='bc_0_2MC' class='comment-content'>Followed this to the letter.  Having an issue with the client router crashing when I start the service.  No log entries to see what the problem is.  Any ideas where to look?   <br /><br />I have tried other tutorials with the same result of having the client router crash.  Tried several builds of shibby and even bought a new Asus n66 and tried merlin&#39;s firmware.  </p><span id='bc_0_2MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1369232046'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=9116251969910913519'>Delete</a></span></span></div><div id='bc_0_2BR' class='comment-replies'><span id='bc_0_2b+seedKaoLD' kind='d'><div id='bc_0_0T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_0TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_0TA' class='thread-arrow'></span><span id='bc_0_0TN' class='thread-count'><span id='bc_0_0TNT' style='display: none;'></span><span id='bc_0_0TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_0TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_0TC' class='thread-chrome thread-expanded'><div><li id='bc_0_0B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c6917212151355499208' class='comment-block'><div id='bc_0_0M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/04077661669160293260'>Qui Hong</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1362597046792#c6917212151355499208'>March 6, 2013 at 11:10 AM</a></span></div><p id='bc_0_0MC' class='comment-content'>FYI - Chris managed to resolve this issue himself. We&#39;re not clear on the root cause, so if you experience this problem please let me know.<br /><br />The OpenVPN client router configuration is trivial. My suspicion is it has to do with the copy/pasting of the cert/keys. Maybe a illegal character somehow got added, or you&#39;re missing a required line feed. </p><span id='bc_0_0MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-41862287'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=6917212151355499208'>Delete</a></span></span></div><div id='bc_0_0BR' class='comment-replies'></div><div id='bc_0_0B_box' class='comment-replybox-single'></div></li><li id='bc_0_1B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c3051035314950771764' class='comment-block'><div id='bc_0_1M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13081124759582400553'>Kevin7890</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1369886529080#c3051035314950771764'>May 29, 2013 at 9:02 PM</a></span></div><p id='bc_0_1MC' class='comment-content'>Or could it be over nvram limit? Did you configure more than one client?</p><span id='bc_0_1MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1390317679'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=3051035314950771764'>Delete</a></span></span></div><div id='bc_0_1BR' class='comment-replies'></div><div id='bc_0_1B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_0I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_0T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_2B_box' class='comment-replybox-single'></div></li><li id='bc_0_4B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh5.googleusercontent.com/-_5fiExCiSZw/AAAAAAAAAAI/AAAAAAAAACs/b8_eN6UxkOg/s512-c/photo.jpg'></img></div><div id='c287261197607392158' class='comment-block'><div id='bc_0_4M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/02726383493790770367'>Nick Mancuso</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1368811601850#c287261197607392158'>May 17, 2013 at 10:26 AM</a></span></div><p id='bc_0_4MC' class='comment-content'>You have any recommendations for a script that can be used to monitor that status of the line and when marked as down to retry to reconnect?<br /><br />This would be useful if the OpenVPN server&#39;s connection would to go down. The script would trigger OpenVPN to retry to reconnect after x amount of time.</p><span id='bc_0_4MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1138062605'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=287261197607392158'>Delete</a></span></span></div><div id='bc_0_4BR' class='comment-replies'><span id='bc_0_4b+seedKaoND' kind='d'><div id='bc_0_3T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_3TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_3TA' class='thread-arrow'></span><span id='bc_0_3TN' class='thread-count'><span id='bc_0_3TNT' style='display: none;'></span><span id='bc_0_3TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_3TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_3TC' class='thread-chrome thread-expanded'><div><li id='bc_0_3B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c8886091200622537047' class='comment-block'><div id='bc_0_3M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/01067911447249645259'>Qui Hong</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1368812435492#c8886091200622537047'>May 17, 2013 at 10:40 AM</a></span></div><p id='bc_0_3MC' class='comment-content'>Hi Nick,<br /><br />I believe this is built into the OpenVPN client. The OpenVPN client will automatically reconnect once the OpenVPN server is available again. I just rebooted my OpenVPN Server router yesterday and all my clients reconnected back just fine.<br /><br />Qui</p><span id='bc_0_3MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1132605431'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=8886091200622537047'>Delete</a></span></span></div><div id='bc_0_3BR' class='comment-replies'></div><div id='bc_0_3B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_3I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_3T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_4B_box' class='comment-replybox-single'></div></li><li id='bc_0_10B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c1336590934401147538' class='comment-block'><div id='bc_0_10M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13081124759582400553'>Kevin7890</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1369779004905#c1336590934401147538'>May 28, 2013 at 3:10 PM</a></span></div><p id='bc_0_10MC' class='comment-content'>I don&#39;t think port forwarding on server is necessary.<br /><br />My client and server setup is almost same as yours, except the port forwarding part. Anyway, I can ping server lan from a host on client lan, but not from server to a host on client lan. Any idea how to fix that?</p><span id='bc_0_10MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1390317679'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=1336590934401147538'>Delete</a></span></span></div><div id='bc_0_10BR' class='comment-replies'><span id='bc_0_10b+seedKaoPD' kind='d'><div id='bc_0_5T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_5TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_5TA' class='thread-arrow'></span><span id='bc_0_5TN' class='thread-count'><span id='bc_0_5TNT' style='display: none;'></span><span id='bc_0_5TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_5TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_5TC' class='thread-chrome thread-expanded'><div><li id='bc_0_5B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c8772666798421732805' class='comment-block'><div id='bc_0_5M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/01067911447249645259'>Qui Hong</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1369780959172#c8772666798421732805'>May 28, 2013 at 3:42 PM</a></span></div><p id='bc_0_5MC' class='comment-content'>Hi Kevin,<br /><br />Thanks for your question. <br /><br />The only port forwarding I have is &quot;Forward UDP Port 1194 to your router internal IP @192.168.1.1&quot; which is definitly required.<br /><br />Server LAN to Client LAN routing is handled in the Advanced Tab of the OpenVPN Server configuration - the screenshot and section right before the Port Forwarding Section. Specifically the  &quot;Allow Client&lt;-&gt;Client&quot; and the &quot;Push&quot; based on Common Name, Subnet, Netmask.<br /><br />Please let me know if that help resolve your issue.<br /></p><span id='bc_0_5MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1132605431'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=8772666798421732805'>Delete</a></span></span></div><div id='bc_0_5BR' class='comment-replies'></div><div id='bc_0_5B_box' class='comment-replybox-single'></div></li><li id='bc_0_6B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c7042614786090035567' class='comment-block'><div id='bc_0_6M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13081124759582400553'>Kevin7890</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1369874471613#c7042614786090035567'>May 29, 2013 at 5:41 PM</a></span></div><p id='bc_0_6MC' class='comment-content'>I fixed my own problem. The problem was the windows firewall on Win7 host. Once disabled, it can be pinged.<br /><br />I summarize things I did differently than yours:<br />* I used windows version of openvpn to generate the certificates/keys. It is much easier than installing optware/entware. Besides, it reduces the need for USB drive.<br />* I used jffs to store the ca/key files. Again, this relieves the need for usb drive. I used winscp to transfer ca/key files into /jffs/etc/openvpn<br />* USB drive is not needed. Although Tomato with USB provides many benefits, it is not a prerequisite for running openvpn. <br />* server firewall port forwarding of 1194 to server router itself is NOT necessary. I don&#39;t have it and mine worked flawlessly.<br />* even on the client router, do NOT use web GUI to paste the ca/key. Use winscp to transfer to /jffs/etc/openvpn/. Entering ca/key in web GUI will use up the tiny 32kb nvram. It may be OK if you only configure one openvpn client or server. But if you ever configure/enter them for another client or server, you are bound to exceed the 32k nvram limit, and your router will behave strangely, even restoring to default setup. It is better never use web GUI to store any ca/key files for openvpn, just to be safe.<br /></p><span id='bc_0_6MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1390317679'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=7042614786090035567'>Delete</a></span></span></div><div id='bc_0_6BR' class='comment-replies'></div><div id='bc_0_6B_box' class='comment-replybox-single'></div></li><li id='bc_0_7B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c4945262158782111474' class='comment-block'><div id='bc_0_7M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/01067911447249645259'>Qui Hong</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1369875779779#c4945262158782111474'>May 29, 2013 at 6:02 PM</a></span></div><p id='bc_0_7MC' class='comment-content'>Thanks Kevin for your feedback. The USB drive isn&#39;t required for the OpenVPN setup, however I find it more elegant to generate the keys on the router and it makes for a more easy to follow tutorial (cut/paste, minimal steps). <br /><br />I understand some people, like yourself, prefer to generate the keys on their computer.<br /><br />Using /jffs to store the keys to save nvram is a great solution.<br /><br />I&#39;ll have to double check on the port forwarding. I&#39;m confused how it would work without it. Did you start from scratch with a wipe of NVRAM? Any chance you might have some pre-existing IPTABLES entries?</p><span id='bc_0_7MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1132605431'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=4945262158782111474'>Delete</a></span></span></div><div id='bc_0_7BR' class='comment-replies'></div><div id='bc_0_7B_box' class='comment-replybox-single'></div></li><li id='bc_0_8B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c4657168760437020671' class='comment-block'><div id='bc_0_8M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13081124759582400553'>Kevin7890</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1369882637435#c4657168760437020671'>May 29, 2013 at 7:57 PM</a></span></div><p id='bc_0_8MC' class='comment-content'>Port forwarding is not needed to reach a server running on the router itself and listening on the WAN interface. Just like you don&#39;t need to forward port 22 for ssh into the router from WAN, or you don&#39;t need to forward port 8080(or 443) to reach the router web GUI from WAN. Openvpn client does not need the forwarded port 1194 to reach the openvpn server on the router from WAN.<br /><br />I agree optware is really powerful and I am still learning it. But to use it properly, you need proper setup, like partitioning the USB harddrive with a swap partition and a ext3 partition (for optware and data). It is overkill if all you need is openvpn. Removing this setup opens up the possibility for all non-USB Tomato routers.<br /><br />I want to stress the importance of my last point of it is better NOT to paste the ca/key contents directly into the web gui. Since it it very possible to exceed the nvram 32k limit. None of the Openvpn tutorials I found on the web mentions this, and I learned this the hard way. I turned on two openvpn servers and did not know it exceeded the nvram limit. The router ran OK for a couple of days, but one day, it restarted and some of my router configurations were lost. I took me a full week to troubleshoot, trying to restore the config, until I read online about this nvram limit problem.</p><span id='bc_0_8MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1390317679'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=4657168760437020671'>Delete</a></span></span></div><div id='bc_0_8BR' class='comment-replies'></div><div id='bc_0_8B_box' class='comment-replybox-single'></div></li><li id='bc_0_9B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c8883850612732554165' class='comment-block'><div id='bc_0_9M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/04077661669160293260'>Qui Hong</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1393871839860#c8883850612732554165'>March 3, 2014 at 10:37 AM</a></span></div><p id='bc_0_9MC' class='comment-content'>@Kevin7890, just wanted to thank you for pointing out that the Port Forwarding section wasn&#39;t required. I&#39;ve verified it and removed it from the tutorial.</p><span id='bc_0_9MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-41862287'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=8883850612732554165'>Delete</a></span></span></div><div id='bc_0_9BR' class='comment-replies'></div><div id='bc_0_9B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_5I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_5T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_10B_box' class='comment-replybox-single'></div></li><li id='bc_0_13B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c4999481017570470467' class='comment-block'><div id='bc_0_13M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/10610543712752834212'>Eddie Seelke</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1369803060065#c4999481017570470467'>May 28, 2013 at 9:51 PM</a></span></div><p id='bc_0_13MC' class='comment-content'>I have this setup and can ping ip addresses from the either side.<br /><br />I have server using domain family1.lan and client router using family2.lan. How can I ping host.family2.lan from the server lan? I tried using server=/family2.lan/192.168.1.1 in the dnsmasq settings of server gateway, but it doesn&#39;t seem to work.</p><span id='bc_0_13MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1795729913'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=4999481017570470467'>Delete</a></span></span></div><div id='bc_0_13BR' class='comment-replies'><span id='bc_0_13b+seedKaoRD' kind='d'><div id='bc_0_11T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_11TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_11TA' class='thread-arrow'></span><span id='bc_0_11TN' class='thread-count'><span id='bc_0_11TNT' style='display: none;'></span><span id='bc_0_11TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_11TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_11TC' class='thread-chrome thread-expanded'><div><li id='bc_0_11B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c896919995388997193' class='comment-block'><div id='bc_0_11M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/01067911447249645259'>Qui Hong</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1369848940990#c896919995388997193'>May 29, 2013 at 10:35 AM</a></span></div><p id='bc_0_11MC' class='comment-content'>Eddie,<br /><br />Great question on name resolution. Sorry, I don&#39;t have an ideal solution for you.<br /><br />- you can always use a host file<br />- assuming you&#39;re on a windows network, on the OpenVPN Client network router, I set &quot;WINS (for DHCP)&quot; to point to the OpenVPN Server router IP Address.<br /><br />I believe you&#39;re on the path to the correct/ideal solution with the dnsmasq settings. If you manage to get it to work, please share. Thanks</p><span id='bc_0_11MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1132605431'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=896919995388997193'>Delete</a></span></span></div><div id='bc_0_11BR' class='comment-replies'></div><div id='bc_0_11B_box' class='comment-replybox-single'></div></li><li id='bc_0_12B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c3420744628404111633' class='comment-block'><div id='bc_0_12M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/01067911447249645259'>Qui Hong</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1382207132535#c3420744628404111633'>October 19, 2013 at 11:25 AM</a></span></div><p id='bc_0_12MC' class='comment-content'>FYI - I just added a section on name resolution.</p><span id='bc_0_12MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1132605431'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=3420744628404111633'>Delete</a></span></span></div><div id='bc_0_12BR' class='comment-replies'></div><div id='bc_0_12B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_11I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_11T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_13B_box' class='comment-replybox-single'></div></li><li id='bc_0_16B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh6.googleusercontent.com/-ZQXe-rnVU_c/AAAAAAAAAAI/AAAAAAAAIvA/wzhN4te5otg/s512-c/photo.jpg'></img></div><div id='c2623589754094622847' class='comment-block'><div id='bc_0_16M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/08271244900999485616'>Andreas Hiebsch</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1378297182010#c2623589754094622847'>September 4, 2013 at 5:19 AM</a></span></div><p id='bc_0_16MC' class='comment-content'>Thank you so much for the awesome tutorial. Is there a way to route all the internet traffic through the vpn server? If I check my external IP it is still the one from the ISP </p><span id='bc_0_16MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1389654558'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=2623589754094622847'>Delete</a></span></span></div><div id='bc_0_16BR' class='comment-replies'><span id='bc_0_16b+seedKaoXD' kind='d'><div id='bc_0_14T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_14TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_14TA' class='thread-arrow'></span><span id='bc_0_14TN' class='thread-count'><span id='bc_0_14TNT' style='display: none;'></span><span id='bc_0_14TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_14TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_14TC' class='thread-chrome thread-expanded'><div><li id='bc_0_14B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c521277852890477021' class='comment-block'><div id='bc_0_14M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/04077661669160293260'>Qui Hong</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1378311425321#c521277852890477021'>September 4, 2013 at 9:17 AM</a></span></div><p id='bc_0_14MC' class='comment-content'>The &quot;Direct clients to redirect internet traffic&quot; checkbox on the OpenVPN Server Configuration Server 1-&gt;Advanced Screen looks promising.<br /><br />You might want to look here also -<br />http://openvpn.net/index.php/open-source/documentation/howto.html#redirect<br /><br />I assume the checkout will add the &quot;redirect-gateway&quot; directive to the OpenVPN Server configuration.<br /><br />If you get it working please report back on how. Thanks</p><span id='bc_0_14MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-41862287'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=521277852890477021'>Delete</a></span></span></div><div id='bc_0_14BR' class='comment-replies'></div><div id='bc_0_14B_box' class='comment-replybox-single'></div></li><li id='bc_0_15B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c7642598537552725006' class='comment-block'><div id='bc_0_15M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/01351966361905423650'>Niclas Berglind</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1380878676795#c7642598537552725006'>October 4, 2013 at 2:24 AM</a></span></div><p id='bc_0_15MC' class='comment-content'>One way of accomplishing this is by adding the &quot;redirect-gateway&quot; option to the client configuration file. I usually have two configuration files on each client machine where one config uses that option and one doesn&#39;t.</p><span id='bc_0_15MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-2033534361'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=7642598537552725006'>Delete</a></span></span></div><div id='bc_0_15BR' class='comment-replies'></div><div id='bc_0_15B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_14I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_14T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_16B_box' class='comment-replybox-single'></div></li><li id='bc_0_20B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c2429537564508387070' class='comment-block'><div id='bc_0_20M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/05295417441313498217'>Ethan Shold</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1379008630507#c2429537564508387070'>September 12, 2013 at 10:57 AM</a></span></div><p id='bc_0_20MC' class='comment-content'>I have everything setup correctly, but I am unable to reach any host on the OpenVPN server LAN from the client side, apart from the server itself. Any idea what may be going on here?</p><span id='bc_0_20MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-714807755'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=2429537564508387070'>Delete</a></span></span></div><div id='bc_0_20BR' class='comment-replies'><span id='bc_0_20b+seedKaoZD' kind='d'><div id='bc_0_17T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_17TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_17TA' class='thread-arrow'></span><span id='bc_0_17TN' class='thread-count'><span id='bc_0_17TNT' style='display: none;'></span><span id='bc_0_17TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_17TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_17TC' class='thread-chrome thread-expanded'><div><li id='bc_0_17B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c3242815042766611833' class='comment-block'><div id='bc_0_17M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/05295417441313498217'>Ethan Shold</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1379008942888#c3242815042766611833'>September 12, 2013 at 11:02 AM</a></span></div><p id='bc_0_17MC' class='comment-content'>Perhaps I should also mention that the OpenVPN server router is not the gateway for this network, but sits behind another router which is forwarding the VPN traffic to it.</p><span id='bc_0_17MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-714807755'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=3242815042766611833'>Delete</a></span></span></div><div id='bc_0_17BR' class='comment-replies'></div><div id='bc_0_17B_box' class='comment-replybox-single'></div></li><li id='bc_0_18B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c4603789313411251460' class='comment-block'><div id='bc_0_18M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/04077661669160293260'>Qui Hong</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1379026993691#c4603789313411251460'>September 12, 2013 at 4:03 PM</a></span></div><p id='bc_0_18MC' class='comment-content'>Sorry Ethan I can not help. Your configuration is out side the scope of the tutorial.</p><span id='bc_0_18MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-41862287'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=4603789313411251460'>Delete</a></span></span></div><div id='bc_0_18BR' class='comment-replies'></div><div id='bc_0_18B_box' class='comment-replybox-single'></div></li><li id='bc_0_19B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c2109190060136393706' class='comment-block'><div id='bc_0_19M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/01351966361905423650'>Niclas Berglind</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1380878531640#c2109190060136393706'>October 4, 2013 at 2:22 AM</a></span></div><p id='bc_0_19MC' class='comment-content'>I&#39;ve made that configuration work sometime ago by adding a new route to your gateway, that routes the OpenVPN subnet back to your OpenVPN server. If I remember correctly the problem is that the hosts on your LAN tries to respond back on requests from the OpenVPN tunnel, but sends the responses to your gateway which doesn&#39;t know how to properly route them onward. How to add this route to your gateway is device specific, but I hope you can find that information somewhere :-)</p><span id='bc_0_19MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-2033534361'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=2109190060136393706'>Delete</a></span></span></div><div id='bc_0_19BR' class='comment-replies'></div><div id='bc_0_19B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_17I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_17T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_20B_box' class='comment-replybox-single'></div></li><li id='bc_0_27B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c3523303787033464223' class='comment-block'><div id='bc_0_27M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13866767034367669629'>Chris Schlichting</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1393785052942#c3523303787033464223'>March 2, 2014 at 10:30 AM</a></span></div><p id='bc_0_27MC' class='comment-content'>It&#39;s me again...  Wanted to set up a new site-to-site...  Having troubles.<br /><br />I noticed a couple of differences in the text from the video and whats posted on the blog.  Not sure if that stuff matters.  Anyway I have been cutting and pasting directly from this page.  Here is what I have noticed.<br /><br />The key sizes are being created at 2048 instead of 1024... Not sure if this matters.<br /><br />After creating all of the certificates, outputting the the counsel does not work... Throws out an error.   After a bit of poking around I discovered that the   /opt/openvpn-easy-rsa/keys (keys folder) folder does not exist.<br /><br />Any insight.  Where would the keys be located?</p><span id='bc_0_27MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1369232046'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=3523303787033464223'>Delete</a></span></span></div><div id='bc_0_27BR' class='comment-replies'><span id='bc_0_27b+seedKaofD' kind='d'><div id='bc_0_21T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_21TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_21TA' class='thread-arrow'></span><span id='bc_0_21TN' class='thread-count'><span id='bc_0_21TNT' style='display: none;'></span><span id='bc_0_21TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_21TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_21TC' class='thread-chrome thread-expanded'><div><li id='bc_0_21B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c4546947598942341986' class='comment-block'><div id='bc_0_21M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/04077661669160293260'>Qui Hong</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1393785889712#c4546947598942341986'>March 2, 2014 at 10:44 AM</a></span></div><p id='bc_0_21MC' class='comment-content'>Follow the blog. I would recommend that you start over from scratch.<br /><br />There are specific commands in the tutorial for changing the key size and creating the necessary folders which weren&#39;t properly executed.</p><span id='bc_0_21MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-41862287'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=4546947598942341986'>Delete</a></span></span></div><div id='bc_0_21BR' class='comment-replies'></div><div id='bc_0_21B_box' class='comment-replybox-single'></div></li><li id='bc_0_22B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c1057746504406984679' class='comment-block'><div id='bc_0_22M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/04077661669160293260'>Qui Hong</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1393785996771#c1057746504406984679'>March 2, 2014 at 10:46 AM</a></span></div><p id='bc_0_22MC' class='comment-content'>#Set working directory and reduce key_size to 1024 in vars file<br />cd /opt/openvpn-easy-rsa<br />sed -i &#39;s:`pwd`:/opt/openvpn-easy-rsa:&#39; ./vars<br />sed -i &#39;s:KEY_SIZE=2048:KEY_SIZE=1024:&#39; ./vars<br /></p><span id='bc_0_22MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-41862287'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=1057746504406984679'>Delete</a></span></span></div><div id='bc_0_22BR' class='comment-replies'></div><div id='bc_0_22B_box' class='comment-replybox-single'></div></li><li id='bc_0_23B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c1139333751817375405' class='comment-block'><div id='bc_0_23M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13866767034367669629'>Chris Schlichting</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1393859172883#c1139333751817375405'>March 3, 2014 at 7:06 AM</a></span></div><p id='bc_0_23MC' class='comment-content'>Thanks for your quick response... Ran through this three more times today, exactly as shown in the guide.  <br /><br />Still doing the 2048 key size and the keys directory does not exist....  Here is what I see after I paste the final code into putty.<br /><br />root@SiteARouter:/opt/openvpn-easy-rsa# cd /opt/openvpn-easy-rsa/keys<br />-sh: cd: can&#39;t cd to /opt/openvpn-easy-rsa/keys<br />root@SiteARouter:/opt/openvpn-easy-rsa# cat ./ca.crt<br />cat: can&#39;t open &#39;./ca.crt&#39;: No such file or directory<br />root@SiteARouter:/opt/openvpn-easy-rsa# cat ./Site2SiteClient.crt<br />cat: can&#39;t open &#39;./Site2SiteClient.crt&#39;: No such file or directory<br />root@SiteARouter:/opt/openvpn-easy-rsa# cat ./Site2SiteClient.key<br />cat: can&#39;t open &#39;./Site2SiteClient.key&#39;: No such file or directory<br />root@SiteARouter:/opt/openvpn-easy-rsa#<br /></p><span id='bc_0_23MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1369232046'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=1139333751817375405'>Delete</a></span></span></div><div id='bc_0_23BR' class='comment-replies'></div><div id='bc_0_23B_box' class='comment-replybox-single'></div></li><li id='bc_0_24B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c3121931957777751482' class='comment-block'><div id='bc_0_24M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/04077661669160293260'>Qui Hong</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1393871768867#c3121931957777751482'>March 3, 2014 at 10:36 AM</a></span></div><p id='bc_0_24MC' class='comment-content'>Hey Chris,<br /><br />Looks like the openvpn-easy-rsa entware packaged changed a little bit which broke the tutorial. <br /><br />I&#39;ve updated it and just re-verified it. <br /><br />Note that I removed the Port Forwarding Section as @Kevin7890 pointed out that it&#39;s not needed (I&#39;ve verified this).<br /><br />I really appreciate your persistence and letting me know that the tutorial is broken.<br /><br />Give it a try again and let me know if you&#39;re still having any issues.<br /><br />Qui</p><span id='bc_0_24MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-41862287'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=3121931957777751482'>Delete</a></span></span></div><div id='bc_0_24BR' class='comment-replies'></div><div id='bc_0_24B_box' class='comment-replybox-single'></div></li><li id='bc_0_25B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c6576474081627067051' class='comment-block'><div id='bc_0_25M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13866767034367669629'>Chris Schlichting</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1393976255673#c6576474081627067051'>March 4, 2014 at 3:37 PM</a></span></div><p id='bc_0_25MC' class='comment-content'>Golden!  All is well... Gonna buy you some coffee..  <br /><br />I appreciate your attention to my posts.  <br /><br />Take Care!<br /><br />Chris</p><span id='bc_0_25MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1369232046'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=6576474081627067051'>Delete</a></span></span></div><div id='bc_0_25BR' class='comment-replies'></div><div id='bc_0_25B_box' class='comment-replybox-single'></div></li><li id='bc_0_26B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c4096760606547073559' class='comment-block'><div id='bc_0_26M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/04077661669160293260'>Qui Hong</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1393982890252#c4096760606547073559'>March 4, 2014 at 5:28 PM</a></span></div><p id='bc_0_26MC' class='comment-content'>Hey Chris, thank you for the generous donation! Glad to hear you got it working.</p><span id='bc_0_26MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-41862287'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=4096760606547073559'>Delete</a></span></span></div><div id='bc_0_26BR' class='comment-replies'></div><div id='bc_0_26B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_21I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_21T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_27B_box' class='comment-replybox-single'></div></li><li id='bc_0_28B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c3844041582197670919' class='comment-block'><div id='bc_0_28M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/15216437844458509787'>Digim0d</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html?showComment=1398501112919#c3844041582197670919'>April 26, 2014 at 1:31 AM</a></span></div><p id='bc_0_28MC' class='comment-content'>Qui Hong:<br /><br />I&#39;ve taken the steps above exactly as shown -- with the exception of running &quot;opkg update&quot; in order to get the updated package list including OpenVPN ..<br /><br />Everything works perfect.  I can ping from SiteA to SiteB perfectly and vice-versa.<br /><br />I&#39;m having problems adding a SiteC ..  We have 5 locations in our company and I&#39;d like to add the additional sites to this VPN.  Would you mind telling me which steps to replicate for each site?  I created the additional Site2SiteClient keys (named after their client sites of course) and pasted them into the client router, along with the CA.crt.  I&#39;ve also added the client sites in the list with it&#39;s client subnet in the Advanced Tab on the Server router.  When I enable it and save settings, it knocks down SiteB, even though SiteC&#39;s OpenVPN client never starts successfully.<br /><br />Any clues on what I&#39;m doing wrong?  Thanks in advance ..<br /><br />PS.  Your instructions for Site2Site were spot-on.  For TWO sites, this tutorial is golden.</p><span id='bc_0_28MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-858667141'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=1622307871085727432&amp;postID=3844041582197670919'>Delete</a></span></span></div><div id='bc_0_28BR' class='comment-replies'></div><div id='bc_0_28B_box' class='comment-replybox-single'></div></li></ol><div id='bc_0_29I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Add comment</a></div><div id='bc_0_29T_box' class='comment-replybox-thread'></div><div id='bc_0_29L' class='loadmore loaded' kind='rb'><a href='javascript:;' target='_self'>Load more...</a></div></div></div></div>
</div>
</div>
<p class='comment-footer'>
<div class='comment-form'>
<a name='comment-form'></a>
<p>
</p>
<a href='https://www.blogger.com/comment-iframe.g?blogID=1622307871085727432&postID=379901354419772042' id='comment-editor-src'></a>
<iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' width='100%'></iframe>
<script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/1327485354-comment_from_post_iframe.js"></script>
<script type='text/javascript'>
                                    BLOG_CMT_createIframe('https://www.blogger.com/rpc_relay.html', '02828802631991688350');
                                  </script>
</div>
</p>
<div id='backlinks-container'>
<div id='Blog1_backlinks-container'>
</div>
</div>
</div>
</div>
<!-- google_ad_section_end(name=default) -->
<div class='inline-ad'>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-9764203057876272";
google_ad_host = "ca-host-pub-1556223355139109";
google_ad_host_channel = "L0007";
/* qnology_main_Blog1_300x250_as */
google_ad_slot = "9119128594";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<!-- google_ad_section_start -->

                                      </div></div>
                                    
<!-- google_ad_section_end -->
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://blog.qnology.com/2013/03/tutorial-apple-airprint-on-tomatousb.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>
Newer Post
</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://blog.qnology.com/2012/12/tutorial-apple-airplay-on-tomatousb.html' id='Blog1_blog-pager-older-link' title='Older Post'>
Older Post
</a>
</span>
<a class='home-link' href='http://blog.qnology.com/'>
Home
</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://blog.qnology.com/feeds/379901354419772042/comments/default' target='_blank' type='application/atom+xml'>
Post Comments
                                      (
                                      Atom
                                      )
                                    </a>
</div>
</div>
<script type="text/javascript">window.___gcfg = {'lang': 'en'};</script>
</div></div>
</div>
</div>
<div class='column-left-outer'>
<div class='column-left-inner'>
<aside>
</aside>
</div>
</div>
<div class='column-right-outer'>
<div class='column-right-inner'>
<aside>
<div class='sidebar section' id='sidebar-right-1'><div class='widget PlusOne' id='PlusOne1'>
<div class='widget-content'>
<g:plusone annotation='bubble' href='http://blog.qnology.com/' size='standard' source='blogger:blog:plusone' width='250'></g:plusone>
<script type='text/javascript'>
            window.___gcfg = {"lang": "en"};
          </script>
</div>
</div><div class='widget HTML' id='HTML1'>
<h2 class='title'>
If you like this blog and would like to support it, please consider buying me a cup of coffee.
</h2>
<div class='widget-content'>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick" />
<input type="hidden" name="hosted_button_id" value="UA7M43W9W32HA" />
<input type="image" src="http://2.bp.blogspot.com/-c6TYUk1nGJs/Udyr3-JuYtI/AAAAAAAAAXs/4eddS6XjhUg/s1600/sb-donate-button.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />
</form>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=1622307871085727432&widgetType=HTML&widgetId=HTML1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("HTML1"));' target='configHTML1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget Text' id='Text1'>
<h2 class='title'>
AirEnabler Kit
</h2>
<div class='widget-content'>
<a href="http://airenabler.qnology.com/"><b><span style="color:#000099;">Want to add Apple AirPlay support to your existing Home or Car Stereo? Check out my AirEnabler Kit.</span></b><br /><br /><img alt="" border="0" height="160" src="http://airenabler.qnology.com/Home/AirEnabler.JPG" width="120" /><br /></a>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=1622307871085727432&widgetType=Text&widgetId=Text1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("Text1"));' target='configText1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget HTML' id='HTML2'>
<h2 class='title'>Litecoin Donation</h2>
<div class='widget-content'>
<script src="http://coinwidget.com/widget/coin.js"></script>
<script>
CoinWidgetCom.go({
	wallet_address: "LVKHAoKJcNhoenjTzrShrHLNQUTVihJiWF"
	, currency: "litecoin"
	, counter: "count"
	, alignment: "bl"
	, qrcode: true
	, auto_show: false
	, lbl_button: "Donate"
	, lbl_address: "My Litecoin Address:"
	, lbl_count: "donations"
	, lbl_amount: "LTC"
});
</script>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=1622307871085727432&widgetType=HTML&widgetId=HTML2&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("HTML2"));' target='configHTML2' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget HTML' id='HTML3'>
<h2 class='title'>Bitcoin Donation</h2>
<div class='widget-content'>
<script src="http://coinwidget.com/widget/coin.js"></script>
<script>
CoinWidgetCom.go({
	wallet_address: "178vjxHQNbbS1Ta8EHqkSdb8uBNF6foQn9"
	, currency: "bitcoin"
	, counter: "count"
	, alignment: "bl"
	, qrcode: true
	, auto_show: false
	, lbl_button: "Donate"
	, lbl_address: "My Bitcoin Address:"
	, lbl_count: "donations"
	, lbl_amount: "BTC"
});
</script>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=1622307871085727432&widgetType=HTML&widgetId=HTML3&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("HTML3"));' target='configHTML3' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget ContactForm' id='ContactForm1'>
<h2 class='title'>
Contact Me
</h2>
<div class='contact-form-widget'>
<div class='form'>
<form name='contact-form'>
<p></p>
Name
<br/>
<input class='contact-form-name' id='ContactForm1_contact-form-name' name='name' size='30' type='text' value=''/>
<p></p>
Email
<span style='font-weight: bolder;'>
                *
              </span>
<br/>
<input class='contact-form-email' id='ContactForm1_contact-form-email' name='email' size='30' type='text' value=''/>
<p></p>
Message
<span style='font-weight: bolder;'>
                *
              </span>
<br/>
<textarea class='contact-form-email-message' cols='25' id='ContactForm1_contact-form-email-message' name='email-message' rows='5'></textarea>
<p></p>
<input class='contact-form-button contact-form-button-submit' id='ContactForm1_contact-form-submit' type='button' value='Send'/>
<p></p>
<div style='text-align: center; max-width: 222px; width: 100%'>
<p class='contact-form-error-message' id='ContactForm1_contact-form-error-message'></p>
<p class='contact-form-success-message' id='ContactForm1_contact-form-success-message'></p>
</div>
</form>
</div>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=1622307871085727432&widgetType=ContactForm&widgetId=ContactForm1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("ContactForm1"));' target='configContactForm1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget PopularPosts' id='PopularPosts2'>
<h2>
Popular Posts
</h2>
<div class='widget-content popular-posts'>
<ul>
<li>
<a href='http://blog.qnology.com/2013/03/tutorial-pogoplug-e02-with-arch-linux.html'>
[Tutorial] - Pogoplug E02/V4 with Arch Linux ARM - NAS (SAMBA), AirPlay, AirPrint, Google CloudPrint, SqueezeBox (Logitech Media Server), SqueezeLite, Plex Media Server
</a>
</li>
<li>
<a href='http://blog.qnology.com/2012/12/tutorial-apple-airplay-on-tomatousb.html'>
[Tutorial] Apple AirPlay on TomatoUSB Router
</a>
</li>
<li>
<a href='http://blog.qnology.com/2013/03/tutorial-apple-airprint-on-tomatousb.html'>
[Tutorial] Apple AirPrint on TomatoUSB Router
</a>
</li>
<li>
<a href='http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html'>
[Tutorial - 30 Minutes or Less] Site to Site VPN with TomatoUSB and OpenVPN
</a>
</li>
<li>
<a href='http://blog.qnology.com/2013/11/how-to-install-optware-and-samba-on.html'>
How to Install Optware and SAMBA on the Pogoplug
</a>
</li>
<li>
<a href='http://blog.qnology.com/2013/10/pogoplug-e02-v2-serial-connection.html'>
Pogoplug V2 and V3 Serial Connection - E02, P21/P22, Pro
</a>
</li>
<li>
<a href='http://blog.qnology.com/2013/07/airplay-on-asus-wl-520gu-router-openwrt.html'>
DIY AirPlay Speaker System using a Asus WL-520gu Router
</a>
</li>
<li>
<a href='http://blog.qnology.com/2013/03/tutorial-centos-6-openvpn-client.html'>
[Tutorial] CentOS 6 OpenVPN Client - Connecting to Existing Site to Site VPN (TomatoUSB)
</a>
</li>
<li>
<a href='http://blog.qnology.com/2013/12/iphone-vpn-to-pptp-vpn-server-on.html'>
iPhone/Android VPN to PPTP VPN Server on TomatoUSB Router
</a>
</li>
<li>
<a href='http://blog.qnology.com/2014/03/diy-portable-airplay-speaker-system.html'>
DIY Portable AirPlay Speaker System
</a>
</li>
</ul>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=1622307871085727432&widgetType=PopularPosts&widgetId=PopularPosts2&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("PopularPosts2"));' target='configPopularPosts2' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget BlogArchive' id='BlogArchive1'>
<h2>
Blog Archive
</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<ul class='flat'>
<li class='archivedate'>
<a href='http://blog.qnology.com/2014_03_01_archive.html'>
March
</a>
              (
              1
              )
            </li>
<li class='archivedate'>
<a href='http://blog.qnology.com/2013_12_01_archive.html'>
December
</a>
              (
              1
              )
            </li>
<li class='archivedate'>
<a href='http://blog.qnology.com/2013_11_01_archive.html'>
November
</a>
              (
              1
              )
            </li>
<li class='archivedate'>
<a href='http://blog.qnology.com/2013_10_01_archive.html'>
October
</a>
              (
              1
              )
            </li>
<li class='archivedate'>
<a href='http://blog.qnology.com/2013_07_01_archive.html'>
July
</a>
              (
              1
              )
            </li>
<li class='archivedate'>
<a href='http://blog.qnology.com/2013_03_01_archive.html'>
March
</a>
              (
              3
              )
            </li>
<li class='archivedate'>
<a href='http://blog.qnology.com/2013_02_01_archive.html'>
February
</a>
              (
              1
              )
            </li>
<li class='archivedate'>
<a href='http://blog.qnology.com/2012_12_01_archive.html'>
December
</a>
              (
              1
              )
            </li>
</ul>
</div>
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=1622307871085727432&widgetType=BlogArchive&widgetId=BlogArchive1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("BlogArchive1"));' target='configBlogArchive1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget AdSense' id='AdSense2'>
<div class='widget-content'>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=1622307871085727432&widgetType=AdSense&widgetId=AdSense2&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("AdSense2"));' target='configAdSense2' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div></div>
</aside>
</div>
</div>
</div>
<div style='clear: both'></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class='main-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<footer>
<div class='footer-outer'>
<div class='footer-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left footer-fauxborder-left'>
<div class='fauxborder-right footer-fauxborder-right'></div>
<div class='region-inner footer-inner'>
<div class='foot section' id='footer-1'></div>
<table border='0' cellpadding='0' cellspacing='0' class='section-columns columns-2'>
<tbody>
<tr>
<td class='first columns-cell'>
<div class='foot section' id='footer-2-1'></div>
</td>
<td class='columns-cell'>
<div class='foot section' id='footer-2-2'></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class='foot section' id='footer-3'><div class='widget Attribution' id='Attribution1'>
<div class='widget-content' style='text-align: center;'>
Powered by <a href='http://www.blogger.com' target='_blank'>Blogger</a>.
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=1622307871085727432&widgetType=Attribution&widgetId=Attribution1&action=editWidget&sectionId=footer-3' onclick='return _WidgetManager._PopupConfig(document.getElementById("Attribution1"));' target='configAttribution1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div></div>
</div>
</div>
<div class='footer-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class='content-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<script type='text/javascript'>
      window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
                                                                  }, 10);
    </script>
<script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('widgetJsBefore');
</script><script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/1599769820-widgets.js"></script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type='text/javascript'>
if (typeof(BLOG_attachCsiOnload) != 'undefined' && BLOG_attachCsiOnload != null) { window['blogger_templates_experiment_id'] = "templatesV2";window['blogger_blog_id'] = '1622307871085727432';BLOG_attachCsiOnload('item_'); }_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d1622307871085727432','//blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html','1622307871085727432');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '1622307871085727432', 'bloggerUrl': 'http://www.blogger.com', 'title': 'Qui\47s techNOLOGY Blog', 'pageType': 'item', 'postId': '379901354419772042', 'url': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html', 'canonicalUrl': 'http://blog.qnology.com/2013/02/tutorial-30-minutes-or-less-site-to.html', 'canonicalHomepageUrl': 'http://blog.qnology.com/', 'homepageUrl': 'http://blog.qnology.com/', 'blogspotFaviconUrl': 'http://blog.qnology.com/favicon.ico', 'enabledCommentProfileImages': true, 'adultContent': false, 'disableAdSenseWidget': false, 'analyticsAccountNumber': 'UA-43239879-1', 'searchLabel': '', 'searchQuery': '', 'pageName': '[Tutorial - 30 Minutes or Less] Site to Site VPN with TomatoUSB and OpenVPN', 'pageTitle': 'Qui\47s techNOLOGY Blog: [Tutorial - 30 Minutes or Less] Site to Site VPN with TomatoUSB and OpenVPN', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'languageDirection': 'ltr', 'feedLinks': '\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42Qui\46#39;s techNOLOGY Blog - Atom\42 href\75\42http://blog.qnology.com/feeds/posts/default\42 /\76\n\74link rel\75\42alternate\42 type\75\42application/rss+xml\42 title\75\42Qui\46#39;s techNOLOGY Blog - RSS\42 href\75\42http://blog.qnology.com/feeds/posts/default?alt\75rss\42 /\76\n\74link rel\75\42service.post\42 type\75\42application/atom+xml\42 title\75\42Qui\46#39;s techNOLOGY Blog - Atom\42 href\75\42http://www.blogger.com/feeds/1622307871085727432/posts/default\42 /\76\n\n\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42Qui\46#39;s techNOLOGY Blog - Atom\42 href\75\42http://blog.qnology.com/feeds/379901354419772042/comments/default\42 /\76\n', 'meTag': '', 'openIdOpTag': '', 'postImageThumbnailUrl': 'http://img.youtube.com/vi/QsaYzgOIn6w/default.jpg', 'postImageUrl': 'http://3.bp.blogspot.com/--Q8NhPCY2V0/USO2jMi6yNI/AAAAAAAAAWM/ISxLajz15H4/s320/VPN+Server+Basic+Config.PNG', 'latencyHeadScript': '\74script type\75\42text/javascript\42\76(function() { var b\75window,f\75\42chrome\42,g\75\42tick\42,k\75\42jstiming\42;(function(){function d(a){this.t\75{};this.tick\75function(a,d,c){var e\75void 0!\75c?c:(new Date).getTime();this.t[a]\75[e,d];if(void 0\75\75c)try{b.console.timeStamp(\42CSI/\42+a)}catch(h){}};this[g](\42start\42,null,a)}var a;b.performance\46\46(a\75b.performance.timing);var n\75a?new d(a.responseStart):new d;b.jstiming\75{Timer:d,load:n};if(a){var c\75a.navigationStart,h\75a.responseStart;0\74c\46\46h\76\75c\46\46(b[k].srt\75h-c)}if(a){var e\75b[k].load;0\74c\46\46h\76\75c\46\46(e[g](\42_wtsrt\42,void 0,c),e[g](\42wtsrt_\42,\42_wtsrt\42,h),e[g](\42tbsd_\42,\42wtsrt_\42))}try{a\75null,\nb[f]\46\46b[f].csi\46\46(a\75Math.floor(b[f].csi().pageT),e\46\0460\74c\46\46(e[g](\42_tbnd\42,void 0,b[f].csi().startE),e[g](\42tbnd_\42,\42_tbnd\42,c))),null\75\75a\46\46b.gtbExternal\46\46(a\75b.gtbExternal.pageT()),null\75\75a\46\46b.external\46\46(a\75b.external.pageT,e\46\0460\74c\46\46(e[g](\42_tbnd\42,void 0,b.external.startE),e[g](\42tbnd_\42,\42_tbnd\42,c))),a\46\46(b[k].pt\75a)}catch(p){}})();b.tickAboveFold\75function(d){var a\0750;if(d.offsetParent){do a+\75d.offsetTop;while(d\75d.offsetParent)}d\75a;750\76\75d\46\46b[k].load[g](\42aft\42)};var l\75!1;function m(){l||(l\75!0,b[k].load[g](\42firstScrollTime\42))}b.addEventListener?b.addEventListener(\42scroll\42,m,!1):b.attachEvent(\42onscroll\42,m);\n })();\74/script\076', 'mobileHeadScript': '', 'adsenseClientId': 'ca-pub-9764203057876272', 'ieCssRetrofitLinks': '\74!--[if IE]\76\74script type\75\42text/javascript\42 src\75\42https://www.blogger.com/static/v1/jsbin/2616044812-ieretrofit.js\42\76\74/script\76\n\74![endif]--\076', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/76f25a6f2e06af76', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'sf': 'n', 'tf': ''}}, {'name': 'skin', 'data': {'vars': {'content_padding': '10px', 'paging_background': 'transparent url(//www.blogblog.com/1kt/simple/paging_dot.png) repeat-x scroll top center', 'image_border_small_size': '2px', 'body_background_gradient_cap': 'none', 'tabs_selected_background_color': '#eeeeee', 'body_rule_color': 'transparent', 'header_shadow_spread': '0', 'header_shadow_offset_left': '0', 'header_padding': '0', 'link_visited_color': '#888888', 'mobile_background_size': 'auto', 'post_title_font': 'normal normal 22px \47Trebuchet MS\47,Trebuchet,Verdana,sans-serif', 'tabs_text_color': '#000000', 'date_header_margin': 'inherit', 'header_background_gradient': 'none', 'header_bottom_border_size': '0', 'content_shadow_spread_webkit': '0', 'header_shadow_offset_top': '0', 'mobile_button_color': '#ffffff', 'widget_title_font': 'normal bold 11px \47Trebuchet MS\47,Trebuchet,Verdana,sans-serif', 'main_section_margin': '1em', 'body_background': '#ffffff none repeat scroll top left', 'keycolor': '#ffffff', 'content_shadow_spread': '0', 'image_background_color': '#ffffff', 'header_font': 'normal normal 40px \47Trebuchet MS\47,Trebuchet,Verdana,sans-serif', 'header_background_color': 'transparent', 'main_border_width': '0', 'main_padding': '0', 'tabs_border_color': '#dddddd', 'image_text_color': '#666666', 'description_text_size': '18px', 'post_footer_background_color': '#eeeeee', 'body_background_gradient_tile': 'none', 'page_width': 'auto', 'tabs_background_gradient': 'none', 'mobile_background_overlay': 'transparent none repeat scroll top left', 'main_padding_bottom': '65px', 'tabs_background_color': 'transparent', 'image_border_large_size': '5px', 'post_margin_bottom': '45px', 'body_background_override': '', 'tabs_margin_side': '30px', 'link_hover_color': '#33aaff', 'description_text_color': '#000000', 'body_text_color': '#666666', 'content_padding_horizontal': '40px', 'endSide': 'right', 'page_width_selector': '.region-inner', 'date_header_padding': '0.4em', 'post_footer_text_color': '#666666', 'startSide': 'left', 'date_header_color': '#ffffff', 'tabs_font': 'normal normal 12px \47Trebuchet MS\47, Trebuchet, Verdana, sans-serif', 'post_footer_border_color': '#eeeeee', 'body_font': 'normal normal 12px \47Trebuchet MS\47, Trebuchet, Verdana, sans-serif', 'footer_bevel': '1px', 'tabs_bevel_border_width': '1px', 'date_header_background_color': '#bbbbbb', 'content_shadow_spread_ie': '0', 'widget_title_text_color': '#000000', 'header_border_horizontalsize': '1px', 'image_border_color': '#eeeeee', 'tabs_border_width': '1px', 'content_background_color': '#ffffff', 'link_color': '#2288bb', 'header_text_color': '#000000', 'date_header_letterspacing': '3px', 'tabs_margin_top': '0', 'main_padding_top': '35px', 'header_border_size': '1px', 'tabs_selected_text_color': '#000000', 'content_background_color_selector': '.content-inner', 'body_background_color': '#ffffff', 'widget_alternate_text_color': '#999999'}, 'override': ''}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\75classic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\75flipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\75magazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\75mosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\75sidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\75snapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\75timeslide'}}}]);
_WidgetManager._RegisterWidget('_PlusOneView', new _WidgetInfo('PlusOne1', 'sidebar-right-1', null, document.getElementById('PlusOne1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML1', 'sidebar-right-1', null, document.getElementById('HTML1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_TextView', new _WidgetInfo('Text1', 'sidebar-right-1', null, document.getElementById('Text1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML2', 'sidebar-right-1', null, document.getElementById('HTML2'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML3', 'sidebar-right-1', null, document.getElementById('HTML3'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ContactFormView', new _WidgetInfo('ContactForm1', 'sidebar-right-1', null, document.getElementById('ContactForm1'), {'contactFormMessageSendingMsg': 'Sending...', 'contactFormMessageSentMsg': 'Your message has been sent.', 'contactFormMessageNotSentMsg': 'Message could not be sent. Please try again later.', 'contactFormInvalidEmailMsg': 'A valid email address is required.', 'contactFormEmptyMessageMsg': 'Message field cannot be empty.', 'title': 'Contact Me', 'blogId': '1622307871085727432', 'contactFormNameMsg': 'Name', 'contactFormEmailMsg': 'Email', 'contactFormMessageMsg': 'Message', 'contactFormSendMsg': 'Send', 'submitUrl': 'https://www.blogger.com/contact-form.do'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PopularPostsView', new _WidgetInfo('PopularPosts2', 'sidebar-right-1', null, document.getElementById('PopularPosts2'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', null, document.getElementById('BlogArchive1'), {'languageDirection': 'ltr'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AdSenseView', new _WidgetInfo('AdSense2', 'sidebar-right-1', null, document.getElementById('AdSense2'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', null, document.getElementById('Attribution1'), {'attribution': 'Powered by \74a href\75\47http://www.blogger.com\47 target\75\47_blank\47\76Blogger\74/a\76.'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', null, document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/2564829580-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/2392111094-lightbox_bundle.css'}, 'displayModeFull'));
</script>
</body>
</html>
